var Ky=Object.defineProperty;var Qy=(e,n,i)=>n in e?Ky(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i;var yt=(e,n,i)=>(Qy(e,typeof n!="symbol"?n+"":n,i),i);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();function Nu(e,n){const i=Object.create(null),o=e.split(",");for(let a=0;a<o.length;a++)i[o[a]]=!0;return n?a=>!!i[a.toLowerCase()]:a=>!!i[a]}const Ce={},Tr=[],gi=()=>{},Jy=()=>!1,tb=/^on[^a-z]/,fl=e=>tb.test(e),Uu=e=>e.startsWith("onUpdate:"),Ue=Object.assign,Hu=(e,n)=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)},eb=Object.prototype.hasOwnProperty,fe=(e,n)=>eb.call(e,n),Ht=Array.isArray,Pr=e=>gl(e)==="[object Map]",ym=e=>gl(e)==="[object Set]",se=e=>typeof e=="function",Le=e=>typeof e=="string",$u=e=>typeof e=="symbol",xe=e=>e!==null&&typeof e=="object",bm=e=>xe(e)&&se(e.then)&&se(e.catch),wm=Object.prototype.toString,gl=e=>wm.call(e),sb=e=>gl(e).slice(8,-1),xm=e=>gl(e)==="[object Object]",Wu=e=>Le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Da=Nu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ml=e=>{const n=Object.create(null);return i=>n[i]||(n[i]=e(i))},ib=/-(\w)/g,ei=ml(e=>e.replace(ib,(n,i)=>i?i.toUpperCase():"")),nb=/\B([A-Z])/g,Ur=ml(e=>e.replace(nb,"-$1").toLowerCase()),sn=ml(e=>e.charAt(0).toUpperCase()+e.slice(1)),Cc=ml(e=>e?`on${sn(e)}`:""),Ro=(e,n)=>!Object.is(e,n),Sc=(e,n)=>{for(let i=0;i<e.length;i++)e[i](n)},Ga=(e,n,i)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:i})},rb=e=>{const n=parseFloat(e);return isNaN(n)?e:n},ob=e=>{const n=Le(e)?Number(e):NaN;return isNaN(n)?e:n};let mf;const Xc=()=>mf||(mf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gu(e){if(Ht(e)){const n={};for(let i=0;i<e.length;i++){const o=e[i],a=Le(o)?ub(o):Gu(o);if(a)for(const c in a)n[c]=a[c]}return n}else{if(Le(e))return e;if(xe(e))return e}}const ab=/;(?![^(]*\))/g,lb=/:([^]+)/,cb=/\/\*[^]*?\*\//g;function ub(e){const n={};return e.replace(cb,"").split(ab).forEach(i=>{if(i){const o=i.split(lb);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function Js(e){let n="";if(Le(e))n=e;else if(Ht(e))for(let i=0;i<e.length;i++){const o=Js(e[i]);o&&(n+=o+" ")}else if(xe(e))for(const i in e)e[i]&&(n+=i+" ");return n.trim()}const hb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",db=Nu(hb);function Cm(e){return!!e||e===""}const Je=e=>Le(e)?e:e==null?"":Ht(e)||xe(e)&&(e.toString===wm||!se(e.toString))?JSON.stringify(e,Sm,2):String(e),Sm=(e,n)=>n&&n.__v_isRef?Sm(e,n.value):Pr(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[o,a])=>(i[`${o} =>`]=a,i),{})}:ym(n)?{[`Set(${n.size})`]:[...n.values()]}:xe(n)&&!Ht(n)&&!xm(n)?String(n):n;let $s;class Em{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$s,!n&&$s&&(this.index=($s.scopes||($s.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const i=$s;try{return $s=this,n()}finally{$s=i}}}on(){$s=this}off(){$s=this.parent}stop(n){if(this._active){let i,o;for(i=0,o=this.effects.length;i<o;i++)this.effects[i].stop();for(i=0,o=this.cleanups.length;i<o;i++)this.cleanups[i]();if(this.scopes)for(i=0,o=this.scopes.length;i<o;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!n){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0,this._active=!1}}}function jo(e){return new Em(e)}function fb(e,n=$s){n&&n.active&&n.effects.push(e)}function Am(){return $s}function Ds(e){$s&&$s.cleanups.push(e)}const ju=e=>{const n=new Set(e);return n.w=0,n.n=0,n},Tm=e=>(e.w&En)>0,Pm=e=>(e.n&En)>0,gb=({deps:e})=>{if(e.length)for(let n=0;n<e.length;n++)e[n].w|=En},mb=e=>{const{deps:n}=e;if(n.length){let i=0;for(let o=0;o<n.length;o++){const a=n[o];Tm(a)&&!Pm(a)?a.delete(e):n[i++]=a,a.w&=~En,a.n&=~En}n.length=i}},ja=new WeakMap;let yo=0,En=1;const Yc=30;let hi;const tr=Symbol(""),qc=Symbol("");class Xu{constructor(n,i=null,o){this.fn=n,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,fb(this,o)}run(){if(!this.active)return this.fn();let n=hi,i=Cn;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=hi,hi=this,Cn=!0,En=1<<++yo,yo<=Yc?gb(this):pf(this),this.fn()}finally{yo<=Yc&&mb(this),En=1<<--yo,hi=this.parent,Cn=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){hi===this?this.deferStop=!0:this.active&&(pf(this),this.onStop&&this.onStop(),this.active=!1)}}function pf(e){const{deps:n}=e;if(n.length){for(let i=0;i<n.length;i++)n[i].delete(e);n.length=0}}let Cn=!0;const km=[];function Hr(){km.push(Cn),Cn=!1}function $r(){const e=km.pop();Cn=e===void 0?!0:e}function Ls(e,n,i){if(Cn&&hi){let o=ja.get(e);o||ja.set(e,o=new Map);let a=o.get(i);a||o.set(i,a=ju()),Im(a)}}function Im(e,n){let i=!1;yo<=Yc?Pm(e)||(e.n|=En,i=!Tm(e)):i=!e.has(hi),i&&(e.add(hi),hi.deps.push(e))}function Ji(e,n,i,o,a,c){const u=ja.get(e);if(!u)return;let f=[];if(n==="clear")f=[...u.values()];else if(i==="length"&&Ht(e)){const m=Number(o);u.forEach((p,v)=>{(v==="length"||v>=m)&&f.push(p)})}else switch(i!==void 0&&f.push(u.get(i)),n){case"add":Ht(e)?Wu(i)&&f.push(u.get("length")):(f.push(u.get(tr)),Pr(e)&&f.push(u.get(qc)));break;case"delete":Ht(e)||(f.push(u.get(tr)),Pr(e)&&f.push(u.get(qc)));break;case"set":Pr(e)&&f.push(u.get(tr));break}if(f.length===1)f[0]&&Zc(f[0]);else{const m=[];for(const p of f)p&&m.push(...p);Zc(ju(m))}}function Zc(e,n){const i=Ht(e)?e:[...e];for(const o of i)o.computed&&_f(o);for(const o of i)o.computed||_f(o)}function _f(e,n){(e!==hi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function pb(e,n){var i;return(i=ja.get(e))==null?void 0:i.get(n)}const _b=Nu("__proto__,__v_isRef,__isVue"),Rm=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($u)),vb=Yu(),yb=Yu(!1,!0),bb=Yu(!0),vf=wb();function wb(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...i){const o=Kt(this);for(let c=0,u=this.length;c<u;c++)Ls(o,"get",c+"");const a=o[n](...i);return a===-1||a===!1?o[n](...i.map(Kt)):a}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...i){Hr();const o=Kt(this)[n].apply(this,i);return $r(),o}}),e}function xb(e){const n=Kt(this);return Ls(n,"has",e),n.hasOwnProperty(e)}function Yu(e=!1,n=!1){return function(o,a,c){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_isShallow")return n;if(a==="__v_raw"&&c===(e?n?Vb:Lm:n?Dm:Fm).get(o))return o;const u=Ht(o);if(!e){if(u&&fe(vf,a))return Reflect.get(vf,a,c);if(a==="hasOwnProperty")return xb}const f=Reflect.get(o,a,c);return($u(a)?Rm.has(a):_b(a))||(e||Ls(o,"get",a),n)?f:re(f)?u&&Wu(a)?f:f.value:xe(f)?e?Xo(f):ls(f):f}}const Cb=Mm(),Sb=Mm(!0);function Mm(e=!1){return function(i,o,a,c){let u=i[o];if(Rr(u)&&re(u)&&!re(a))return!1;if(!e&&(!Xa(a)&&!Rr(a)&&(u=Kt(u),a=Kt(a)),!Ht(i)&&re(u)&&!re(a)))return u.value=a,!0;const f=Ht(i)&&Wu(o)?Number(o)<i.length:fe(i,o),m=Reflect.set(i,o,a,c);return i===Kt(c)&&(f?Ro(a,u)&&Ji(i,"set",o,a):Ji(i,"add",o,a)),m}}function Eb(e,n){const i=fe(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&i&&Ji(e,"delete",n,void 0),o}function Ab(e,n){const i=Reflect.has(e,n);return(!$u(n)||!Rm.has(n))&&Ls(e,"has",n),i}function Tb(e){return Ls(e,"iterate",Ht(e)?"length":tr),Reflect.ownKeys(e)}const Bm={get:vb,set:Cb,deleteProperty:Eb,has:Ab,ownKeys:Tb},Pb={get:bb,set(e,n){return!0},deleteProperty(e,n){return!0}},kb=Ue({},Bm,{get:yb,set:Sb}),qu=e=>e,pl=e=>Reflect.getPrototypeOf(e);function Ea(e,n,i=!1,o=!1){e=e.__v_raw;const a=Kt(e),c=Kt(n);i||(n!==c&&Ls(a,"get",n),Ls(a,"get",c));const{has:u}=pl(a),f=o?qu:i?Qu:Mo;if(u.call(a,n))return f(e.get(n));if(u.call(a,c))return f(e.get(c));e!==a&&e.get(n)}function Aa(e,n=!1){const i=this.__v_raw,o=Kt(i),a=Kt(e);return n||(e!==a&&Ls(o,"has",e),Ls(o,"has",a)),e===a?i.has(e):i.has(e)||i.has(a)}function Ta(e,n=!1){return e=e.__v_raw,!n&&Ls(Kt(e),"iterate",tr),Reflect.get(e,"size",e)}function yf(e){e=Kt(e);const n=Kt(this);return pl(n).has.call(n,e)||(n.add(e),Ji(n,"add",e,e)),this}function bf(e,n){n=Kt(n);const i=Kt(this),{has:o,get:a}=pl(i);let c=o.call(i,e);c||(e=Kt(e),c=o.call(i,e));const u=a.call(i,e);return i.set(e,n),c?Ro(n,u)&&Ji(i,"set",e,n):Ji(i,"add",e,n),this}function wf(e){const n=Kt(this),{has:i,get:o}=pl(n);let a=i.call(n,e);a||(e=Kt(e),a=i.call(n,e)),o&&o.call(n,e);const c=n.delete(e);return a&&Ji(n,"delete",e,void 0),c}function xf(){const e=Kt(this),n=e.size!==0,i=e.clear();return n&&Ji(e,"clear",void 0,void 0),i}function Pa(e,n){return function(o,a){const c=this,u=c.__v_raw,f=Kt(u),m=n?qu:e?Qu:Mo;return!e&&Ls(f,"iterate",tr),u.forEach((p,v)=>o.call(a,m(p),m(v),c))}}function ka(e,n,i){return function(...o){const a=this.__v_raw,c=Kt(a),u=Pr(c),f=e==="entries"||e===Symbol.iterator&&u,m=e==="keys"&&u,p=a[e](...o),v=i?qu:n?Qu:Mo;return!n&&Ls(c,"iterate",m?qc:tr),{next(){const{value:y,done:w}=p.next();return w?{value:y,done:w}:{value:f?[v(y[0]),v(y[1])]:v(y),done:w}},[Symbol.iterator](){return this}}}}function gn(e){return function(...n){return e==="delete"?!1:this}}function Ib(){const e={get(c){return Ea(this,c)},get size(){return Ta(this)},has:Aa,add:yf,set:bf,delete:wf,clear:xf,forEach:Pa(!1,!1)},n={get(c){return Ea(this,c,!1,!0)},get size(){return Ta(this)},has:Aa,add:yf,set:bf,delete:wf,clear:xf,forEach:Pa(!1,!0)},i={get(c){return Ea(this,c,!0)},get size(){return Ta(this,!0)},has(c){return Aa.call(this,c,!0)},add:gn("add"),set:gn("set"),delete:gn("delete"),clear:gn("clear"),forEach:Pa(!0,!1)},o={get(c){return Ea(this,c,!0,!0)},get size(){return Ta(this,!0)},has(c){return Aa.call(this,c,!0)},add:gn("add"),set:gn("set"),delete:gn("delete"),clear:gn("clear"),forEach:Pa(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(c=>{e[c]=ka(c,!1,!1),i[c]=ka(c,!0,!1),n[c]=ka(c,!1,!0),o[c]=ka(c,!0,!0)}),[e,i,n,o]}const[Rb,Mb,Bb,Fb]=Ib();function Zu(e,n){const i=n?e?Fb:Bb:e?Mb:Rb;return(o,a,c)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(fe(i,a)&&a in o?i:o,a,c)}const Db={get:Zu(!1,!1)},Lb={get:Zu(!1,!0)},Ob={get:Zu(!0,!1)},Fm=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Vb=new WeakMap;function zb(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nb(e){return e.__v_skip||!Object.isExtensible(e)?0:zb(sb(e))}function ls(e){return Rr(e)?e:Ku(e,!1,Bm,Db,Fm)}function Om(e){return Ku(e,!1,kb,Lb,Dm)}function Xo(e){return Ku(e,!0,Pb,Ob,Lm)}function Ku(e,n,i,o,a){if(!xe(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const c=a.get(e);if(c)return c;const u=Nb(e);if(u===0)return e;const f=new Proxy(e,u===2?o:i);return a.set(e,f),f}function Qi(e){return Rr(e)?Qi(e.__v_raw):!!(e&&e.__v_isReactive)}function Rr(e){return!!(e&&e.__v_isReadonly)}function Xa(e){return!!(e&&e.__v_isShallow)}function Vm(e){return Qi(e)||Rr(e)}function Kt(e){const n=e&&e.__v_raw;return n?Kt(n):e}function Yo(e){return Ga(e,"__v_skip",!0),e}const Mo=e=>xe(e)?ls(e):e,Qu=e=>xe(e)?Xo(e):e;function zm(e){Cn&&hi&&(e=Kt(e),Im(e.dep||(e.dep=ju())))}function Nm(e,n){e=Kt(e);const i=e.dep;i&&Zc(i)}function re(e){return!!(e&&e.__v_isRef===!0)}function Ft(e){return Um(e,!1)}function Zt(e){return Um(e,!0)}function Um(e,n){return re(e)?e:new Ub(e,n)}class Ub{constructor(n,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?n:Kt(n),this._value=i?n:Mo(n)}get value(){return zm(this),this._value}set value(n){const i=this.__v_isShallow||Xa(n)||Rr(n);n=i?n:Kt(n),Ro(n,this._rawValue)&&(this._rawValue=n,this._value=i?n:Mo(n),Nm(this))}}function xt(e){return re(e)?e.value:e}const Hb={get:(e,n,i)=>xt(Reflect.get(e,n,i)),set:(e,n,i,o)=>{const a=e[n];return re(a)&&!re(i)?(a.value=i,!0):Reflect.set(e,n,i,o)}};function Hm(e){return Qi(e)?e:new Proxy(e,Hb)}function _l(e){const n=Ht(e)?new Array(e.length):{};for(const i in e)n[i]=$m(e,i);return n}class $b{constructor(n,i,o){this._object=n,this._key=i,this._defaultValue=o,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return pb(Kt(this._object),this._key)}}class Wb{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Lt(e,n,i){return re(e)?e:se(e)?new Wb(e):xe(e)&&arguments.length>1?$m(e,n,i):Ft(e)}function $m(e,n,i){const o=e[n];return re(o)?o:new $b(e,n,i)}class Gb{constructor(n,i,o,a){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Xu(n,()=>{this._dirty||(this._dirty=!0,Nm(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=o}get value(){const n=Kt(this);return zm(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function jb(e,n,i=!1){let o,a;const c=se(e);return c?(o=e,a=gi):(o=e.get,a=e.set),new Gb(o,a,c||!a,i)}function Sn(e,n,i,o){let a;try{a=o?e(...o):e()}catch(c){vl(c,n,i)}return a}function ti(e,n,i,o){if(se(e)){const c=Sn(e,n,i,o);return c&&bm(c)&&c.catch(u=>{vl(u,n,i)}),c}const a=[];for(let c=0;c<e.length;c++)a.push(ti(e[c],n,i,o));return a}function vl(e,n,i,o=!0){const a=n?n.vnode:null;if(n){let c=n.parent;const u=n.proxy,f=i;for(;c;){const p=c.ec;if(p){for(let v=0;v<p.length;v++)if(p[v](e,u,f)===!1)return}c=c.parent}const m=n.appContext.config.errorHandler;if(m){Sn(m,null,10,[e,u,f]);return}}Xb(e,i,a,o)}function Xb(e,n,i,o=!0){console.error(e)}let Bo=!1,Kc=!1;const ds=[];let Fi=0;const kr=[];let qi=null,qn=0;const Wm=Promise.resolve();let Ju=null;function ws(e){const n=Ju||Wm;return e?n.then(this?e.bind(this):e):n}function Yb(e){let n=Fi+1,i=ds.length;for(;n<i;){const o=n+i>>>1;Fo(ds[o])<e?n=o+1:i=o}return n}function th(e){(!ds.length||!ds.includes(e,Bo&&e.allowRecurse?Fi+1:Fi))&&(e.id==null?ds.push(e):ds.splice(Yb(e.id),0,e),Gm())}function Gm(){!Bo&&!Kc&&(Kc=!0,Ju=Wm.then(Xm))}function qb(e){const n=ds.indexOf(e);n>Fi&&ds.splice(n,1)}function Zb(e){Ht(e)?kr.push(...e):(!qi||!qi.includes(e,e.allowRecurse?qn+1:qn))&&kr.push(e),Gm()}function Cf(e,n=Bo?Fi+1:0){for(;n<ds.length;n++){const i=ds[n];i&&i.pre&&(ds.splice(n,1),n--,i())}}function jm(e){if(kr.length){const n=[...new Set(kr)];if(kr.length=0,qi){qi.push(...n);return}for(qi=n,qi.sort((i,o)=>Fo(i)-Fo(o)),qn=0;qn<qi.length;qn++)qi[qn]();qi=null,qn=0}}const Fo=e=>e.id==null?1/0:e.id,Kb=(e,n)=>{const i=Fo(e)-Fo(n);if(i===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return i};function Xm(e){Kc=!1,Bo=!0,ds.sort(Kb);const n=gi;try{for(Fi=0;Fi<ds.length;Fi++){const i=ds[Fi];i&&i.active!==!1&&Sn(i,null,14)}}finally{Fi=0,ds.length=0,jm(),Bo=!1,Ju=null,(ds.length||kr.length)&&Xm()}}function Qb(e,n,...i){if(e.isUnmounted)return;const o=e.vnode.props||Ce;let a=i;const c=n.startsWith("update:"),u=c&&n.slice(7);if(u&&u in o){const v=`${u==="modelValue"?"model":u}Modifiers`,{number:y,trim:w}=o[v]||Ce;w&&(a=i.map(C=>Le(C)?C.trim():C)),y&&(a=i.map(rb))}let f,m=o[f=Cc(n)]||o[f=Cc(ei(n))];!m&&c&&(m=o[f=Cc(Ur(n))]),m&&ti(m,e,6,a);const p=o[f+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,ti(p,e,6,a)}}function Ym(e,n,i=!1){const o=n.emitsCache,a=o.get(e);if(a!==void 0)return a;const c=e.emits;let u={},f=!1;if(!se(e)){const m=p=>{const v=Ym(p,n,!0);v&&(f=!0,Ue(u,v))};!i&&n.mixins.length&&n.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!c&&!f?(xe(e)&&o.set(e,null),null):(Ht(c)?c.forEach(m=>u[m]=null):Ue(u,c),xe(e)&&o.set(e,u),u)}function yl(e,n){return!e||!fl(n)?!1:(n=n.slice(2).replace(/Once$/,""),fe(e,n[0].toLowerCase()+n.slice(1))||fe(e,Ur(n))||fe(e,n))}let Bs=null,bl=null;function Ya(e){const n=Bs;return Bs=e,bl=e&&e.type.__scopeId||null,n}function qm(e){bl=e}function Zm(){bl=null}function j(e,n=Bs,i){if(!n||e._n)return e;const o=(...a)=>{o._d&&Lf(-1);const c=Ya(n);let u;try{u=e(...a)}finally{Ya(c),o._d&&Lf(1)}return u};return o._n=!0,o._c=!0,o._d=!0,o}function Ec(e){const{type:n,vnode:i,proxy:o,withProxy:a,props:c,propsOptions:[u],slots:f,attrs:m,emit:p,render:v,renderCache:y,data:w,setupState:C,ctx:E,inheritAttrs:P}=e;let k,R;const B=Ya(e);try{if(i.shapeFlag&4){const W=a||o;k=Mi(v.call(W,W,y,c,C,w,E)),R=m}else{const W=n;k=Mi(W.length>1?W(c,{attrs:m,slots:f,emit:p}):W(c,null)),R=n.props?m:Jb(m)}}catch(W){Eo.length=0,vl(W,e,1),k=x(mi)}let O=k;if(R&&P!==!1){const W=Object.keys(R),{shapeFlag:G}=O;W.length&&G&7&&(u&&W.some(Uu)&&(R=t0(R,u)),O=An(O,R))}return i.dirs&&(O=An(O),O.dirs=O.dirs?O.dirs.concat(i.dirs):i.dirs),i.transition&&(O.transition=i.transition),k=O,Ya(B),k}const Jb=e=>{let n;for(const i in e)(i==="class"||i==="style"||fl(i))&&((n||(n={}))[i]=e[i]);return n},t0=(e,n)=>{const i={};for(const o in e)(!Uu(o)||!(o.slice(9)in n))&&(i[o]=e[o]);return i};function e0(e,n,i){const{props:o,children:a,component:c}=e,{props:u,children:f,patchFlag:m}=n,p=c.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&m>=0){if(m&1024)return!0;if(m&16)return o?Sf(o,u,p):!!u;if(m&8){const v=n.dynamicProps;for(let y=0;y<v.length;y++){const w=v[y];if(u[w]!==o[w]&&!yl(p,w))return!0}}}else return(a||f)&&(!f||!f.$stable)?!0:o===u?!1:o?u?Sf(o,u,p):!0:!!u;return!1}function Sf(e,n,i){const o=Object.keys(n);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const c=o[a];if(n[c]!==e[c]&&!yl(i,c))return!0}return!1}function s0({vnode:e,parent:n},i){for(;n&&n.subTree===e;)(e=n.vnode).el=i,n=n.parent}const i0=e=>e.__isSuspense;function n0(e,n){n&&n.pendingBranch?Ht(e)?n.effects.push(...e):n.effects.push(e):Zb(e)}function nn(e,n){return eh(e,null,n)}const Ia={};function jt(e,n,i){return eh(e,n,i)}function eh(e,n,{immediate:i,deep:o,flush:a,onTrack:c,onTrigger:u}=Ce){var f;const m=Am()===((f=Xe)==null?void 0:f.scope)?Xe:null;let p,v=!1,y=!1;if(re(e)?(p=()=>e.value,v=Xa(e)):Qi(e)?(p=()=>e,o=!0):Ht(e)?(y=!0,v=e.some(W=>Qi(W)||Xa(W)),p=()=>e.map(W=>{if(re(W))return W.value;if(Qi(W))return Qn(W);if(se(W))return Sn(W,m,2)})):se(e)?n?p=()=>Sn(e,m,2):p=()=>{if(!(m&&m.isUnmounted))return w&&w(),ti(e,m,3,[C])}:p=gi,n&&o){const W=p;p=()=>Qn(W())}let w,C=W=>{w=B.onStop=()=>{Sn(W,m,4)}},E;if(zo)if(C=gi,n?i&&ti(n,m,3,[p(),y?[]:void 0,C]):p(),a==="sync"){const W=K0();E=W.__watcherHandles||(W.__watcherHandles=[])}else return gi;let P=y?new Array(e.length).fill(Ia):Ia;const k=()=>{if(B.active)if(n){const W=B.run();(o||v||(y?W.some((G,X)=>Ro(G,P[X])):Ro(W,P)))&&(w&&w(),ti(n,m,3,[W,P===Ia?void 0:y&&P[0]===Ia?[]:P,C]),P=W)}else B.run()};k.allowRecurse=!!n;let R;a==="sync"?R=k:a==="post"?R=()=>Rs(k,m&&m.suspense):(k.pre=!0,m&&(k.id=m.uid),R=()=>th(k));const B=new Xu(p,R);n?i?k():P=B.run():a==="post"?Rs(B.run.bind(B),m&&m.suspense):B.run();const O=()=>{B.stop(),m&&m.scope&&Hu(m.scope.effects,B)};return E&&E.push(O),O}function r0(e,n,i){const o=this.proxy,a=Le(e)?e.includes(".")?Km(o,e):()=>o[e]:e.bind(o,o);let c;se(n)?c=n:(c=n.handler,i=n);const u=Xe;Mr(this);const f=eh(a,c.bind(o),i);return u?Mr(u):er(),f}function Km(e,n){const i=n.split(".");return()=>{let o=e;for(let a=0;a<i.length&&o;a++)o=o[i[a]];return o}}function Qn(e,n){if(!xe(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),re(e))Qn(e.value,n);else if(Ht(e))for(let i=0;i<e.length;i++)Qn(e[i],n);else if(ym(e)||Pr(e))e.forEach(i=>{Qn(i,n)});else if(xm(e))for(const i in e)Qn(e[i],n);return e}function ys(e,n){const i=Bs;if(i===null)return e;const o=Sl(i)||i.proxy,a=e.dirs||(e.dirs=[]);for(let c=0;c<n.length;c++){let[u,f,m,p=Ce]=n[c];u&&(se(u)&&(u={mounted:u,updated:u}),u.deep&&Qn(f),a.push({dir:u,instance:o,value:f,oldValue:void 0,arg:m,modifiers:p}))}return e}function Wn(e,n,i,o){const a=e.dirs,c=n&&n.dirs;for(let u=0;u<a.length;u++){const f=a[u];c&&(f.oldValue=c[u].value);let m=f.dir[o];m&&(Hr(),ti(m,i,8,[e.el,f,e,n]),$r())}}function Qm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Vi(()=>{e.isMounted=!0}),_i(()=>{e.isUnmounting=!0}),e}const Zs=[Function,Array],Jm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zs,onEnter:Zs,onAfterEnter:Zs,onEnterCancelled:Zs,onBeforeLeave:Zs,onLeave:Zs,onAfterLeave:Zs,onLeaveCancelled:Zs,onBeforeAppear:Zs,onAppear:Zs,onAfterAppear:Zs,onAppearCancelled:Zs},o0={name:"BaseTransition",props:Jm,setup(e,{slots:n}){const i=uh(),o=Qm();let a;return()=>{const c=n.default&&sh(n.default(),!0);if(!c||!c.length)return;let u=c[0];if(c.length>1){for(const P of c)if(P.type!==mi){u=P;break}}const f=Kt(e),{mode:m}=f;if(o.isLeaving)return Ac(u);const p=Ef(u);if(!p)return Ac(u);const v=Do(p,f,o,i);Lo(p,v);const y=i.subTree,w=y&&Ef(y);let C=!1;const{getTransitionKey:E}=p.type;if(E){const P=E();a===void 0?a=P:P!==a&&(a=P,C=!0)}if(w&&w.type!==mi&&(!Zn(p,w)||C)){const P=Do(w,f,o,i);if(Lo(w,P),m==="out-in")return o.isLeaving=!0,P.afterLeave=()=>{o.isLeaving=!1,i.update.active!==!1&&i.update()},Ac(u);m==="in-out"&&p.type!==mi&&(P.delayLeave=(k,R,B)=>{const O=tp(o,w);O[String(w.key)]=w,k._leaveCb=()=>{R(),k._leaveCb=void 0,delete v.delayedLeave},v.delayedLeave=B})}return u}}},a0=o0;function tp(e,n){const{leavingVNodes:i}=e;let o=i.get(n.type);return o||(o=Object.create(null),i.set(n.type,o)),o}function Do(e,n,i,o){const{appear:a,mode:c,persisted:u=!1,onBeforeEnter:f,onEnter:m,onAfterEnter:p,onEnterCancelled:v,onBeforeLeave:y,onLeave:w,onAfterLeave:C,onLeaveCancelled:E,onBeforeAppear:P,onAppear:k,onAfterAppear:R,onAppearCancelled:B}=n,O=String(e.key),W=tp(i,e),G=(N,$)=>{N&&ti(N,o,9,$)},X=(N,$)=>{const Y=$[1];G(N,$),Ht(N)?N.every(it=>it.length<=1)&&Y():N.length<=1&&Y()},st={mode:c,persisted:u,beforeEnter(N){let $=f;if(!i.isMounted)if(a)$=P||f;else return;N._leaveCb&&N._leaveCb(!0);const Y=W[O];Y&&Zn(e,Y)&&Y.el._leaveCb&&Y.el._leaveCb(),G($,[N])},enter(N){let $=m,Y=p,it=v;if(!i.isMounted)if(a)$=k||m,Y=R||p,it=B||v;else return;let U=!1;const q=N._enterCb=Q=>{U||(U=!0,Q?G(it,[N]):G(Y,[N]),st.delayedLeave&&st.delayedLeave(),N._enterCb=void 0)};$?X($,[N,q]):q()},leave(N,$){const Y=String(e.key);if(N._enterCb&&N._enterCb(!0),i.isUnmounting)return $();G(y,[N]);let it=!1;const U=N._leaveCb=q=>{it||(it=!0,$(),q?G(E,[N]):G(C,[N]),N._leaveCb=void 0,W[Y]===e&&delete W[Y])};W[Y]=e,w?X(w,[N,U]):U()},clone(N){return Do(N,n,i,o)}};return st}function Ac(e){if(wl(e))return e=An(e),e.children=null,e}function Ef(e){return wl(e)?e.children?e.children[0]:void 0:e}function Lo(e,n){e.shapeFlag&6&&e.component?Lo(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function sh(e,n=!1,i){let o=[],a=0;for(let c=0;c<e.length;c++){let u=e[c];const f=i==null?u.key:String(i)+String(u.key!=null?u.key:c);u.type===Re?(u.patchFlag&128&&a++,o=o.concat(sh(u.children,n,f))):(n||u.type!==mi)&&o.push(f!=null?An(u,{key:f}):u)}if(a>1)for(let c=0;c<o.length;c++)o[c].patchFlag=-2;return o}function ii(e,n){return se(e)?(()=>Ue({name:e.name},n,{setup:e}))():e}const La=e=>!!e.type.__asyncLoader,wl=e=>e.type.__isKeepAlive;function ep(e,n){ip(e,"a",n)}function sp(e,n){ip(e,"da",n)}function ip(e,n,i=Xe){const o=e.__wdc||(e.__wdc=()=>{let a=i;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(xl(n,o,i),i){let a=i.parent;for(;a&&a.parent;)wl(a.parent.vnode)&&l0(o,n,i,a),a=a.parent}}function l0(e,n,i,o){const a=xl(n,e,o,!0);rp(()=>{Hu(o[n],a)},i)}function xl(e,n,i=Xe,o=!1){if(i){const a=i[e]||(i[e]=[]),c=n.__weh||(n.__weh=(...u)=>{if(i.isUnmounted)return;Hr(),Mr(i);const f=ti(n,i,e,u);return er(),$r(),f});return o?a.unshift(c):a.push(c),c}}const rn=e=>(n,i=Xe)=>(!zo||e==="sp")&&xl(e,(...o)=>n(...o),i),ih=rn("bm"),Vi=rn("m"),c0=rn("bu"),np=rn("u"),_i=rn("bum"),rp=rn("um"),u0=rn("sp"),h0=rn("rtg"),d0=rn("rtc");function f0(e,n=Xe){xl("ec",e,n)}const nh="components",g0="directives";function WT(e,n){return rh(nh,e,!0,n)||e}const op=Symbol.for("v-ndc");function m0(e){return Le(e)?rh(nh,e,!1)||e:e||op}function Di(e){return rh(g0,e)}function rh(e,n,i=!0,o=!1){const a=Bs||Xe;if(a){const c=a.type;if(e===nh){const f=Y0(c,!1);if(f&&(f===n||f===ei(n)||f===sn(ei(n))))return c}const u=Af(a[e]||c[e],n)||Af(a.appContext[e],n);return!u&&o?c:u}}function Af(e,n){return e&&(e[n]||e[ei(n)]||e[sn(ei(n))])}function p0(e,n,i,o){let a;const c=i&&i[o];if(Ht(e)||Le(e)){a=new Array(e.length);for(let u=0,f=e.length;u<f;u++)a[u]=n(e[u],u,void 0,c&&c[u])}else if(typeof e=="number"){a=new Array(e);for(let u=0;u<e;u++)a[u]=n(u+1,u,void 0,c&&c[u])}else if(xe(e))if(e[Symbol.iterator])a=Array.from(e,(u,f)=>n(u,f,void 0,c&&c[f]));else{const u=Object.keys(e);a=new Array(u.length);for(let f=0,m=u.length;f<m;f++){const p=u[f];a[f]=n(e[p],p,f,c&&c[f])}}else a=[];return i&&(i[o]=a),a}const Qc=e=>e?_p(e)?Sl(e)||e.proxy:Qc(e.parent):null,Co=Ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qc(e.parent),$root:e=>Qc(e.root),$emit:e=>e.emit,$options:e=>oh(e),$forceUpdate:e=>e.f||(e.f=()=>th(e.update)),$nextTick:e=>e.n||(e.n=ws.bind(e.proxy)),$watch:e=>r0.bind(e)}),Tc=(e,n)=>e!==Ce&&!e.__isScriptSetup&&fe(e,n),_0={get({_:e},n){const{ctx:i,setupState:o,data:a,props:c,accessCache:u,type:f,appContext:m}=e;let p;if(n[0]!=="$"){const C=u[n];if(C!==void 0)switch(C){case 1:return o[n];case 2:return a[n];case 4:return i[n];case 3:return c[n]}else{if(Tc(o,n))return u[n]=1,o[n];if(a!==Ce&&fe(a,n))return u[n]=2,a[n];if((p=e.propsOptions[0])&&fe(p,n))return u[n]=3,c[n];if(i!==Ce&&fe(i,n))return u[n]=4,i[n];Jc&&(u[n]=0)}}const v=Co[n];let y,w;if(v)return n==="$attrs"&&Ls(e,"get",n),v(e);if((y=f.__cssModules)&&(y=y[n]))return y;if(i!==Ce&&fe(i,n))return u[n]=4,i[n];if(w=m.config.globalProperties,fe(w,n))return w[n]},set({_:e},n,i){const{data:o,setupState:a,ctx:c}=e;return Tc(a,n)?(a[n]=i,!0):o!==Ce&&fe(o,n)?(o[n]=i,!0):fe(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(c[n]=i,!0)},has({_:{data:e,setupState:n,accessCache:i,ctx:o,appContext:a,propsOptions:c}},u){let f;return!!i[u]||e!==Ce&&fe(e,u)||Tc(n,u)||(f=c[0])&&fe(f,u)||fe(o,u)||fe(Co,u)||fe(a.config.globalProperties,u)},defineProperty(e,n,i){return i.get!=null?e._.accessCache[n]=0:fe(i,"value")&&this.set(e,n,i.value,null),Reflect.defineProperty(e,n,i)}};function Tf(e){return Ht(e)?e.reduce((n,i)=>(n[i]=null,n),{}):e}let Jc=!0;function v0(e){const n=oh(e),i=e.proxy,o=e.ctx;Jc=!1,n.beforeCreate&&Pf(n.beforeCreate,e,"bc");const{data:a,computed:c,methods:u,watch:f,provide:m,inject:p,created:v,beforeMount:y,mounted:w,beforeUpdate:C,updated:E,activated:P,deactivated:k,beforeDestroy:R,beforeUnmount:B,destroyed:O,unmounted:W,render:G,renderTracked:X,renderTriggered:st,errorCaptured:N,serverPrefetch:$,expose:Y,inheritAttrs:it,components:U,directives:q,filters:Q}=n;if(p&&y0(p,o,null),u)for(const At in u){const ut=u[At];se(ut)&&(o[At]=ut.bind(i))}if(a){const At=a.call(i,i);xe(At)&&(e.data=ls(At))}if(Jc=!0,c)for(const At in c){const ut=c[At],Rt=se(ut)?ut.bind(i,i):se(ut.get)?ut.get.bind(i,i):gi,te=!se(ut)&&se(ut.set)?ut.set.bind(i):gi,Jt=L({get:Rt,set:te});Object.defineProperty(o,At,{enumerable:!0,configurable:!0,get:()=>Jt.value,set:he=>Jt.value=he})}if(f)for(const At in f)ap(f[At],o,i,At);if(m){const At=se(m)?m.call(i):m;Reflect.ownKeys(At).forEach(ut=>{ts(ut,At[ut])})}v&&Pf(v,e,"c");function dt(At,ut){Ht(ut)?ut.forEach(Rt=>At(Rt.bind(i))):ut&&At(ut.bind(i))}if(dt(ih,y),dt(Vi,w),dt(c0,C),dt(np,E),dt(ep,P),dt(sp,k),dt(f0,N),dt(d0,X),dt(h0,st),dt(_i,B),dt(rp,W),dt(u0,$),Ht(Y))if(Y.length){const At=e.exposed||(e.exposed={});Y.forEach(ut=>{Object.defineProperty(At,ut,{get:()=>i[ut],set:Rt=>i[ut]=Rt})})}else e.exposed||(e.exposed={});G&&e.render===gi&&(e.render=G),it!=null&&(e.inheritAttrs=it),U&&(e.components=U),q&&(e.directives=q)}function y0(e,n,i=gi){Ht(e)&&(e=tu(e));for(const o in e){const a=e[o];let c;xe(a)?"default"in a?c=pe(a.from||o,a.default,!0):c=pe(a.from||o):c=pe(a),re(c)?Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):n[o]=c}}function Pf(e,n,i){ti(Ht(e)?e.map(o=>o.bind(n.proxy)):e.bind(n.proxy),n,i)}function ap(e,n,i,o){const a=o.includes(".")?Km(i,o):()=>i[o];if(Le(e)){const c=n[e];se(c)&&jt(a,c)}else if(se(e))jt(a,e.bind(i));else if(xe(e))if(Ht(e))e.forEach(c=>ap(c,n,i,o));else{const c=se(e.handler)?e.handler.bind(i):n[e.handler];se(c)&&jt(a,c,e)}}function oh(e){const n=e.type,{mixins:i,extends:o}=n,{mixins:a,optionsCache:c,config:{optionMergeStrategies:u}}=e.appContext,f=c.get(n);let m;return f?m=f:!a.length&&!i&&!o?m=n:(m={},a.length&&a.forEach(p=>qa(m,p,u,!0)),qa(m,n,u)),xe(n)&&c.set(n,m),m}function qa(e,n,i,o=!1){const{mixins:a,extends:c}=n;c&&qa(e,c,i,!0),a&&a.forEach(u=>qa(e,u,i,!0));for(const u in n)if(!(o&&u==="expose")){const f=b0[u]||i&&i[u];e[u]=f?f(e[u],n[u]):n[u]}return e}const b0={data:kf,props:If,emits:If,methods:bo,computed:bo,beforeCreate:_s,created:_s,beforeMount:_s,mounted:_s,beforeUpdate:_s,updated:_s,beforeDestroy:_s,beforeUnmount:_s,destroyed:_s,unmounted:_s,activated:_s,deactivated:_s,errorCaptured:_s,serverPrefetch:_s,components:bo,directives:bo,watch:x0,provide:kf,inject:w0};function kf(e,n){return n?e?function(){return Ue(se(e)?e.call(this,this):e,se(n)?n.call(this,this):n)}:n:e}function w0(e,n){return bo(tu(e),tu(n))}function tu(e){if(Ht(e)){const n={};for(let i=0;i<e.length;i++)n[e[i]]=e[i];return n}return e}function _s(e,n){return e?[...new Set([].concat(e,n))]:n}function bo(e,n){return e?Ue(Object.create(null),e,n):n}function If(e,n){return e?Ht(e)&&Ht(n)?[...new Set([...e,...n])]:Ue(Object.create(null),Tf(e),Tf(n??{})):n}function x0(e,n){if(!e)return n;if(!n)return e;const i=Ue(Object.create(null),e);for(const o in n)i[o]=_s(e[o],n[o]);return i}function lp(){return{app:null,config:{isNativeTag:Jy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let C0=0;function S0(e,n){return function(o,a=null){se(o)||(o=Ue({},o)),a!=null&&!xe(a)&&(a=null);const c=lp(),u=new Set;let f=!1;const m=c.app={_uid:C0++,_component:o,_props:a,_container:null,_context:c,_instance:null,version:Q0,get config(){return c.config},set config(p){},use(p,...v){return u.has(p)||(p&&se(p.install)?(u.add(p),p.install(m,...v)):se(p)&&(u.add(p),p(m,...v))),m},mixin(p){return c.mixins.includes(p)||c.mixins.push(p),m},component(p,v){return v?(c.components[p]=v,m):c.components[p]},directive(p,v){return v?(c.directives[p]=v,m):c.directives[p]},mount(p,v,y){if(!f){const w=x(o,a);return w.appContext=c,v&&n?n(w,p):e(w,p,y),f=!0,m._container=p,p.__vue_app__=m,Sl(w.component)||w.component.proxy}},unmount(){f&&(e(null,m._container),delete m._container.__vue_app__)},provide(p,v){return c.provides[p]=v,m},runWithContext(p){Oo=m;try{return p()}finally{Oo=null}}};return m}}let Oo=null;function ts(e,n){if(Xe){let i=Xe.provides;const o=Xe.parent&&Xe.parent.provides;o===i&&(i=Xe.provides=Object.create(o)),i[e]=n}}function pe(e,n,i=!1){const o=Xe||Bs;if(o||Oo){const a=o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:Oo._context.provides;if(a&&e in a)return a[e];if(arguments.length>1)return i&&se(n)?n.call(o&&o.proxy):n}}function E0(){return!!(Xe||Bs||Oo)}function A0(e,n,i,o=!1){const a={},c={};Ga(c,Cl,1),e.propsDefaults=Object.create(null),cp(e,n,a,c);for(const u in e.propsOptions[0])u in a||(a[u]=void 0);i?e.props=o?a:Om(a):e.type.props?e.props=a:e.props=c,e.attrs=c}function T0(e,n,i,o){const{props:a,attrs:c,vnode:{patchFlag:u}}=e,f=Kt(a),[m]=e.propsOptions;let p=!1;if((o||u>0)&&!(u&16)){if(u&8){const v=e.vnode.dynamicProps;for(let y=0;y<v.length;y++){let w=v[y];if(yl(e.emitsOptions,w))continue;const C=n[w];if(m)if(fe(c,w))C!==c[w]&&(c[w]=C,p=!0);else{const E=ei(w);a[E]=eu(m,f,E,C,e,!1)}else C!==c[w]&&(c[w]=C,p=!0)}}}else{cp(e,n,a,c)&&(p=!0);let v;for(const y in f)(!n||!fe(n,y)&&((v=Ur(y))===y||!fe(n,v)))&&(m?i&&(i[y]!==void 0||i[v]!==void 0)&&(a[y]=eu(m,f,y,void 0,e,!0)):delete a[y]);if(c!==f)for(const y in c)(!n||!fe(n,y))&&(delete c[y],p=!0)}p&&Ji(e,"set","$attrs")}function cp(e,n,i,o){const[a,c]=e.propsOptions;let u=!1,f;if(n)for(let m in n){if(Da(m))continue;const p=n[m];let v;a&&fe(a,v=ei(m))?!c||!c.includes(v)?i[v]=p:(f||(f={}))[v]=p:yl(e.emitsOptions,m)||(!(m in o)||p!==o[m])&&(o[m]=p,u=!0)}if(c){const m=Kt(i),p=f||Ce;for(let v=0;v<c.length;v++){const y=c[v];i[y]=eu(a,m,y,p[y],e,!fe(p,y))}}return u}function eu(e,n,i,o,a,c){const u=e[i];if(u!=null){const f=fe(u,"default");if(f&&o===void 0){const m=u.default;if(u.type!==Function&&!u.skipFactory&&se(m)){const{propsDefaults:p}=a;i in p?o=p[i]:(Mr(a),o=p[i]=m.call(null,n),er())}else o=m}u[0]&&(c&&!f?o=!1:u[1]&&(o===""||o===Ur(i))&&(o=!0))}return o}function up(e,n,i=!1){const o=n.propsCache,a=o.get(e);if(a)return a;const c=e.props,u={},f=[];let m=!1;if(!se(e)){const v=y=>{m=!0;const[w,C]=up(y,n,!0);Ue(u,w),C&&f.push(...C)};!i&&n.mixins.length&&n.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!c&&!m)return xe(e)&&o.set(e,Tr),Tr;if(Ht(c))for(let v=0;v<c.length;v++){const y=ei(c[v]);Rf(y)&&(u[y]=Ce)}else if(c)for(const v in c){const y=ei(v);if(Rf(y)){const w=c[v],C=u[y]=Ht(w)||se(w)?{type:w}:Ue({},w);if(C){const E=Ff(Boolean,C.type),P=Ff(String,C.type);C[0]=E>-1,C[1]=P<0||E<P,(E>-1||fe(C,"default"))&&f.push(y)}}}const p=[u,f];return xe(e)&&o.set(e,p),p}function Rf(e){return e[0]!=="$"}function Mf(e){const n=e&&e.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:e===null?"null":""}function Bf(e,n){return Mf(e)===Mf(n)}function Ff(e,n){return Ht(n)?n.findIndex(i=>Bf(i,e)):se(n)&&Bf(n,e)?0:-1}const hp=e=>e[0]==="_"||e==="$stable",ah=e=>Ht(e)?e.map(Mi):[Mi(e)],P0=(e,n,i)=>{if(n._n)return n;const o=j((...a)=>ah(n(...a)),i);return o._c=!1,o},dp=(e,n,i)=>{const o=e._ctx;for(const a in e){if(hp(a))continue;const c=e[a];if(se(c))n[a]=P0(a,c,o);else if(c!=null){const u=ah(c);n[a]=()=>u}}},fp=(e,n)=>{const i=ah(n);e.slots.default=()=>i},k0=(e,n)=>{if(e.vnode.shapeFlag&32){const i=n._;i?(e.slots=Kt(n),Ga(n,"_",i)):dp(n,e.slots={})}else e.slots={},n&&fp(e,n);Ga(e.slots,Cl,1)},I0=(e,n,i)=>{const{vnode:o,slots:a}=e;let c=!0,u=Ce;if(o.shapeFlag&32){const f=n._;f?i&&f===1?c=!1:(Ue(a,n),!i&&f===1&&delete a._):(c=!n.$stable,dp(n,a)),u=n}else n&&(fp(e,n),u={default:1});if(c)for(const f in a)!hp(f)&&!(f in u)&&delete a[f]};function su(e,n,i,o,a=!1){if(Ht(e)){e.forEach((w,C)=>su(w,n&&(Ht(n)?n[C]:n),i,o,a));return}if(La(o)&&!a)return;const c=o.shapeFlag&4?Sl(o.component)||o.component.proxy:o.el,u=a?null:c,{i:f,r:m}=e,p=n&&n.r,v=f.refs===Ce?f.refs={}:f.refs,y=f.setupState;if(p!=null&&p!==m&&(Le(p)?(v[p]=null,fe(y,p)&&(y[p]=null)):re(p)&&(p.value=null)),se(m))Sn(m,f,12,[u,v]);else{const w=Le(m),C=re(m);if(w||C){const E=()=>{if(e.f){const P=w?fe(y,m)?y[m]:v[m]:m.value;a?Ht(P)&&Hu(P,c):Ht(P)?P.includes(c)||P.push(c):w?(v[m]=[c],fe(y,m)&&(y[m]=v[m])):(m.value=[c],e.k&&(v[e.k]=m.value))}else w?(v[m]=u,fe(y,m)&&(y[m]=u)):C&&(m.value=u,e.k&&(v[e.k]=u))};u?(E.id=-1,Rs(E,i)):E()}}}const Rs=n0;function R0(e){return M0(e)}function M0(e,n){const i=Xc();i.__VUE__=!0;const{insert:o,remove:a,patchProp:c,createElement:u,createText:f,createComment:m,setText:p,setElementText:v,parentNode:y,nextSibling:w,setScopeId:C=gi,insertStaticContent:E}=e,P=(M,F,D,nt=null,at=null,ct=null,Et=!1,ft=null,St=!!F.dynamicChildren)=>{if(M===F)return;M&&!Zn(M,F)&&(nt=et(M),he(M,at,ct,!0),M=null),F.patchFlag===-2&&(St=!1,F.dynamicChildren=null);const{type:lt,ref:Ot,shapeFlag:Pt}=F;switch(lt){case qo:k(M,F,D,nt);break;case mi:R(M,F,D,nt);break;case Pc:M==null&&B(F,D,nt,Et);break;case Re:U(M,F,D,nt,at,ct,Et,ft,St);break;default:Pt&1?G(M,F,D,nt,at,ct,Et,ft,St):Pt&6?q(M,F,D,nt,at,ct,Et,ft,St):(Pt&64||Pt&128)&&lt.process(M,F,D,nt,at,ct,Et,ft,St,vt)}Ot!=null&&at&&su(Ot,M&&M.ref,ct,F||M,!F)},k=(M,F,D,nt)=>{if(M==null)o(F.el=f(F.children),D,nt);else{const at=F.el=M.el;F.children!==M.children&&p(at,F.children)}},R=(M,F,D,nt)=>{M==null?o(F.el=m(F.children||""),D,nt):F.el=M.el},B=(M,F,D,nt)=>{[M.el,M.anchor]=E(M.children,F,D,nt,M.el,M.anchor)},O=({el:M,anchor:F},D,nt)=>{let at;for(;M&&M!==F;)at=w(M),o(M,D,nt),M=at;o(F,D,nt)},W=({el:M,anchor:F})=>{let D;for(;M&&M!==F;)D=w(M),a(M),M=D;a(F)},G=(M,F,D,nt,at,ct,Et,ft,St)=>{Et=Et||F.type==="svg",M==null?X(F,D,nt,at,ct,Et,ft,St):$(M,F,at,ct,Et,ft,St)},X=(M,F,D,nt,at,ct,Et,ft)=>{let St,lt;const{type:Ot,props:Pt,shapeFlag:It,transition:Gt,dirs:Ut}=M;if(St=M.el=u(M.type,ct,Pt&&Pt.is,Pt),It&8?v(St,M.children):It&16&&N(M.children,St,null,nt,at,ct&&Ot!=="foreignObject",Et,ft),Ut&&Wn(M,null,nt,"created"),st(St,M,M.scopeId,Et,nt),Pt){for(const ue in Pt)ue!=="value"&&!Da(ue)&&c(St,ue,null,Pt[ue],ct,M.children,nt,at,_t);"value"in Pt&&c(St,"value",null,Pt.value),(lt=Pt.onVnodeBeforeMount)&&Ii(lt,nt,M)}Ut&&Wn(M,null,nt,"beforeMount");const ne=(!at||at&&!at.pendingBranch)&&Gt&&!Gt.persisted;ne&&Gt.beforeEnter(St),o(St,F,D),((lt=Pt&&Pt.onVnodeMounted)||ne||Ut)&&Rs(()=>{lt&&Ii(lt,nt,M),ne&&Gt.enter(St),Ut&&Wn(M,null,nt,"mounted")},at)},st=(M,F,D,nt,at)=>{if(D&&C(M,D),nt)for(let ct=0;ct<nt.length;ct++)C(M,nt[ct]);if(at){let ct=at.subTree;if(F===ct){const Et=at.vnode;st(M,Et,Et.scopeId,Et.slotScopeIds,at.parent)}}},N=(M,F,D,nt,at,ct,Et,ft,St=0)=>{for(let lt=St;lt<M.length;lt++){const Ot=M[lt]=ft?bn(M[lt]):Mi(M[lt]);P(null,Ot,F,D,nt,at,ct,Et,ft)}},$=(M,F,D,nt,at,ct,Et)=>{const ft=F.el=M.el;let{patchFlag:St,dynamicChildren:lt,dirs:Ot}=F;St|=M.patchFlag&16;const Pt=M.props||Ce,It=F.props||Ce;let Gt;D&&Gn(D,!1),(Gt=It.onVnodeBeforeUpdate)&&Ii(Gt,D,F,M),Ot&&Wn(F,M,D,"beforeUpdate"),D&&Gn(D,!0);const Ut=at&&F.type!=="foreignObject";if(lt?Y(M.dynamicChildren,lt,ft,D,nt,Ut,ct):Et||ut(M,F,ft,null,D,nt,Ut,ct,!1),St>0){if(St&16)it(ft,F,Pt,It,D,nt,at);else if(St&2&&Pt.class!==It.class&&c(ft,"class",null,It.class,at),St&4&&c(ft,"style",Pt.style,It.style,at),St&8){const ne=F.dynamicProps;for(let ue=0;ue<ne.length;ue++){const Te=ne[ue],Vs=Pt[Te],bi=It[Te];(bi!==Vs||Te==="value")&&c(ft,Te,Vs,bi,at,M.children,D,nt,_t)}}St&1&&M.children!==F.children&&v(ft,F.children)}else!Et&&lt==null&&it(ft,F,Pt,It,D,nt,at);((Gt=It.onVnodeUpdated)||Ot)&&Rs(()=>{Gt&&Ii(Gt,D,F,M),Ot&&Wn(F,M,D,"updated")},nt)},Y=(M,F,D,nt,at,ct,Et)=>{for(let ft=0;ft<F.length;ft++){const St=M[ft],lt=F[ft],Ot=St.el&&(St.type===Re||!Zn(St,lt)||St.shapeFlag&70)?y(St.el):D;P(St,lt,Ot,null,nt,at,ct,Et,!0)}},it=(M,F,D,nt,at,ct,Et)=>{if(D!==nt){if(D!==Ce)for(const ft in D)!Da(ft)&&!(ft in nt)&&c(M,ft,D[ft],null,Et,F.children,at,ct,_t);for(const ft in nt){if(Da(ft))continue;const St=nt[ft],lt=D[ft];St!==lt&&ft!=="value"&&c(M,ft,lt,St,Et,F.children,at,ct,_t)}"value"in nt&&c(M,"value",D.value,nt.value)}},U=(M,F,D,nt,at,ct,Et,ft,St)=>{const lt=F.el=M?M.el:f(""),Ot=F.anchor=M?M.anchor:f("");let{patchFlag:Pt,dynamicChildren:It,slotScopeIds:Gt}=F;Gt&&(ft=ft?ft.concat(Gt):Gt),M==null?(o(lt,D,nt),o(Ot,D,nt),N(F.children,D,Ot,at,ct,Et,ft,St)):Pt>0&&Pt&64&&It&&M.dynamicChildren?(Y(M.dynamicChildren,It,D,at,ct,Et,ft),(F.key!=null||at&&F===at.subTree)&&lh(M,F,!0)):ut(M,F,D,Ot,at,ct,Et,ft,St)},q=(M,F,D,nt,at,ct,Et,ft,St)=>{F.slotScopeIds=ft,M==null?F.shapeFlag&512?at.ctx.activate(F,D,nt,Et,St):Q(F,D,nt,at,ct,Et,St):rt(M,F,St)},Q=(M,F,D,nt,at,ct,Et)=>{const ft=M.component=$0(M,nt,at);if(wl(M)&&(ft.ctx.renderer=vt),W0(ft),ft.asyncDep){if(at&&at.registerDep(ft,dt),!M.el){const St=ft.subTree=x(mi);R(null,St,F,D)}return}dt(ft,M,F,D,at,ct,Et)},rt=(M,F,D)=>{const nt=F.component=M.component;if(e0(M,F,D))if(nt.asyncDep&&!nt.asyncResolved){At(nt,F,D);return}else nt.next=F,qb(nt.update),nt.update();else F.el=M.el,nt.vnode=F},dt=(M,F,D,nt,at,ct,Et)=>{const ft=()=>{if(M.isMounted){let{next:Ot,bu:Pt,u:It,parent:Gt,vnode:Ut}=M,ne=Ot,ue;Gn(M,!1),Ot?(Ot.el=Ut.el,At(M,Ot,Et)):Ot=Ut,Pt&&Sc(Pt),(ue=Ot.props&&Ot.props.onVnodeBeforeUpdate)&&Ii(ue,Gt,Ot,Ut),Gn(M,!0);const Te=Ec(M),Vs=M.subTree;M.subTree=Te,P(Vs,Te,y(Vs.el),et(Vs),M,at,ct),Ot.el=Te.el,ne===null&&s0(M,Te.el),It&&Rs(It,at),(ue=Ot.props&&Ot.props.onVnodeUpdated)&&Rs(()=>Ii(ue,Gt,Ot,Ut),at)}else{let Ot;const{el:Pt,props:It}=F,{bm:Gt,m:Ut,parent:ne}=M,ue=La(F);if(Gn(M,!1),Gt&&Sc(Gt),!ue&&(Ot=It&&It.onVnodeBeforeMount)&&Ii(Ot,ne,F),Gn(M,!0),Pt&&oe){const Te=()=>{M.subTree=Ec(M),oe(Pt,M.subTree,M,at,null)};ue?F.type.__asyncLoader().then(()=>!M.isUnmounted&&Te()):Te()}else{const Te=M.subTree=Ec(M);P(null,Te,D,nt,M,at,ct),F.el=Te.el}if(Ut&&Rs(Ut,at),!ue&&(Ot=It&&It.onVnodeMounted)){const Te=F;Rs(()=>Ii(Ot,ne,Te),at)}(F.shapeFlag&256||ne&&La(ne.vnode)&&ne.vnode.shapeFlag&256)&&M.a&&Rs(M.a,at),M.isMounted=!0,F=D=nt=null}},St=M.effect=new Xu(ft,()=>th(lt),M.scope),lt=M.update=()=>St.run();lt.id=M.uid,Gn(M,!0),lt()},At=(M,F,D)=>{F.component=M;const nt=M.vnode.props;M.vnode=F,M.next=null,T0(M,F.props,nt,D),I0(M,F.children,D),Hr(),Cf(),$r()},ut=(M,F,D,nt,at,ct,Et,ft,St=!1)=>{const lt=M&&M.children,Ot=M?M.shapeFlag:0,Pt=F.children,{patchFlag:It,shapeFlag:Gt}=F;if(It>0){if(It&128){te(lt,Pt,D,nt,at,ct,Et,ft,St);return}else if(It&256){Rt(lt,Pt,D,nt,at,ct,Et,ft,St);return}}Gt&8?(Ot&16&&_t(lt,at,ct),Pt!==lt&&v(D,Pt)):Ot&16?Gt&16?te(lt,Pt,D,nt,at,ct,Et,ft,St):_t(lt,at,ct,!0):(Ot&8&&v(D,""),Gt&16&&N(Pt,D,nt,at,ct,Et,ft,St))},Rt=(M,F,D,nt,at,ct,Et,ft,St)=>{M=M||Tr,F=F||Tr;const lt=M.length,Ot=F.length,Pt=Math.min(lt,Ot);let It;for(It=0;It<Pt;It++){const Gt=F[It]=St?bn(F[It]):Mi(F[It]);P(M[It],Gt,D,null,at,ct,Et,ft,St)}lt>Ot?_t(M,at,ct,!0,!1,Pt):N(F,D,nt,at,ct,Et,ft,St,Pt)},te=(M,F,D,nt,at,ct,Et,ft,St)=>{let lt=0;const Ot=F.length;let Pt=M.length-1,It=Ot-1;for(;lt<=Pt&&lt<=It;){const Gt=M[lt],Ut=F[lt]=St?bn(F[lt]):Mi(F[lt]);if(Zn(Gt,Ut))P(Gt,Ut,D,null,at,ct,Et,ft,St);else break;lt++}for(;lt<=Pt&&lt<=It;){const Gt=M[Pt],Ut=F[It]=St?bn(F[It]):Mi(F[It]);if(Zn(Gt,Ut))P(Gt,Ut,D,null,at,ct,Et,ft,St);else break;Pt--,It--}if(lt>Pt){if(lt<=It){const Gt=It+1,Ut=Gt<Ot?F[Gt].el:nt;for(;lt<=It;)P(null,F[lt]=St?bn(F[lt]):Mi(F[lt]),D,Ut,at,ct,Et,ft,St),lt++}}else if(lt>It)for(;lt<=Pt;)he(M[lt],at,ct,!0),lt++;else{const Gt=lt,Ut=lt,ne=new Map;for(lt=Ut;lt<=It;lt++){const Z=F[lt]=St?bn(F[lt]):Mi(F[lt]);Z.key!=null&&ne.set(Z.key,lt)}let ue,Te=0;const Vs=It-Ut+1;let bi=!1,qs=0;const Mn=new Array(Vs);for(lt=0;lt<Vs;lt++)Mn[lt]=0;for(lt=Gt;lt<=Pt;lt++){const Z=M[lt];if(Te>=Vs){he(Z,at,ct,!0);continue}let ht;if(Z.key!=null)ht=ne.get(Z.key);else for(ue=Ut;ue<=It;ue++)if(Mn[ue-Ut]===0&&Zn(Z,F[ue])){ht=ue;break}ht===void 0?he(Z,at,ct,!0):(Mn[ht-Ut]=lt+1,ht>=qs?qs=ht:bi=!0,P(Z,F[ht],D,null,at,ct,Et,ft,St),Te++)}const z=bi?B0(Mn):Tr;for(ue=z.length-1,lt=Vs-1;lt>=0;lt--){const Z=Ut+lt,ht=F[Z],xs=Z+1<Ot?F[Z+1].el:nt;Mn[lt]===0?P(null,ht,D,xs,at,ct,Et,ft,St):bi&&(ue<0||lt!==z[ue]?Jt(ht,D,xs,2):ue--)}}},Jt=(M,F,D,nt,at=null)=>{const{el:ct,type:Et,transition:ft,children:St,shapeFlag:lt}=M;if(lt&6){Jt(M.component.subTree,F,D,nt);return}if(lt&128){M.suspense.move(F,D,nt);return}if(lt&64){Et.move(M,F,D,vt);return}if(Et===Re){o(ct,F,D);for(let Pt=0;Pt<St.length;Pt++)Jt(St[Pt],F,D,nt);o(M.anchor,F,D);return}if(Et===Pc){O(M,F,D);return}if(nt!==2&&lt&1&&ft)if(nt===0)ft.beforeEnter(ct),o(ct,F,D),Rs(()=>ft.enter(ct),at);else{const{leave:Pt,delayLeave:It,afterLeave:Gt}=ft,Ut=()=>o(ct,F,D),ne=()=>{Pt(ct,()=>{Ut(),Gt&&Gt()})};It?It(ct,Ut,ne):ne()}else o(ct,F,D)},he=(M,F,D,nt=!1,at=!1)=>{const{type:ct,props:Et,ref:ft,children:St,dynamicChildren:lt,shapeFlag:Ot,patchFlag:Pt,dirs:It}=M;if(ft!=null&&su(ft,null,D,M,!0),Ot&256){F.ctx.deactivate(M);return}const Gt=Ot&1&&It,Ut=!La(M);let ne;if(Ut&&(ne=Et&&Et.onVnodeBeforeUnmount)&&Ii(ne,F,M),Ot&6)ss(M.component,D,nt);else{if(Ot&128){M.suspense.unmount(D,nt);return}Gt&&Wn(M,null,F,"beforeUnmount"),Ot&64?M.type.remove(M,F,D,at,vt,nt):lt&&(ct!==Re||Pt>0&&Pt&64)?_t(lt,F,D,!1,!0):(ct===Re&&Pt&384||!at&&Ot&16)&&_t(St,F,D),nt&&Be(M)}(Ut&&(ne=Et&&Et.onVnodeUnmounted)||Gt)&&Rs(()=>{ne&&Ii(ne,F,M),Gt&&Wn(M,null,F,"unmounted")},D)},Be=M=>{const{type:F,el:D,anchor:nt,transition:at}=M;if(F===Re){qe(D,nt);return}if(F===Pc){W(M);return}const ct=()=>{a(D),at&&!at.persisted&&at.afterLeave&&at.afterLeave()};if(M.shapeFlag&1&&at&&!at.persisted){const{leave:Et,delayLeave:ft}=at,St=()=>Et(D,ct);ft?ft(M.el,ct,St):St()}else ct()},qe=(M,F)=>{let D;for(;M!==F;)D=w(M),a(M),M=D;a(F)},ss=(M,F,D)=>{const{bum:nt,scope:at,update:ct,subTree:Et,um:ft}=M;nt&&Sc(nt),at.stop(),ct&&(ct.active=!1,he(Et,M,F,D)),ft&&Rs(ft,F),Rs(()=>{M.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},_t=(M,F,D,nt=!1,at=!1,ct=0)=>{for(let Et=ct;Et<M.length;Et++)he(M[Et],F,D,nt,at)},et=M=>M.shapeFlag&6?et(M.component.subTree):M.shapeFlag&128?M.suspense.next():w(M.anchor||M.el),Tt=(M,F,D)=>{M==null?F._vnode&&he(F._vnode,null,null,!0):P(F._vnode||null,M,F,null,null,null,D),Cf(),jm(),F._vnode=M},vt={p:P,um:he,m:Jt,r:Be,mt:Q,mc:N,pc:ut,pbc:Y,n:et,o:e};let Bt,oe;return n&&([Bt,oe]=n(vt)),{render:Tt,hydrate:Bt,createApp:S0(Tt,Bt)}}function Gn({effect:e,update:n},i){e.allowRecurse=n.allowRecurse=i}function lh(e,n,i=!1){const o=e.children,a=n.children;if(Ht(o)&&Ht(a))for(let c=0;c<o.length;c++){const u=o[c];let f=a[c];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=a[c]=bn(a[c]),f.el=u.el),i||lh(u,f)),f.type===qo&&(f.el=u.el)}}function B0(e){const n=e.slice(),i=[0];let o,a,c,u,f;const m=e.length;for(o=0;o<m;o++){const p=e[o];if(p!==0){if(a=i[i.length-1],e[a]<p){n[o]=a,i.push(o);continue}for(c=0,u=i.length-1;c<u;)f=c+u>>1,e[i[f]]<p?c=f+1:u=f;p<e[i[c]]&&(c>0&&(n[o]=i[c-1]),i[c]=o)}}for(c=i.length,u=i[c-1];c-- >0;)i[c]=u,u=n[u];return i}const F0=e=>e.__isTeleport,So=e=>e&&(e.disabled||e.disabled===""),Df=e=>typeof SVGElement<"u"&&e instanceof SVGElement,iu=(e,n)=>{const i=e&&e.to;return Le(i)?n?n(i):null:i},D0={__isTeleport:!0,process(e,n,i,o,a,c,u,f,m,p){const{mc:v,pc:y,pbc:w,o:{insert:C,querySelector:E,createText:P,createComment:k}}=p,R=So(n.props);let{shapeFlag:B,children:O,dynamicChildren:W}=n;if(e==null){const G=n.el=P(""),X=n.anchor=P("");C(G,i,o),C(X,i,o);const st=n.target=iu(n.props,E),N=n.targetAnchor=P("");st&&(C(N,st),u=u||Df(st));const $=(Y,it)=>{B&16&&v(O,Y,it,a,c,u,f,m)};R?$(i,X):st&&$(st,N)}else{n.el=e.el;const G=n.anchor=e.anchor,X=n.target=e.target,st=n.targetAnchor=e.targetAnchor,N=So(e.props),$=N?i:X,Y=N?G:st;if(u=u||Df(X),W?(w(e.dynamicChildren,W,$,a,c,u,f),lh(e,n,!0)):m||y(e,n,$,Y,a,c,u,f,!1),R)N||Ra(n,i,G,p,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const it=n.target=iu(n.props,E);it&&Ra(n,it,null,p,0)}else N&&Ra(n,X,st,p,1)}gp(n)},remove(e,n,i,o,{um:a,o:{remove:c}},u){const{shapeFlag:f,children:m,anchor:p,targetAnchor:v,target:y,props:w}=e;if(y&&c(v),(u||!So(w))&&(c(p),f&16))for(let C=0;C<m.length;C++){const E=m[C];a(E,n,i,!0,!!E.dynamicChildren)}},move:Ra,hydrate:L0};function Ra(e,n,i,{o:{insert:o},m:a},c=2){c===0&&o(e.targetAnchor,n,i);const{el:u,anchor:f,shapeFlag:m,children:p,props:v}=e,y=c===2;if(y&&o(u,n,i),(!y||So(v))&&m&16)for(let w=0;w<p.length;w++)a(p[w],n,i,2);y&&o(f,n,i)}function L0(e,n,i,o,a,c,{o:{nextSibling:u,parentNode:f,querySelector:m}},p){const v=n.target=iu(n.props,m);if(v){const y=v._lpa||v.firstChild;if(n.shapeFlag&16)if(So(n.props))n.anchor=p(u(e),n,f(e),i,o,a,c),n.targetAnchor=y;else{n.anchor=u(e);let w=y;for(;w;)if(w=u(w),w&&w.nodeType===8&&w.data==="teleport anchor"){n.targetAnchor=w,v._lpa=n.targetAnchor&&u(n.targetAnchor);break}p(y,n,v,i,o,a,c)}gp(n)}return n.anchor&&u(n.anchor)}const O0=D0;function gp(e){const n=e.ctx;if(n&&n.ut){let i=e.children[0].el;for(;i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}const Re=Symbol.for("v-fgt"),qo=Symbol.for("v-txt"),mi=Symbol.for("v-cmt"),Pc=Symbol.for("v-stc"),Eo=[];let di=null;function me(e=!1){Eo.push(di=e?null:[])}function V0(){Eo.pop(),di=Eo[Eo.length-1]||null}let Vo=1;function Lf(e){Vo+=e}function mp(e){return e.dynamicChildren=Vo>0?di||Tr:null,V0(),Vo>0&&di&&di.push(e),e}function _n(e,n,i,o,a,c){return mp(qt(e,n,i,o,a,c,!0))}function Ie(e,n,i,o,a){return mp(x(e,n,i,o,a,!0))}function nu(e){return e?e.__v_isVNode===!0:!1}function Zn(e,n){return e.type===n.type&&e.key===n.key}const Cl="__vInternal",pp=({key:e})=>e??null,Oa=({ref:e,ref_key:n,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Le(e)||re(e)||se(e)?{i:Bs,r:e,k:n,f:!!i}:e:null);function qt(e,n=null,i=null,o=0,a=null,c=e===Re?0:1,u=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&pp(n),ref:n&&Oa(n),scopeId:bl,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Bs};return f?(ch(m,i),c&128&&e.normalize(m)):i&&(m.shapeFlag|=Le(i)?8:16),Vo>0&&!u&&di&&(m.patchFlag>0||c&6)&&m.patchFlag!==32&&di.push(m),m}const x=z0;function z0(e,n=null,i=null,o=0,a=null,c=!1){if((!e||e===op)&&(e=mi),nu(e)){const f=An(e,n,!0);return i&&ch(f,i),Vo>0&&!c&&di&&(f.shapeFlag&6?di[di.indexOf(e)]=f:di.push(f)),f.patchFlag|=-2,f}if(q0(e)&&(e=e.__vccOpts),n){n=N0(n);let{class:f,style:m}=n;f&&!Le(f)&&(n.class=Js(f)),xe(m)&&(Vm(m)&&!Ht(m)&&(m=Ue({},m)),n.style=Gu(m))}const u=Le(e)?1:i0(e)?128:F0(e)?64:xe(e)?4:se(e)?2:0;return qt(e,n,i,o,a,u,c,!0)}function N0(e){return e?Vm(e)||Cl in e?Ue({},e):e:null}function An(e,n,i=!1){const{props:o,ref:a,patchFlag:c,children:u}=e,f=n?ye(o||{},n):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&pp(f),ref:n&&n.ref?i&&a?Ht(a)?a.concat(Oa(n)):[a,Oa(n)]:Oa(n):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Re?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&An(e.ssContent),ssFallback:e.ssFallback&&An(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function mt(e=" ",n=0){return x(qo,null,e,n)}function as(e="",n=!1){return n?(me(),Ie(mi,null,e)):x(mi,null,e)}function Mi(e){return e==null||typeof e=="boolean"?x(mi):Ht(e)?x(Re,null,e.slice()):typeof e=="object"?bn(e):x(qo,null,String(e))}function bn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:An(e)}function ch(e,n){let i=0;const{shapeFlag:o}=e;if(n==null)n=null;else if(Ht(n))i=16;else if(typeof n=="object")if(o&65){const a=n.default;a&&(a._c&&(a._d=!1),ch(e,a()),a._c&&(a._d=!0));return}else{i=32;const a=n._;!a&&!(Cl in n)?n._ctx=Bs:a===3&&Bs&&(Bs.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else se(n)?(n={default:n,_ctx:Bs},i=32):(n=String(n),o&64?(i=16,n=[mt(n)]):i=8);e.children=n,e.shapeFlag|=i}function ye(...e){const n={};for(let i=0;i<e.length;i++){const o=e[i];for(const a in o)if(a==="class")n.class!==o.class&&(n.class=Js([n.class,o.class]));else if(a==="style")n.style=Gu([n.style,o.style]);else if(fl(a)){const c=n[a],u=o[a];u&&c!==u&&!(Ht(c)&&c.includes(u))&&(n[a]=c?[].concat(c,u):u)}else a!==""&&(n[a]=o[a])}return n}function Ii(e,n,i,o=null){ti(e,n,7,[i,o])}const U0=lp();let H0=0;function $0(e,n,i){const o=e.type,a=(n?n.appContext:e.appContext)||U0,c={uid:H0++,vnode:e,type:o,parent:n,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Em(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:up(o,a),emitsOptions:Ym(o,a),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:o.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=n?n.root:c,c.emit=Qb.bind(null,c),e.ce&&e.ce(c),c}let Xe=null;const uh=()=>Xe||Bs;let hh,wr,Of="__VUE_INSTANCE_SETTERS__";(wr=Xc()[Of])||(wr=Xc()[Of]=[]),wr.push(e=>Xe=e),hh=e=>{wr.length>1?wr.forEach(n=>n(e)):wr[0](e)};const Mr=e=>{hh(e),e.scope.on()},er=()=>{Xe&&Xe.scope.off(),hh(null)};function _p(e){return e.vnode.shapeFlag&4}let zo=!1;function W0(e,n=!1){zo=n;const{props:i,children:o}=e.vnode,a=_p(e);A0(e,i,a,n),k0(e,o);const c=a?G0(e,n):void 0;return zo=!1,c}function G0(e,n){const i=e.type;e.accessCache=Object.create(null),e.proxy=Yo(new Proxy(e.ctx,_0));const{setup:o}=i;if(o){const a=e.setupContext=o.length>1?X0(e):null;Mr(e),Hr();const c=Sn(o,e,0,[e.props,a]);if($r(),er(),bm(c)){if(c.then(er,er),n)return c.then(u=>{Vf(e,u,n)}).catch(u=>{vl(u,e,0)});e.asyncDep=c}else Vf(e,c,n)}else vp(e,n)}function Vf(e,n,i){se(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:xe(n)&&(e.setupState=Hm(n)),vp(e,i)}let zf;function vp(e,n,i){const o=e.type;if(!e.render){if(!n&&zf&&!o.render){const a=o.template||oh(e).template;if(a){const{isCustomElement:c,compilerOptions:u}=e.appContext.config,{delimiters:f,compilerOptions:m}=o,p=Ue(Ue({isCustomElement:c,delimiters:f},u),m);o.render=zf(a,p)}}e.render=o.render||gi}Mr(e),Hr(),v0(e),$r(),er()}function j0(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(n,i){return Ls(e,"get","$attrs"),n[i]}}))}function X0(e){const n=i=>{e.exposed=i||{}};return{get attrs(){return j0(e)},slots:e.slots,emit:e.emit,expose:n}}function Sl(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Hm(Yo(e.exposed)),{get(n,i){if(i in n)return n[i];if(i in Co)return Co[i](e)},has(n,i){return i in n||i in Co}}))}function Y0(e,n=!0){return se(e)?e.displayName||e.name:e.name||n&&e.__name}function q0(e){return se(e)&&"__vccOpts"in e}const L=(e,n)=>jb(e,n,zo);function zi(e,n,i){const o=arguments.length;return o===2?xe(n)&&!Ht(n)?nu(n)?x(e,null,[n]):x(e,n):x(e,null,n):(o>3?i=Array.prototype.slice.call(arguments,2):o===3&&nu(i)&&(i=[i]),x(e,n,i))}const Z0=Symbol.for("v-scx"),K0=()=>pe(Z0),Q0="3.3.4",J0="http://www.w3.org/2000/svg",Kn=typeof document<"u"?document:null,Nf=Kn&&Kn.createElement("template"),tw={insert:(e,n,i)=>{n.insertBefore(e,i||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,i,o)=>{const a=n?Kn.createElementNS(J0,e):Kn.createElement(e,i?{is:i}:void 0);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>Kn.createTextNode(e),createComment:e=>Kn.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Kn.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,i,o,a,c){const u=i?i.previousSibling:n.lastChild;if(a&&(a===c||a.nextSibling))for(;n.insertBefore(a.cloneNode(!0),i),!(a===c||!(a=a.nextSibling)););else{Nf.innerHTML=o?`<svg>${e}</svg>`:e;const f=Nf.content;if(o){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}n.insertBefore(f,i)}return[u?u.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}};function ew(e,n,i){const o=e._vtc;o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?e.removeAttribute("class"):i?e.setAttribute("class",n):e.className=n}function sw(e,n,i){const o=e.style,a=Le(i);if(i&&!a){if(n&&!Le(n))for(const c in n)i[c]==null&&ru(o,c,"");for(const c in i)ru(o,c,i[c])}else{const c=o.display;a?n!==i&&(o.cssText=i):n&&e.removeAttribute("style"),"_vod"in e&&(o.display=c)}}const Uf=/\s*!important$/;function ru(e,n,i){if(Ht(i))i.forEach(o=>ru(e,n,o));else if(i==null&&(i=""),n.startsWith("--"))e.setProperty(n,i);else{const o=iw(e,n);Uf.test(i)?e.setProperty(Ur(o),i.replace(Uf,""),"important"):e[o]=i}}const Hf=["Webkit","Moz","ms"],kc={};function iw(e,n){const i=kc[n];if(i)return i;let o=ei(n);if(o!=="filter"&&o in e)return kc[n]=o;o=sn(o);for(let a=0;a<Hf.length;a++){const c=Hf[a]+o;if(c in e)return kc[n]=c}return n}const $f="http://www.w3.org/1999/xlink";function nw(e,n,i,o,a){if(o&&n.startsWith("xlink:"))i==null?e.removeAttributeNS($f,n.slice(6,n.length)):e.setAttributeNS($f,n,i);else{const c=db(n);i==null||c&&!Cm(i)?e.removeAttribute(n):e.setAttribute(n,c?"":i)}}function rw(e,n,i,o,a,c,u){if(n==="innerHTML"||n==="textContent"){o&&u(o,a,c),e[n]=i??"";return}const f=e.tagName;if(n==="value"&&f!=="PROGRESS"&&!f.includes("-")){e._value=i;const p=f==="OPTION"?e.getAttribute("value"):e.value,v=i??"";p!==v&&(e.value=v),i==null&&e.removeAttribute(n);return}let m=!1;if(i===""||i==null){const p=typeof e[n];p==="boolean"?i=Cm(i):i==null&&p==="string"?(i="",m=!0):p==="number"&&(i=0,m=!0)}try{e[n]=i}catch{}m&&e.removeAttribute(n)}function ow(e,n,i,o){e.addEventListener(n,i,o)}function aw(e,n,i,o){e.removeEventListener(n,i,o)}function lw(e,n,i,o,a=null){const c=e._vei||(e._vei={}),u=c[n];if(o&&u)u.value=o;else{const[f,m]=cw(n);if(o){const p=c[n]=dw(o,a);ow(e,f,p,m)}else u&&(aw(e,f,u,m),c[n]=void 0)}}const Wf=/(?:Once|Passive|Capture)$/;function cw(e){let n;if(Wf.test(e)){n={};let o;for(;o=e.match(Wf);)e=e.slice(0,e.length-o[0].length),n[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ur(e.slice(2)),n]}let Ic=0;const uw=Promise.resolve(),hw=()=>Ic||(uw.then(()=>Ic=0),Ic=Date.now());function dw(e,n){const i=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=i.attached)return;ti(fw(o,i.value),n,5,[o])};return i.value=e,i.attached=hw(),i}function fw(e,n){if(Ht(n)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},n.map(o=>a=>!a._stopped&&o&&o(a))}else return n}const Gf=/^on[a-z]/,gw=(e,n,i,o,a=!1,c,u,f,m)=>{n==="class"?ew(e,o,a):n==="style"?sw(e,i,o):fl(n)?Uu(n)||lw(e,n,i,o,u):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):mw(e,n,o,a))?rw(e,n,o,c,u,f,m):(n==="true-value"?e._trueValue=o:n==="false-value"&&(e._falseValue=o),nw(e,n,o,a))};function mw(e,n,i,o){return o?!!(n==="innerHTML"||n==="textContent"||n in e&&Gf.test(n)&&se(i)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA"||Gf.test(n)&&Le(i)?!1:n in e}const mn="transition",ho="animation",tn=(e,{slots:n})=>zi(a0,bp(e),n);tn.displayName="Transition";const yp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},pw=tn.props=Ue({},Jm,yp),jn=(e,n=[])=>{Ht(e)?e.forEach(i=>i(...n)):e&&e(...n)},jf=e=>e?Ht(e)?e.some(n=>n.length>1):e.length>1:!1;function bp(e){const n={};for(const U in e)U in yp||(n[U]=e[U]);if(e.css===!1)return n;const{name:i="v",type:o,duration:a,enterFromClass:c=`${i}-enter-from`,enterActiveClass:u=`${i}-enter-active`,enterToClass:f=`${i}-enter-to`,appearFromClass:m=c,appearActiveClass:p=u,appearToClass:v=f,leaveFromClass:y=`${i}-leave-from`,leaveActiveClass:w=`${i}-leave-active`,leaveToClass:C=`${i}-leave-to`}=e,E=_w(a),P=E&&E[0],k=E&&E[1],{onBeforeEnter:R,onEnter:B,onEnterCancelled:O,onLeave:W,onLeaveCancelled:G,onBeforeAppear:X=R,onAppear:st=B,onAppearCancelled:N=O}=n,$=(U,q,Q)=>{vn(U,q?v:f),vn(U,q?p:u),Q&&Q()},Y=(U,q)=>{U._isLeaving=!1,vn(U,y),vn(U,C),vn(U,w),q&&q()},it=U=>(q,Q)=>{const rt=U?st:B,dt=()=>$(q,U,Q);jn(rt,[q,dt]),Xf(()=>{vn(q,U?m:c),Yi(q,U?v:f),jf(rt)||Yf(q,o,P,dt)})};return Ue(n,{onBeforeEnter(U){jn(R,[U]),Yi(U,c),Yi(U,u)},onBeforeAppear(U){jn(X,[U]),Yi(U,m),Yi(U,p)},onEnter:it(!1),onAppear:it(!0),onLeave(U,q){U._isLeaving=!0;const Q=()=>Y(U,q);Yi(U,y),xp(),Yi(U,w),Xf(()=>{U._isLeaving&&(vn(U,y),Yi(U,C),jf(W)||Yf(U,o,k,Q))}),jn(W,[U,Q])},onEnterCancelled(U){$(U,!1),jn(O,[U])},onAppearCancelled(U){$(U,!0),jn(N,[U])},onLeaveCancelled(U){Y(U),jn(G,[U])}})}function _w(e){if(e==null)return null;if(xe(e))return[Rc(e.enter),Rc(e.leave)];{const n=Rc(e);return[n,n]}}function Rc(e){return ob(e)}function Yi(e,n){n.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e._vtc||(e._vtc=new Set)).add(n)}function vn(e,n){n.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const{_vtc:i}=e;i&&(i.delete(n),i.size||(e._vtc=void 0))}function Xf(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let vw=0;function Yf(e,n,i,o){const a=e._endId=++vw,c=()=>{a===e._endId&&o()};if(i)return setTimeout(c,i);const{type:u,timeout:f,propCount:m}=wp(e,n);if(!u)return o();const p=u+"end";let v=0;const y=()=>{e.removeEventListener(p,w),c()},w=C=>{C.target===e&&++v>=m&&y()};setTimeout(()=>{v<m&&y()},f+1),e.addEventListener(p,w)}function wp(e,n){const i=window.getComputedStyle(e),o=E=>(i[E]||"").split(", "),a=o(`${mn}Delay`),c=o(`${mn}Duration`),u=qf(a,c),f=o(`${ho}Delay`),m=o(`${ho}Duration`),p=qf(f,m);let v=null,y=0,w=0;n===mn?u>0&&(v=mn,y=u,w=c.length):n===ho?p>0&&(v=ho,y=p,w=m.length):(y=Math.max(u,p),v=y>0?u>p?mn:ho:null,w=v?v===mn?c.length:m.length:0);const C=v===mn&&/\b(transform|all)(,|$)/.test(o(`${mn}Property`).toString());return{type:v,timeout:y,propCount:w,hasTransform:C}}function qf(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((i,o)=>Zf(i)+Zf(e[o])))}function Zf(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function xp(){return document.body.offsetHeight}const Cp=new WeakMap,Sp=new WeakMap,Ep={name:"TransitionGroup",props:Ue({},pw,{tag:String,moveClass:String}),setup(e,{slots:n}){const i=uh(),o=Qm();let a,c;return np(()=>{if(!a.length)return;const u=e.moveClass||`${e.name||"v"}-move`;if(!Sw(a[0].el,i.vnode.el,u))return;a.forEach(ww),a.forEach(xw);const f=a.filter(Cw);xp(),f.forEach(m=>{const p=m.el,v=p.style;Yi(p,u),v.transform=v.webkitTransform=v.transitionDuration="";const y=p._moveCb=w=>{w&&w.target!==p||(!w||/transform$/.test(w.propertyName))&&(p.removeEventListener("transitionend",y),p._moveCb=null,vn(p,u))};p.addEventListener("transitionend",y)})}),()=>{const u=Kt(e),f=bp(u);let m=u.tag||Re;a=c,c=n.default?sh(n.default()):[];for(let p=0;p<c.length;p++){const v=c[p];v.key!=null&&Lo(v,Do(v,f,o,i))}if(a)for(let p=0;p<a.length;p++){const v=a[p];Lo(v,Do(v,f,o,i)),Cp.set(v,v.el.getBoundingClientRect())}return x(m,null,c)}}},yw=e=>delete e.mode;Ep.props;const bw=Ep;function ww(e){const n=e.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function xw(e){Sp.set(e,e.el.getBoundingClientRect())}function Cw(e){const n=Cp.get(e),i=Sp.get(e),o=n.left-i.left,a=n.top-i.top;if(o||a){const c=e.el.style;return c.transform=c.webkitTransform=`translate(${o}px,${a}px)`,c.transitionDuration="0s",e}}function Sw(e,n,i){const o=e.cloneNode();e._vtc&&e._vtc.forEach(u=>{u.split(/\s+/).forEach(f=>f&&o.classList.remove(f))}),i.split(/\s+/).forEach(u=>u&&o.classList.add(u)),o.style.display="none";const a=n.nodeType===1?n:n.parentNode;a.appendChild(o);const{hasTransform:c}=wp(o);return a.removeChild(o),c}const Wr={beforeMount(e,{value:n},{transition:i}){e._vod=e.style.display==="none"?"":e.style.display,i&&n?i.beforeEnter(e):fo(e,n)},mounted(e,{value:n},{transition:i}){i&&n&&i.enter(e)},updated(e,{value:n,oldValue:i},{transition:o}){!n!=!i&&(o?n?(o.beforeEnter(e),fo(e,!0),o.enter(e)):o.leave(e,()=>{fo(e,!1)}):fo(e,n))},beforeUnmount(e,{value:n}){fo(e,n)}};function fo(e,n){e.style.display=n?e._vod:"none"}const Ew=Ue({patchProp:gw},tw);let Kf;function Aw(){return Kf||(Kf=R0(Ew))}const Tw=(...e)=>{const n=Aw().createApp(...e),{mount:i}=n;return n.mount=o=>{const a=Pw(o);if(!a)return;const c=n._component;!se(c)&&!c.render&&!c.template&&(c.template=a.innerHTML),a.innerHTML="";const u=i(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),u},n};function Pw(e){return Le(e)?document.querySelector(e):e}var kw=!1;/*!
  * pinia v2.1.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let Ap;const El=e=>Ap=e,Tp=Symbol();function ou(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ao;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ao||(Ao={}));function Iw(){const e=jo(!0),n=e.run(()=>Ft({}));let i=[],o=[];const a=Yo({install(c){El(a),a._a=c,c.provide(Tp,a),c.config.globalProperties.$pinia=a,o.forEach(u=>i.push(u)),o=[]},use(c){return!this._a&&!kw?o.push(c):i.push(c),this},_p:i,_a:null,_e:e,_s:new Map,state:n});return a}const Pp=()=>{};function Qf(e,n,i,o=Pp){e.push(n);const a=()=>{const c=e.indexOf(n);c>-1&&(e.splice(c,1),o())};return!i&&Am()&&Ds(a),a}function xr(e,...n){e.slice().forEach(i=>{i(...n)})}const Rw=e=>e();function au(e,n){e instanceof Map&&n instanceof Map&&n.forEach((i,o)=>e.set(o,i)),e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const i in n){if(!n.hasOwnProperty(i))continue;const o=n[i],a=e[i];ou(a)&&ou(o)&&e.hasOwnProperty(i)&&!re(o)&&!Qi(o)?e[i]=au(a,o):e[i]=o}return e}const Mw=Symbol();function Bw(e){return!ou(e)||!e.hasOwnProperty(Mw)}const{assign:yn}=Object;function Fw(e){return!!(re(e)&&e.effect)}function Dw(e,n,i,o){const{state:a,actions:c,getters:u}=n,f=i.state.value[e];let m;function p(){f||(i.state.value[e]=a?a():{});const v=_l(i.state.value[e]);return yn(v,c,Object.keys(u||{}).reduce((y,w)=>(y[w]=Yo(L(()=>{El(i);const C=i._s.get(e);return u[w].call(C,C)})),y),{}))}return m=kp(e,p,n,i,o,!0),m}function kp(e,n,i={},o,a,c){let u;const f=yn({actions:{}},i),m={deep:!0};let p,v,y=[],w=[],C;const E=o.state.value[e];!c&&!E&&(o.state.value[e]={}),Ft({});let P;function k(N){let $;p=v=!1,typeof N=="function"?(N(o.state.value[e]),$={type:Ao.patchFunction,storeId:e,events:C}):(au(o.state.value[e],N),$={type:Ao.patchObject,payload:N,storeId:e,events:C});const Y=P=Symbol();ws().then(()=>{P===Y&&(p=!0)}),v=!0,xr(y,$,o.state.value[e])}const R=c?function(){const{state:$}=i,Y=$?$():{};this.$patch(it=>{yn(it,Y)})}:Pp;function B(){u.stop(),y=[],w=[],o._s.delete(e)}function O(N,$){return function(){El(o);const Y=Array.from(arguments),it=[],U=[];function q(dt){it.push(dt)}function Q(dt){U.push(dt)}xr(w,{args:Y,name:N,store:G,after:q,onError:Q});let rt;try{rt=$.apply(this&&this.$id===e?this:G,Y)}catch(dt){throw xr(U,dt),dt}return rt instanceof Promise?rt.then(dt=>(xr(it,dt),dt)).catch(dt=>(xr(U,dt),Promise.reject(dt))):(xr(it,rt),rt)}}const W={_p:o,$id:e,$onAction:Qf.bind(null,w),$patch:k,$reset:R,$subscribe(N,$={}){const Y=Qf(y,N,$.detached,()=>it()),it=u.run(()=>jt(()=>o.state.value[e],U=>{($.flush==="sync"?v:p)&&N({storeId:e,type:Ao.direct,events:C},U)},yn({},m,$)));return Y},$dispose:B},G=ls(W);o._s.set(e,G);const X=o._a&&o._a.runWithContext||Rw,st=o._e.run(()=>(u=jo(),X(()=>u.run(n))));for(const N in st){const $=st[N];if(re($)&&!Fw($)||Qi($))c||(E&&Bw($)&&(re($)?$.value=E[N]:au($,E[N])),o.state.value[e][N]=$);else if(typeof $=="function"){const Y=O(N,$);st[N]=Y,f.actions[N]=$}}return yn(G,st),yn(Kt(G),st),Object.defineProperty(G,"$state",{get:()=>o.state.value[e],set:N=>{k($=>{yn($,N)})}}),o._p.forEach(N=>{yn(G,u.run(()=>N({store:G,app:o._a,pinia:o,options:f})))}),E&&c&&i.hydrate&&i.hydrate(G.$state,E),p=!0,v=!0,G}function Ip(e,n,i){let o,a;const c=typeof n=="function";typeof e=="string"?(o=e,a=c?i:n):(a=e,o=e.id);function u(f,m){const p=E0();return f=f||(p?pe(Tp,null):null),f&&El(f),f=Ap,f._s.has(o)||(c?kp(o,n,a,f):Dw(o,a,f)),f._s.get(o)}return u.$id=o,u}function si(e){{e=Kt(e);const n={};for(const i in e){const o=e[i];(re(o)||Qi(o))&&(n[i]=Lt(e,i))}return n}}const Ws={WELCOME:0,MODE:1,DIFFICULTY:2,CONSENT:3,GAME:4},on=Ip("defaults",()=>{const e=Ft(0),n=Ft(!1),i=Ft(!1),o=Ft(),a=Ft(),c=Ft();return{currentPage:e,difficultySelected:a,consentSelected:c,modeSelected:o,detailsOpen:n,settingsOpen:i}}),Rp={game_mode:"matching",start_level:0,difficulty_step:.1,max_components:20,component_spawn_delay_min:500,component_spawn_delay_variation:200,component_lifetime:2e3,target_frequency:1/5,music_change_delay:6e4,needy_potato_enabled:!0,needy_potato_delay_min:5e3,needy_potato_delay_variation:2500,needy_potato_duration:5e3},dh={game_mode:"matching",start_level:0,difficulty_step:.05,max_components:10,component_spawn_delay_min:1e3,component_spawn_delay_variation:500,component_lifetime:5e3,target_frequency:1/3,music_change_delay:6e4,needy_potato_enabled:!0,needy_potato_delay_min:1e4,needy_potato_delay_variation:5e3,needy_potato_duration:6e3},Mp={game_mode:"free_play",start_level:0,difficulty_step:0,max_components:10,component_spawn_delay_min:1e3,component_spawn_delay_variation:500,component_lifetime:5e3,target_frequency:0,music_change_delay:6e4,needy_potato_enabled:!1,needy_potato_delay_min:0,needy_potato_delay_variation:0,needy_potato_duration:0},Bp=dh,nr=Ip("game",{state:()=>({...Bp,send_data_consent:void 0}),getters:{to_raw:e=>({game_mode:e.game_mode,send_data_consent:e.send_data_consent,difficulty_step:e.difficulty_step,start_level:e.start_level,max_components:e.max_components,component_spawn_delay_min:e.component_spawn_delay_min,component_spawn_delay_variation:e.component_spawn_delay_variation,component_lifetime:e.component_lifetime,target_frequency:e.target_frequency,music_change_delay:e.music_change_delay,needy_potato_delay_min:e.needy_potato_delay_min,needy_potato_delay_variation:e.needy_potato_delay_variation,needy_potato_duration:e.needy_potato_duration})},actions:{_update_from_object:function(e){for(const[n,i]of Object.entries(e))n in this&&(this[n]=i)},load_defaults:function(e="adult"){e==="adult"?this._update_from_object(Rp):e==="child"?this._update_from_object(dh):e==="free_play"&&this._update_from_object(Mp)}}});function Fp(e,n,i){const o=n.length-1;if(o<0)return e===void 0?i:e;for(let a=0;a<o;a++){if(e==null)return i;e=e[n[a]]}return e==null||e[n[o]]===void 0?i:e[n[o]]}function Al(e,n){if(e===n)return!0;if(e instanceof Date&&n instanceof Date&&e.getTime()!==n.getTime()||e!==Object(e)||n!==Object(n))return!1;const i=Object.keys(e);return i.length!==Object.keys(n).length?!1:i.every(o=>Al(e[o],n[o]))}function lu(e,n,i){return e==null||!n||typeof n!="string"?i:e[n]!==void 0?e[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),Fp(e,n.split("."),i))}function go(e,n,i){if(n==null)return e===void 0?i:e;if(e!==Object(e)){if(typeof n!="function")return i;const a=n(e,i);return typeof a>"u"?i:a}if(typeof n=="string")return lu(e,n,i);if(Array.isArray(n))return Fp(e,n,i);if(typeof n!="function")return i;const o=n(e,i);return typeof o>"u"?i:o}function fh(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:e},(i,o)=>n+o)}function Vt(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${n}`:void 0}function cu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function uu(e){return e&&"$el"in e?e.$el:e}const Jf=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),Lw=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function Dp(e){return Object.keys(e)}function Mc(e,n){return n.every(i=>e.hasOwnProperty(i))}function gh(e,n,i){const o=Object.create(null),a=Object.create(null);for(const c in e)n.some(u=>u instanceof RegExp?u.test(c):u===c)&&!(i!=null&&i.some(u=>u===c))?o[c]=e[c]:a[c]=e[c];return[o,a]}function Ow(e,n){const i={...e};return n.forEach(o=>delete i[o]),i}function Lp(e){return gh(e,["class","style","id",/^data-/])}function sr(e){return e==null?[]:Array.isArray(e)?e:[e]}function Br(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(i,e))}function tg(e){const n=e.toString().trim();return n.includes(".")?n.length-n.indexOf(".")-1:0}function eg(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return e+i.repeat(Math.max(0,n-e.length))}function Vw(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let o=0;for(;o<e.length;)i.push(e.substr(o,n)),o+=n;return i}function Qs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const o={};for(const a in e)o[a]=e[a];for(const a in n){const c=e[a],u=n[a];if(cu(c)&&cu(u)){o[a]=Qs(c,u,i);continue}if(Array.isArray(c)&&Array.isArray(u)&&i){o[a]=i(c,u);continue}o[a]=u}return o}function Op(e){return e.map(n=>n.type===Re?Op(n.children):n).flat()}function ir(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(ir.cache.has(e))return ir.cache.get(e);const n=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return ir.cache.set(e,n),n}ir.cache=new Map;function To(e,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(i=>To(e,i)).flat(1);if(Array.isArray(n.children))return n.children.map(i=>To(e,i)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(e))return[n.component];if(n.component.subTree)return To(e,n.component.subTree).flat(1)}return[]}function mh(e){const n=ls({}),i=L(e);return nn(()=>{for(const o in i.value)n[o]=i.value[o]},{flush:"sync"}),_l(n)}function Za(e,n){return e.includes(n)}const zw=/^on[^a-z]/,Vp=e=>zw.test(e);function zp(e){return e[2].toLowerCase()+e.slice(3)}const rr=()=>[Function,Array];function sg(e,n){return n="on"+sn(n),!!(e[n]||e[`${n}Once`]||e[`${n}Capture`]||e[`${n}OnceCapture`]||e[`${n}CaptureOnce`])}function Np(e){const n=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(i=>`${i}:not([tabindex="-1"]):not([disabled])`).join(", ");return[...e.querySelectorAll(n)]}function Up(e,n){var a,c,u;const i=Np(e),o=i.indexOf(document.activeElement);if(!n)(e===document.activeElement||!e.contains(document.activeElement))&&((a=i[0])==null||a.focus());else if(n==="first")(c=i[0])==null||c.focus();else if(n==="last")(u=i.at(-1))==null||u.focus();else{let f,m=o;const p=n==="next"?1:-1;do m+=p,f=i[m];while((!f||f.offsetParent==null)&&m<i.length&&m>=0);f?f.focus():Up(e,n==="next"?"first":"last")}}const Hp=["top","bottom"],Nw=["start","end","left","right"];function hu(e,n){let[i,o]=e.split(" ");return o||(o=Za(Hp,i)?"start":Za(Nw,i)?"top":"center"),{side:ig(i,n),align:ig(o,n)}}function ig(e,n){return e==="start"?n?"right":"left":e==="end"?n?"left":"right":e}function Bc(e){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.side],align:e.align}}function Fc(e){return{side:e.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[e.align]}}function ng(e){return{side:e.align,align:e.side}}function rg(e){return Za(Hp,e.side)?"y":"x"}class Ir{constructor(n){let{x:i,y:o,width:a,height:c}=n;this.x=i,this.y=o,this.width=a,this.height=c}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function og(e,n){return{x:{before:Math.max(0,n.left-e.left),after:Math.max(0,e.right-n.right)},y:{before:Math.max(0,n.top-e.top),after:Math.max(0,e.bottom-n.bottom)}}}function $p(e){const n=e.getBoundingClientRect(),i=getComputedStyle(e),o=i.transform;if(o){let a,c,u,f,m;if(o.startsWith("matrix3d("))a=o.slice(9,-1).split(/, /),c=+a[0],u=+a[5],f=+a[12],m=+a[13];else if(o.startsWith("matrix("))a=o.slice(7,-1).split(/, /),c=+a[0],u=+a[3],f=+a[4],m=+a[5];else return new Ir(n);const p=i.transformOrigin,v=n.x-f-(1-c)*parseFloat(p),y=n.y-m-(1-u)*parseFloat(p.slice(p.indexOf(" ")+1)),w=c?n.width/c:e.offsetWidth+1,C=u?n.height/u:e.offsetHeight+1;return new Ir({x:v,y,width:w,height:C})}else return new Ir(n)}function wo(e,n,i){if(typeof e.animate>"u")return{finished:Promise.resolve()};let o;try{o=e.animate(n,i)}catch{return{finished:Promise.resolve()}}return typeof o.finished>"u"&&(o.finished=new Promise(a=>{o.onfinish=()=>{a(o)}})),o}const Va=new WeakMap;function Uw(e,n){Object.keys(n).forEach(i=>{if(Vp(i)){const o=zp(i),a=Va.get(e);if(n[i]==null)a==null||a.forEach(c=>{const[u,f]=c;u===o&&(e.removeEventListener(o,f),a.delete(c))});else if(!a||![...a].some(c=>c[0]===o&&c[1]===n[i])){e.addEventListener(o,n[i]);const c=a||new Set;c.add([o,n[i]]),Va.has(e)||Va.set(e,c)}}else n[i]==null?e.removeAttribute(i):e.setAttribute(i,n[i])})}function Hw(e,n){Object.keys(n).forEach(i=>{if(Vp(i)){const o=zp(i),a=Va.get(e);a==null||a.forEach(c=>{const[u,f]=c;u===o&&(e.removeEventListener(o,f),a.delete(c))})}else e.removeAttribute(i)})}function $w(e,n){n=Array.isArray(n)?n.slice(0,-1).map(i=>`'${i}'`).join(", ")+` or '${n.at(-1)}'`:`'${n}'`}const Ka=.20689655172413793,Ww=e=>e>Ka**3?Math.cbrt(e):e/(3*Ka**2)+4/29,Gw=e=>e>Ka?e**3:3*Ka**2*(e-4/29);function Wp(e){const n=Ww,i=n(e[1]);return[116*i-16,500*(n(e[0]/.95047)-i),200*(i-n(e[2]/1.08883))]}function Gp(e){const n=Gw,i=(e[0]+16)/116;return[n(i+e[1]/500)*.95047,n(i),n(i-e[2]/200)*1.08883]}const jw=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Xw=e=>e<=.0031308?e*12.92:1.055*e**(1/2.4)-.055,Yw=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],qw=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function jp(e){const n=Array(3),i=Xw,o=jw;for(let a=0;a<3;++a)n[a]=Math.round(Br(i(o[a][0]*e[0]+o[a][1]*e[1]+o[a][2]*e[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function ph(e){let{r:n,g:i,b:o}=e;const a=[0,0,0],c=qw,u=Yw;n=c(n/255),i=c(i/255),o=c(o/255);for(let f=0;f<3;++f)a[f]=u[f][0]*n+u[f][1]*i+u[f][2]*o;return a}function ag(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}const lg=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Zw={rgb:(e,n,i,o)=>({r:e,g:n,b:i,a:o}),rgba:(e,n,i,o)=>({r:e,g:n,b:i,a:o}),hsl:(e,n,i,o)=>cg({h:e,s:n,l:i,a:o}),hsla:(e,n,i,o)=>cg({h:e,s:n,l:i,a:o}),hsv:(e,n,i,o)=>No({h:e,s:n,v:i,a:o}),hsva:(e,n,i,o)=>No({h:e,s:n,v:i,a:o})};function Jn(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&lg.test(e)){const{groups:n}=e.match(lg),{fn:i,values:o}=n,a=o.split(/,\s*/).map(c=>c.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(i)?parseFloat(c)/100:parseFloat(c));return Zw[i](...a)}else if(typeof e=="string"){let n=e.startsWith("#")?e.slice(1):e;return[3,4].includes(n.length)?n=n.split("").map(i=>i+i).join(""):[6,8].includes(n.length),Qw(n)}else if(typeof e=="object"){if(Mc(e,["r","g","b"]))return e;if(Mc(e,["h","s","l"]))return No(Xp(e));if(Mc(e,["h","s","v"]))return No(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function No(e){const{h:n,s:i,v:o,a}=e,c=f=>{const m=(f+n/60)%6;return o-o*i*Math.max(Math.min(m,4-m,1),0)},u=[c(5),c(3),c(1)].map(f=>Math.round(f*255));return{r:u[0],g:u[1],b:u[2],a}}function cg(e){return No(Xp(e))}function Xp(e){const{h:n,s:i,l:o,a}=e,c=o+i*Math.min(o,1-o),u=c===0?0:2-2*o/c;return{h:n,s:u,v:c,a}}function Ma(e){const n=Math.round(e).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function Kw(e){let{r:n,g:i,b:o,a}=e;return`#${[Ma(n),Ma(i),Ma(o),a!==void 0?Ma(Math.round(a*255)):""].join("")}`}function Qw(e){e=Jw(e);let[n,i,o,a]=Vw(e,2).map(c=>parseInt(c,16));return a=a===void 0?a:a/255,{r:n,g:i,b:o,a}}function Jw(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(n=>n+n).join("")),e.length!==6&&(e=eg(eg(e,6),8,"F")),e}function tx(e,n){const i=Wp(ph(e));return i[0]=i[0]+n*10,jp(Gp(i))}function ex(e,n){const i=Wp(ph(e));return i[0]=i[0]-n*10,jp(Gp(i))}function sx(e){const n=Jn(e);return ph(n)[1]}function bt(e,n){return i=>Object.keys(e).reduce((o,a)=>{const u=typeof e[a]=="object"&&e[a]!=null&&!Array.isArray(e[a])?e[a]:{type:e[a]};return i&&a in i?o[a]={...u,default:i[a]}:o[a]=u,n&&!o[a].source&&(o[a].source=n),o},{})}const ie=bt({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function Tn(e,n){let i;function o(){i=jo(),i.run(()=>n.length?n(()=>{i==null||i.stop(),o()}):n())}jt(e,a=>{a&&!i?o():a||(i==null||i.stop(),i=void 0)},{immediate:!0}),Ds(()=>{i==null||i.stop()})}const Uo=Symbol.for("vuetify:defaults");function ix(e){return Ft(e)}function _h(){const e=pe(Uo);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function an(e,n){const i=_h(),o=Ft(e),a=L(()=>{if(xt(n==null?void 0:n.disabled))return i.value;const u=xt(n==null?void 0:n.scoped),f=xt(n==null?void 0:n.reset),m=xt(n==null?void 0:n.root);let p=Qs(o.value,{prev:i.value});if(u)return p;if(f||m){const v=Number(f||1/0);for(let y=0;y<=v&&!(!p||!("prev"in p));y++)p=p.prev;return p&&typeof m=="string"&&m in p&&(p=Qs(Qs(p,{prev:p}),p[m])),p}return p.prev?Qs(p.prev,p):p});return ts(Uo,a),a}function nx(e,n){var i,o;return typeof((i=e.props)==null?void 0:i[n])<"u"||typeof((o=e.props)==null?void 0:o[ir(n)])<"u"}function rx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_h();const o=fs("useDefaults");if(n=n??o.type.name??o.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const a=L(()=>{var m;return(m=i.value)==null?void 0:m[e._as??n]}),c=new Proxy(e,{get(m,p){var y,w,C,E;const v=Reflect.get(m,p);return p==="class"||p==="style"?[(y=a.value)==null?void 0:y[p],v].filter(P=>P!=null):typeof p=="string"&&!nx(o.vnode,p)?((w=a.value)==null?void 0:w[p])??((E=(C=i.value)==null?void 0:C.global)==null?void 0:E[p])??v:v}}),u=Zt();nn(()=>{if(a.value){const m=Object.entries(a.value).filter(p=>{let[v]=p;return v.startsWith(v[0].toUpperCase())});m.length&&(u.value=Object.fromEntries(m))}});function f(){Tn(u,()=>{var m;an(Qs(((m=hx(Uo))==null?void 0:m.value)??{},u.value))})}return{props:c,provideSubDefaults:f}}function Gr(e){if(e._setup=e._setup??e.setup,!e.name)return e;if(e._setup){e.props=bt(e.props??{},e.name)();const n=Object.keys(e.props);e.filterProps=function(o){return gh(o,n,["class","style"])},e.props._as=String,e.setup=function(o,a){const c=_h();if(!c.value)return e._setup(o,a);const{props:u,provideSubDefaults:f}=rx(o,o._as??e.name,c),m=e._setup(u,a);return f(),m}}return e}function zt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(e?Gr:ii)(n)}function jr(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",i=arguments.length>2?arguments[2]:void 0;return zt()({name:i??sn(ei(e.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...ie()},setup(o,a){let{slots:c}=a;return()=>{var u;return zi(o.tag,{class:[e,o.class],style:o.style},(u=c.default)==null?void 0:u.call(c))}}})}function Yp(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const n=e.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const du="cubic-bezier(0.4, 0, 0.2, 1)",ox="cubic-bezier(0.0, 0, 0.2, 1)",ax="cubic-bezier(0.4, 0, 1, 1)";function fs(e,n){const i=uh();if(!i)throw new Error(`[Vuetify] ${e} ${n||"must be called from inside a setup function"}`);return i}function ln(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=fs(e).type;return ir((n==null?void 0:n.aliasName)||(n==null?void 0:n.name))}let qp=0,za=new WeakMap;function Ni(){const e=fs("getUid");if(za.has(e))return za.get(e);{const n=qp++;return za.set(e,n),n}}Ni.reset=()=>{qp=0,za=new WeakMap};function lx(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(n?cx(e):vh(e))return e;e=e.parentElement}return document.scrollingElement}function Qa(e,n){const i=[];if(n&&e&&!n.contains(e))return i;for(;e&&(vh(e)&&i.push(e),e!==n);)e=e.parentElement;return i}function vh(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return n.overflowY==="scroll"||n.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function cx(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(e);return["scroll","auto"].includes(n.overflowY)}const Ge=typeof window<"u",yh=Ge&&"IntersectionObserver"in window,ux=Ge&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),fu=Ge&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports("selector(:focus-visible)");function hx(e){const{provides:n}=fs("injectSelf");if(n&&e in n)return n[e]}function dx(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}function Qt(e){const n=fs("useRender");n.render=e}function bh(e){return mh(()=>{const n=[],i={};return e.value.background&&(ag(e.value.background)?i.backgroundColor=e.value.background:n.push(`bg-${e.value.background}`)),e.value.text&&(ag(e.value.text)?(i.color=e.value.text,i.caretColor=e.value.text):n.push(`text-${e.value.text}`)),{colorClasses:n,colorStyles:i}})}function en(e,n){const i=L(()=>({text:re(e)?e.value:n?e[n]:null})),{colorClasses:o,colorStyles:a}=bh(i);return{textColorClasses:o,textColorStyles:a}}function Li(e,n){const i=L(()=>({background:re(e)?e.value:n?e[n]:null})),{colorClasses:o,colorStyles:a}=bh(i);return{backgroundColorClasses:o,backgroundColorStyles:a}}const fx={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar"},gx={component:e=>zi(Kp,{...e,class:"mdi"})},Ae=[String,Function,Object,Array],gu=Symbol.for("vuetify:icons"),Tl=bt({icon:{type:Ae},tag:{type:String,required:!0}},"icon"),ug=zt()({name:"VComponentIcon",props:Tl(),setup(e,n){let{slots:i}=n;return()=>{const o=e.icon;return x(e.tag,null,{default:()=>{var a;return[e.icon?x(o,null,null):(a=i.default)==null?void 0:a.call(i)]}})}}}),Zp=Gr({name:"VSvgIcon",inheritAttrs:!1,props:Tl(),setup(e,n){let{attrs:i}=n;return()=>x(e.tag,ye(i,{style:null}),{default:()=>[x("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(e.icon)?e.icon.map(o=>Array.isArray(o)?x("path",{d:o[0],"fill-opacity":o[1]},null):x("path",{d:o},null)):x("path",{d:e.icon},null)])]})}});Gr({name:"VLigatureIcon",props:Tl(),setup(e){return()=>x(e.tag,null,{default:()=>[e.icon]})}});const Kp=Gr({name:"VClassIcon",props:Tl(),setup(e){return()=>x(e.tag,{class:e.icon},null)}}),mx={svg:{component:Zp},class:{component:Kp}};function px(e){return Qs({defaultSet:"mdi",sets:{...mx,mdi:gx},aliases:{...fx,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},e)}const _x=e=>{const n=pe(gu);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:L(()=>{var m;const o=xt(e);if(!o)return{component:ug};let a=o;if(typeof a=="string"&&(a=a.trim(),a.startsWith("$")&&(a=(m=n.aliases)==null?void 0:m[a.slice(1)])),!a)throw new Error(`Could not find aliased icon "${o}"`);if(Array.isArray(a))return{component:Zp,icon:a};if(typeof a!="string")return{component:ug,icon:a};const c=Object.keys(n.sets).find(p=>typeof a=="string"&&a.startsWith(`${p}:`)),u=c?a.slice(c.length+1):a;return{component:n.sets[c??n.defaultSet].component,icon:u}})}},vx=["x-small","small","default","large","x-large"],ar=bt({size:{type:[String,Number],default:"default"}},"size");function Xr(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();return mh(()=>{let i,o;return Za(vx,e.size)?i=`${n}--size-${e.size}`:e.size&&(o={width:Vt(e.size),height:Vt(e.size)}),{sizeClasses:i,sizeStyles:o}})}const Se=bt({tag:{type:String,default:"div"}},"tag"),Cr=2.4,hg=.2126729,dg=.7151522,fg=.072175,yx=.55,bx=.58,wx=.57,xx=.62,Ba=.03,gg=1.45,Cx=5e-4,Sx=1.25,Ex=1.25,mg=.078,pg=12.82051282051282,Fa=.06,_g=.001;function vg(e,n){const i=(e.r/255)**Cr,o=(e.g/255)**Cr,a=(e.b/255)**Cr,c=(n.r/255)**Cr,u=(n.g/255)**Cr,f=(n.b/255)**Cr;let m=i*hg+o*dg+a*fg,p=c*hg+u*dg+f*fg;if(m<=Ba&&(m+=(Ba-m)**gg),p<=Ba&&(p+=(Ba-p)**gg),Math.abs(p-m)<Cx)return 0;let v;if(p>m){const y=(p**yx-m**bx)*Sx;v=y<_g?0:y<mg?y-y*pg*Fa:y-Fa}else{const y=(p**xx-m**wx)*Ex;v=y>-_g?0:y>-mg?y-y*pg*Fa:y+Fa}return v*100}const Ja=Symbol.for("vuetify:theme"),Me=bt({theme:String},"theme"),mo={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function Ax(){var i,o;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mo;if(!e)return{...mo,isDisabled:!0};const n={};for(const[a,c]of Object.entries(e.themes??{})){const u=c.dark||a==="dark"?(i=mo.themes)==null?void 0:i.dark:(o=mo.themes)==null?void 0:o.light;n[a]=Qs(u,c)}return Qs(mo,{...e,themes:n})}function Tx(e){const n=ls(Ax(e)),i=Ft(n.defaultTheme),o=Ft(n.themes),a=L(()=>{const v={};for(const[y,w]of Object.entries(o.value)){const C=v[y]={...w,colors:{...w.colors}};if(n.variations)for(const E of n.variations.colors){const P=C.colors[E];if(P)for(const k of["lighten","darken"]){const R=k==="lighten"?tx:ex;for(const B of fh(n.variations[k],1))C.colors[`${E}-${k}-${B}`]=Kw(R(Jn(P),B))}}for(const E of Object.keys(C.colors)){if(/^on-[a-z]/.test(E)||C.colors[`on-${E}`])continue;const P=`on-${E}`,k=Jn(C.colors[E]),R=Math.abs(vg(Jn(0),k)),B=Math.abs(vg(Jn(16777215),k));C.colors[P]=B>Math.min(R,50)?"#fff":"#000"}}return v}),c=L(()=>a.value[i.value]),u=L(()=>{const v=[];c.value.dark&&Xn(v,":root",["color-scheme: dark"]),Xn(v,":root",yg(c.value));for(const[E,P]of Object.entries(a.value))Xn(v,`.v-theme--${E}`,[`color-scheme: ${P.dark?"dark":"normal"}`,...yg(P)]);const y=[],w=[],C=new Set(Object.values(a.value).flatMap(E=>Object.keys(E.colors)));for(const E of C)/^on-[a-z]/.test(E)?Xn(w,`.${E}`,[`color: rgb(var(--v-theme-${E})) !important`]):(Xn(y,`.bg-${E}`,[`--v-theme-overlay-multiplier: var(--v-theme-${E}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${E})) !important`,`color: rgb(var(--v-theme-on-${E})) !important`]),Xn(w,`.text-${E}`,[`color: rgb(var(--v-theme-${E})) !important`]),Xn(w,`.border-${E}`,[`--v-border-color: var(--v-theme-${E})`]));return v.push(...y,...w),v.map((E,P)=>P===0?E:`    ${E}`).join("")});function f(){return{style:[{children:u.value,id:"vuetify-theme-stylesheet",nonce:n.cspNonce||!1}]}}function m(v){if(n.isDisabled)return;const y=v._context.provides.usehead;if(y)if(y.push){const w=y.push(f);jt(u,()=>{w.patch(f)})}else Ge?(y.addHeadObjs(L(f)),nn(()=>y.updateDOM())):y.addHeadObjs(f());else{let C=function(){if(typeof document<"u"&&!w){const E=document.createElement("style");E.type="text/css",E.id="vuetify-theme-stylesheet",n.cspNonce&&E.setAttribute("nonce",n.cspNonce),w=E,document.head.appendChild(w)}w&&(w.innerHTML=u.value)},w=Ge?document.getElementById("vuetify-theme-stylesheet"):null;jt(u,C,{immediate:!0})}}const p=L(()=>n.isDisabled?void 0:`v-theme--${i.value}`);return{install:m,isDisabled:n.isDisabled,name:i,themes:o,current:c,computedThemes:a,themeClasses:p,styles:u,global:{name:i,current:c}}}function He(e){fs("provideTheme");const n=pe(Ja,null);if(!n)throw new Error("Could not find Vuetify theme injection");const i=L(()=>e.theme??(n==null?void 0:n.name.value)),o=L(()=>n.isDisabled?void 0:`v-theme--${i.value}`),a={...n,name:i,themeClasses:o};return ts(Ja,a),a}function Xn(e,n,i){e.push(`${n} {
`,...i.map(o=>`  ${o};
`),`}
`)}function yg(e){const n=e.dark?2:1,i=e.dark?1:2,o=[];for(const[a,c]of Object.entries(e.colors)){const u=Jn(c);o.push(`--v-theme-${a}: ${u.r},${u.g},${u.b}`),a.startsWith("on-")||o.push(`--v-theme-${a}-overlay-multiplier: ${sx(c)>.18?n:i}`)}for(const[a,c]of Object.entries(e.variables)){const u=typeof c=="string"&&c.startsWith("#")?Jn(c):void 0,f=u?`${u.r}, ${u.g}, ${u.b}`:void 0;o.push(`--v-${a}: ${f??c}`)}return o}const Px=bt({color:String,start:Boolean,end:Boolean,icon:Ae,...ie(),...ar(),...Se({tag:"i"}),...Me()},"VIcon"),We=zt()({name:"VIcon",props:Px(),setup(e,n){let{attrs:i,slots:o}=n;const a=Ft(),{themeClasses:c}=He(e),{iconData:u}=_x(L(()=>a.value||e.icon)),{sizeClasses:f}=Xr(e),{textColorClasses:m,textColorStyles:p}=en(Lt(e,"color"));return Qt(()=>{var y,w;const v=(y=o.default)==null?void 0:y.call(o);return v&&(a.value=(w=Op(v).filter(C=>C.type===qo&&C.children&&typeof C.children=="string")[0])==null?void 0:w.children),x(u.value.component,{tag:e.tag,icon:u.value.icon,class:["v-icon","notranslate",c.value,f.value,m.value,{"v-icon--clickable":!!i.onClick,"v-icon--start":e.start,"v-icon--end":e.end},e.class],style:[f.value?void 0:{fontSize:Vt(e.size),height:Vt(e.size),width:Vt(e.size)},p.value,e.style],role:i.onClick?"button":void 0,"aria-hidden":!i.onClick},{default:()=>[v]})}),{}}}),kx={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{ok:"OK",cancel:"Cancel",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},Ix={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function es(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:y=>y,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:y=>y;const c=fs("useProxiedModel"),u=Ft(e[n]!==void 0?e[n]:i),f=ir(n),p=L(f!==n?()=>{var y,w,C,E;return e[n],!!(((y=c.vnode.props)!=null&&y.hasOwnProperty(n)||(w=c.vnode.props)!=null&&w.hasOwnProperty(f))&&((C=c.vnode.props)!=null&&C.hasOwnProperty(`onUpdate:${n}`)||(E=c.vnode.props)!=null&&E.hasOwnProperty(`onUpdate:${f}`)))}:()=>{var y,w;return e[n],!!((y=c.vnode.props)!=null&&y.hasOwnProperty(n)&&((w=c.vnode.props)!=null&&w.hasOwnProperty(`onUpdate:${n}`)))});Tn(()=>!p.value,()=>{jt(()=>e[n],y=>{u.value=y})});const v=L({get(){const y=e[n];return o(p.value?y:u.value)},set(y){const w=a(y),C=Kt(p.value?e[n]:u.value);C===w||o(C)===y||(u.value=w,c==null||c.emit(`update:${n}`,w))}});return Object.defineProperty(v,"externalValue",{get:()=>p.value?e[n]:u.value}),v}const bg="$vuetify.",wg=(e,n)=>e.replace(/\{(\d+)\}/g,(i,o)=>String(n[+o])),Qp=(e,n,i)=>function(o){for(var a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];if(!o.startsWith(bg))return wg(o,c);const f=o.replace(bg,""),m=e.value&&i.value[e.value],p=n.value&&i.value[n.value];let v=lu(m,f,null);return v||(`${o}${e.value}`,v=lu(p,f,null)),v||(v=o),typeof v!="string"&&(v=o),wg(v,c)};function Jp(e,n){return(i,o)=>new Intl.NumberFormat([e.value,n.value],o).format(i)}function Dc(e,n,i){const o=es(e,n,e[n]??i.value);return o.value=e[n]??i.value,jt(i,a=>{e[n]==null&&(o.value=i.value)}),o}function t_(e){return n=>{const i=Dc(n,"locale",e.current),o=Dc(n,"fallback",e.fallback),a=Dc(n,"messages",e.messages);return{name:"vuetify",current:i,fallback:o,messages:a,t:Qp(i,o,a),n:Jp(i,o),provide:t_({current:i,fallback:o,messages:a})}}}function Rx(e){const n=Zt((e==null?void 0:e.locale)??"en"),i=Zt((e==null?void 0:e.fallback)??"en"),o=Ft({en:kx,...e==null?void 0:e.messages});return{name:"vuetify",current:n,fallback:i,messages:o,t:Qp(n,i,o),n:Jp(n,i),provide:t_({current:n,fallback:i,messages:o})}}const tl=Symbol.for("vuetify:locale");function Mx(e){return e.name!=null}function Bx(e){const n=e!=null&&e.adapter&&Mx(e==null?void 0:e.adapter)?e==null?void 0:e.adapter:Rx(e),i=Fx(n,e);return{...n,...i}}function wh(){const e=pe(tl);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e}function Fx(e,n){const i=Ft((n==null?void 0:n.rtl)??Ix),o=L(()=>i.value[e.current.value]??!1);return{isRtl:o,rtl:i,rtlClasses:L(()=>`v-locale--is-${o.value?"rtl":"ltr"}`)}}function js(){const e=pe(tl);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:e.isRtl,rtlClasses:e.rtlClasses}}function Dx(e){const{t:n}=wh();function i(o){let{name:a}=o;const c={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[a],u=e[`onClick:${a}`],f=u&&c?n(`$vuetify.input.${c}`,e.label??""):void 0;return x(We,{icon:e[`${a}Icon`],"aria-label":f,onClick:u},null)}return{InputIcon:i}}const Lx=bt({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function Xs(e,n,i){return zt()({name:e,props:Lx({mode:i,origin:n}),setup(o,a){let{slots:c}=a;const u={onBeforeEnter(f){o.origin&&(f.style.transformOrigin=o.origin)},onLeave(f){if(o.leaveAbsolute){const{offsetTop:m,offsetLeft:p,offsetWidth:v,offsetHeight:y}=f;f._transitionInitialStyles={position:f.style.position,top:f.style.top,left:f.style.left,width:f.style.width,height:f.style.height},f.style.position="absolute",f.style.top=`${m}px`,f.style.left=`${p}px`,f.style.width=`${v}px`,f.style.height=`${y}px`}o.hideOnLeave&&f.style.setProperty("display","none","important")},onAfterLeave(f){if(o.leaveAbsolute&&(f!=null&&f._transitionInitialStyles)){const{position:m,top:p,left:v,width:y,height:w}=f._transitionInitialStyles;delete f._transitionInitialStyles,f.style.position=m||"",f.style.top=p||"",f.style.left=v||"",f.style.width=y||"",f.style.height=w||""}}};return()=>{const f=o.group?bw:tn;return zi(f,{name:o.disabled?"":e,css:!o.disabled,...o.group?void 0:{mode:o.mode},...o.disabled?{}:u},c.default)}}})}function e_(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return zt()({name:e,props:{mode:{type:String,default:i},disabled:Boolean},setup(o,a){let{slots:c}=a;return()=>zi(tn,{name:o.disabled?"":e,css:!o.disabled,...o.disabled?{}:n},c.default)}})}function s_(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",o=ei(`offset-${i}`);return{onBeforeEnter(u){u._parent=u.parentNode,u._initialStyle={transition:u.style.transition,overflow:u.style.overflow,[i]:u.style[i]}},onEnter(u){const f=u._initialStyle;u.style.setProperty("transition","none","important"),u.style.overflow="hidden";const m=`${u[o]}px`;u.style[i]="0",u.offsetHeight,u.style.transition=f.transition,e&&u._parent&&u._parent.classList.add(e),requestAnimationFrame(()=>{u.style[i]=m})},onAfterEnter:c,onEnterCancelled:c,onLeave(u){u._initialStyle={transition:"",overflow:u.style.overflow,[i]:u.style[i]},u.style.overflow="hidden",u.style[i]=`${u[o]}px`,u.offsetHeight,requestAnimationFrame(()=>u.style[i]="0")},onAfterLeave:a,onLeaveCancelled:a};function a(u){e&&u._parent&&u._parent.classList.remove(e),c(u)}function c(u){const f=u._initialStyle[i];u.style.overflow=u._initialStyle.overflow,f!=null&&(u.style[i]=f),delete u._initialStyle}}const Ox=bt({target:Object},"v-dialog-transition"),Vx=zt()({name:"VDialogTransition",props:Ox(),setup(e,n){let{slots:i}=n;const o={onBeforeEnter(a){a.style.pointerEvents="none",a.style.visibility="hidden"},async onEnter(a,c){var w;await new Promise(C=>requestAnimationFrame(C)),await new Promise(C=>requestAnimationFrame(C)),a.style.visibility="";const{x:u,y:f,sx:m,sy:p,speed:v}=Cg(e.target,a),y=wo(a,[{transform:`translate(${u}px, ${f}px) scale(${m}, ${p})`,opacity:0},{}],{duration:225*v,easing:ox});(w=xg(a))==null||w.forEach(C=>{wo(C,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*v,easing:du})}),y.finished.then(()=>c())},onAfterEnter(a){a.style.removeProperty("pointer-events")},onBeforeLeave(a){a.style.pointerEvents="none"},async onLeave(a,c){var w;await new Promise(C=>requestAnimationFrame(C));const{x:u,y:f,sx:m,sy:p,speed:v}=Cg(e.target,a);wo(a,[{},{transform:`translate(${u}px, ${f}px) scale(${m}, ${p})`,opacity:0}],{duration:125*v,easing:ax}).finished.then(()=>c()),(w=xg(a))==null||w.forEach(C=>{wo(C,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*v,easing:du})})},onAfterLeave(a){a.style.removeProperty("pointer-events")}};return()=>e.target?x(tn,ye({name:"dialog-transition"},o,{css:!1}),i):x(tn,{name:"dialog-transition"},i)}});function xg(e){var i;const n=(i=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:i.children;return n&&[...n]}function Cg(e,n){const i=e.getBoundingClientRect(),o=$p(n),[a,c]=getComputedStyle(n).transformOrigin.split(" ").map(R=>parseFloat(R)),[u,f]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let m=i.left+i.width/2;u==="left"||f==="left"?m-=i.width/2:(u==="right"||f==="right")&&(m+=i.width/2);let p=i.top+i.height/2;u==="top"||f==="top"?p-=i.height/2:(u==="bottom"||f==="bottom")&&(p+=i.height/2);const v=i.width/o.width,y=i.height/o.height,w=Math.max(1,v,y),C=v/w||0,E=y/w||0,P=o.width*o.height/(window.innerWidth*window.innerHeight),k=P>.12?Math.min(1.5,(P-.12)*10+1):1;return{x:m-(a+o.left),y:p-(c+o.top),sx:C,sy:E,speed:k}}Xs("fab-transition","center center","out-in");Xs("dialog-bottom-transition");Xs("dialog-top-transition");Xs("fade-transition");const zx=Xs("scale-transition");Xs("scroll-x-transition");Xs("scroll-x-reverse-transition");Xs("scroll-y-transition");Xs("scroll-y-reverse-transition");Xs("slide-x-transition");Xs("slide-x-reverse-transition");const Nx=Xs("slide-y-transition");Xs("slide-y-reverse-transition");const xh=e_("expand-transition",s_()),Ux=e_("expand-x-transition",s_("",!0)),Ch=bt({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),xn=(e,n)=>{let{slots:i}=n;const{transition:o,disabled:a,...c}=e,{component:u=tn,...f}=typeof o=="object"?o:{};return zi(u,ye(typeof o=="string"?{name:a?"":o}:f,c,{disabled:a}),i)},Hx=bt({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...ie(),...Ch({transition:{component:Nx,leaveAbsolute:!0,group:!0}})},"VMessages"),$x=zt()({name:"VMessages",props:Hx(),setup(e,n){let{slots:i}=n;const o=L(()=>sr(e.messages)),{textColorClasses:a,textColorStyles:c}=en(L(()=>e.color));return Qt(()=>x(xn,{transition:e.transition,tag:"div",class:["v-messages",a.value,e.class],style:[c.value,e.style],role:"alert","aria-live":"polite"},{default:()=>[e.active&&o.value.map((u,f)=>x("div",{class:"v-messages__message",key:`${f}-${o.value}`},[i.message?i.message({message:u}):u]))]})),{}}}),Wx=[null,"default","comfortable","compact"],ni=bt({density:{type:String,default:"default",validator:e=>Wx.includes(e)}},"density");function vi(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();return{densityClasses:L(()=>`${n}--density-${e.density}`)}}const Sh=bt({focused:Boolean,"onUpdate:focused":rr()},"focus");function Eh(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();const i=es(e,"focused"),o=L(()=>({[`${n}--focused`]:i.value}));function a(){i.value=!0}function c(){i.value=!1}return{focusClasses:o,isFocused:i,focus:a,blur:c}}const Gx=Symbol.for("vuetify:form");function jx(){return pe(Gx,null)}const Xx=bt({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...Sh()},"validation");function Yx(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ni();const o=es(e,"modelValue"),a=L(()=>e.validationValue===void 0?o.value:e.validationValue),c=jx(),u=Ft([]),f=Zt(!0),m=L(()=>!!(sr(o.value===""?null:o.value).length||sr(a.value===""?null:a.value).length)),p=L(()=>!!(e.disabled??(c==null?void 0:c.isDisabled.value))),v=L(()=>!!(e.readonly??(c==null?void 0:c.isReadonly.value))),y=L(()=>e.errorMessages.length?sr(e.errorMessages).slice(0,Math.max(0,+e.maxErrors)):u.value),w=L(()=>{let W=(e.validateOn??(c==null?void 0:c.validateOn.value))||"input";W==="lazy"&&(W="input lazy");const G=new Set((W==null?void 0:W.split(" "))??[]);return{blur:G.has("blur")||G.has("input"),input:G.has("input"),submit:G.has("submit"),lazy:G.has("lazy")}}),C=L(()=>e.error||e.errorMessages.length?!1:e.rules.length?f.value?u.value.length||w.value.lazy?null:!0:!u.value.length:!0),E=Zt(!1),P=L(()=>({[`${n}--error`]:C.value===!1,[`${n}--dirty`]:m.value,[`${n}--disabled`]:p.value,[`${n}--readonly`]:v.value})),k=L(()=>e.name??xt(i));ih(()=>{c==null||c.register({id:k.value,validate:O,reset:R,resetValidation:B})}),_i(()=>{c==null||c.unregister(k.value)}),Vi(async()=>{w.value.lazy||await O(!0),c==null||c.update(k.value,C.value,y.value)}),Tn(()=>w.value.input,()=>{jt(a,()=>{if(a.value!=null)O();else if(e.focused){const W=jt(()=>e.focused,G=>{G||O(),W()})}})}),Tn(()=>w.value.blur,()=>{jt(()=>e.focused,W=>{W||O()})}),jt(C,()=>{c==null||c.update(k.value,C.value,y.value)});function R(){o.value=null,ws(B)}function B(){f.value=!0,w.value.lazy?u.value=[]:O(!0)}async function O(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const G=[];E.value=!0;for(const X of e.rules){if(G.length>=+(e.maxErrors??1))break;const N=await(typeof X=="function"?X:()=>X)(a.value);if(N!==!0){if(N!==!1&&typeof N!="string"){console.warn(`${N} is not a valid value. Rule functions must return boolean true or a string.`);continue}G.push(N||"")}}return u.value=G,E.value=!1,f.value=W,u.value}return{errorMessages:y,isDirty:m,isDisabled:p,isReadonly:v,isPristine:f,isValid:C,isValidating:E,reset:R,resetValidation:B,validate:O,validationClasses:P}}const Pl=bt({id:String,appendIcon:Ae,centerAffix:{type:Boolean,default:!0},prependIcon:Ae,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":rr(),"onClick:append":rr(),...ie(),...ni(),...Xx()},"VInput"),Fr=zt()({name:"VInput",props:{...Pl()},emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:i,slots:o,emit:a}=n;const{densityClasses:c}=vi(e),{rtlClasses:u}=js(),{InputIcon:f}=Dx(e),m=Ni(),p=L(()=>e.id||`input-${m}`),v=L(()=>`${p.value}-messages`),{errorMessages:y,isDirty:w,isDisabled:C,isReadonly:E,isPristine:P,isValid:k,isValidating:R,reset:B,resetValidation:O,validate:W,validationClasses:G}=Yx(e,"v-input",p),X=L(()=>({id:p,messagesId:v,isDirty:w,isDisabled:C,isReadonly:E,isPristine:P,isValid:k,isValidating:R,reset:B,resetValidation:O,validate:W})),st=L(()=>{var N;return(N=e.errorMessages)!=null&&N.length||!P.value&&y.value.length?y.value:e.hint&&(e.persistentHint||e.focused)?e.hint:e.messages});return Qt(()=>{var U,q,Q,rt;const N=!!(o.prepend||e.prependIcon),$=!!(o.append||e.appendIcon),Y=st.value.length>0,it=!e.hideDetails||e.hideDetails==="auto"&&(Y||!!o.details);return x("div",{class:["v-input",`v-input--${e.direction}`,{"v-input--center-affix":e.centerAffix},c.value,u.value,G.value,e.class],style:e.style},[N&&x("div",{key:"prepend",class:"v-input__prepend"},[(U=o.prepend)==null?void 0:U.call(o,X.value),e.prependIcon&&x(f,{key:"prepend-icon",name:"prepend"},null)]),o.default&&x("div",{class:"v-input__control"},[(q=o.default)==null?void 0:q.call(o,X.value)]),$&&x("div",{key:"append",class:"v-input__append"},[e.appendIcon&&x(f,{key:"append-icon",name:"append"},null),(Q=o.append)==null?void 0:Q.call(o,X.value)]),it&&x("div",{class:"v-input__details"},[x($x,{id:v.value,active:Y,messages:st.value},{message:o.message}),(rt=o.details)==null?void 0:rt.call(o,X.value)])])}),{reset:B,resetValidation:O,validate:W}}});function i_(e,n){const i=Ft(),o=Zt(!1);if(yh){const a=new IntersectionObserver(c=>{e==null||e(c,a),o.value=!!c.find(u=>u.isIntersecting)},n);_i(()=>{a.disconnect()}),jt(i,(c,u)=>{u&&(a.unobserve(u),o.value=!1),c&&a.observe(c)},{flush:"post"})}return{intersectionRef:i,isIntersecting:o}}function n_(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const i=Ft(),o=Ft();if(Ge){const a=new ResizeObserver(c=>{e==null||e(c,a),c.length&&(n==="content"?o.value=c[0].contentRect:o.value=c[0].target.getBoundingClientRect())});_i(()=>{a.disconnect()}),jt(i,(c,u)=>{u&&(a.unobserve(uu(u)),o.value=void 0),c&&a.observe(uu(c))},{flush:"post"})}return{resizeRef:i,contentRect:Xo(o)}}const qx=bt({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...ie(),...ar(),...Se({tag:"div"}),...Me()},"VProgressCircular"),r_=zt()({name:"VProgressCircular",props:qx(),setup(e,n){let{slots:i}=n;const o=20,a=2*Math.PI*o,c=Ft(),{themeClasses:u}=He(e),{sizeClasses:f,sizeStyles:m}=Xr(e),{textColorClasses:p,textColorStyles:v}=en(Lt(e,"color")),{textColorClasses:y,textColorStyles:w}=en(Lt(e,"bgColor")),{intersectionRef:C,isIntersecting:E}=i_(),{resizeRef:P,contentRect:k}=n_(),R=L(()=>Math.max(0,Math.min(100,parseFloat(e.modelValue)))),B=L(()=>Number(e.width)),O=L(()=>m.value?Number(e.size):k.value?k.value.width:Math.max(B.value,32)),W=L(()=>o/(1-B.value/O.value)*2),G=L(()=>B.value/O.value*W.value),X=L(()=>Vt((100-R.value)/100*a));return nn(()=>{C.value=c.value,P.value=c.value}),Qt(()=>x(e.tag,{ref:c,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":E.value,"v-progress-circular--disable-shrink":e.indeterminate==="disable-shrink"},u.value,f.value,p.value,e.class],style:[m.value,v.value,e.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:R.value},{default:()=>[x("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${W.value} ${W.value}`},[x("circle",{class:["v-progress-circular__underlay",y.value],style:w.value,fill:"transparent",cx:"50%",cy:"50%",r:o,"stroke-width":G.value,"stroke-dasharray":a,"stroke-dashoffset":0},null),x("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:o,"stroke-width":G.value,"stroke-dasharray":a,"stroke-dashoffset":X.value},null)]),i.default&&x("div",{class:"v-progress-circular__content"},[i.default({value:R.value})])]})),{}}});const Zx=bt({text:String,clickable:Boolean,...ie(),...Me()},"VLabel"),Ah=zt()({name:"VLabel",props:Zx(),setup(e,n){let{slots:i}=n;return Qt(()=>{var o;return x("label",{class:["v-label",{"v-label--clickable":e.clickable},e.class],style:e.style},[e.text,(o=i.default)==null?void 0:o.call(i)])}),{}}});const o_=Symbol.for("vuetify:selection-control-group"),a_=bt({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:Ae,trueIcon:Ae,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:Al},...ie(),...ni(),...Me()},"SelectionControlGroup"),Kx=bt({...a_({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup");zt()({name:"VSelectionControlGroup",props:Kx(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const o=es(e,"modelValue"),a=Ni(),c=L(()=>e.id||`v-selection-control-group-${a}`),u=L(()=>e.name||c.value),f=new Set;return ts(o_,{modelValue:o,forceUpdate:()=>{f.forEach(m=>m())},onForceUpdate:m=>{f.add(m),Ds(()=>{f.delete(m)})}}),an({[e.defaultsTarget]:{color:Lt(e,"color"),disabled:Lt(e,"disabled"),density:Lt(e,"density"),error:Lt(e,"error"),inline:Lt(e,"inline"),modelValue:o,multiple:L(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),name:u,falseIcon:Lt(e,"falseIcon"),trueIcon:Lt(e,"trueIcon"),readonly:Lt(e,"readonly"),ripple:Lt(e,"ripple"),type:Lt(e,"type"),valueComparator:Lt(e,"valueComparator")}}),Qt(()=>{var m;return x("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":e.inline},e.class],style:e.style,role:e.type==="radio"?"radiogroup":void 0},[(m=i.default)==null?void 0:m.call(i)])}),{}}});const mu=Symbol("rippleStop"),Qx=80;function Sg(e,n){e.style.transform=n,e.style.webkitTransform=n}function pu(e){return e.constructor.name==="TouchEvent"}function l_(e){return e.constructor.name==="KeyboardEvent"}const Jx=function(e,n){var y;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=0,a=0;if(!l_(e)){const w=n.getBoundingClientRect(),C=pu(e)?e.touches[e.touches.length-1]:e;o=C.clientX-w.left,a=C.clientY-w.top}let c=0,u=.3;(y=n._ripple)!=null&&y.circle?(u=.15,c=n.clientWidth/2,c=i.center?c:c+Math.sqrt((o-c)**2+(a-c)**2)/4):c=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const f=`${(n.clientWidth-c*2)/2}px`,m=`${(n.clientHeight-c*2)/2}px`,p=i.center?f:`${o-c}px`,v=i.center?m:`${a-c}px`;return{radius:c,scale:u,x:p,y:v,centerX:f,centerY:m}},el={show(e,n){var C;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((C=n==null?void 0:n._ripple)!=null&&C.enabled))return;const o=document.createElement("span"),a=document.createElement("span");o.appendChild(a),o.className="v-ripple__container",i.class&&(o.className+=` ${i.class}`);const{radius:c,scale:u,x:f,y:m,centerX:p,centerY:v}=Jx(e,n,i),y=`${c*2}px`;a.className="v-ripple__animation",a.style.width=y,a.style.height=y,n.appendChild(o);const w=window.getComputedStyle(n);w&&w.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),a.classList.add("v-ripple__animation--enter"),a.classList.add("v-ripple__animation--visible"),Sg(a,`translate(${f}, ${m}) scale3d(${u},${u},${u})`),a.dataset.activated=String(performance.now()),setTimeout(()=>{a.classList.remove("v-ripple__animation--enter"),a.classList.add("v-ripple__animation--in"),Sg(a,`translate(${p}, ${v}) scale3d(1,1,1)`)},0)},hide(e){var c;if(!((c=e==null?void 0:e._ripple)!=null&&c.enabled))return;const n=e.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const i=n[n.length-1];if(i.dataset.isHiding)return;i.dataset.isHiding="true";const o=performance.now()-Number(i.dataset.activated),a=Math.max(250-o,0);setTimeout(()=>{i.classList.remove("v-ripple__animation--in"),i.classList.add("v-ripple__animation--out"),setTimeout(()=>{var f;e.getElementsByClassName("v-ripple__animation").length===1&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),((f=i.parentNode)==null?void 0:f.parentNode)===e&&e.removeChild(i.parentNode)},300)},a)}};function c_(e){return typeof e>"u"||!!e}function Ho(e){const n={},i=e.currentTarget;if(!(!(i!=null&&i._ripple)||i._ripple.touched||e[mu])){if(e[mu]=!0,pu(e))i._ripple.touched=!0,i._ripple.isTouch=!0;else if(i._ripple.isTouch)return;if(n.center=i._ripple.centered||l_(e),i._ripple.class&&(n.class=i._ripple.class),pu(e)){if(i._ripple.showTimerCommit)return;i._ripple.showTimerCommit=()=>{el.show(e,i,n)},i._ripple.showTimer=window.setTimeout(()=>{var o;(o=i==null?void 0:i._ripple)!=null&&o.showTimerCommit&&(i._ripple.showTimerCommit(),i._ripple.showTimerCommit=null)},Qx)}else el.show(e,i,n)}}function Eg(e){e[mu]=!0}function Gs(e){const n=e.currentTarget;if(n!=null&&n._ripple){if(window.clearTimeout(n._ripple.showTimer),e.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{Gs(e)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),el.hide(n)}}function u_(e){const n=e.currentTarget;n!=null&&n._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let $o=!1;function h_(e){!$o&&(e.keyCode===Jf.enter||e.keyCode===Jf.space)&&($o=!0,Ho(e))}function d_(e){$o=!1,Gs(e)}function f_(e){$o&&($o=!1,Gs(e))}function g_(e,n,i){const{value:o,modifiers:a}=n,c=c_(o);if(c||el.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=c,e._ripple.centered=a.center,e._ripple.circle=a.circle,cu(o)&&o.class&&(e._ripple.class=o.class),c&&!i){if(a.stop){e.addEventListener("touchstart",Eg,{passive:!0}),e.addEventListener("mousedown",Eg);return}e.addEventListener("touchstart",Ho,{passive:!0}),e.addEventListener("touchend",Gs,{passive:!0}),e.addEventListener("touchmove",u_,{passive:!0}),e.addEventListener("touchcancel",Gs),e.addEventListener("mousedown",Ho),e.addEventListener("mouseup",Gs),e.addEventListener("mouseleave",Gs),e.addEventListener("keydown",h_),e.addEventListener("keyup",d_),e.addEventListener("blur",f_),e.addEventListener("dragstart",Gs,{passive:!0})}else!c&&i&&m_(e)}function m_(e){e.removeEventListener("mousedown",Ho),e.removeEventListener("touchstart",Ho),e.removeEventListener("touchend",Gs),e.removeEventListener("touchmove",u_),e.removeEventListener("touchcancel",Gs),e.removeEventListener("mouseup",Gs),e.removeEventListener("mouseleave",Gs),e.removeEventListener("keydown",h_),e.removeEventListener("keyup",d_),e.removeEventListener("dragstart",Gs),e.removeEventListener("blur",f_)}function tC(e,n){g_(e,n,!1)}function eC(e){delete e._ripple,m_(e)}function sC(e,n){if(n.value===n.oldValue)return;const i=c_(n.oldValue);g_(e,n,i)}const Yr={mounted:tC,unmounted:eC,updated:sC},p_=bt({label:String,trueValue:null,falseValue:null,value:null,...ie(),...a_()},"VSelectionControl");function iC(e){const n=pe(o_,void 0),{densityClasses:i}=vi(e),o=es(e,"modelValue"),a=L(()=>e.trueValue!==void 0?e.trueValue:e.value!==void 0?e.value:!0),c=L(()=>e.falseValue!==void 0?e.falseValue:!1),u=L(()=>!!e.multiple||e.multiple==null&&Array.isArray(o.value)),f=L({get(){const y=n?n.modelValue.value:o.value;return u.value?y.some(w=>e.valueComparator(w,a.value)):e.valueComparator(y,a.value)},set(y){if(e.readonly)return;const w=y?a.value:c.value;let C=w;u.value&&(C=y?[...sr(o.value),w]:sr(o.value).filter(E=>!e.valueComparator(E,a.value))),n?n.modelValue.value=C:o.value=C}}),{textColorClasses:m,textColorStyles:p}=en(L(()=>f.value&&!e.error&&!e.disabled?e.color:void 0)),v=L(()=>f.value?e.trueIcon:e.falseIcon);return{group:n,densityClasses:i,trueValue:a,falseValue:c,model:f,textColorClasses:m,textColorStyles:p,icon:v}}const Ag=zt()({name:"VSelectionControl",directives:{Ripple:Yr},inheritAttrs:!1,props:p_(),emits:{"update:modelValue":e=>!0},setup(e,n){let{attrs:i,slots:o}=n;const{group:a,densityClasses:c,icon:u,model:f,textColorClasses:m,textColorStyles:p,trueValue:v}=iC(e),y=Ni(),w=L(()=>e.id||`input-${y}`),C=Zt(!1),E=Zt(!1),P=Ft();a==null||a.onForceUpdate(()=>{P.value&&(P.value.checked=f.value)});function k(O){C.value=!0,(!fu||fu&&O.target.matches(":focus-visible"))&&(E.value=!0)}function R(){C.value=!1,E.value=!1}function B(O){e.readonly&&a&&ws(()=>a.forceUpdate()),f.value=O.target.checked}return Qt(()=>{var X,st;const O=o.label?o.label({label:e.label,props:{for:w.value}}):e.label,[W,G]=Lp(i);return x("div",ye({class:["v-selection-control",{"v-selection-control--dirty":f.value,"v-selection-control--disabled":e.disabled,"v-selection-control--error":e.error,"v-selection-control--focused":C.value,"v-selection-control--focus-visible":E.value,"v-selection-control--inline":e.inline},c.value,e.class]},W,{style:e.style}),[x("div",{class:["v-selection-control__wrapper",m.value],style:p.value},[(X=o.default)==null?void 0:X.call(o),ys(x("div",{class:["v-selection-control__input"]},[u.value&&x(We,{key:"icon",icon:u.value},null),x("input",ye({ref:P,checked:f.value,disabled:!!(e.readonly||e.disabled),id:w.value,onBlur:R,onFocus:k,onInput:B,"aria-disabled":!!(e.readonly||e.disabled),type:e.type,value:v.value,name:e.name,"aria-checked":e.type==="checkbox"?f.value:void 0},G),null),(st=o.input)==null?void 0:st.call(o,{model:f,textColorClasses:m,textColorStyles:p,props:{onFocus:k,onBlur:R,id:w.value}})]),[[Di("ripple"),e.ripple&&[!e.disabled&&!e.readonly,null,["center","circle"]]]])]),O&&x(Ah,{for:w.value,clickable:!0},{default:()=>[O]})])}),{isFocused:C,input:P}}});const Tg={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},Zo=bt({location:String},"location");function Ko(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;const{isRtl:o}=js();return{locationStyles:L(()=>{if(!e.location)return{};const{side:c,align:u}=hu(e.location.split(" ").length>1?e.location:`${e.location} center`,o.value);function f(p){return i?i(p):0}const m={};return c!=="center"&&(n?m[Tg[c]]=`calc(100% - ${f(c)}px)`:m[c]=0),u!=="center"?n?m[Tg[u]]=`calc(100% - ${f(u)}px)`:m[u]=0:(c==="center"?m.top=m.left="50%":m[{top:"left",bottom:"left",left:"top",right:"top"}[c]]="50%",m.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[c]),m})}}const Os=bt({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function Ys(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();return{roundedClasses:L(()=>{const o=re(e)?e.value:e.rounded,a=[];if(o===!0||o==="")a.push(`${n}--rounded`);else if(typeof o=="string"||o===0)for(const c of String(o).split(" "))a.push(`rounded-${c}`);return a})}}const nC=bt({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...ie(),...Zo({location:"top"}),...Os(),...Se(),...Me()},"VProgressLinear"),rC=zt()({name:"VProgressLinear",props:nC(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const o=es(e,"modelValue"),{isRtl:a,rtlClasses:c}=js(),{themeClasses:u}=He(e),{locationStyles:f}=Ko(e),{textColorClasses:m,textColorStyles:p}=en(e,"color"),{backgroundColorClasses:v,backgroundColorStyles:y}=Li(L(()=>e.bgColor||e.color)),{backgroundColorClasses:w,backgroundColorStyles:C}=Li(e,"color"),{roundedClasses:E}=Ys(e),{intersectionRef:P,isIntersecting:k}=i_(),R=L(()=>parseInt(e.max,10)),B=L(()=>parseInt(e.height,10)),O=L(()=>parseFloat(e.bufferValue)/R.value*100),W=L(()=>parseFloat(o.value)/R.value*100),G=L(()=>a.value!==e.reverse),X=L(()=>e.indeterminate?"fade-transition":"slide-x-transition"),st=L(()=>e.bgOpacity==null?e.bgOpacity:parseFloat(e.bgOpacity));function N($){if(!P.value)return;const{left:Y,right:it,width:U}=P.value.getBoundingClientRect(),q=G.value?U-$.clientX+(it-U):$.clientX-Y;o.value=Math.round(q/U*R.value)}return Qt(()=>x(e.tag,{ref:P,class:["v-progress-linear",{"v-progress-linear--absolute":e.absolute,"v-progress-linear--active":e.active&&k.value,"v-progress-linear--reverse":G.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},E.value,u.value,c.value,e.class],style:[{bottom:e.location==="bottom"?0:void 0,top:e.location==="top"?0:void 0,height:e.active?Vt(B.value):0,"--v-progress-linear-height":Vt(B.value),...f.value},e.style],role:"progressbar","aria-hidden":e.active?"false":"true","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:W.value,onClick:e.clickable&&N},{default:()=>[e.stream&&x("div",{key:"stream",class:["v-progress-linear__stream",m.value],style:{...p.value,[G.value?"left":"right"]:Vt(-B.value),borderTop:`${Vt(B.value/2)} dotted`,opacity:st.value,top:`calc(50% - ${Vt(B.value/4)})`,width:Vt(100-O.value,"%"),"--v-progress-linear-stream-to":Vt(B.value*(G.value?1:-1))}},null),x("div",{class:["v-progress-linear__background",v.value],style:[y.value,{opacity:st.value,width:Vt(e.stream?O.value:100,"%")}]},null),x(tn,{name:X.value},{default:()=>[e.indeterminate?x("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map($=>x("div",{key:$,class:["v-progress-linear__indeterminate",$,w.value],style:C.value},null))]):x("div",{class:["v-progress-linear__determinate",w.value],style:[C.value,{width:Vt(W.value,"%")}]},null)]}),i.default&&x("div",{class:"v-progress-linear__content"},[i.default({value:W.value,buffer:O.value})])]})),{}}}),__=bt({loading:[Boolean,String]},"loader");function Th(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();return{loaderClasses:L(()=>({[`${n}--loading`]:e.loading}))}}function v_(e,n){var o;let{slots:i}=n;return x("div",{class:`${e.name}__loader`},[((o=i.default)==null?void 0:o.call(i,{color:e.color,isActive:e.active}))||x(rC,{active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}const oC=bt({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Pl(),...p_()},"VSwitch"),_u=zt()({name:"VSwitch",inheritAttrs:!1,props:oC(),emits:{"update:focused":e=>!0,"update:modelValue":()=>!0,"update:indeterminate":e=>!0},setup(e,n){let{attrs:i,slots:o}=n;const a=es(e,"indeterminate"),c=es(e,"modelValue"),{loaderClasses:u}=Th(e),{isFocused:f,focus:m,blur:p}=Eh(e),v=L(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),y=Ni(),w=L(()=>e.id||`switch-${y}`);function C(){a.value&&(a.value=!1)}return Qt(()=>{const[E,P]=Lp(i),[k,R]=Fr.filterProps(e),[B,O]=Ag.filterProps(e),W=Ft();function G(X){var st,N;X.stopPropagation(),X.preventDefault(),(N=(st=W.value)==null?void 0:st.input)==null||N.click()}return x(Fr,ye({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":a.value},u.value,e.class],style:e.style},E,k,{id:w.value,focused:f.value}),{...o,default:X=>{let{id:st,messagesId:N,isDisabled:$,isReadonly:Y,isValid:it}=X;return x(Ag,ye({ref:W},B,{modelValue:c.value,"onUpdate:modelValue":[U=>c.value=U,C],id:st.value,"aria-describedby":N.value,type:"checkbox","aria-checked":a.value?"mixed":void 0,disabled:$.value,readonly:Y.value,onFocus:m,onBlur:p},P),{...o,default:()=>x("div",{class:"v-switch__track",onClick:G},null),input:U=>{let{textColorClasses:q,textColorStyles:Q}=U;return x("div",{class:["v-switch__thumb",q.value],style:Q.value},[e.loading&&x(v_,{name:"v-switch",active:!0,color:it.value===!1?void 0:v.value},{default:rt=>o.loader?o.loader(rt):x(r_,{active:rt.isActive,color:rt.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),aC=ii({__name:"ConsentSwitch",setup(e){const{send_data_consent:n}=si(nr()),{currentPage:i}=si(on()),o=a=>{n.value=a,i.value=Ws.GAME};return(a,c)=>(me(),Ie(_u,ye({class:"d-flex justify-center",inset:!0,indeterminate:xt(n)===void 0},xt(n),{onChange:o,color:xt(n)?"success":"",label:"I consent to my pictures being stored"}),null,16,["indeterminate","color"]))}});const Pn=bt({border:[Boolean,Number,String]},"border");function kn(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();return{borderClasses:L(()=>{const o=re(e)?e.value:e.border,a=[];if(o===!0||o==="")a.push(`${n}--border`);else if(typeof o=="string"||o===0)for(const c of String(o).split(" "))a.push(`border-${c}`);return a})}}const yi=bt({elevation:{type:[Number,String],validator(e){const n=parseInt(e);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function Ui(e){return{elevationClasses:L(()=>{const i=re(e)?e.value:e.elevation,o=[];return i==null||o.push(`elevation-${i}`),o})}}const lC=["elevated","flat","tonal","outlined","text","plain"];function qr(e,n){return x(Re,null,[e&&x("span",{key:"overlay",class:`${n}__overlay`},null),x("span",{key:"underlay",class:`${n}__underlay`},null)])}const cn=bt({color:String,variant:{type:String,default:"elevated",validator:e=>lC.includes(e)}},"variant");function Zr(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();const i=L(()=>{const{variant:c}=xt(e);return`${n}--variant-${c}`}),{colorClasses:o,colorStyles:a}=bh(L(()=>{const{variant:c,color:u}=xt(e);return{[["elevated","flat"].includes(c)?"background":"text"]:u}}));return{colorClasses:o,colorStyles:a,variantClasses:i}}const y_=bt({divided:Boolean,...Pn(),...ie(),...ni(),...yi(),...Os(),...Se(),...Me(),...cn()},"VBtnGroup"),Pg=zt()({name:"VBtnGroup",props:y_(),setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{densityClasses:a}=vi(e),{borderClasses:c}=kn(e),{elevationClasses:u}=Ui(e),{roundedClasses:f}=Ys(e);an({VBtn:{height:"auto",color:Lt(e,"color"),density:Lt(e,"density"),flat:!0,variant:Lt(e,"variant")}}),Qt(()=>x(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},o.value,c.value,a.value,u.value,f.value,e.class],style:e.style},i))}}),Ph=bt({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),kl=bt({value:null,disabled:Boolean,selectedClass:String},"group-item");function Il(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const o=fs("useGroupItem");if(!o)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const a=Ni();ts(Symbol.for(`${n.description}:id`),a);const c=pe(n,null);if(!c){if(!i)return c;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const u=Lt(e,"value"),f=L(()=>c.disabled.value||e.disabled);c.register({id:a,value:u,disabled:f},o),_i(()=>{c.unregister(a)});const m=L(()=>c.isSelected(a)),p=L(()=>m.value&&[c.selectedClass.value,e.selectedClass]);return jt(m,v=>{o.emit("group:selected",{value:v})}),{id:a,isSelected:m,toggle:()=>c.select(a,!m.value),select:v=>c.select(a,v),selectedClass:p,value:u,disabled:f,group:c}}function Rl(e,n){let i=!1;const o=ls([]),a=es(e,"modelValue",[],w=>w==null?[]:b_(o,sr(w)),w=>{const C=uC(o,w);return e.multiple?C:C[0]}),c=fs("useGroup");function u(w,C){const E=w,P=Symbol.for(`${n.description}:id`),R=To(P,c==null?void 0:c.vnode).indexOf(C);R>-1?o.splice(R,0,E):o.push(E)}function f(w){if(i)return;m();const C=o.findIndex(E=>E.id===w);o.splice(C,1)}function m(){const w=o.find(C=>!C.disabled);w&&e.mandatory==="force"&&!a.value.length&&(a.value=[w.id])}Vi(()=>{m()}),_i(()=>{i=!0});function p(w,C){const E=o.find(P=>P.id===w);if(!(C&&(E!=null&&E.disabled)))if(e.multiple){const P=a.value.slice(),k=P.findIndex(B=>B===w),R=~k;if(C=C??!R,R&&e.mandatory&&P.length<=1||!R&&e.max!=null&&P.length+1>e.max)return;k<0&&C?P.push(w):k>=0&&!C&&P.splice(k,1),a.value=P}else{const P=a.value.includes(w);if(e.mandatory&&P)return;a.value=C??!P?[w]:[]}}function v(w){if(e.multiple,a.value.length){const C=a.value[0],E=o.findIndex(R=>R.id===C);let P=(E+w)%o.length,k=o[P];for(;k.disabled&&P!==E;)P=(P+w)%o.length,k=o[P];if(k.disabled)return;a.value=[o[P].id]}else{const C=o.find(E=>!E.disabled);C&&(a.value=[C.id])}}const y={register:u,unregister:f,selected:a,select:p,disabled:Lt(e,"disabled"),prev:()=>v(o.length-1),next:()=>v(1),isSelected:w=>a.value.includes(w),selectedClass:L(()=>e.selectedClass),items:L(()=>o),getItemIndex:w=>cC(o,w)};return ts(n,y),y}function cC(e,n){const i=b_(e,[n]);return i.length?e.findIndex(o=>o.id===i[0]):-1}function b_(e,n){const i=[];return n.forEach(o=>{const a=e.find(u=>Al(o,u.value)),c=e[o];(a==null?void 0:a.value)!=null?i.push(a.id):c!=null&&i.push(c.id)}),i}function uC(e,n){const i=[];return n.forEach(o=>{const a=e.findIndex(c=>c.id===o);if(~a){const c=e[a];i.push(c.value!=null?c.value:a)}}),i}const w_=Symbol.for("vuetify:v-btn-toggle"),hC=bt({...y_(),...Ph()},"VBtnToggle"),dC=zt()({name:"VBtnToggle",props:hC(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const{isSelected:o,next:a,prev:c,select:u,selected:f}=Rl(e,w_);return Qt(()=>{const[m]=Pg.filterProps(e);return x(Pg,ye({class:["v-btn-toggle",e.class]},m,{style:e.style}),{default:()=>{var p;return[(p=i.default)==null?void 0:p.call(i,{isSelected:o,next:a,prev:c,select:u,selected:f})]}})}),{next:a,prev:c,select:u}}}),fC=bt({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),Ye=zt(!1)({name:"VDefaultsProvider",props:fC(),setup(e,n){let{slots:i}=n;const{defaults:o,disabled:a,reset:c,root:u,scoped:f}=_l(e);return an(o,{reset:c,root:u,scoped:f,disabled:a}),()=>{var m;return(m=i.default)==null?void 0:m.call(i)}}}),In=bt({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function Rn(e){return{dimensionStyles:L(()=>({height:Vt(e.height),maxHeight:Vt(e.maxHeight),maxWidth:Vt(e.maxWidth),minHeight:Vt(e.minHeight),minWidth:Vt(e.minWidth),width:Vt(e.width)}))}}const gC=["static","relative","fixed","absolute","sticky"],Ml=bt({position:{type:String,validator:e=>gC.includes(e)}},"position");function Bl(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ln();return{positionClasses:L(()=>e.position?`${n}--${e.position}`:void 0)}}function mC(){var e,n;return(n=(e=fs("useRouter"))==null?void 0:e.proxy)==null?void 0:n.$router}function Fl(e,n){const i=m0("RouterLink"),o=L(()=>!!(e.href||e.to)),a=L(()=>(o==null?void 0:o.value)||sg(n,"click")||sg(e,"click"));if(typeof i=="string")return{isLink:o,isClickable:a,href:Lt(e,"href")};const c=e.to?i.useLink(e):void 0;return{isLink:o,isClickable:a,route:c==null?void 0:c.route,navigate:c==null?void 0:c.navigate,isActive:c&&L(()=>{var u,f;return e.exact?(u=c.isExactActive)==null?void 0:u.value:(f=c.isActive)==null?void 0:f.value}),href:L(()=>e.to?c==null?void 0:c.route.value.href:e.href)}}const Dl=bt({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let Lc=!1;function pC(e,n){let i=!1,o,a;Ge&&(ws(()=>{window.addEventListener("popstate",c),o=e==null?void 0:e.beforeEach((u,f,m)=>{Lc?i?n(m):m():setTimeout(()=>i?n(m):m()),Lc=!0}),a=e==null?void 0:e.afterEach(()=>{Lc=!1})}),Ds(()=>{window.removeEventListener("popstate",c),o==null||o(),a==null||a()}));function c(u){var f;(f=u.state)!=null&&f.replaced||(i=!0,setTimeout(()=>i=!1))}}function _C(e,n){jt(()=>{var i;return(i=e.isActive)==null?void 0:i.value},i=>{e.isLink.value&&i&&n&&ws(()=>{n(!0)})},{immediate:!0})}const vC=bt({active:{type:Boolean,default:void 0},symbol:{type:null,default:w_},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:Ae,appendIcon:Ae,block:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...Pn(),...ie(),...ni(),...In(),...yi(),...kl(),...__(),...Zo(),...Ml(),...Os(),...Dl(),...ar(),...Se({tag:"button"}),...Me(),...cn({variant:"elevated"})},"VBtn"),we=zt()({name:"VBtn",directives:{Ripple:Yr},props:vC(),emits:{"group:selected":e=>!0},setup(e,n){let{attrs:i,slots:o}=n;const{themeClasses:a}=He(e),{borderClasses:c}=kn(e),{colorClasses:u,colorStyles:f,variantClasses:m}=Zr(e),{densityClasses:p}=vi(e),{dimensionStyles:v}=Rn(e),{elevationClasses:y}=Ui(e),{loaderClasses:w}=Th(e),{locationStyles:C}=Ko(e),{positionClasses:E}=Bl(e),{roundedClasses:P}=Ys(e),{sizeClasses:k,sizeStyles:R}=Xr(e),B=Il(e,e.symbol,!1),O=Fl(e,i),W=L(()=>{var $;return e.active!==void 0?e.active:O.isLink.value?($=O.isActive)==null?void 0:$.value:B==null?void 0:B.isSelected.value}),G=L(()=>(B==null?void 0:B.disabled.value)||e.disabled),X=L(()=>e.variant==="elevated"&&!(e.disabled||e.flat||e.border)),st=L(()=>{if(e.value!==void 0)return Object(e.value)===e.value?JSON.stringify(e.value,null,0):e.value});function N($){var Y;G.value||O.isLink.value&&($.metaKey||$.ctrlKey||$.shiftKey||$.button!==0||i.target==="_blank")||((Y=O.navigate)==null||Y.call(O,$),B==null||B.toggle())}return _C(O,B==null?void 0:B.select),Qt(()=>{var Q,rt;const $=O.isLink.value?"a":e.tag,Y=!!(e.prependIcon||o.prepend),it=!!(e.appendIcon||o.append),U=!!(e.icon&&e.icon!==!0),q=(B==null?void 0:B.isSelected.value)&&(!O.isLink.value||((Q=O.isActive)==null?void 0:Q.value))||!B||((rt=O.isActive)==null?void 0:rt.value);return ys(x($,{type:$==="a"?void 0:"button",class:["v-btn",B==null?void 0:B.selectedClass.value,{"v-btn--active":W.value,"v-btn--block":e.block,"v-btn--disabled":G.value,"v-btn--elevated":X.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--stacked":e.stacked},a.value,c.value,q?u.value:void 0,p.value,y.value,w.value,E.value,P.value,k.value,m.value,e.class],style:[q?f.value:void 0,v.value,C.value,R.value,e.style],disabled:G.value||void 0,href:O.href.value,onClick:N,value:st.value},{default:()=>{var dt;return[qr(!0,"v-btn"),!e.icon&&Y&&x("span",{key:"prepend",class:"v-btn__prepend"},[o.prepend?x(Ye,{key:"prepend-defaults",disabled:!e.prependIcon,defaults:{VIcon:{icon:e.prependIcon}}},o.prepend):x(We,{key:"prepend-icon",icon:e.prependIcon},null)]),x("span",{class:"v-btn__content","data-no-activator":""},[!o.default&&U?x(We,{key:"content-icon",icon:e.icon},null):x(Ye,{key:"content-defaults",disabled:!U,defaults:{VIcon:{icon:e.icon}}},{default:()=>{var At;return[((At=o.default)==null?void 0:At.call(o))??e.text]}})]),!e.icon&&it&&x("span",{key:"append",class:"v-btn__append"},[o.append?x(Ye,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VIcon:{icon:e.appendIcon}}},o.append):x(We,{key:"append-icon",icon:e.appendIcon},null)]),!!e.loading&&x("span",{key:"loader",class:"v-btn__loader"},[((dt=o.loader)==null?void 0:dt.call(o))??x(r_,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[Di("ripple"),!G.value&&e.ripple,null]])}),{}}});const fi=zt()({name:"VCardActions",props:ie(),setup(e,n){let{slots:i}=n;return an({VBtn:{variant:"text"}}),Qt(()=>{var o;return x("div",{class:["v-card-actions",e.class],style:e.style},[(o=i.default)==null?void 0:o.call(i)])}),{}}}),x_=jr("v-card-subtitle"),Fs=jr("v-card-title");function yC(e){return{aspectStyles:L(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const C_=bt({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...ie(),...In()},"VResponsive"),vu=zt()({name:"VResponsive",props:C_(),setup(e,n){let{slots:i}=n;const{aspectStyles:o}=yC(e),{dimensionStyles:a}=Rn(e);return Qt(()=>{var c;return x("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[a.value,e.style]},[x("div",{class:"v-responsive__sizer",style:o.value},null),(c=i.additional)==null?void 0:c.call(i),i.default&&x("div",{class:["v-responsive__content",e.contentClass]},[i.default()])])}),{}}});function bC(e,n){if(!yh)return;const i=n.modifiers||{},o=n.value,{handler:a,options:c}=typeof o=="object"?o:{handler:o,options:{}},u=new IntersectionObserver(function(){var y;let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;const p=(y=e._observe)==null?void 0:y[n.instance.$.uid];if(!p)return;const v=f.some(w=>w.isIntersecting);a&&(!i.quiet||p.init)&&(!i.once||v||p.init)&&a(v,f,m),v&&i.once?S_(e,n):p.init=!0},c);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:u},u.observe(e)}function S_(e,n){var o;const i=(o=e._observe)==null?void 0:o[n.instance.$.uid];i&&(i.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const wC={mounted:bC,unmounted:S_},xC=wC,CC=bt({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...C_(),...ie(),...Ch()},"VImg"),Oi=zt()({name:"VImg",directives:{intersect:xC},props:CC(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:i,slots:o}=n;const a=Zt(""),c=Ft(),u=Zt(e.eager?"loading":"idle"),f=Zt(),m=Zt(),p=L(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),v=L(()=>p.value.aspect||f.value/m.value||0);jt(()=>e.src,()=>{y(u.value!=="idle")}),jt(v,(N,$)=>{!N&&$&&c.value&&k(c.value)}),ih(()=>y());function y(N){if(!(e.eager&&N)&&!(yh&&!N&&!e.eager)){if(u.value="loading",p.value.lazySrc){const $=new Image;$.src=p.value.lazySrc,k($,null)}p.value.src&&ws(()=>{var $,Y;if(i("loadstart",(($=c.value)==null?void 0:$.currentSrc)||p.value.src),(Y=c.value)!=null&&Y.complete){if(c.value.naturalWidth||C(),u.value==="error")return;v.value||k(c.value,null),w()}else v.value||k(c.value),E()})}}function w(){var N;E(),u.value="loaded",i("load",((N=c.value)==null?void 0:N.currentSrc)||p.value.src)}function C(){var N;u.value="error",i("error",((N=c.value)==null?void 0:N.currentSrc)||p.value.src)}function E(){const N=c.value;N&&(a.value=N.currentSrc||N.src)}let P=-1;function k(N){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const Y=()=>{clearTimeout(P);const{naturalHeight:it,naturalWidth:U}=N;it||U?(f.value=U,m.value=it):!N.complete&&u.value==="loading"&&$!=null?P=window.setTimeout(Y,$):(N.currentSrc.endsWith(".svg")||N.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,m.value=1)};Y()}const R=L(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),B=()=>{var Y;if(!p.value.src||u.value==="idle")return null;const N=x("img",{class:["v-img__img",R.value],src:p.value.src,srcset:p.value.srcset,alt:e.alt,sizes:e.sizes,ref:c,onLoad:w,onError:C},null),$=(Y=o.sources)==null?void 0:Y.call(o);return x(xn,{transition:e.transition,appear:!0},{default:()=>[ys($?x("picture",{class:"v-img__picture"},[$,N]):N,[[Wr,u.value==="loaded"]])]})},O=()=>x(xn,{transition:e.transition},{default:()=>[p.value.lazySrc&&u.value!=="loaded"&&x("img",{class:["v-img__img","v-img__img--preload",R.value],src:p.value.lazySrc,alt:e.alt},null)]}),W=()=>o.placeholder?x(xn,{transition:e.transition,appear:!0},{default:()=>[(u.value==="loading"||u.value==="error"&&!o.error)&&x("div",{class:"v-img__placeholder"},[o.placeholder()])]}):null,G=()=>o.error?x(xn,{transition:e.transition,appear:!0},{default:()=>[u.value==="error"&&x("div",{class:"v-img__error"},[o.error()])]}):null,X=()=>e.gradient?x("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,st=Zt(!1);{const N=jt(v,$=>{$&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{st.value=!0})}),N())})}return Qt(()=>{const[N]=vu.filterProps(e);return ys(x(vu,ye({class:["v-img",{"v-img--booting":!st.value},e.class],style:[{width:Vt(e.width==="auto"?f.value:e.width)},e.style]},N,{aspectRatio:v.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>x(Re,null,[x(B,null,null),x(O,null,null),x(X,null,null),x(W,null,null),x(G,null,null)]),default:o.default}),[[Di("intersect"),{handler:y,options:e.options},null,{once:!0}]])}),{currentSrc:a,image:c,state:u,naturalWidth:f,naturalHeight:m}}}),SC=bt({start:Boolean,end:Boolean,icon:Ae,image:String,...ie(),...ni(),...Os(),...ar(),...Se(),...Me(),...cn({variant:"flat"})},"VAvatar"),Dr=zt()({name:"VAvatar",props:SC(),setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{colorClasses:a,colorStyles:c,variantClasses:u}=Zr(e),{densityClasses:f}=vi(e),{roundedClasses:m}=Ys(e),{sizeClasses:p,sizeStyles:v}=Xr(e);return Qt(()=>x(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},o.value,a.value,f.value,m.value,p.value,u.value,e.class],style:[c.value,v.value,e.style]},{default:()=>{var y;return[e.image?x(Oi,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?x(We,{key:"icon",icon:e.icon},null):(y=i.default)==null?void 0:y.call(i),qr(!1,"v-avatar")]}})),{}}}),EC=bt({appendAvatar:String,appendIcon:Ae,prependAvatar:String,prependIcon:Ae,subtitle:String,title:String,...ie(),...ni()},"VCardItem"),AC=zt()({name:"VCardItem",props:EC(),setup(e,n){let{slots:i}=n;return Qt(()=>{var p;const o=!!(e.prependAvatar||e.prependIcon),a=!!(o||i.prepend),c=!!(e.appendAvatar||e.appendIcon),u=!!(c||i.append),f=!!(e.title||i.title),m=!!(e.subtitle||i.subtitle);return x("div",{class:["v-card-item",e.class],style:e.style},[a&&x("div",{key:"prepend",class:"v-card-item__prepend"},[i.prepend?x(Ye,{key:"prepend-defaults",disabled:!o,defaults:{VAvatar:{density:e.density,icon:e.prependIcon,image:e.prependAvatar}}},i.prepend):o&&x(Dr,{key:"prepend-avatar",density:e.density,icon:e.prependIcon,image:e.prependAvatar},null)]),x("div",{class:"v-card-item__content"},[f&&x(Fs,{key:"title"},{default:()=>{var v;return[((v=i.title)==null?void 0:v.call(i))??e.title]}}),m&&x(x_,{key:"subtitle"},{default:()=>{var v;return[((v=i.subtitle)==null?void 0:v.call(i))??e.subtitle]}}),(p=i.default)==null?void 0:p.call(i)]),u&&x("div",{key:"append",class:"v-card-item__append"},[i.append?x(Ye,{key:"append-defaults",disabled:!c,defaults:{VAvatar:{density:e.density,icon:e.appendIcon,image:e.appendAvatar}}},i.append):c&&x(Dr,{key:"append-avatar",density:e.density,icon:e.appendIcon,image:e.appendAvatar},null)])])}),{}}}),Na=jr("v-card-text"),TC=bt({appendAvatar:String,appendIcon:Ae,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Ae,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...Pn(),...ie(),...ni(),...In(),...yi(),...__(),...Zo(),...Ml(),...Os(),...Dl(),...Se(),...Me(),...cn({variant:"elevated"})},"VCard"),bs=zt()({name:"VCard",directives:{Ripple:Yr},props:TC(),setup(e,n){let{attrs:i,slots:o}=n;const{themeClasses:a}=He(e),{borderClasses:c}=kn(e),{colorClasses:u,colorStyles:f,variantClasses:m}=Zr(e),{densityClasses:p}=vi(e),{dimensionStyles:v}=Rn(e),{elevationClasses:y}=Ui(e),{loaderClasses:w}=Th(e),{locationStyles:C}=Ko(e),{positionClasses:E}=Bl(e),{roundedClasses:P}=Ys(e),k=Fl(e,i),R=L(()=>e.link!==!1&&k.isLink.value),B=L(()=>!e.disabled&&e.link!==!1&&(e.link||k.isClickable.value));return Qt(()=>{const O=R.value?"a":e.tag,W=!!(o.title||e.title),G=!!(o.subtitle||e.subtitle),X=W||G,st=!!(o.append||e.appendAvatar||e.appendIcon),N=!!(o.prepend||e.prependAvatar||e.prependIcon),$=!!(o.image||e.image),Y=X||N||st,it=!!(o.text||e.text);return ys(x(O,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":B.value},a.value,c.value,u.value,p.value,y.value,w.value,E.value,P.value,m.value,e.class],style:[f.value,v.value,C.value,e.style],href:k.href.value,onClick:B.value&&k.navigate,tabindex:e.disabled?-1:void 0},{default:()=>{var U;return[$&&x("div",{key:"image",class:"v-card__image"},[o.image?x(Ye,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):x(Oi,{key:"image-img",cover:!0,src:e.image},null)]),x(v_,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:o.loader}),Y&&x(AC,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:o.item,prepend:o.prepend,title:o.title,subtitle:o.subtitle,append:o.append}),it&&x(Na,{key:"text"},{default:()=>{var q;return[((q=o.text)==null?void 0:q.call(o))??e.text]}}),(U=o.default)==null?void 0:U.call(o),o.actions&&x(fi,null,{default:o.actions}),qr(B.value,"v-card")]}}),[[Di("ripple"),B.value&&e.ripple]])}),{}}});const E_=Symbol.for("vuetify:v-chip-group"),PC=bt({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Al},...ie(),...Ph({selectedClass:"v-chip--selected"}),...Se(),...Me(),...cn({variant:"tonal"})},"VChipGroup");zt()({name:"VChipGroup",props:PC(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{isSelected:a,select:c,next:u,prev:f,selected:m}=Rl(e,E_);return an({VChip:{color:Lt(e,"color"),disabled:Lt(e,"disabled"),filter:Lt(e,"filter"),variant:Lt(e,"variant")}}),Qt(()=>x(e.tag,{class:["v-chip-group",{"v-chip-group--column":e.column},o.value,e.class],style:e.style},{default:()=>{var p;return[(p=i.default)==null?void 0:p.call(i,{isSelected:a,select:c,next:u,prev:f,selected:m.value})]}})),{}}});const kC=bt({activeClass:String,appendAvatar:String,appendIcon:Ae,closable:Boolean,closeIcon:{type:Ae,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:Ae,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:rr(),onClickOnce:rr(),...Pn(),...ie(),...ni(),...yi(),...kl(),...Os(),...Dl(),...ar(),...Se({tag:"span"}),...Me(),...cn({variant:"tonal"})},"VChip"),ci=zt()({name:"VChip",directives:{Ripple:Yr},props:kC(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,n){let{attrs:i,emit:o,slots:a}=n;const{t:c}=wh(),{borderClasses:u}=kn(e),{colorClasses:f,colorStyles:m,variantClasses:p}=Zr(e),{densityClasses:v}=vi(e),{elevationClasses:y}=Ui(e),{roundedClasses:w}=Ys(e),{sizeClasses:C}=Xr(e),{themeClasses:E}=He(e),P=es(e,"modelValue"),k=Il(e,E_,!1),R=Fl(e,i),B=L(()=>e.link!==!1&&R.isLink.value),O=L(()=>!e.disabled&&e.link!==!1&&(!!k||e.link||R.isClickable.value)),W=L(()=>({"aria-label":c(e.closeLabel),onClick(st){P.value=!1,o("click:close",st)}}));function G(st){var N;o("click",st),O.value&&((N=R.navigate)==null||N.call(R,st),k==null||k.toggle())}function X(st){(st.key==="Enter"||st.key===" ")&&(st.preventDefault(),G(st))}return()=>{const st=R.isLink.value?"a":e.tag,N=!!(e.appendIcon||e.appendAvatar),$=!!(N||a.append),Y=!!(a.close||e.closable),it=!!(a.filter||e.filter)&&k,U=!!(e.prependIcon||e.prependAvatar),q=!!(U||a.prepend),Q=!k||k.isSelected.value;return P.value&&ys(x(st,{class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":O.value,"v-chip--filter":it,"v-chip--pill":e.pill},E.value,u.value,Q?f.value:void 0,v.value,y.value,w.value,C.value,p.value,k==null?void 0:k.selectedClass.value,e.class],style:[Q?m.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,href:R.href.value,tabindex:O.value?0:void 0,onClick:G,onKeydown:O.value&&!B.value&&X},{default:()=>{var rt;return[qr(O.value,"v-chip"),it&&x(Ux,{key:"filter"},{default:()=>[ys(x("div",{class:"v-chip__filter"},[a.filter?ys(x(Ye,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},null),[[Di("slot"),a.filter,"default"]]):x(We,{key:"filter-icon",icon:e.filterIcon},null)]),[[Wr,k.isSelected.value]])]}),q&&x("div",{key:"prepend",class:"v-chip__prepend"},[a.prepend?x(Ye,{key:"prepend-defaults",disabled:!U,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},a.prepend):x(Re,null,[e.prependIcon&&x(We,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&x(Dr,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),x("div",{class:"v-chip__content"},[((rt=a.default)==null?void 0:rt.call(a,{isSelected:k==null?void 0:k.isSelected.value,selectedClass:k==null?void 0:k.selectedClass.value,select:k==null?void 0:k.select,toggle:k==null?void 0:k.toggle,value:k==null?void 0:k.value.value,disabled:e.disabled}))??e.text]),$&&x("div",{key:"append",class:"v-chip__append"},[a.append?x(Ye,{key:"append-defaults",disabled:!N,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},a.append):x(Re,null,[e.appendIcon&&x(We,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&x(Dr,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),Y&&x("div",ye({key:"close",class:"v-chip__close"},W.value),[a.close?x(Ye,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},a.close):x(We,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Di("ripple"),O.value&&e.ripple,null]])}}});const IC=bt({fluid:{type:Boolean,default:!1},...ie(),...Se()},"VContainer"),Ll=zt()({name:"VContainer",props:IC(),setup(e,n){let{slots:i}=n;const{rtlClasses:o}=js();return Qt(()=>x(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},o.value,e.class],style:e.style},i)),{}}}),Ol=["sm","md","lg","xl","xxl"],yu=Symbol.for("vuetify:display"),kg={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},RC=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kg;return Qs(kg,e)};function Ig(e){return Ge&&!e?window.innerWidth:typeof e=="object"&&e.clientWidth||0}function Rg(e){return Ge&&!e?window.innerHeight:typeof e=="object"&&e.clientHeight||0}function Mg(e){const n=Ge&&!e?window.navigator.userAgent:"ssr";function i(E){return!!n.match(E)}const o=i(/android/i),a=i(/iphone|ipad|ipod/i),c=i(/cordova/i),u=i(/electron/i),f=i(/chrome/i),m=i(/edge/i),p=i(/firefox/i),v=i(/opera/i),y=i(/win/i),w=i(/mac/i),C=i(/linux/i);return{android:o,ios:a,cordova:c,electron:u,chrome:f,edge:m,firefox:p,opera:v,win:y,mac:w,linux:C,touch:ux,ssr:n==="ssr"}}function MC(e,n){const{thresholds:i,mobileBreakpoint:o}=RC(e),a=Zt(Rg(n)),c=Zt(Mg(n)),u=ls({}),f=Zt(Ig(n));function m(){a.value=Rg(),f.value=Ig()}function p(){m(),c.value=Mg()}return nn(()=>{const v=f.value<i.sm,y=f.value<i.md&&!v,w=f.value<i.lg&&!(y||v),C=f.value<i.xl&&!(w||y||v),E=f.value<i.xxl&&!(C||w||y||v),P=f.value>=i.xxl,k=v?"xs":y?"sm":w?"md":C?"lg":E?"xl":"xxl",R=typeof o=="number"?o:i[o],B=f.value<R;u.xs=v,u.sm=y,u.md=w,u.lg=C,u.xl=E,u.xxl=P,u.smAndUp=!v,u.mdAndUp=!(v||y),u.lgAndUp=!(v||y||w),u.xlAndUp=!(v||y||w||C),u.smAndDown=!(w||C||E||P),u.mdAndDown=!(C||E||P),u.lgAndDown=!(E||P),u.xlAndDown=!P,u.name=k,u.height=a.value,u.width=f.value,u.mobile=B,u.mobileBreakpoint=o,u.platform=c.value,u.thresholds=i}),Ge&&window.addEventListener("resize",m,{passive:!0}),{..._l(u),update:p,ssr:!!n}}function BC(){const e=pe(yu);if(!e)throw new Error("Could not find Vuetify display injection");return e}const A_=(()=>Ol.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}))(),T_=(()=>Ol.reduce((e,n)=>{const i="offset"+sn(n);return e[i]={type:[String,Number],default:null},e},{}))(),P_=(()=>Ol.reduce((e,n)=>{const i="order"+sn(n);return e[i]={type:[String,Number],default:null},e},{}))(),Bg={col:Object.keys(A_),offset:Object.keys(T_),order:Object.keys(P_)};function FC(e,n,i){let o=e;if(!(i==null||i===!1)){if(n){const a=n.replace(e,"");o+=`-${a}`}return e==="col"&&(o="v-"+o),e==="col"&&(i===""||i===!0)||(o+=`-${i}`),o.toLowerCase()}}const DC=["auto","start","end","center","baseline","stretch"],LC=bt({cols:{type:[Boolean,String,Number],default:!1},...A_,offset:{type:[String,Number],default:null},...T_,order:{type:[String,Number],default:null},...P_,alignSelf:{type:String,default:null,validator:e=>DC.includes(e)},...ie(),...Se()},"VCol"),or=zt()({name:"VCol",props:LC(),setup(e,n){let{slots:i}=n;const o=L(()=>{const a=[];let c;for(c in Bg)Bg[c].forEach(f=>{const m=e[f],p=FC(c,f,m);p&&a.push(p)});const u=a.some(f=>f.startsWith("v-col-"));return a.push({"v-col":!u||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),a});return()=>{var a;return zi(e.tag,{class:[o.value,e.class],style:e.style},(a=i.default)==null?void 0:a.call(i))}}}),kh=["start","end","center"],k_=["space-between","space-around","space-evenly"];function Ih(e,n){return Ol.reduce((i,o)=>{const a=e+sn(o);return i[a]=n(),i},{})}const OC=[...kh,"baseline","stretch"],I_=e=>OC.includes(e),R_=Ih("align",()=>({type:String,default:null,validator:I_})),VC=[...kh,...k_],M_=e=>VC.includes(e),B_=Ih("justify",()=>({type:String,default:null,validator:M_})),zC=[...kh,...k_,"stretch"],F_=e=>zC.includes(e),D_=Ih("alignContent",()=>({type:String,default:null,validator:F_})),Fg={align:Object.keys(R_),justify:Object.keys(B_),alignContent:Object.keys(D_)},NC={align:"align",justify:"justify",alignContent:"align-content"};function UC(e,n,i){let o=NC[e];if(i!=null){if(n){const a=n.replace(e,"");o+=`-${a}`}return o+=`-${i}`,o.toLowerCase()}}const HC=bt({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:I_},...R_,justify:{type:String,default:null,validator:M_},...B_,alignContent:{type:String,default:null,validator:F_},...D_,...ie(),...Se()},"VRow"),Vl=zt()({name:"VRow",props:HC(),setup(e,n){let{slots:i}=n;const o=L(()=>{const a=[];let c;for(c in Fg)Fg[c].forEach(u=>{const f=e[u],m=UC(c,u,f);m&&a.push(m)});return a.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),a});return()=>{var a;return zi(e.tag,{class:["v-row",o.value,e.class],style:e.style},(a=i.default)==null?void 0:a.call(i))}}}),Ms=jr("flex-grow-1","div","VSpacer");const bu=Symbol.for("vuetify:list");function L_(){const e=pe(bu,{hasPrepend:Zt(!1),updateHasPrepend:()=>null}),n={hasPrepend:Zt(!1),updateHasPrepend:i=>{i&&(n.hasPrepend.value=i)}};return ts(bu,n),e}function O_(){return pe(bu,null)}const $C={open:e=>{let{id:n,value:i,opened:o,parents:a}=e;if(i){const c=new Set;c.add(n);let u=a.get(n);for(;u!=null;)c.add(u),u=a.get(u);return c}else return o.delete(n),o},select:()=>null},V_={open:e=>{let{id:n,value:i,opened:o,parents:a}=e;if(i){let c=a.get(n);for(o.add(n);c!=null&&c!==n;)o.add(c),c=a.get(c);return o}else o.delete(n);return o},select:()=>null},WC={open:V_.open,select:e=>{let{id:n,value:i,opened:o,parents:a}=e;if(!i)return o;const c=[];let u=a.get(n);for(;u!=null;)c.push(u),u=a.get(u);return new Set(c)}},Rh=e=>{const n={select:i=>{let{id:o,value:a,selected:c}=i;if(o=Kt(o),e&&!a){const u=Array.from(c.entries()).reduce((f,m)=>{let[p,v]=m;return v==="on"?[...f,p]:f},[]);if(u.length===1&&u[0]===o)return c}return c.set(o,a?"on":"off"),c},in:(i,o,a)=>{let c=new Map;for(const u of i||[])c=n.select({id:u,value:!0,selected:new Map(c),children:o,parents:a});return c},out:i=>{const o=[];for(const[a,c]of i.entries())c==="on"&&o.push(a);return o}};return n},z_=e=>{const n=Rh(e);return{select:o=>{let{selected:a,id:c,...u}=o;c=Kt(c);const f=a.has(c)?new Map([[c,a.get(c)]]):new Map;return n.select({...u,id:c,selected:f})},in:(o,a,c)=>{let u=new Map;return o!=null&&o.length&&(u=n.in(o.slice(0,1),a,c)),u},out:(o,a,c)=>n.out(o,a,c)}},GC=e=>{const n=Rh(e);return{select:o=>{let{id:a,selected:c,children:u,...f}=o;return a=Kt(a),u.has(a)?c:n.select({id:a,selected:c,children:u,...f})},in:n.in,out:n.out}},jC=e=>{const n=z_(e);return{select:o=>{let{id:a,selected:c,children:u,...f}=o;return a=Kt(a),u.has(a)?c:n.select({id:a,selected:c,children:u,...f})},in:n.in,out:n.out}},XC=e=>{const n={select:i=>{let{id:o,value:a,selected:c,children:u,parents:f}=i;o=Kt(o);const m=new Map(c),p=[o];for(;p.length;){const y=p.shift();c.set(y,a?"on":"off"),u.has(y)&&p.push(...u.get(y))}let v=f.get(o);for(;v;){const y=u.get(v),w=y.every(E=>c.get(E)==="on"),C=y.every(E=>!c.has(E)||c.get(E)==="off");c.set(v,w?"on":C?"off":"indeterminate"),v=f.get(v)}return e&&!a&&Array.from(c.entries()).reduce((w,C)=>{let[E,P]=C;return P==="on"?[...w,E]:w},[]).length===0?m:c},in:(i,o,a)=>{let c=new Map;for(const u of i||[])c=n.select({id:u,value:!0,selected:new Map(c),children:o,parents:a});return c},out:(i,o)=>{const a=[];for(const[c,u]of i.entries())u==="on"&&!o.has(c)&&a.push(c);return a}};return n},Wo=Symbol.for("vuetify:nested"),N_={id:Zt(),root:{register:()=>null,unregister:()=>null,parents:Ft(new Map),children:Ft(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:Ft(new Set),selected:Ft(new Map),selectedValues:Ft([])}},YC=bt({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),qC=e=>{let n=!1;const i=Ft(new Map),o=Ft(new Map),a=es(e,"opened",e.opened,y=>new Set(y),y=>[...y.values()]),c=L(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return jC(e.mandatory);case"leaf":return GC(e.mandatory);case"independent":return Rh(e.mandatory);case"single-independent":return z_(e.mandatory);case"classic":default:return XC(e.mandatory)}}),u=L(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return WC;case"single":return $C;case"multiple":default:return V_}}),f=es(e,"selected",e.selected,y=>c.value.in(y,i.value,o.value),y=>c.value.out(y,i.value,o.value));_i(()=>{n=!0});function m(y){const w=[];let C=y;for(;C!=null;)w.unshift(C),C=o.value.get(C);return w}const p=fs("nested"),v={id:Zt(),root:{opened:a,selected:f,selectedValues:L(()=>{const y=[];for(const[w,C]of f.value.entries())C==="on"&&y.push(w);return y}),register:(y,w,C)=>{w&&y!==w&&o.value.set(y,w),C&&i.value.set(y,[]),w!=null&&i.value.set(w,[...i.value.get(w)||[],y])},unregister:y=>{if(n)return;i.value.delete(y);const w=o.value.get(y);if(w){const C=i.value.get(w)??[];i.value.set(w,C.filter(E=>E!==y))}o.value.delete(y),a.value.delete(y)},open:(y,w,C)=>{p.emit("click:open",{id:y,value:w,path:m(y),event:C});const E=u.value.open({id:y,value:w,opened:new Set(a.value),children:i.value,parents:o.value,event:C});E&&(a.value=E)},openOnSelect:(y,w,C)=>{const E=u.value.select({id:y,value:w,selected:new Map(f.value),opened:new Set(a.value),children:i.value,parents:o.value,event:C});E&&(a.value=E)},select:(y,w,C)=>{p.emit("click:select",{id:y,value:w,path:m(y),event:C});const E=c.value.select({id:y,value:w,selected:new Map(f.value),children:i.value,parents:o.value,event:C});E&&(f.value=E),v.root.openOnSelect(y,w,C)},children:i,parents:o}};return ts(Wo,v),v.root},U_=(e,n)=>{const i=pe(Wo,N_),o=Symbol(Ni()),a=L(()=>e.value!==void 0?e.value:o),c={...i,id:a,open:(u,f)=>i.root.open(a.value,u,f),openOnSelect:(u,f)=>i.root.openOnSelect(a.value,u,f),isOpen:L(()=>i.root.opened.value.has(a.value)),parent:L(()=>i.root.parents.value.get(a.value)),select:(u,f)=>i.root.select(a.value,u,f),isSelected:L(()=>i.root.selected.value.get(Kt(a.value))==="on"),isIndeterminate:L(()=>i.root.selected.value.get(a.value)==="indeterminate"),isLeaf:L(()=>!i.root.children.value.get(a.value)),isGroupActivator:i.isGroupActivator};return!i.isGroupActivator&&i.root.register(a.value,i.id.value,n),_i(()=>{!i.isGroupActivator&&i.root.unregister(a.value)}),n&&ts(Wo,c),c},ZC=()=>{const e=pe(Wo,N_);ts(Wo,{...e,isGroupActivator:!0})};function zl(){const e=Zt(!1);return Vi(()=>{window.requestAnimationFrame(()=>{e.value=!0})}),{ssrBootStyles:L(()=>e.value?void 0:{transition:"none !important"}),isBooted:Xo(e)}}const KC=Gr({name:"VListGroupActivator",setup(e,n){let{slots:i}=n;return ZC(),()=>{var o;return(o=i.default)==null?void 0:o.call(i)}}}),QC=bt({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Ae,default:"$collapse"},expandIcon:{type:Ae,default:"$expand"},prependIcon:Ae,appendIcon:Ae,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ie(),...Se()},"VListGroup"),Dg=zt()({name:"VListGroup",props:QC(),setup(e,n){let{slots:i}=n;const{isOpen:o,open:a,id:c}=U_(Lt(e,"value"),!0),u=L(()=>`v-list-group--id-${String(c.value)}`),f=O_(),{isBooted:m}=zl();function p(C){a(!o.value,C)}const v=L(()=>({onClick:p,class:"v-list-group__header",id:u.value})),y=L(()=>o.value?e.collapseIcon:e.expandIcon),w=L(()=>({VListItem:{active:o.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&y.value,appendIcon:e.appendIcon||!e.subgroup&&y.value,title:e.title,value:e.value}}));return Qt(()=>x(e.tag,{class:["v-list-group",{"v-list-group--prepend":f==null?void 0:f.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":o.value},e.class],style:e.style},{default:()=>[i.activator&&x(Ye,{defaults:w.value},{default:()=>[x(KC,null,{default:()=>[i.activator({props:v.value,isOpen:o.value})]})]}),x(xn,{transition:{component:xh},disabled:!m.value},{default:()=>{var C;return[ys(x("div",{class:"v-list-group__items",role:"group","aria-labelledby":u.value},[(C=i.default)==null?void 0:C.call(i)]),[[Wr,o.value]])]}})]})),{}}});const JC=jr("v-list-item-subtitle"),Ri=jr("v-list-item-title"),tS=bt({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Ae,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Ae,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:rr(),onClickOnce:rr(),...Pn(),...ie(),...ni(),...In(),...yi(),...Os(),...Dl(),...Se(),...Me(),...cn({variant:"text"})},"VListItem"),hs=zt()({name:"VListItem",directives:{Ripple:Yr},props:tS(),emits:{click:e=>!0},setup(e,n){let{attrs:i,slots:o,emit:a}=n;const c=Fl(e,i),u=L(()=>e.value===void 0?c.href.value:e.value),{select:f,isSelected:m,isIndeterminate:p,isGroupActivator:v,root:y,parent:w,openOnSelect:C}=U_(u,!1),E=O_(),P=L(()=>{var ut;return e.active!==!1&&(e.active||((ut=c.isActive)==null?void 0:ut.value)||m.value)}),k=L(()=>e.link!==!1&&c.isLink.value),R=L(()=>!e.disabled&&e.link!==!1&&(e.link||c.isClickable.value||e.value!=null&&!!E)),B=L(()=>e.rounded||e.nav),O=L(()=>e.color??e.activeColor),W=L(()=>({color:P.value?O.value??e.baseColor:e.baseColor,variant:e.variant}));jt(()=>{var ut;return(ut=c.isActive)==null?void 0:ut.value},ut=>{ut&&w.value!=null&&y.open(w.value,!0),ut&&C(ut)},{immediate:!0});const{themeClasses:G}=He(e),{borderClasses:X}=kn(e),{colorClasses:st,colorStyles:N,variantClasses:$}=Zr(W),{densityClasses:Y}=vi(e),{dimensionStyles:it}=Rn(e),{elevationClasses:U}=Ui(e),{roundedClasses:q}=Ys(B),Q=L(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),rt=L(()=>({isActive:P.value,select:f,isSelected:m.value,isIndeterminate:p.value}));function dt(ut){var Rt;a("click",ut),!(v||!R.value)&&((Rt=c.navigate)==null||Rt.call(c,ut),e.value!=null&&f(!m.value,ut))}function At(ut){(ut.key==="Enter"||ut.key===" ")&&(ut.preventDefault(),dt(ut))}return Qt(()=>{const ut=k.value?"a":e.tag,Rt=o.title||e.title,te=o.subtitle||e.subtitle,Jt=!!(e.appendAvatar||e.appendIcon),he=!!(Jt||o.append),Be=!!(e.prependAvatar||e.prependIcon),qe=!!(Be||o.prepend);return E==null||E.updateHasPrepend(qe),e.activeColor&&$w("active-color",["color","base-color"]),ys(x(ut,{class:["v-list-item",{"v-list-item--active":P.value,"v-list-item--disabled":e.disabled,"v-list-item--link":R.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!qe&&(E==null?void 0:E.hasPrepend.value),[`${e.activeClass}`]:e.activeClass&&P.value},G.value,X.value,st.value,Y.value,U.value,Q.value,q.value,$.value,e.class],style:[N.value,it.value,e.style],href:c.href.value,tabindex:R.value?E?-2:0:void 0,onClick:dt,onKeydown:R.value&&!k.value&&At},{default:()=>{var ss;return[qr(R.value||P.value,"v-list-item"),qe&&x("div",{key:"prepend",class:"v-list-item__prepend"},[o.prepend?x(Ye,{key:"prepend-defaults",disabled:!Be,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var _t;return[(_t=o.prepend)==null?void 0:_t.call(o,rt.value)]}}):x(Re,null,[e.prependAvatar&&x(Dr,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&x(We,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),x("div",{class:"v-list-item__content","data-no-activator":""},[Rt&&x(Ri,{key:"title"},{default:()=>{var _t;return[((_t=o.title)==null?void 0:_t.call(o,{title:e.title}))??e.title]}}),te&&x(JC,{key:"subtitle"},{default:()=>{var _t;return[((_t=o.subtitle)==null?void 0:_t.call(o,{subtitle:e.subtitle}))??e.subtitle]}}),(ss=o.default)==null?void 0:ss.call(o,rt.value)]),he&&x("div",{key:"append",class:"v-list-item__append"},[o.append?x(Ye,{key:"append-defaults",disabled:!Jt,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var _t;return[(_t=o.append)==null?void 0:_t.call(o,rt.value)]}}):x(Re,null,[e.appendIcon&&x(We,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&x(Dr,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])]}}),[[Di("ripple"),R.value&&e.ripple]])}),{}}}),eS=bt({color:String,inset:Boolean,sticky:Boolean,title:String,...ie(),...Se()},"VListSubheader"),Ua=zt()({name:"VListSubheader",props:eS(),setup(e,n){let{slots:i}=n;const{textColorClasses:o,textColorStyles:a}=en(Lt(e,"color"));return Qt(()=>{const c=!!(i.default||e.title);return x(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},o.value,e.class],style:[{textColorStyles:a},e.style]},{default:()=>{var u;return[c&&x("div",{class:"v-list-subheader__text"},[((u=i.default)==null?void 0:u.call(i))??e.title])]}})}),{}}});const sS=bt({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...ie(),...Me()},"VDivider"),iS=zt()({name:"VDivider",props:sS(),setup(e,n){let{attrs:i}=n;const{themeClasses:o}=He(e),{textColorClasses:a,textColorStyles:c}=en(Lt(e,"color")),u=L(()=>{const f={};return e.length&&(f[e.vertical?"maxHeight":"maxWidth"]=Vt(e.length)),e.thickness&&(f[e.vertical?"borderRightWidth":"borderTopWidth"]=Vt(e.thickness)),f});return Qt(()=>x("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},o.value,a.value,e.class],style:[u.value,c.value,e.style],"aria-orientation":!i.role||i.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${i.role||"separator"}`},null)),{}}}),nS=bt({items:Array},"VListChildren"),H_=zt()({name:"VListChildren",props:nS(),setup(e,n){let{slots:i}=n;return L_(),()=>{var o,a;return((o=i.default)==null?void 0:o.call(i))??((a=e.items)==null?void 0:a.map(c=>{var C,E;let{children:u,props:f,type:m,raw:p}=c;if(m==="divider")return((C=i.divider)==null?void 0:C.call(i,{props:f}))??x(iS,f,null);if(m==="subheader")return((E=i.subheader)==null?void 0:E.call(i,{props:f}))??x(Ua,f,null);const v={subtitle:i.subtitle?P=>{var k;return(k=i.subtitle)==null?void 0:k.call(i,{...P,item:p})}:void 0,prepend:i.prepend?P=>{var k;return(k=i.prepend)==null?void 0:k.call(i,{...P,item:p})}:void 0,append:i.append?P=>{var k;return(k=i.append)==null?void 0:k.call(i,{...P,item:p})}:void 0,title:i.title?P=>{var k;return(k=i.title)==null?void 0:k.call(i,{...P,item:p})}:void 0},[y,w]=Dg.filterProps(f);return u?x(Dg,ye({value:f==null?void 0:f.value},y),{activator:P=>{let{props:k}=P;return i.header?i.header({props:{...f,...k}}):x(hs,ye(f,k),v)},default:()=>x(H_,{items:u},i)}):i.item?i.item({props:f}):x(hs,f,v)}))}}}),rS=bt({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"list-items");function oS(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function aS(e,n){const i=go(n,e.itemType,"item"),o=oS(n)?n:go(n,e.itemTitle),a=go(n,e.itemValue,void 0),c=go(n,e.itemChildren),u=e.itemProps===!0?gh(n,["children"])[1]:go(n,e.itemProps),f={title:o,value:a,...u};return{type:i,title:f.title,value:f.value,props:f,children:i==="item"&&c?$_(e,c):void 0,raw:n}}function $_(e,n){const i=[];for(const o of n)i.push(aS(e,o));return i}function lS(e){return{items:L(()=>$_(e,e.items))}}const cS=bt({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...YC({selectStrategy:"single-leaf",openStrategy:"list"}),...Pn(),...ie(),...ni(),...In(),...yi(),itemType:{type:String,default:"type"},...rS(),...Os(),...Se(),...Me(),...cn({variant:"text"})},"VList"),wu=zt()({name:"VList",props:cS(),emits:{"update:selected":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:i}=n;const{items:o}=lS(e),{themeClasses:a}=He(e),{backgroundColorClasses:c,backgroundColorStyles:u}=Li(Lt(e,"bgColor")),{borderClasses:f}=kn(e),{densityClasses:m}=vi(e),{dimensionStyles:p}=Rn(e),{elevationClasses:v}=Ui(e),{roundedClasses:y}=Ys(e),{open:w,select:C}=qC(e),E=L(()=>e.lines?`v-list--${e.lines}-line`:void 0),P=Lt(e,"activeColor"),k=Lt(e,"baseColor"),R=Lt(e,"color");L_(),an({VListGroup:{activeColor:P,baseColor:k,color:R},VListItem:{activeClass:Lt(e,"activeClass"),activeColor:P,baseColor:k,color:R,density:Lt(e,"density"),disabled:Lt(e,"disabled"),lines:Lt(e,"lines"),nav:Lt(e,"nav"),variant:Lt(e,"variant")}});const B=Zt(!1),O=Ft();function W($){B.value=!0}function G($){B.value=!1}function X($){var Y;!B.value&&!($.relatedTarget&&((Y=O.value)!=null&&Y.contains($.relatedTarget)))&&N()}function st($){if(O.value){if($.key==="ArrowDown")N("next");else if($.key==="ArrowUp")N("prev");else if($.key==="Home")N("first");else if($.key==="End")N("last");else return;$.preventDefault()}}function N($){if(O.value)return Up(O.value,$)}return Qt(()=>x(e.tag,{ref:O,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav},a.value,c.value,f.value,m.value,v.value,E.value,y.value,e.class],style:[u.value,p.value,e.style],tabindex:e.disabled||B.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:W,onFocusout:G,onFocus:X,onKeydown:st},{default:()=>[x(H_,{items:o.value},i)]})),{open:w,select:C,focus:N}}});const Mh=Symbol.for("vuetify:v-slider");function xu(e,n,i){const o=i==="vertical",a=n.getBoundingClientRect(),c="touches"in e?e.touches[0]:e;return o?c.clientY-(a.top+a.height/2):c.clientX-(a.left+a.width/2)}function uS(e,n){return"touches"in e&&e.touches.length?e.touches[0][n]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][n]:e[n]}const W_=bt({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...Os(),...yi({elevation:2})},"Slider"),G_=e=>{const n=L(()=>parseFloat(e.min)),i=L(()=>parseFloat(e.max)),o=L(()=>+e.step>0?parseFloat(e.step):0),a=L(()=>Math.max(tg(o.value),tg(n.value)));function c(u){if(o.value<=0)return u;const f=Br(u,n.value,i.value),m=n.value%o.value,p=Math.round((f-m)/o.value)*o.value+m;return parseFloat(Math.min(p,i.value).toFixed(a.value))}return{min:n,max:i,step:o,decimals:a,roundValue:c}},j_=e=>{let{props:n,steps:i,onSliderStart:o,onSliderMove:a,onSliderEnd:c,getActiveThumb:u}=e;const{isRtl:f}=js(),m=Lt(n,"reverse"),p=L(()=>{let _t=f.value?"rtl":"ltr";return n.reverse&&(_t=_t==="rtl"?"ltr":"rtl"),_t}),{min:v,max:y,step:w,decimals:C,roundValue:E}=i,P=L(()=>parseInt(n.thumbSize,10)),k=L(()=>parseInt(n.tickSize,10)),R=L(()=>parseInt(n.trackSize,10)),B=L(()=>(y.value-v.value)/w.value),O=Lt(n,"disabled"),W=L(()=>n.direction==="vertical"),G=L(()=>n.error||n.disabled?void 0:n.thumbColor??n.color),X=L(()=>n.error||n.disabled?void 0:n.trackColor??n.color),st=L(()=>n.error||n.disabled?void 0:n.trackFillColor??n.color),N=Zt(!1),$=Zt(0),Y=Ft(),it=Ft();function U(_t){var nt;const et=n.direction==="vertical",Tt=et?"top":"left",vt=et?"height":"width",Bt=et?"clientY":"clientX",{[Tt]:oe,[vt]:M}=(nt=Y.value)==null?void 0:nt.$el.getBoundingClientRect(),F=uS(_t,Bt);let D=Math.min(Math.max((F-oe-$.value)/M,0),1)||0;return(et||p.value==="rtl")&&(D=1-D),E(v.value+D*(y.value-v.value))}const q=_t=>{c({value:U(_t)}),N.value=!1,$.value=0},Q=_t=>{it.value=u(_t),it.value&&(it.value.focus(),N.value=!0,it.value.contains(_t.target)?$.value=xu(_t,it.value,n.direction):($.value=0,a({value:U(_t)})),o({value:U(_t)}))},rt={passive:!0,capture:!0};function dt(_t){a({value:U(_t)})}function At(_t){_t.stopPropagation(),_t.preventDefault(),q(_t),window.removeEventListener("mousemove",dt,rt),window.removeEventListener("mouseup",At)}function ut(_t){var et;q(_t),window.removeEventListener("touchmove",dt,rt),(et=_t.target)==null||et.removeEventListener("touchend",ut)}function Rt(_t){var et;Q(_t),window.addEventListener("touchmove",dt,rt),(et=_t.target)==null||et.addEventListener("touchend",ut,{passive:!1})}function te(_t){_t.preventDefault(),Q(_t),window.addEventListener("mousemove",dt,rt),window.addEventListener("mouseup",At,{passive:!1})}const Jt=_t=>{const et=(_t-v.value)/(y.value-v.value)*100;return Br(isNaN(et)?0:et,0,100)},he=Lt(n,"showTicks"),Be=L(()=>he.value?n.ticks?Array.isArray(n.ticks)?n.ticks.map(_t=>({value:_t,position:Jt(_t),label:_t.toString()})):Object.keys(n.ticks).map(_t=>({value:parseFloat(_t),position:Jt(parseFloat(_t)),label:n.ticks[_t]})):B.value!==1/0?fh(B.value+1).map(_t=>{const et=v.value+_t*w.value;return{value:et,position:Jt(et)}}):[]:[]),qe=L(()=>Be.value.some(_t=>{let{label:et}=_t;return!!et})),ss={activeThumbRef:it,color:Lt(n,"color"),decimals:C,disabled:O,direction:Lt(n,"direction"),elevation:Lt(n,"elevation"),hasLabels:qe,horizontalDirection:p,isReversed:m,min:v,max:y,mousePressed:N,numTicks:B,onSliderMousedown:te,onSliderTouchstart:Rt,parsedTicks:Be,parseMouseMove:U,position:Jt,readonly:Lt(n,"readonly"),rounded:Lt(n,"rounded"),roundValue:E,showTicks:he,startOffset:$,step:w,thumbSize:P,thumbColor:G,thumbLabel:Lt(n,"thumbLabel"),ticks:Lt(n,"ticks"),tickSize:k,trackColor:X,trackContainerRef:Y,trackFillColor:st,trackSize:R,vertical:W};return ts(Mh,ss),ss};const hS=bt({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...ie()},"VSliderThumb"),Cu=zt()({name:"VSliderThumb",directives:{Ripple:Yr},props:hS(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i,emit:o}=n;const a=pe(Mh),{rtlClasses:c}=js();if(!a)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:u,step:f,vertical:m,disabled:p,thumbSize:v,thumbLabel:y,direction:w,readonly:C,elevation:E,isReversed:P,horizontalDirection:k,mousePressed:R,decimals:B}=a,{textColorClasses:O,textColorStyles:W}=en(u),{pageup:G,pagedown:X,end:st,home:N,left:$,right:Y,down:it,up:U}=Lw,q=[G,X,st,N,$,Y,it,U],Q=L(()=>f.value?[1,2,3]:[1,5,10]);function rt(At,ut){if(!q.includes(At.key))return;At.preventDefault();const Rt=f.value||.1,te=(e.max-e.min)/Rt;if([$,Y,it,U].includes(At.key)){const he=(k.value==="rtl"?[$,U]:[Y,U]).includes(At.key)?1:-1,Be=At.shiftKey?2:At.ctrlKey?1:0;ut=ut+he*Rt*Q.value[Be]}else if(At.key===N)ut=e.min;else if(At.key===st)ut=e.max;else{const Jt=At.key===X?1:-1;ut=ut-Jt*Rt*(te>100?te/10:10)}return Math.max(e.min,Math.min(e.max,ut))}function dt(At){const ut=rt(At,e.modelValue);ut!=null&&o("update:modelValue",ut)}return Qt(()=>{const At=Vt(m.value||P.value?100-e.position:e.position,"%"),{elevationClasses:ut}=Ui(L(()=>p.value?void 0:E.value));return x("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&R.value},e.class,c.value],style:[{"--v-slider-thumb-position":At,"--v-slider-thumb-size":Vt(v.value)},e.style],role:"slider",tabindex:p.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!C.value,"aria-orientation":w.value,onKeydown:C.value?void 0:dt},[x("div",{class:["v-slider-thumb__surface",O.value,ut.value],style:{...W.value}},null),ys(x("div",{class:["v-slider-thumb__ripple",O.value],style:W.value},null),[[Di("ripple"),e.ripple,null,{circle:!0,center:!0}]]),x(zx,{origin:"bottom center"},{default:()=>{var Rt;return[ys(x("div",{class:"v-slider-thumb__label-container"},[x("div",{class:["v-slider-thumb__label"]},[x("div",null,[((Rt=i["thumb-label"])==null?void 0:Rt.call(i,{modelValue:e.modelValue}))??e.modelValue.toFixed(f.value?B.value:1)])])]),[[Wr,y.value&&e.focused||y.value==="always"]])]}})])}),{}}});const dS=bt({start:{type:Number,required:!0},stop:{type:Number,required:!0},...ie()},"VSliderTrack"),X_=zt()({name:"VSliderTrack",props:dS(),emits:{},setup(e,n){let{slots:i}=n;const o=pe(Mh);if(!o)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:a,horizontalDirection:c,parsedTicks:u,rounded:f,showTicks:m,tickSize:p,trackColor:v,trackFillColor:y,trackSize:w,vertical:C,min:E,max:P}=o,{roundedClasses:k}=Ys(f),{backgroundColorClasses:R,backgroundColorStyles:B}=Li(y),{backgroundColorClasses:O,backgroundColorStyles:W}=Li(v),G=L(()=>`inset-${C.value?"block-end":"inline-start"}`),X=L(()=>C.value?"height":"width"),st=L(()=>({[G.value]:"0%",[X.value]:"100%"})),N=L(()=>e.stop-e.start),$=L(()=>({[G.value]:Vt(e.start,"%"),[X.value]:Vt(N.value,"%")})),Y=L(()=>m.value?(C.value?u.value.slice().reverse():u.value).map((U,q)=>{var dt;const Q=C.value?"bottom":"margin-inline-start",rt=U.value!==E.value&&U.value!==P.value?Vt(U.position,"%"):void 0;return x("div",{key:U.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":U.position>=e.start&&U.position<=e.stop,"v-slider-track__tick--first":U.value===E.value,"v-slider-track__tick--last":U.value===P.value}],style:{[Q]:rt}},[(U.label||i["tick-label"])&&x("div",{class:"v-slider-track__tick-label"},[((dt=i["tick-label"])==null?void 0:dt.call(i,{tick:U,index:q}))??U.label])])}):[]);return Qt(()=>x("div",{class:["v-slider-track",k.value,e.class],style:[{"--v-slider-track-size":Vt(w.value),"--v-slider-tick-size":Vt(p.value),direction:C.value?void 0:c.value},e.style]},[x("div",{class:["v-slider-track__background",O.value,{"v-slider-track__background--opacity":!!a.value||!y.value}],style:{...st.value,...W.value}},null),x("div",{class:["v-slider-track__fill",R.value],style:{...$.value,...B.value}},null),m.value&&x("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":m.value==="always"}]},[Y.value])])),{}}}),fS=bt({...Sh(),...Pl(),...W_(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},"VRangeSlider"),Lg=zt()({name:"VRangeSlider",props:fS(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,end:e=>!0,start:e=>!0},setup(e,n){let{slots:i,emit:o}=n;const a=Ft(),c=Ft(),u=Ft(),{rtlClasses:f}=js();function m($){if(!a.value||!c.value)return;const Y=xu($,a.value.$el,e.direction),it=xu($,c.value.$el,e.direction),U=Math.abs(Y),q=Math.abs(it);return U<q||U===q&&Y<0?a.value.$el:c.value.$el}const p=G_(e),v=es(e,"modelValue",void 0,$=>$!=null&&$.length?$.map(Y=>p.roundValue(Y)):[0,0]),{activeThumbRef:y,hasLabels:w,max:C,min:E,mousePressed:P,onSliderMousedown:k,onSliderTouchstart:R,position:B,trackContainerRef:O}=j_({props:e,steps:p,onSliderStart:()=>{o("start",v.value)},onSliderEnd:$=>{var U;let{value:Y}=$;const it=y.value===((U=a.value)==null?void 0:U.$el)?[Y,v.value[1]]:[v.value[0],Y];v.value=it,o("end",it)},onSliderMove:$=>{var q,Q,rt,dt;let{value:Y}=$;const[it,U]=v.value;!e.strict&&it===U&&it!==E.value&&(y.value=Y>it?(q=c.value)==null?void 0:q.$el:(Q=a.value)==null?void 0:Q.$el,(rt=y.value)==null||rt.focus()),y.value===((dt=a.value)==null?void 0:dt.$el)?v.value=[Math.min(Y,U),U]:v.value=[it,Math.max(it,Y)]},getActiveThumb:m}),{isFocused:W,focus:G,blur:X}=Eh(e),st=L(()=>B(v.value[0])),N=L(()=>B(v.value[1]));return Qt(()=>{const[$,Y]=Fr.filterProps(e),it=!!(e.label||i.label||i.prepend);return x(Fr,ye({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!i["tick-label"]||w.value,"v-slider--focused":W.value,"v-slider--pressed":P.value,"v-slider--disabled":e.disabled},f.value,e.class],style:e.style,ref:u},$,{focused:W.value}),{...i,prepend:it?U=>{var q,Q;return x(Re,null,[((q=i.label)==null?void 0:q.call(i,U))??e.label?x(Ah,{class:"v-slider__label",text:e.label},null):void 0,(Q=i.prepend)==null?void 0:Q.call(i,U)])}:void 0,default:U=>{var rt,dt;let{id:q,messagesId:Q}=U;return x("div",{class:"v-slider__container",onMousedown:k,onTouchstartPassive:R},[x("input",{id:`${q.value}_start`,name:e.name||q.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:v.value[0]},null),x("input",{id:`${q.value}_stop`,name:e.name||q.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:v.value[1]},null),x(X_,{ref:O,start:st.value,stop:N.value},{"tick-label":i["tick-label"]}),x(Cu,{ref:a,"aria-describedby":Q.value,focused:W&&y.value===((rt=a.value)==null?void 0:rt.$el),modelValue:v.value[0],"onUpdate:modelValue":At=>v.value=[At,v.value[1]],onFocus:At=>{var ut,Rt,te,Jt;G(),y.value=(ut=a.value)==null?void 0:ut.$el,v.value[0]===v.value[1]&&v.value[1]===E.value&&At.relatedTarget!==((Rt=c.value)==null?void 0:Rt.$el)&&((te=a.value)==null||te.$el.blur(),(Jt=c.value)==null||Jt.$el.focus())},onBlur:()=>{X(),y.value=void 0},min:E.value,max:v.value[1],position:st.value},{"thumb-label":i["thumb-label"]}),x(Cu,{ref:c,"aria-describedby":Q.value,focused:W&&y.value===((dt=c.value)==null?void 0:dt.$el),modelValue:v.value[1],"onUpdate:modelValue":At=>v.value=[v.value[0],At],onFocus:At=>{var ut,Rt,te,Jt;G(),y.value=(ut=c.value)==null?void 0:ut.$el,v.value[0]===v.value[1]&&v.value[0]===C.value&&At.relatedTarget!==((Rt=a.value)==null?void 0:Rt.$el)&&((te=c.value)==null||te.$el.blur(),(Jt=a.value)==null||Jt.$el.focus())},onBlur:()=>{X(),y.value=void 0},min:v.value[0],max:C.value,position:N.value},{"thumb-label":i["thumb-label"]})])}})}),{}}}),gS=bt({...Sh(),...W_(),...Pl(),modelValue:{type:[Number,String],default:0}},"VSlider"),Sr=zt()({name:"VSlider",props:gS(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,n){let{slots:i,emit:o}=n;const a=Ft(),{rtlClasses:c}=js(),u=G_(e),f=es(e,"modelValue",void 0,X=>{const st=typeof X=="string"?parseFloat(X):X??u.min.value;return u.roundValue(st)}),{min:m,max:p,mousePressed:v,roundValue:y,onSliderMousedown:w,onSliderTouchstart:C,trackContainerRef:E,position:P,hasLabels:k,readonly:R}=j_({props:e,steps:u,onSliderStart:()=>{o("start",f.value)},onSliderEnd:X=>{let{value:st}=X;const N=y(st);f.value=N,o("end",N)},onSliderMove:X=>{let{value:st}=X;return f.value=y(st)},getActiveThumb:()=>{var X;return(X=a.value)==null?void 0:X.$el}}),{isFocused:B,focus:O,blur:W}=Eh(e),G=L(()=>P(f.value));return Qt(()=>{const[X,st]=Fr.filterProps(e),N=!!(e.label||i.label||i.prepend);return x(Fr,ye({class:["v-slider",{"v-slider--has-labels":!!i["tick-label"]||k.value,"v-slider--focused":B.value,"v-slider--pressed":v.value,"v-slider--disabled":e.disabled},c.value,e.class],style:e.style},X,{focused:B.value}),{...i,prepend:N?$=>{var Y,it;return x(Re,null,[((Y=i.label)==null?void 0:Y.call(i,$))??e.label?x(Ah,{id:$.id.value,class:"v-slider__label",text:e.label},null):void 0,(it=i.prepend)==null?void 0:it.call(i,$)])}:void 0,default:$=>{let{id:Y,messagesId:it}=$;return x("div",{class:"v-slider__container",onMousedown:R.value?void 0:w,onTouchstartPassive:R.value?void 0:C},[x("input",{id:Y.value,name:e.name||Y.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:f.value},null),x(X_,{ref:E,start:0,stop:G.value},{"tick-label":i["tick-label"]}),x(Cu,{ref:a,"aria-describedby":it.value,focused:B.value,min:m.value,max:p.value,modelValue:f.value,"onUpdate:modelValue":U=>f.value=U,position:G.value,elevation:e.elevation,onFocus:O,onBlur:W},{"thumb-label":i["thumb-label"]})])}})}),{}}}),Bh=e=>(qm("data-v-c8a84ee3"),e=e(),Zm(),e),mS=Bh(()=>qt("p",{class:"text-body-2 mt-2"}," We would like your consent to save pictures from your webcam. We combine these with information about where you're clicking to train a computer to work out where people are looking on the screen. ",-1)),pS=Bh(()=>qt("p",{class:"text-body-2 mt-2"}," If you like, you can play the game in 'free play' mode. In this mode, you won't have a face to try to match, and you can experiment with putting the pieces together in any way you like. ",-1)),_S={key:0},vS=Bh(()=>qt("p",{class:"text-body-2"}," You can use these buttons to load default settings for adults or children. ",-1)),yS=ii({__name:"SettingsPanel",emits:["changed"],setup(e,{emit:n}){const{currentPage:i,detailsOpen:o,settingsOpen:a,difficultySelected:c}=si(on()),{game_mode:u,send_data_consent:f,difficulty_step:m,start_level:p,max_components:v,component_spawn_delay_min:y,component_spawn_delay_variation:w,component_lifetime:C,target_frequency:E,needy_potato_enabled:P,needy_potato_delay_min:k,needy_potato_delay_variation:R,needy_potato_duration:B}=si(nr()),{load_defaults:O}=nr(),W={child:dh,adult:Rp,free_play:Mp},G=Ft(!1),X=Ft(0),st=L({get:()=>{X.value;for(const[q,Q]of Object.entries(W)){let rt=!0;for(const[dt,At]of Object.entries(it.value))if(dt!=="send_data_consent"&&(!Object.keys(Q).includes(dt)||Q[dt]!==At)){rt=!1;break}if(rt)return c.value=q,i.value=Math.max(Ws.CONSENT,i.value),q}return""},set:function(q){(q==="child"||q==="adult"||q==="free_play")&&O(q)}}),N=L({get:()=>u.value==="free_play",set:q=>{q?u.value="free_play":u.value="matching"}}),$=L({get:()=>[y.value,y.value+w.value],set:q=>{q[0]>q[1]&&(q=[q[1],q[0]]),y.value=q[0],w.value=q[1]-q[0]}}),Y=L({get:()=>[k.value,k.value+R.value],set:q=>{q[0]>q[1]&&(q=[q[1],q[0]]),k.value=q[0],R.value=q[1]-q[0]}}),it=L(()=>({game_mode:u.value,send_data_consent:f==null?void 0:f.value,difficulty_step:m.value,start_level:p==null?void 0:p.value,max_components:v.value,component_spawn_delay_min:y.value,component_spawn_delay_variation:w.value,component_lifetime:C.value,target_frequency:E.value,needy_potato_enabled:P.value,needy_potato_delay_min:k.value,needy_potato_delay_variation:R.value,needy_potato_duration:B.value}));jt(it,()=>{n("changed"),X.value++});const U=(q,Q,rt)=>Math.min(Math.max(q,Q),rt);return(q,Q)=>(me(),Ie(bs,{class:"mx-auto my-4 px-2","max-width":"600"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("Settings")]),_:1}),mS,x(aC),pS,x(_u,{modelValue:N.value,"onUpdate:modelValue":Q[0]||(Q[0]=rt=>N.value=rt),class:"d-flex justify-center",inset:!0,color:N.value?"success":"",label:"Use free play mode"},null,8,["modelValue","color"]),N.value?as("",!0):(me(),_n("div",_S,[vS,x(dC,{modelValue:st.value,"onUpdate:modelValue":Q[1]||(Q[1]=rt=>st.value=rt),class:"w-100 presets",variant:"outlined",color:"primary"},{default:j(()=>[x(we,{value:"child",class:"w-50"},{default:j(()=>[mt("Child")]),_:1}),x(we,{value:"adult",class:"w-50"},{default:j(()=>[mt("Adult")]),_:1})]),_:1},8,["modelValue"])])),x(xh,{class:"advanced_settings my-4"},{default:j(()=>[G.value?(me(),Ie(wu,{key:0},{default:j(()=>[x(Ua,{inset:!0},{default:j(()=>[mt("About Pieces")]),_:1}),x(hs,null,{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" At most "),x(ci,{label:!0},{default:j(()=>[mt(Je(xt(v)),1)]),_:1}),mt(" Pieces onscreen at once ")]),_:1}),x(Sr,{min:"0",max:"50",step:"1",modelValue:xt(v),"onUpdate:modelValue":[Q[2]||(Q[2]=rt=>re(v)?v.value=rt:null),Q[3]||(Q[3]=rt=>v.value=U(rt,1,50))]},null,8,["modelValue"])]),_:1}),x(hs,null,{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" Pieces appear every "),x(ci,{label:!0},{default:j(()=>[mt(Je(($.value[0]/1e3).toFixed(2)),1)]),_:1}),mt(" to "),x(ci,{label:!0},{default:j(()=>[mt(Je(($.value[1]/1e3).toFixed(2)),1)]),_:1}),mt(" seconds ")]),_:1}),x(Lg,{min:"0",max:"10000",step:"100",modelValue:$.value,"onUpdate:modelValue":Q[4]||(Q[4]=rt=>$.value=rt)},null,8,["modelValue"])]),_:1}),x(hs,null,{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" Pieces last for "),x(ci,{label:!0},{default:j(()=>[mt(Je((xt(C)/1e3).toFixed(2)),1)]),_:1}),mt(" seconds ")]),_:1}),x(Sr,{min:"0",max:"10000",step:"100",modelValue:xt(C),"onUpdate:modelValue":[Q[5]||(Q[5]=rt=>re(C)?C.value=rt:null),Q[6]||(Q[6]=rt=>C.value=U(rt,100,1e4))]},null,8,["modelValue"])]),_:1}),N.value?as("",!0):(me(),Ie(hs,{key:0},{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" Pieces are "),x(ci,{label:!0},{default:j(()=>[mt(Je((xt(E)*100).toFixed(0))+"%",1)]),_:1}),mt(" likely to be useful ")]),_:1}),x(Sr,{min:"0",max:"1",step:"0.1",modelValue:xt(E),"onUpdate:modelValue":[Q[7]||(Q[7]=rt=>re(E)?E.value=rt:null),Q[8]||(Q[8]=rt=>E.value=U(rt,.1,1))]},null,8,["modelValue"])]),_:1})),N.value?as("",!0):(me(),Ie(Ua,{key:1,inset:!0},{default:j(()=>[mt("About Potato Thieves")]),_:1})),N.value?as("",!0):(me(),Ie(hs,{key:2},{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" Potato Thieves are "),x(ci,{label:!0},{default:j(()=>[mt(Je(xt(P)?"allowed":"not allowed"),1)]),_:1})]),_:1}),x(_u,{modelValue:xt(P),"onUpdate:modelValue":Q[9]||(Q[9]=rt=>re(P)?P.value=rt:null)},null,8,["modelValue"])]),_:1})),xt(P)&&xt(u)!=="free_play"?(me(),Ie(hs,{key:3},{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" Potato Thieves appear every "),x(ci,{label:!0},{default:j(()=>[mt(Je((Y.value[0]/1e3).toFixed(2)),1)]),_:1}),mt(" to "),x(ci,{label:!0},{default:j(()=>[mt(Je((Y.value[1]/1e3).toFixed(2)),1)]),_:1}),mt(" seconds ")]),_:1}),x(Lg,{min:"0",max:"120000",step:"100",modelValue:Y.value,"onUpdate:modelValue":[Q[10]||(Q[10]=rt=>Y.value=rt),Q[11]||(Q[11]=rt=>Y.value=rt.map(dt=>U(dt,200,1e4)))]},null,8,["modelValue"])]),_:1})):as("",!0),xt(P)&&xt(u)!=="free_play"?(me(),Ie(hs,{key:4},{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" Potato Thieves steal the potato after "),x(ci,{label:!0},{default:j(()=>[mt(Je((xt(B)/1e3).toFixed(2)),1)]),_:1}),mt(" seconds ")]),_:1}),x(Sr,{min:"0",max:"30000",step:"100",modelValue:xt(B),"onUpdate:modelValue":[Q[12]||(Q[12]=rt=>re(B)?B.value=rt:null),Q[13]||(Q[13]=rt=>B.value=U(rt,200,1e4))]},null,8,["modelValue"])]),_:1})):as("",!0),N.value?as("",!0):(me(),Ie(Ua,{key:5,inset:!0},{default:j(()=>[mt("About the Difficulty")]),_:1})),N.value?as("",!0):(me(),Ie(hs,{key:6},{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" The difficulty increases by about "),x(ci,{label:!0},{default:j(()=>[mt(Je((xt(m)*100).toFixed(0))+"%",1)]),_:1}),mt(" each level ")]),_:1}),x(Sr,{min:"0",max:"0.25",step:"0.01",modelValue:xt(m),"onUpdate:modelValue":[Q[14]||(Q[14]=rt=>re(m)?m.value=rt:null),Q[15]||(Q[15]=rt=>m.value=U(rt,.01,.25))]},null,8,["modelValue"])]),_:1})),N.value?as("",!0):(me(),Ie(hs,{key:7},{default:j(()=>[x(Ri,null,{default:j(()=>[mt(" You start at level "),x(ci,{label:!0},{default:j(()=>[mt(Je((xt(p)||0)+1),1)]),_:1})]),_:1}),x(Sr,{min:"0",max:"9",step:"1",modelValue:xt(p),"onUpdate:modelValue":[Q[16]||(Q[16]=rt=>re(p)?p.value=rt:null),Q[17]||(Q[17]=rt=>p.value=U(rt,0,9))]},null,8,["modelValue"])]),_:1}))]),_:1})):as("",!0)]),_:1}),x(fi,null,{default:j(()=>[x(we,{onClick:Q[18]||(Q[18]=rt=>G.value=!G.value)},{default:j(()=>[mt(Je(G.value?"Hide advanced":"Show more")+" settings ",1)]),_:1}),x(Ms),x(we,{onClick:Q[19]||(Q[19]=rt=>o.value=!0)},{default:j(()=>[mt(" Full details ")]),_:1}),x(Ms),x(we,{onClick:Q[20]||(Q[20]=()=>a.value=!1),variant:"tonal",class:"close-settings",color:"success"},{default:j(()=>[mt("Close")]),_:1})]),_:1})]),_:1}))}});const Fh=(e,n)=>{const i=e.__vccOpts||e;for(const[o,a]of n)i[o]=a;return i},bS=Fh(yS,[["__scopeId","data-v-c8a84ee3"]]),wS="/boop-boop/assets/eg_left_eye-72147771.jpg",xS="/boop-boop/assets/eg_left_eye_no-7153db02.jpg";const Y_=Symbol.for("vuetify:v-item-group"),CS=bt({...ie(),...Ph({selectedClass:"v-item--selected"}),...Se(),...Me()},"VItemGroup"),Dh=zt()({name:"VItemGroup",props:CS(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{isSelected:a,select:c,next:u,prev:f,selected:m}=Rl(e,Y_);return()=>x(e.tag,{class:["v-item-group",o.value,e.class],style:e.style},{default:()=>{var p;return[(p=i.default)==null?void 0:p.call(i,{isSelected:a,select:c,next:u,prev:f,selected:m.value})]}})}}),Lr=zt()({name:"VItem",props:kl(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:i}=n;const{isSelected:o,select:a,toggle:c,selectedClass:u,value:f,disabled:m}=Il(e,Y_);return()=>{var p;return(p=i.default)==null?void 0:p.call(i,{isSelected:o.value,selectedClass:u.value,select:a,toggle:c,value:f.value,disabled:m.value})}}});const SS=bt({align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>e==null||["start","end"].includes(e)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...ie(),...ni(),...Se(),...Me()},"VTimeline"),Nl=zt()({name:"VTimeline",props:SS(),setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{densityClasses:a}=vi(e),{rtlClasses:c}=js();an({VTimelineDivider:{lineColor:Lt(e,"lineColor")},VTimelineItem:{density:Lt(e,"density"),lineInset:Lt(e,"lineInset")}});const u=L(()=>{const m=e.side?e.side:e.density!=="default"?"end":null;return m&&`v-timeline--side-${m}`}),f=L(()=>{const m=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return m;case"start":return m[0];case"end":return m[1];default:return null}});return Qt(()=>x(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,f.value,{"v-timeline--inset-line":!!e.lineInset},o.value,a.value,u.value,c.value,e.class],style:[{"--v-timeline-line-thickness":Vt(e.lineThickness)},e.style]},i)),{}}}),ES=bt({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:Ae,iconColor:String,lineColor:String,...ie(),...Os(),...ar(),...yi()},"VTimelineDivider"),AS=zt()({name:"VTimelineDivider",props:ES(),setup(e,n){let{slots:i}=n;const{sizeClasses:o,sizeStyles:a}=Xr(e,"v-timeline-divider__dot"),{backgroundColorStyles:c,backgroundColorClasses:u}=Li(Lt(e,"dotColor")),{roundedClasses:f}=Ys(e,"v-timeline-divider__dot"),{elevationClasses:m}=Ui(e),{backgroundColorClasses:p,backgroundColorStyles:v}=Li(Lt(e,"lineColor"));return Qt(()=>x("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot},e.class],style:e.style},[x("div",{class:["v-timeline-divider__before",p.value],style:v.value},null),!e.hideDot&&x("div",{key:"dot",class:["v-timeline-divider__dot",m.value,f.value,o.value],style:a.value},[x("div",{class:["v-timeline-divider__inner-dot",u.value,f.value],style:c.value},[i.default?x(Ye,{key:"icon-defaults",disabled:!e.icon,defaults:{VIcon:{color:e.iconColor,icon:e.icon,size:e.size}}},i.default):x(We,{key:"icon",color:e.iconColor,icon:e.icon,size:e.size},null)])]),x("div",{class:["v-timeline-divider__after",p.value],style:v.value},null)])),{}}}),TS=bt({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:Ae,iconColor:String,lineInset:[Number,String],...ie(),...In(),...yi(),...Os(),...ar(),...Se()},"VTimelineItem"),Ul=zt()({name:"VTimelineItem",props:TS(),setup(e,n){let{slots:i}=n;const{dimensionStyles:o}=Rn(e),a=Zt(0),c=Ft();return jt(c,u=>{var f;u&&(a.value=((f=u.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:f.getBoundingClientRect().width)??0)},{flush:"post"}),Qt(()=>{var u,f;return x("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot},e.class],style:[{"--v-timeline-dot-size":Vt(a.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Vt(e.lineInset)})`:Vt(0)},e.style]},[x("div",{class:"v-timeline-item__body",style:o.value},[(u=i.default)==null?void 0:u.call(i)]),x(AS,{ref:c,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:i.icon}),e.density!=="compact"&&x("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&((f=i.opposite)==null?void 0:f.call(i))])])}),{}}}),PS=qt("p",{class:"text-body-1"}," We would like to keep webcam pictures of your eyes whenever you click a piece in the game. ",-1),kS=qt("p",{class:"text-body-1"}," We combine these with information about where you're clicking to train a computer to work out where people are looking on the screen. ",-1),IS=qt("p",{class:"text-body-1 mt-4"},[mt(" Please "),qt("strong",null,"click the button"),mt(" that best describes your wishes. ")],-1),RS=qt("p",{class:"text-center text-body-2 text-black"}," Yes, keep my pictures like this ",-1),MS=qt("p",{class:"text-center text-body-2"}," No, please don't send my pictures ",-1),BS=qt("p",{class:"text-body-1"},"You can still play the game whichever option you choose.",-1),FS=ii({__name:"Consent",setup(e){const{currentPage:n,detailsOpen:i,consentSelected:o,modeSelected:a}=si(on()),{send_data_consent:c}=si(nr()),u=()=>{o.value=!0,n.value++};return(f,m)=>(me(),Ie(Nl,{"truncate-line":"end",side:"end",class:"w-100"},{default:j(()=>[x(Ul,{size:"x-large","icon-color":xt(o)?"secondary":"primary",icon:"mdi-camera-outline","dot-color":xt(o)?"primary":"secondary"},{default:j(()=>[x(bs,{class:"pa-4",variant:"text"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("Your pictures")]),_:1}),PS,kS,IS,x(Dh,{"selected-class":"bg-primary",class:"mb-4",modelValue:xt(c),"onUpdate:modelValue":m[0]||(m[0]=p=>re(c)?c.value=p:null)},{default:j(()=>[x(Ll,null,{default:j(()=>[x(Vl,null,{default:j(()=>[x(or,{cols:"6"},{default:j(()=>[x(Lr,{value:!0},{default:j(({selectedClass:p,select:v})=>[x(bs,{class:Js(["mx-auto","pa-2",p]),color:"primary",variant:"tonal",height:"200",onClick:()=>{v(!0),u()}},{default:j(()=>[x(Oi,{src:xt(wS),height:"80%"},null,8,["src"]),RS]),_:2},1032,["class","onClick"])]),_:1})]),_:1}),x(or,{cols:"6"},{default:j(()=>[x(Lr,{value:!1},{default:j(({selectedClass:p,select:v})=>[x(bs,{class:Js(["mx-auto","pa-2",p]),height:"200",variant:"tonal",onClick:()=>{v(!0),u()}},{default:j(()=>[x(Oi,{src:xt(xS),height:"80%"},null,8,["src"]),MS]),_:2},1032,["class","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),BS,x(fi,null,{default:j(()=>[x(we,{onClick:m[1]||(m[1]=p=>i.value=!0)},{default:j(()=>[mt(" More details ")]),_:1}),x(Ms),x(we,{onClick:m[2]||(m[2]=p=>n.value=xt(a)==="child"?xt(Ws).DIFFICULTY:xt(Ws).MODE),variant:"tonal"},{default:j(()=>[mt(" Go back ")]),_:1})]),_:1})]),_:1})]),_:1},8,["icon-color","dot-color"])]),_:1}))}}),DS="/boop-boop/images/dance.svg";/*!
 * excalibur - 0.28.0 - 2023-8-10
 * https://github.com/excaliburjs/Excalibur
 * Copyright (c) 2023 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>
 * Licensed BSD-2-Clause
 * @preserve
 */var LS={4662:(e,n,i)=>{i(3430);var o=i(8791);e.exports=o("Array","sort")},8343:(e,n,i)=>{i(4769);var o=i(9276);e.exports=o.Object.keys},7111:(e,n,i)=>{var o=i(6733),a=i(9821),c=TypeError;e.exports=function(u){if(o(u))return u;throw c(a(u)+" is not a function")}},1176:(e,n,i)=>{var o=i(5052),a=String,c=TypeError;e.exports=function(u){if(o(u))return u;throw c(a(u)+" is not an object")}},9540:(e,n,i)=>{var o=i(905),a=i(3231),c=i(9646),u=function(f){return function(m,p,v){var y=o(m),w=c(y),C=a(v,w),E;if(f&&p!=p){for(;w>C;)if(E=y[C++],E!=E)return!0}else for(;w>C;C++)if((f||C in y)&&y[C]===p)return f||C||0;return!f&&-1}};e.exports={includes:u(!0),indexOf:u(!1)}},6038:(e,n,i)=>{var o=i(4229);e.exports=function(a,c){var u=[][a];return!!u&&o(function(){u.call(null,c||function(){return 1},1)})}},9794:(e,n,i)=>{var o=i(3231),a=i(9646),c=i(2324),u=Array,f=Math.max;e.exports=function(m,p,v){for(var y=a(m),w=o(p,y),C=o(v===void 0?y:v,y),E=u(f(C-w,0)),P=0;w<C;w++,P++)c(E,P,m[w]);return E.length=P,E}},3867:(e,n,i)=>{var o=i(9794),a=Math.floor,c=function(m,p){var v=m.length,y=a(v/2);return v<8?u(m,p):f(m,c(o(m,0,y),p),c(o(m,y),p),p)},u=function(m,p){for(var v=m.length,y=1,w,C;y<v;){for(C=y,w=m[y];C&&p(m[C-1],w)>0;)m[C]=m[--C];C!==y++&&(m[C]=w)}return m},f=function(m,p,v,y){for(var w=p.length,C=v.length,E=0,P=0;E<w||P<C;)m[E+P]=E<w&&P<C?y(p[E],v[P])<=0?p[E++]:v[P++]:E<w?p[E++]:v[P++];return m};e.exports=c},7079:(e,n,i)=>{var o=i(5968),a=o({}.toString),c=o("".slice);e.exports=function(u){return c(a(u),8,-1)}},1589:(e,n,i)=>{var o=i(1601),a=i(6733),c=i(7079),u=i(95),f=u("toStringTag"),m=Object,p=c(function(){return arguments}())=="Arguments",v=function(y,w){try{return y[w]}catch{}};e.exports=o?c:function(y){var w,C,E;return y===void 0?"Undefined":y===null?"Null":typeof(C=v(w=m(y),f))=="string"?C:p?c(w):(E=c(w))=="Object"&&a(w.callee)?"Arguments":E}},7081:(e,n,i)=>{var o=i(8270),a=i(4826),c=i(7933),u=i(1787);e.exports=function(f,m,p){for(var v=a(m),y=u.f,w=c.f,C=0;C<v.length;C++){var E=v[C];!o(f,E)&&!(p&&o(p,E))&&y(f,E,w(m,E))}}},5762:(e,n,i)=>{var o=i(7400),a=i(1787),c=i(5358);e.exports=o?function(u,f,m){return a.f(u,f,c(1,m))}:function(u,f,m){return u[f]=m,u}},5358:e=>{e.exports=function(n,i){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:i}}},2324:(e,n,i)=>{var o=i(9310),a=i(1787),c=i(5358);e.exports=function(u,f,m){var p=o(f);p in u?a.f(u,p,c(0,m)):u[p]=m}},4768:(e,n,i)=>{var o=i(6733),a=i(1787),c=i(6039),u=i(8400);e.exports=function(f,m,p,v){v||(v={});var y=v.enumerable,w=v.name!==void 0?v.name:m;if(o(p)&&c(p,w,v),v.global)y?f[m]=p:u(m,p);else{try{v.unsafe?f[m]&&(y=!0):delete f[m]}catch{}y?f[m]=p:a.f(f,m,{value:p,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return f}},8400:(e,n,i)=>{var o=i(9859),a=Object.defineProperty;e.exports=function(c,u){try{a(o,c,{value:u,configurable:!0,writable:!0})}catch{o[c]=u}return u}},9563:(e,n,i)=>{var o=i(9821),a=TypeError;e.exports=function(c,u){if(!delete c[u])throw a("Cannot delete property "+o(u)+" of "+o(c))}},7400:(e,n,i)=>{var o=i(4229);e.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},3777:e=>{var n=typeof document=="object"&&document.all,i=typeof n>"u"&&n!==void 0;e.exports={all:n,IS_HTMLDDA:i}},2635:(e,n,i)=>{var o=i(9859),a=i(5052),c=o.document,u=a(c)&&a(c.createElement);e.exports=function(f){return u?c.createElement(f):{}}},2671:(e,n,i)=>{var o=i(598),a=o.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},8506:(e,n,i)=>{var o=i(598);e.exports=/MSIE|Trident/.test(o)},598:e=>{e.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},5884:(e,n,i)=>{var o=i(9859),a=i(598),c=o.process,u=o.Deno,f=c&&c.versions||u&&u.version,m=f&&f.v8,p,v;m&&(p=m.split("."),v=p[0]>0&&p[0]<4?1:+(p[0]+p[1])),!v&&a&&(p=a.match(/Edge\/(\d+)/),(!p||p[1]>=74)&&(p=a.match(/Chrome\/(\d+)/),p&&(v=+p[1]))),e.exports=v},9811:(e,n,i)=>{var o=i(598),a=o.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},8791:(e,n,i)=>{var o=i(9859),a=i(5968);e.exports=function(c,u){return a(o[c].prototype[u])}},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,n,i)=>{var o=i(9859),a=i(7933).f,c=i(5762),u=i(4768),f=i(8400),m=i(7081),p=i(6541);e.exports=function(v,y){var w=v.target,C=v.global,E=v.stat,P,k,R,B,O,W;if(C?k=o:E?k=o[w]||f(w,{}):k=(o[w]||{}).prototype,k)for(R in y){if(O=y[R],v.dontCallGetSet?(W=a(k,R),B=W&&W.value):B=k[R],P=p(C?R:w+(E?".":"#")+R,v.forced),!P&&B!==void 0){if(typeof O==typeof B)continue;m(O,B)}(v.sham||B&&B.sham)&&c(O,"sham",!0),u(k,R,O,v)}}},4229:e=>{e.exports=function(n){try{return!!n()}catch{return!0}}},7188:(e,n,i)=>{var o=i(4229);e.exports=!o(function(){var a=(function(){}).bind();return typeof a!="function"||a.hasOwnProperty("prototype")})},266:(e,n,i)=>{var o=i(7188),a=Function.prototype.call;e.exports=o?a.bind(a):function(){return a.apply(a,arguments)}},1805:(e,n,i)=>{var o=i(7400),a=i(8270),c=Function.prototype,u=o&&Object.getOwnPropertyDescriptor,f=a(c,"name"),m=f&&(function(){}).name==="something",p=f&&(!o||o&&u(c,"name").configurable);e.exports={EXISTS:f,PROPER:m,CONFIGURABLE:p}},5968:(e,n,i)=>{var o=i(7188),a=Function.prototype,c=a.call,u=o&&a.bind.bind(c,c);e.exports=o?u:function(f){return function(){return c.apply(f,arguments)}}},1333:(e,n,i)=>{var o=i(9859),a=i(6733),c=function(u){return a(u)?u:void 0};e.exports=function(u,f){return arguments.length<2?c(o[u]):o[u]&&o[u][f]}},5300:(e,n,i)=>{var o=i(7111),a=i(9650);e.exports=function(c,u){var f=c[u];return a(f)?void 0:o(f)}},9859:function(e,n,i){var o=function(a){return a&&a.Math==Math&&a};e.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof i.g=="object"&&i.g)||function(){return this}()||this||Function("return this")()},8270:(e,n,i)=>{var o=i(5968),a=i(2991),c=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(f,m){return c(a(f),m)}},5977:e=>{e.exports={}},4394:(e,n,i)=>{var o=i(7400),a=i(4229),c=i(2635);e.exports=!o&&!a(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},9337:(e,n,i)=>{var o=i(5968),a=i(4229),c=i(7079),u=Object,f=o("".split);e.exports=a(function(){return!u("z").propertyIsEnumerable(0)})?function(m){return c(m)=="String"?f(m,""):u(m)}:u},8511:(e,n,i)=>{var o=i(5968),a=i(6733),c=i(5353),u=o(Function.toString);a(c.inspectSource)||(c.inspectSource=function(f){return u(f)}),e.exports=c.inspectSource},6407:(e,n,i)=>{var o=i(1180),a=i(9859),c=i(5052),u=i(5762),f=i(8270),m=i(5353),p=i(4399),v=i(5977),y="Object already initialized",w=a.TypeError,C=a.WeakMap,E,P,k,R=function(G){return k(G)?P(G):E(G,{})},B=function(G){return function(X){var st;if(!c(X)||(st=P(X)).type!==G)throw w("Incompatible receiver, "+G+" required");return st}};if(o||m.state){var O=m.state||(m.state=new C);O.get=O.get,O.has=O.has,O.set=O.set,E=function(G,X){if(O.has(G))throw w(y);return X.facade=G,O.set(G,X),X},P=function(G){return O.get(G)||{}},k=function(G){return O.has(G)}}else{var W=p("state");v[W]=!0,E=function(G,X){if(f(G,W))throw w(y);return X.facade=G,u(G,W,X),X},P=function(G){return f(G,W)?G[W]:{}},k=function(G){return f(G,W)}}e.exports={set:E,get:P,has:k,enforce:R,getterFor:B}},6733:(e,n,i)=>{var o=i(3777),a=o.all;e.exports=o.IS_HTMLDDA?function(c){return typeof c=="function"||c===a}:function(c){return typeof c=="function"}},6541:(e,n,i)=>{var o=i(4229),a=i(6733),c=/#|\.prototype\./,u=function(y,w){var C=m[f(y)];return C==v?!0:C==p?!1:a(w)?o(w):!!w},f=u.normalize=function(y){return String(y).replace(c,".").toLowerCase()},m=u.data={},p=u.NATIVE="N",v=u.POLYFILL="P";e.exports=u},9650:e=>{e.exports=function(n){return n==null}},5052:(e,n,i)=>{var o=i(6733),a=i(3777),c=a.all;e.exports=a.IS_HTMLDDA?function(u){return typeof u=="object"?u!==null:o(u)||u===c}:function(u){return typeof u=="object"?u!==null:o(u)}},4231:e=>{e.exports=!1},9395:(e,n,i)=>{var o=i(1333),a=i(6733),c=i(1321),u=i(6969),f=Object;e.exports=u?function(m){return typeof m=="symbol"}:function(m){var p=o("Symbol");return a(p)&&c(p.prototype,f(m))}},9646:(e,n,i)=>{var o=i(4237);e.exports=function(a){return o(a.length)}},6039:(e,n,i)=>{var o=i(5968),a=i(4229),c=i(6733),u=i(8270),f=i(7400),m=i(1805).CONFIGURABLE,p=i(8511),v=i(6407),y=v.enforce,w=v.get,C=String,E=Object.defineProperty,P=o("".slice),k=o("".replace),R=o([].join),B=f&&!a(function(){return E(function(){},"length",{value:8}).length!==8}),O=String(String).split("String"),W=e.exports=function(G,X,st){P(C(X),0,7)==="Symbol("&&(X="["+k(C(X),/^Symbol\(([^)]*)\)/,"$1")+"]"),st&&st.getter&&(X="get "+X),st&&st.setter&&(X="set "+X),(!u(G,"name")||m&&G.name!==X)&&(f?E(G,"name",{value:X,configurable:!0}):G.name=X),B&&st&&u(st,"arity")&&G.length!==st.arity&&E(G,"length",{value:st.arity});try{st&&u(st,"constructor")&&st.constructor?f&&E(G,"prototype",{writable:!1}):G.prototype&&(G.prototype=void 0)}catch{}var N=y(G);return u(N,"source")||(N.source=R(O,typeof X=="string"?X:"")),G};Function.prototype.toString=W(function(){return c(this)&&w(this).source||p(this)},"toString")},917:e=>{var n=Math.ceil,i=Math.floor;e.exports=Math.trunc||function(a){var c=+a;return(c>0?i:n)(c)}},1787:(e,n,i)=>{var o=i(7400),a=i(4394),c=i(7137),u=i(1176),f=i(9310),m=TypeError,p=Object.defineProperty,v=Object.getOwnPropertyDescriptor,y="enumerable",w="configurable",C="writable";n.f=o?c?function(P,k,R){if(u(P),k=f(k),u(R),typeof P=="function"&&k==="prototype"&&"value"in R&&C in R&&!R[C]){var B=v(P,k);B&&B[C]&&(P[k]=R.value,R={configurable:w in R?R[w]:B[w],enumerable:y in R?R[y]:B[y],writable:!1})}return p(P,k,R)}:p:function(P,k,R){if(u(P),k=f(k),u(R),a)try{return p(P,k,R)}catch{}if("get"in R||"set"in R)throw m("Accessors not supported");return"value"in R&&(P[k]=R.value),P}},7933:(e,n,i)=>{var o=i(7400),a=i(266),c=i(9195),u=i(5358),f=i(905),m=i(9310),p=i(8270),v=i(4394),y=Object.getOwnPropertyDescriptor;n.f=o?y:function(C,E){if(C=f(C),E=m(E),v)try{return y(C,E)}catch{}if(p(C,E))return u(!a(c.f,C,E),C[E])}},8151:(e,n,i)=>{var o=i(140),a=i(3837),c=a.concat("length","prototype");n.f=Object.getOwnPropertyNames||function(f){return o(f,c)}},894:(e,n)=>{n.f=Object.getOwnPropertySymbols},1321:(e,n,i)=>{var o=i(5968);e.exports=o({}.isPrototypeOf)},140:(e,n,i)=>{var o=i(5968),a=i(8270),c=i(905),u=i(9540).indexOf,f=i(5977),m=o([].push);e.exports=function(p,v){var y=c(p),w=0,C=[],E;for(E in y)!a(f,E)&&a(y,E)&&m(C,E);for(;v.length>w;)a(y,E=v[w++])&&(~u(C,E)||m(C,E));return C}},5632:(e,n,i)=>{var o=i(140),a=i(3837);e.exports=Object.keys||function(u){return o(u,a)}},9195:(e,n)=>{var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!i.call({1:2},1);n.f=a?function(u){var f=o(this,u);return!!f&&f.enumerable}:i},2914:(e,n,i)=>{var o=i(266),a=i(6733),c=i(5052),u=TypeError;e.exports=function(f,m){var p,v;if(m==="string"&&a(p=f.toString)&&!c(v=o(p,f))||a(p=f.valueOf)&&!c(v=o(p,f))||m!=="string"&&a(p=f.toString)&&!c(v=o(p,f)))return v;throw u("Can't convert object to primitive value")}},4826:(e,n,i)=>{var o=i(1333),a=i(5968),c=i(8151),u=i(894),f=i(1176),m=a([].concat);e.exports=o("Reflect","ownKeys")||function(v){var y=c.f(f(v)),w=u.f;return w?m(y,w(v)):y}},9276:(e,n,i)=>{var o=i(9859);e.exports=o},8885:(e,n,i)=>{var o=i(9650),a=TypeError;e.exports=function(c){if(o(c))throw a("Can't call method on "+c);return c}},4399:(e,n,i)=>{var o=i(3036),a=i(1441),c=o("keys");e.exports=function(u){return c[u]||(c[u]=a(u))}},5353:(e,n,i)=>{var o=i(9859),a=i(8400),c="__core-js_shared__",u=o[c]||a(c,{});e.exports=u},3036:(e,n,i)=>{var o=i(4231),a=i(5353);(e.exports=function(c,u){return a[c]||(a[c]=u!==void 0?u:{})})("versions",[]).push({version:"3.32.0",mode:o?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4860:(e,n,i)=>{var o=i(5884),a=i(4229),c=i(9859),u=c.String;e.exports=!!Object.getOwnPropertySymbols&&!a(function(){var f=Symbol();return!u(f)||!(Object(f)instanceof Symbol)||!Symbol.sham&&o&&o<41})},3231:(e,n,i)=>{var o=i(3329),a=Math.max,c=Math.min;e.exports=function(u,f){var m=o(u);return m<0?a(m+f,0):c(m,f)}},905:(e,n,i)=>{var o=i(9337),a=i(8885);e.exports=function(c){return o(a(c))}},3329:(e,n,i)=>{var o=i(917);e.exports=function(a){var c=+a;return c!==c||c===0?0:o(c)}},4237:(e,n,i)=>{var o=i(3329),a=Math.min;e.exports=function(c){return c>0?a(o(c),9007199254740991):0}},2991:(e,n,i)=>{var o=i(8885),a=Object;e.exports=function(c){return a(o(c))}},2066:(e,n,i)=>{var o=i(266),a=i(5052),c=i(9395),u=i(5300),f=i(2914),m=i(95),p=TypeError,v=m("toPrimitive");e.exports=function(y,w){if(!a(y)||c(y))return y;var C=u(y,v),E;if(C){if(w===void 0&&(w="default"),E=o(C,y,w),!a(E)||c(E))return E;throw p("Can't convert object to primitive value")}return w===void 0&&(w="number"),f(y,w)}},9310:(e,n,i)=>{var o=i(2066),a=i(9395);e.exports=function(c){var u=o(c,"string");return a(u)?u:u+""}},1601:(e,n,i)=>{var o=i(95),a=o("toStringTag"),c={};c[a]="z",e.exports=String(c)==="[object z]"},3326:(e,n,i)=>{var o=i(1589),a=String;e.exports=function(c){if(o(c)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return a(c)}},9821:e=>{var n=String;e.exports=function(i){try{return n(i)}catch{return"Object"}}},1441:(e,n,i)=>{var o=i(5968),a=0,c=Math.random(),u=o(1 .toString);e.exports=function(f){return"Symbol("+(f===void 0?"":f)+")_"+u(++a+c,36)}},6969:(e,n,i)=>{var o=i(4860);e.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7137:(e,n,i)=>{var o=i(7400),a=i(4229);e.exports=o&&a(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},1180:(e,n,i)=>{var o=i(9859),a=i(6733),c=o.WeakMap;e.exports=a(c)&&/native code/.test(String(c))},95:(e,n,i)=>{var o=i(9859),a=i(3036),c=i(8270),u=i(1441),f=i(4860),m=i(6969),p=o.Symbol,v=a("wks"),y=m?p.for||p:p&&p.withoutSetter||u;e.exports=function(w){return c(v,w)||(v[w]=f&&c(p,w)?p[w]:y("Symbol."+w)),v[w]}},3430:(e,n,i)=>{var o=i(3103),a=i(5968),c=i(7111),u=i(2991),f=i(9646),m=i(9563),p=i(3326),v=i(4229),y=i(3867),w=i(6038),C=i(2671),E=i(8506),P=i(5884),k=i(9811),R=[],B=a(R.sort),O=a(R.push),W=v(function(){R.sort(void 0)}),G=v(function(){R.sort(null)}),X=w("sort"),st=!v(function(){if(P)return P<70;if(!(C&&C>3)){if(E)return!0;if(k)return k<603;var Y="",it,U,q,Q;for(it=65;it<76;it++){switch(U=String.fromCharCode(it),it){case 66:case 69:case 70:case 72:q=3;break;case 68:case 71:q=4;break;default:q=2}for(Q=0;Q<47;Q++)R.push({k:U+Q,v:q})}for(R.sort(function(rt,dt){return dt.v-rt.v}),Q=0;Q<R.length;Q++)U=R[Q].k.charAt(0),Y.charAt(Y.length-1)!==U&&(Y+=U);return Y!=="DGBEFHACIJK"}}),N=W||!G||!X||!st,$=function(Y){return function(it,U){return U===void 0?-1:it===void 0?1:Y!==void 0?+Y(it,U)||0:p(it)>p(U)?1:-1}};o({target:"Array",proto:!0,forced:N},{sort:function(it){it!==void 0&&c(it);var U=u(this);if(st)return it===void 0?B(U):B(U,it);var q=[],Q=f(U),rt,dt;for(dt=0;dt<Q;dt++)dt in U&&O(q,U[dt]);for(y(q,$(it)),rt=f(q),dt=0;dt<rt;)U[dt]=q[dt++];for(;dt<Q;)m(U,dt++);return U}})},4769:(e,n,i)=>{var o=i(3103),a=i(2991),c=i(5632),u=i(4229),f=u(function(){c(1)});o({target:"Object",stat:!0,forced:f},{keys:function(p){return c(a(p))}})},1388:(e,n,i)=>{i.d(n,{Z:()=>m});var o=i(272),a=i.n(o),c=i(2609),u=i.n(c),f=u()(a());f.push([e.id,`/* Buttons styles start */

button#excalibur-play {
  display: inline-block;
  position: relative;
  z-index: 999;
  border-radius: 6px;
  border: none;
  /*border: 3px solid;
    border-color: white;
    box-shadow: 0 0 10px #ccc;*/
  padding: 1rem 1.5rem 1rem 4rem;
  margin: 0;
  text-decoration: none;
  background: #00b233;
  color: #ffffff;
  font-family: sans-serif;
  font-size: 2rem;
  white-space: nowrap;
  line-height: 1;
  cursor: pointer;
  text-align: center;
  transition: background 250ms ease-in-out, transform 150ms ease;
  -webkit-appearance: none;
  -moz-appearance: none;

  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */
  animation: excalibur-button-fadein 200ms;
}

/*
button#excalibur-play {
  display: none;
}*/

button#excalibur-play:after {
  position: absolute;
  content: '';
  border: 8px solid;
  border-color: transparent transparent transparent white;
  left: 35px;
  top: 24px;
  width: 0;
  height: 0;
}

button#excalibur-play:before {
  position: absolute;
  content: '';
  border: 3px solid;
  left: 19px;
  top: 14px;
  border-radius: 20px;
  width: 30px;
  height: 30px;
}

button#excalibur-play:hover,
button#excalibur-play:focus {
  background: #00982c;
}

button#excalibur-play:focus {
  outline: 1px solid #fff;
  outline-offset: -4px;
}

button#excalibur-play:active {
  transform: scale(0.99);
}

@keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Firefox < 16 */
@-moz-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Safari, Chrome and Opera > 12.1 */
@-webkit-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Internet Explorer */
@-ms-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Opera < 12.1 */
@-o-keyframes excalibur-button-fadein {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
`,"",{version:3,sources:["webpack://./Loader.css"],names:[],mappings:"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF",sourcesContent:[`/* Buttons styles start */\r
\r
button#excalibur-play {\r
  display: inline-block;\r
  position: relative;\r
  z-index: 999;\r
  border-radius: 6px;\r
  border: none;\r
  /*border: 3px solid;\r
    border-color: white;\r
    box-shadow: 0 0 10px #ccc;*/\r
  padding: 1rem 1.5rem 1rem 4rem;\r
  margin: 0;\r
  text-decoration: none;\r
  background: #00b233;\r
  color: #ffffff;\r
  font-family: sans-serif;\r
  font-size: 2rem;\r
  white-space: nowrap;\r
  line-height: 1;\r
  cursor: pointer;\r
  text-align: center;\r
  transition: background 250ms ease-in-out, transform 150ms ease;\r
  -webkit-appearance: none;\r
  -moz-appearance: none;\r
\r
  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r
  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r
  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r
  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r
  animation: excalibur-button-fadein 200ms;\r
}\r
\r
/*\r
button#excalibur-play {\r
  display: none;\r
}*/\r
\r
button#excalibur-play:after {\r
  position: absolute;\r
  content: '';\r
  border: 8px solid;\r
  border-color: transparent transparent transparent white;\r
  left: 35px;\r
  top: 24px;\r
  width: 0;\r
  height: 0;\r
}\r
\r
button#excalibur-play:before {\r
  position: absolute;\r
  content: '';\r
  border: 3px solid;\r
  left: 19px;\r
  top: 14px;\r
  border-radius: 20px;\r
  width: 30px;\r
  height: 30px;\r
}\r
\r
button#excalibur-play:hover,\r
button#excalibur-play:focus {\r
  background: #00982c;\r
}\r
\r
button#excalibur-play:focus {\r
  outline: 1px solid #fff;\r
  outline-offset: -4px;\r
}\r
\r
button#excalibur-play:active {\r
  transform: scale(0.99);\r
}\r
\r
@keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Firefox < 16 */\r
@-moz-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Safari, Chrome and Opera > 12.1 */\r
@-webkit-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Internet Explorer */\r
@-ms-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
\r
/* Opera < 12.1 */\r
@-o-keyframes excalibur-button-fadein {\r
  from {\r
    opacity: 0;\r
  }\r
  to {\r
    opacity: 1;\r
  }\r
}\r
`],sourceRoot:""}]);const m=f},7379:(e,n,i)=>{i.d(n,{Z:()=>m});var o=i(272),a=i.n(o),c=i(2609),u=i.n(c),f=u()(a());f.push([e.id,`
#ex-toast-container {
  position: absolute;
  height: 0;
  min-width: 50%;
  left: 50%;
  top: 0;
}

.ex-toast-message {
  left: -50%;
  position: relative;
  display: flex;
  justify-content: space-between;


  padding: 10px;
  margin-top: 5px;
  font-size: 18px;
  font-family: sans-serif;
  border-radius: 6px;
  border: 3px solid #b7b779;
  background-color: rgb(253, 253, 192);
}


.ex-toast-message button {
  align-self: flex-start;
}`,"",{version:3,sources:["webpack://./Util/Toaster.css"],names:[],mappings:";AACA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;;EAG9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;;AAGA;EACE,sBAAsB;AACxB",sourcesContent:[`\r
#ex-toast-container {\r
  position: absolute;\r
  height: 0;\r
  min-width: 50%;\r
  left: 50%;\r
  top: 0;\r
}\r
\r
.ex-toast-message {\r
  left: -50%;\r
  position: relative;\r
  display: flex;\r
  justify-content: space-between;\r
\r
\r
  padding: 10px;\r
  margin-top: 5px;\r
  font-size: 18px;\r
  font-family: sans-serif;\r
  border-radius: 6px;\r
  border: 3px solid #b7b779;\r
  background-color: rgb(253, 253, 192);\r
}\r
\r
\r
.ex-toast-message button {\r
  align-self: flex-start;\r
}`],sourceRoot:""}]);const m=f},2609:e=>{e.exports=function(n){var i=[];return i.toString=function(){return this.map(function(a){var c="",u=typeof a[5]<"u";return a[4]&&(c+="@supports (".concat(a[4],") {")),a[2]&&(c+="@media ".concat(a[2]," {")),u&&(c+="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {")),c+=n(a),u&&(c+="}"),a[2]&&(c+="}"),a[4]&&(c+="}"),c}).join("")},i.i=function(a,c,u,f,m){typeof a=="string"&&(a=[[null,a,void 0]]);var p={};if(u)for(var v=0;v<this.length;v++){var y=this[v][0];y!=null&&(p[y]=!0)}for(var w=0;w<a.length;w++){var C=[].concat(a[w]);u&&p[C[0]]||(typeof m<"u"&&(typeof C[5]>"u"||(C[1]="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {").concat(C[1],"}")),C[5]=m),c&&(C[2]&&(C[1]="@media ".concat(C[2]," {").concat(C[1],"}")),C[2]=c),f&&(C[4]?(C[1]="@supports (".concat(C[4],") {").concat(C[1],"}"),C[4]=f):C[4]="".concat(f)),i.push(C))}},i}},272:e=>{e.exports=function(n){var i=n[1],o=n[3];if(!o)return i;if(typeof btoa=="function"){var a=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),u="/*# ".concat(c," */");return[i].concat([u]).join(`
`)}return[i].join(`
`)}}},Og={};function Ee(e){var n=Og[e];if(n!==void 0)return n.exports;var i=Og[e]={id:e,exports:{}};return LS[e].call(i.exports,i,i.exports,Ee),i.exports}Ee.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return Ee.d(n,{a:n}),n};Ee.d=(e,n)=>{for(var i in n)Ee.o(n,i)&&!Ee.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})};Ee.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();Ee.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);Ee.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var T={};(()=>{Ee.d(T,{fWn:()=>so,Ia8:()=>ld,rqv:()=>yc,hLI:()=>gr,yyv:()=>Zd,tX5:()=>Be,vtX:()=>Ci,r7K:()=>nd,lCh:()=>Dd,cE4:()=>Ve,fwF:()=>Si,sce:()=>ro,AQ6:()=>Ty,_c7:()=>li,KUs:()=>$d,Ajp:()=>ur,dkO:()=>M,RDh:()=>_a,_H9:()=>da,mxs:()=>bd,OmD:()=>ae,kBf:()=>Wt,C4F:()=>na,NQt:()=>mc,JjN:()=>rf,EK_:()=>oe,V1s:()=>Bd,xHm:()=>Cy,Xz7:()=>ea,Cdc:()=>ca,FKn:()=>ns,SUY:()=>_c,ab2:()=>oa,GfZ:()=>xi,YMS:()=>dn,oyv:()=>Ne,aUb:()=>Vn,SdD:()=>Jt,JUv:()=>ri,jEj:()=>Hn,TFq:()=>oi,HDU:()=>Rt,R_y:()=>ut,ydN:()=>On,t50:()=>te,s$$:()=>gc,v2G:()=>Xt,Ilk:()=>ht,s9i:()=>sf,dxL:()=>Nn,LLX:()=>ef,wA2:()=>Ns,R_p:()=>us,IQ$:()=>jd,I5F:()=>nt,X8$:()=>Wd,FR6:()=>At,U8o:()=>dt,kbG:()=>Es,iS_:()=>qe,cGG:()=>nf,RPN:()=>pa,skb:()=>qd,SLU:()=>ql,RdJ:()=>ms,cNu:()=>xd,gU7:()=>td,LSk:()=>Cd,Nmp:()=>ga,d1Y:()=>je,xrL:()=>ac,sRW:()=>lc,cmV:()=>gf,qWz:()=>yd,N0Q:()=>vd,q8b:()=>Pe,ynB:()=>As,jT9:()=>Id,wAz:()=>_r,D4V:()=>br,NLr:()=>Fy,N6H:()=>et,W1A:()=>_t,JHW:()=>Ke,ZZ$:()=>wy,v2K:()=>Od,pBf:()=>Dy,vpe:()=>m,GMl:()=>p,zW2:()=>e,B0K:()=>sc,Nv7:()=>ta,C_p:()=>un,MUA:()=>Tt,xqU:()=>ss,pTp:()=>wd,vUK:()=>u,j9l:()=>hc,Zxw:()=>pr,v51:()=>be,Hdx:()=>fa,Z$d:()=>ua,iqV:()=>af,o$7:()=>lo,olM:()=>cr,Zm$:()=>v,$QH:()=>E,i78:()=>P,nJg:()=>Bt,h6u:()=>it,hts:()=>Y,j88:()=>N,VME:()=>$,fy2:()=>vt,nt:()=>Xy,Ukr:()=>co,zsu:()=>Ss,oA6:()=>os,TVh:()=>oo,TwZ:()=>eo,GTT:()=>aa,xxj:()=>Yd,XdK:()=>q,Jmb:()=>cs,cXo:()=>Yl,Dm5:()=>he,IIB:()=>o,ebW:()=>uf,zI0:()=>ra,LYD:()=>wa,cEG:()=>Kd,SEl:()=>Oy,t9V:()=>hf,ez5:()=>ft,N1d:()=>St,R8U:()=>Et,SKZ:()=>y,__J:()=>Ly,RI$:()=>Md,x12:()=>wc,ccz:()=>gs,aNw:()=>Qh,XrL:()=>_y,xwn:()=>kd,dNK:()=>Pd,ini:()=>F,YdH:()=>D,F5T:()=>Yh,y3G:()=>Cs,l57:()=>Xl,xn0:()=>ic,t2V:()=>dc,uxB:()=>De,cpd:()=>Hd,fiy:()=>hd,$XZ:()=>dd,UG6:()=>ji,uqK:()=>hn,STE:()=>Zh,y$z:()=>wi,mAD:()=>Qd,sOq:()=>Us,hUw:()=>ma,_0G:()=>Vy,Sqs:()=>ff,hpZ:()=>ya,Vol:()=>Xd,vYX:()=>vr,wIZ:()=>Dt,cBi:()=>xa,c30:()=>Jd,MPV:()=>Ei,RFv:()=>fr,Ux6:()=>yr,rxy:()=>uo,I$c:()=>lt,kfC:()=>ba,VjY:()=>Ai,mgq:()=>xc,YVA:()=>Ze,Kgp:()=>Xh,HH$:()=>rt,M_d:()=>O,rgh:()=>R,Ra6:()=>st,KhR:()=>C,BS5:()=>G,xhz:()=>Q,xOq:()=>B,a9j:()=>k,bHk:()=>X,CgK:()=>w,cuY:()=>W,kvE:()=>to,SBu:()=>Qr,AE_:()=>Vd,ctO:()=>zd,OLH:()=>Rd,kky:()=>Pt,nSF:()=>hr,zHn:()=>Gi,zwx:()=>Gd,AeJ:()=>la,hLz:()=>od,D9g:()=>Ld,wA:()=>cd,jhr:()=>ud,GVs:()=>Ql,_zO:()=>Qo,LXZ:()=>Ov,w6$:()=>gd,mhV:()=>fd,MOD:()=>Hs,kwd:()=>pd,Lmr:()=>md,xsS:()=>ao,K5l:()=>ky,lLr:()=>Jl,Z$r:()=>at,IXb:()=>fc,SGH:()=>tf,SMj:()=>fn,L34:()=>Zy,exe:()=>zs,bnF:()=>rs,MFA:()=>Oe,$uU:()=>Kh,Sap:()=>py,jyi:()=>Fn,E03:()=>Jo,V6q:()=>Dn,rg2:()=>vc,DVW:()=>sa,nVo:()=>Td,F6N:()=>df,xP7:()=>ai,Odq:()=>Nd,Zif:()=>Ts,ZGJ:()=>rc,MJk:()=>lf,xvT:()=>io,PHM:()=>ha,dpR:()=>is,n9L:()=>Ad,KwO:()=>Ed,SxM:()=>xy,B7y:()=>zn,x7r:()=>cf,wx7:()=>Jr,Uvn:()=>kt,OFT:()=>oc,xzN:()=>Fd,CcZ:()=>Sy,M5Z:()=>It,ZrN:()=>a,OWs:()=>z,dF9:()=>nc,oZy:()=>$i,rD2:()=>Wi,VHo:()=>U,ohE:()=>Ln,R$E:()=>qh,xQN:()=>Un,AdJ:()=>pc,q3I:()=>Ud,Pab:()=>ue,uZ5:()=>ne,McK:()=>f,F9c:()=>Gt,k0b:()=>uc,hnT:()=>Ny,RSJ:()=>Wy,Mku:()=>Hy,h90:()=>jy,rms:()=>Gy,ErP:()=>zy,aVg:()=>$y,lPc:()=>Uy,Z8E:()=>rd,_N2:()=>no,yFn:()=>Ay,lNv:()=>ad,cu9:()=>Sd,MZQ:()=>ed,FUM:()=>sd,BxR:()=>le,vdf:()=>qs,iaL:()=>Mn,w6H:()=>bi,Q4c:()=>vy,Xxe:()=>Ut,Uxb:()=>Te,Yr5:()=>Vs,Bhw:()=>Z,yOA:()=>n});var e={};Ee.r(e),Ee.d(e,{ActivateEvent:()=>Be,CollisionEndEvent:()=>Jt,CollisionPostSolveEvent:()=>Rt,CollisionPreSolveEvent:()=>ut,CollisionStartEvent:()=>te,ContactEndEvent:()=>At,ContactStartEvent:()=>dt,DeactivateEvent:()=>qe,EnterTriggerEvent:()=>et,EnterViewPortEvent:()=>_t,EventTypes:()=>p,ExitTriggerEvent:()=>Tt,ExitViewPortEvent:()=>ss,GameEvent:()=>v,GameStartEvent:()=>E,GameStopEvent:()=>P,GamepadAxisEvent:()=>it,GamepadButtonEvent:()=>Y,GamepadConnectEvent:()=>N,GamepadDisconnectEvent:()=>$,HiddenEvent:()=>q,InitializeEvent:()=>he,KillEvent:()=>y,PostCollisionEvent:()=>rt,PostDebugDrawEvent:()=>O,PostDrawEvent:()=>R,PostFrameEvent:()=>st,PostKillEvent:()=>C,PostUpdateEvent:()=>G,PreCollisionEvent:()=>Q,PreDebugDrawEvent:()=>B,PreDrawEvent:()=>k,PreFrameEvent:()=>X,PreKillEvent:()=>w,PreUpdateEvent:()=>W,VisibleEvent:()=>U});var n={};Ee.r(n),Ee.d(n,{getAttributeComponentSize:()=>Gh,getAttributePointerType:()=>jh,getGlTypeSizeBytes:()=>Kl});var i={};Ee.r(i),Ee.d(i,{circle:()=>dy,line:()=>tc,point:()=>uy,roundRect:()=>ec,vector:()=>hy});var o={};Ee.r(o),Ee.d(o,{Axes:()=>M,Buttons:()=>oe,Gamepad:()=>Bt,Gamepads:()=>vt,KeyEvent:()=>ft,Keyboard:()=>St,Keys:()=>Et,NativePointerButton:()=>ji,PointerButton:()=>Ei,PointerComponent:()=>fr,PointerEvent:()=>yr,PointerEventReceiver:()=>uo,PointerScope:()=>lt,PointerSystem:()=>ba,PointerType:()=>Ai,WheelDeltaMode:()=>Un,WheelEvent:()=>pc});var a={};Ee.r(a),Ee.d(a,{ConsoleAppender:()=>nt,DrawUtil:()=>i,EasingFunctions:()=>Pe,LogLevel:()=>F,Logger:()=>D,Observable:()=>wi,ScreenAppender:()=>at,addItemToArray:()=>Dv,contains:()=>Gl,delay:()=>jl,fail:()=>Hh,getPosition:()=>Kr,removeItemFromArray:()=>Hi}),Ee(4662),Ee(8343);function c(){if(typeof window>"u"&&(window={audioContext:function(){}}),typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(d){window.setInterval(d,1e3/60)}),typeof window<"u"&&!window.cancelAnimationFrame&&(window.cancelAnimationFrame=window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(){}),typeof window<"u"&&!window.AudioContext){if(window.webkitAudioContext){const t=window.webkitAudioContext.prototype.decodeAudioData;window.webkitAudioContext.prototype.decodeAudioData=function(s){return new Promise((r,l)=>{t.call(this,s,r,l)})}}window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext}typeof window<"u"&&!window.devicePixelRatio&&(window.devicePixelRatio=window.devicePixelRatio||1)}class u{static useCanvasGraphicsContext(){u.enable("use-canvas-context")}static freeze(){u._FROZEN=!0}static _reset(){u._FROZEN=!1,u._FLAGS={}}static enable(t){if(this._FROZEN)throw Error("Feature flags can only be enabled before Engine constructor time");u._FLAGS[t]=!0}static disable(t){if(this._FROZEN)throw Error("Feature flags can only be disabled before Engine constructor time");u._FLAGS[t]=!1}static isEnabled(t){return!!u._FLAGS[t]}static show(){return Object.keys(u._FLAGS)}}u._FROZEN=!1,u._FLAGS={};function f(d,t){return{type:d,value:t}}class m{constructor(){this._paused=!1,this._listeners={},this._listenersOnce={},this._pipes=[]}clear(){this._listeners={},this._listenersOnce={},this._pipes.length=0}on(t,s){var r;return this._listeners[t]=(r=this._listeners[t])!==null&&r!==void 0?r:[],this._listeners[t].push(s),{close:()=>this.off(t,s)}}once(t,s){var r;return this._listenersOnce[t]=(r=this._listenersOnce[t])!==null&&r!==void 0?r:[],this._listenersOnce[t].push(s),{close:()=>this.off(t,s)}}off(t,s){var r,l,h,g;if(s){const _=(r=this._listeners[t])===null||r===void 0?void 0:r.indexOf(s);_>-1&&((l=this._listeners[t])===null||l===void 0||l.splice(_,1));const b=(h=this._listenersOnce[t])===null||h===void 0?void 0:h.indexOf(s);b>-1&&((g=this._listenersOnce[t])===null||g===void 0||g.splice(b,1))}else delete this._listeners[t]}emit(t,s){var r;if(this._paused)return;(r=this._listeners[t])===null||r===void 0||r.forEach(h=>h(s));const l=this._listenersOnce[t];this._listenersOnce[t]=[],l&&l.forEach(h=>h(s)),this._pipes.forEach(h=>{h.emit(t,s)})}pipe(t){if(this===t)throw Error("Cannot pipe to self");return this._pipes.push(t),{close:()=>{const s=this._pipes.indexOf(t);s>-1&&this._pipes.splice(s,1)}}}unpipe(t){const s=this._pipes.indexOf(t);s>-1&&this._pipes.splice(s,1)}pause(){this._paused=!0}unpause(){this._paused=!1}}var p;(function(d){d.Kill="kill",d.PreKill="prekill",d.PostKill="postkill",d.PreDraw="predraw",d.PostDraw="postdraw",d.PreDebugDraw="predebugdraw",d.PostDebugDraw="postdebugdraw",d.PreUpdate="preupdate",d.PostUpdate="postupdate",d.PreFrame="preframe",d.PostFrame="postframe",d.PreCollision="precollision",d.CollisionStart="collisionstart",d.CollisionEnd="collisionend",d.PostCollision="postcollision",d.Initialize="initialize",d.Activate="activate",d.Deactivate="deactivate",d.ExitViewport="exitviewport",d.EnterViewport="enterviewport",d.ExitTrigger="exit",d.EnterTrigger="enter",d.Connect="connect",d.Disconnect="disconnect",d.Button="button",d.Axis="axis",d.Visible="visible",d.Hidden="hidden",d.Start="start",d.Stop="stop",d.PointerUp="pointerup",d.PointerDown="pointerdown",d.PointerMove="pointermove",d.PointerEnter="pointerenter",d.PointerLeave="pointerleave",d.PointerCancel="pointercancel",d.PointerWheel="pointerwheel",d.Up="up",d.Down="down",d.Move="move",d.Enter="enter",d.Leave="leave",d.Cancel="cancel",d.Wheel="wheel",d.Press="press",d.Release="release",d.Hold="hold",d.PointerDragStart="pointerdragstart",d.PointerDragEnd="pointerdragend",d.PointerDragEnter="pointerdragenter",d.PointerDragLeave="pointerdragleave",d.PointerDragMove="pointerdragmove"})(p||(p={}));class v{constructor(){this._bubbles=!0}get bubbles(){return this._bubbles}set bubbles(t){this._bubbles=t}stopPropagation(){this.bubbles=!1}}class y extends v{constructor(t){super(),this.target=t}}class w extends v{constructor(t){super(),this.target=t}}class C extends v{constructor(t){super(),this.target=t}}class E extends v{constructor(t){super(),this.target=t}}class P extends v{constructor(t){super(),this.target=t}}class k extends v{constructor(t,s,r){super(),this.ctx=t,this.delta=s,this.target=r}}class R extends v{constructor(t,s,r){super(),this.ctx=t,this.delta=s,this.target=r}}class B extends v{constructor(t,s){super(),this.ctx=t,this.target=s}}class O extends v{constructor(t,s){super(),this.ctx=t,this.target=s}}class W extends v{constructor(t,s,r){super(),this.engine=t,this.delta=s,this.target=r}}class G extends v{constructor(t,s,r){super(),this.engine=t,this.delta=s,this.target=r}}class X extends v{constructor(t,s){super(),this.engine=t,this.prevStats=s,this.target=t}}class st extends v{constructor(t,s){super(),this.engine=t,this.stats=s,this.target=t}}class N extends v{constructor(t,s){super(),this.index=t,this.gamepad=s,this.target=s}}class $ extends v{constructor(t,s){super(),this.index=t,this.gamepad=s,this.target=s}}class Y extends v{constructor(t,s,r){super(),this.button=t,this.value=s,this.target=r}}class it extends v{constructor(t,s,r){super(),this.axis=t,this.value=s,this.target=r}}class U extends v{constructor(t){super(),this.target=t}}class q extends v{constructor(t){super(),this.target=t}}class Q extends v{constructor(t,s,r,l){super(),this.other=s,this.side=r,this.intersection=l,this.target=t}}class rt extends v{constructor(t,s,r,l){super(),this.other=s,this.side=r,this.intersection=l,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class dt{constructor(t,s,r){this.target=t,this.other=s,this.contact=r}}class At{constructor(t,s){this.target=t,this.other=s}}class ut{constructor(t,s,r,l,h){this.target=t,this.other=s,this.side=r,this.intersection=l,this.contact=h}}class Rt{constructor(t,s,r,l,h){this.target=t,this.other=s,this.side=r,this.intersection=l,this.contact=h}}class te extends v{constructor(t,s,r){super(),this.other=s,this.contact=r,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class Jt extends v{constructor(t,s){super(),this.other=s,this.target=t}get actor(){return this.target}set actor(t){this.target=t}}class he extends v{constructor(t,s){super(),this.engine=t,this.target=s}}class Be extends v{constructor(t,s){super(),this.context=t,this.target=s}}class qe extends v{constructor(t,s){super(),this.context=t,this.target=s}}class ss extends v{constructor(t){super(),this.target=t}}class _t extends v{constructor(t){super(),this.target=t}}class et extends v{constructor(t,s){super(),this.target=t,this.actor=s}}class Tt extends v{constructor(t,s){super(),this.target=t,this.actor=s}}class vt{constructor(){this.events=new m,this.enabled=!1,this.supported=!!navigator.getGamepads,this._gamePadTimeStamps=[0,0,0,0],this._oldPads=[],this._pads=[],this._initSuccess=!1,this._navigator=navigator,this._minimumConfiguration=null}init(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))}setMinimumGamepadConfiguration(t){this._enableAndUpdate(),this._minimumConfiguration=t}_enableAndUpdate(){this.enabled||(this.enabled=!0,this.update())}_isGamepadValid(t){if(!this._minimumConfiguration)return!0;if(!t)return!1;const s=t.axes.filter(l=>typeof l!==void 0).length,r=t.buttons.filter(l=>typeof l!==void 0).length;return s>=this._minimumConfiguration.axis&&r>=this._minimumConfiguration.buttons&&t.connected}emit(t,s){this.events.emit(t,s)}on(t,s){return this._enableAndUpdate(),this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this._enableAndUpdate(),this.events.off(t,s)}update(){if(!this.enabled||!this.supported)return;this.init();const t=this._navigator.getGamepads();for(let s=0;s<t.length;s++){if(t[s])!this.at(s).connected&&this._isGamepadValid(t[s])&&this.events.emit("connect",new N(s,this.at(s))),this.at(s).connected=!0;else{const b=this.at(s);b.connected&&this.events.emit("disconnect",new $(s,b)),b.connected=!1;continue}if(this.at(s).update(),t[s].timestamp&&t[s].timestamp===this._gamePadTimeStamps[s])continue;this._gamePadTimeStamps[s]=t[s].timestamp,this.at(s).navigatorGamepad=t[s];let r,l,h,g,_;for(r in oe)l=oe[r],typeof l=="number"&&t[s].buttons[l]&&(_=t[s].buttons[l].value,_!==this._oldPads[s].getButton(l)&&(t[s].buttons[l].pressed?(this.at(s).updateButton(l,_),this.at(s).events.emit("button",new Y(l,_,this.at(s)))):this.at(s).updateButton(l,0)));for(h in M)g=M[h],typeof g=="number"&&(_=t[s].axes[g],_!==this._oldPads[s].getAxes(g)&&(this.at(s).updateAxes(g,_),this.at(s).events.emit("axis",new it(g,_,this.at(s)))));this._oldPads[s]=this._clonePad(t[s])}}at(t){if(this._enableAndUpdate(),t>=this._pads.length)for(let s=this._pads.length-1,r=t;s<r;s++)this._pads.push(new Bt),this._oldPads.push(new Bt);return this._pads[t]}getValidGamepads(){this._enableAndUpdate();const t=[];for(let s=0;s<this._pads.length;s++)this._isGamepadValid(this.at(s).navigatorGamepad)&&this.at(s).connected&&t.push(this.at(s));return t}count(){return this._pads.filter(t=>t.connected).length}_clonePads(t){const s=[];for(let r=0,l=t.length;r<l;r++)s.push(this._clonePad(t[r]));return s}_clonePad(t){let s,r;const l=new Bt;if(!t)return l;for(s=0,r=t.buttons.length;s<r;s++)t.buttons[s]&&l.updateButton(s,t.buttons[s].value);for(s=0,r=t.axes.length;s<r;s++)l.updateAxes(s,t.axes[s]);return l}}vt.MinAxisMoveThreshold=.05;class Bt{constructor(){this.events=new m,this.connected=!1,this._axes=new Array(4),this._buttons=new Array(16),this._buttonsUp=new Array(16),this._buttonsDown=new Array(16);for(let t=0;t<this._buttons.length;t++)this._buttons[t]=0;for(let t=0;t<this._axes.length;t++)this._axes[t]=0}update(){this._buttonsDown=new Array(16),this._buttonsUp=new Array(16)}isButtonPressed(t,s=1){return this._buttons[t]>=s}isButtonHeld(t,s=1){return this._buttons[t]>=s}wasButtonPressed(t,s=1){return this._buttonsDown[t]>=s}wasButtonReleased(t){return!!this._buttonsUp[t]}getButton(t){return this._buttons[t]}getAxes(t){const s=this._axes[t];return Math.abs(s)<vt.MinAxisMoveThreshold?0:s}updateButton(t,s){s===0&&this._buttons[t]?this._buttonsUp[t]=1:this._buttonsDown[t]=s,this._buttons[t]=s}updateAxes(t,s){this._axes[t]=s}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}}var oe;(function(d){d[d.Face1=0]="Face1",d[d.Face2=1]="Face2",d[d.Face3=2]="Face3",d[d.Face4=3]="Face4",d[d.LeftBumper=4]="LeftBumper",d[d.RightBumper=5]="RightBumper",d[d.LeftTrigger=6]="LeftTrigger",d[d.RightTrigger=7]="RightTrigger",d[d.Select=8]="Select",d[d.Start=9]="Start",d[d.LeftStick=10]="LeftStick",d[d.RightStick=11]="RightStick",d[d.DpadUp=12]="DpadUp",d[d.DpadDown=13]="DpadDown",d[d.DpadLeft=14]="DpadLeft",d[d.DpadRight=15]="DpadRight"})(oe||(oe={}));var M;(function(d){d[d.LeftStickX=0]="LeftStickX",d[d.LeftStickY=1]="LeftStickY",d[d.RightStickX=2]="RightStickX",d[d.RightStickY=3]="RightStickY"})(M||(M={}));var F;(function(d){d[d.Debug=0]="Debug",d[d.Info=1]="Info",d[d.Warn=2]="Warn",d[d.Error=3]="Error",d[d.Fatal=4]="Fatal"})(F||(F={}));class D{constructor(){if(this._appenders=[],this.defaultLevel=F.Info,D._INSTANCE)throw new Error("Logger is a singleton");return D._INSTANCE=this,D._INSTANCE.addAppender(new nt),D._INSTANCE}static getInstance(){return D._INSTANCE==null&&(D._INSTANCE=new D),D._INSTANCE}addAppender(t){this._appenders.push(t)}clearAppenders(){this._appenders.length=0}_log(t,s){t==null&&(t=this.defaultLevel);const r=this._appenders.length;for(let l=0;l<r;l++)t>=this.defaultLevel&&this._appenders[l].log(t,s)}debug(...t){this._log(F.Debug,t)}info(...t){this._log(F.Info,t)}warn(...t){this._log(F.Warn,t)}error(...t){this._log(F.Error,t)}fatal(...t){this._log(F.Fatal,t)}}D._INSTANCE=null;class nt{log(t,s){if(!console&&!console.log&&console.warn&&console.error)return;const r=[];r.unshift.apply(r,s),r.unshift("["+F[t]+"] : "),t<F.Warn?console.log.apply?console.log.apply(console,r):console.log(r.join(" ")):t<F.Error?console.warn.apply?console.warn.apply(console,r):console.warn(r.join(" ")):console.error.apply?console.error.apply(console,r):console.error(r.join(" "))}}class at{constructor(t,s){this._messages=[],this._canvas=document.createElement("canvas"),this._canvas.width=t||window.innerWidth,this._canvas.height=s||window.innerHeight,this._canvas.style.position="absolute",this._ctx=this._canvas.getContext("2d"),document.body.appendChild(this._canvas)}log(t,s){const r=s.join(",");this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._messages.unshift("["+F[t]+"] : "+r);let l=10,h=1;for(let g=0;g<this._messages.length;g++)this._ctx.fillStyle="rgba(255,255,255,"+h.toFixed(2)+")",this._ctx.fillText(this._messages[g],200,l),l+=10,h=h>0?h-.05:0}}function ct(){try{const d=()=>{};window.top.addEventListener("blur",d),window.top.removeEventListener("blur",d)}catch{return!0}return!1}var Et;(function(d){d.Num0="Numpad0",d.Num1="Numpad1",d.Num2="Numpad2",d.Num3="Numpad3",d.Num4="Numpad4",d.Num5="Numpad5",d.Num6="Numpad6",d.Num7="Numpad7",d.Num8="Numpad8",d.Num9="Numpad9",d.NumAdd="NumpadAdd",d.NumSubtract="NumpadSubtract",d.NumMultiply="NumpadMultiply",d.NumDivide="NumpadDivide",d.NumDecimal="NumpadDecimal",d.Numpad0="Numpad0",d.Numpad1="Numpad1",d.Numpad2="Numpad2",d.Numpad3="Numpad3",d.Numpad4="Numpad4",d.Numpad5="Numpad5",d.Numpad6="Numpad6",d.Numpad7="Numpad7",d.Numpad8="Numpad8",d.Numpad9="Numpad9",d.NumpadAdd="NumpadAdd",d.NumpadSubtract="NumpadSubtract",d.NumpadMultiply="NumpadMultiply",d.NumpadDivide="NumpadDivide",d.NumpadDecimal="NumpadDecimal",d.NumLock="NumLock",d.ShiftLeft="ShiftLeft",d.ShiftRight="ShiftRight",d.AltLeft="AltLeft",d.AltRight="AltRight",d.ControlLeft="ControlLeft",d.ControlRight="ControlRight",d.MetaLeft="MetaLeft",d.MetaRight="MetaRight",d.Key0="Digit0",d.Key1="Digit1",d.Key2="Digit2",d.Key3="Digit3",d.Key4="Digit4",d.Key5="Digit5",d.Key6="Digit6",d.Key7="Digit7",d.Key8="Digit8",d.Key9="Digit9",d.Digit0="Digit0",d.Digit1="Digit1",d.Digit2="Digit2",d.Digit3="Digit3",d.Digit4="Digit4",d.Digit5="Digit5",d.Digit6="Digit6",d.Digit7="Digit7",d.Digit8="Digit8",d.Digit9="Digit9",d.F1="F1",d.F2="F2",d.F3="F3",d.F4="F4",d.F5="F5",d.F6="F6",d.F7="F7",d.F8="F8",d.F9="F9",d.F10="F10",d.F11="F11",d.F12="F12",d.A="KeyA",d.B="KeyB",d.C="KeyC",d.D="KeyD",d.E="KeyE",d.F="KeyF",d.G="KeyG",d.H="KeyH",d.I="KeyI",d.J="KeyJ",d.K="KeyK",d.L="KeyL",d.M="KeyM",d.N="KeyN",d.O="KeyO",d.P="KeyP",d.Q="KeyQ",d.R="KeyR",d.S="KeyS",d.T="KeyT",d.U="KeyU",d.V="KeyV",d.W="KeyW",d.X="KeyX",d.Y="KeyY",d.Z="KeyZ",d.KeyA="KeyA",d.KeyB="KeyB",d.KeyC="KeyC",d.KeyD="KeyD",d.KeyE="KeyE",d.KeyF="KeyF",d.KeyG="KeyG",d.KeyH="KeyH",d.KeyI="KeyI",d.KeyJ="KeyJ",d.KeyK="KeyK",d.KeyL="KeyL",d.KeyM="KeyM",d.KeyN="KeyN",d.KeyO="KeyO",d.KeyP="KeyP",d.KeyQ="KeyQ",d.KeyR="KeyR",d.KeyS="KeyS",d.KeyT="KeyT",d.KeyU="KeyU",d.KeyV="KeyV",d.KeyW="KeyW",d.KeyX="KeyX",d.KeyY="KeyY",d.KeyZ="KeyZ",d.Semicolon="Semicolon",d.Quote="Quote",d.Comma="Comma",d.Minus="Minus",d.Period="Period",d.Slash="Slash",d.Equal="Equal",d.BracketLeft="BracketLeft",d.Backslash="Backslash",d.BracketRight="BracketRight",d.Backquote="Backquote",d.Up="ArrowUp",d.Down="ArrowDown",d.Left="ArrowLeft",d.Right="ArrowRight",d.ArrowUp="ArrowUp",d.ArrowDown="ArrowDown",d.ArrowLeft="ArrowLeft",d.ArrowRight="ArrowRight",d.Space="Space",d.Backspace="Backspace",d.Delete="Delete",d.Esc="Escape",d.Escape="Escape",d.Enter="Enter",d.NumpadEnter="NumpadEnter",d.ContextMenu="ContextMenu"})(Et||(Et={}));class ft extends v{constructor(t,s,r){super(),this.key=t,this.value=s,this.originalEvent=r}}class St{constructor(){this.events=new m,this._keys=[],this._keysUp=[],this._keysDown=[],this._releaseAllKeys=t=>{for(const s of this._keys){const r=new ft(s,t.key,t);this.events.emit("up",r),this.events.emit("release",r)}this._keysUp=Array.from(new Set(this._keys.concat(this._keysUp))),this._keys.length=0},this._handleKeyDown=t=>{!t.metaKey&&(this._keys.includes(Et.MetaLeft)||this._keys.includes(Et.MetaRight))&&this._releaseAllKeys(t);const s=t.code;if(this._keys.indexOf(s)===-1){this._keys.push(s),this._keysDown.push(s);const r=new ft(s,t.key,t);this.events.emit("down",r),this.events.emit("press",r)}},this._handleKeyUp=t=>{const s=t.code,r=this._keys.indexOf(s);this._keys.splice(r,1),this._keysUp.push(s);const l=new ft(s,t.key,t);this.events.emit("up",l),this.events.emit("release",l),t.key==="Meta"&&this._releaseAllKeys(t)}}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}init(t){let{global:s}=t;const{grabWindowFocus:r}=t;s||(ct()?(s=window,r&&window.focus(),D.getInstance().warn("Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus")):s=window.top),s.addEventListener("blur",()=>{this._keys.length=0}),s.addEventListener("keyup",this._handleKeyUp),s.addEventListener("keydown",this._handleKeyDown)}update(){this._keysDown.length=0,this._keysUp.length=0;for(let t=0;t<this._keys.length;t++)this.events.emit("hold",new ft(this._keys[t]))}getKeys(){return this._keys}wasPressed(t){return this._keysDown.indexOf(t)>-1}isHeld(t){return this._keys.indexOf(t)>-1}wasReleased(t){return this._keysUp.indexOf(t)>-1}triggerEvent(t,s,r){t==="down"&&this._handleKeyDown(new KeyboardEvent("keydown",{code:s,key:r??null})),t==="up"&&this._handleKeyUp(new KeyboardEvent("keyup",{code:s,key:r??null}))}}var lt;(function(d){d.Canvas="Canvas",d.Document="Document"})(lt||(lt={}));const Ot=4294967295;class Pt{constructor(t){this.seed=t,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(t||Date.now())>>>0;for(let s=1;s<this._n;s++){const r=this._mt[s-1]^this._mt[s-1]>>>this._w-2;this._mt[s]=(this._f*((r&4294901760)>>>16)<<16)+this._f*(r&65535)+s>>>0}this._index=this._n}_twist(){const t=[0,this._a];let s=0,r=0;for(;r<this._n-this._m;r++)s=this._mt[r]&this._upperMask|this._mt[r+1]&this._lowerMask,this._mt[r]=this._mt[r+this._m]^s>>>1^t[s&1]&Ot;for(;r<this._n-1;r++)s=this._mt[r]&this._upperMask|this._mt[r+1]&this._lowerMask,this._mt[r]=this._mt[r+(this._m-this._n)]^s>>>1^t[s&1]&Ot;s=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^s>>>1^t[s&1]&Ot,this._index=0}nextInt(){this._index>=this._n&&this._twist();let t=this._mt[this._index++];return t^=t>>>this._u,t^=t<<this._s&this._b,t^=t<<this._t&this._c,t^=t>>>this._l,t>>>0}next(){return this.nextInt()*(1/4294967296)}floating(t,s){return(s-t)*this.next()+t}integer(t,s){return Math.floor((s-t+1)*this.next()+t)}bool(t=.5){return this.next()<=t}pickOne(t){return t[this.integer(0,t.length-1)]}pickSet(t,s,r=!1){return r?this._pickSetWithDuplicates(t,s):this._pickSetWithoutDuplicates(t,s)}_pickSetWithoutDuplicates(t,s){if(s>t.length||s<0)throw new Error("Invalid number of elements to pick, must pick a value 0 < n <= length");if(s===t.length)return t;const r=new Array(s);let l=0;const h=t.slice(0);for(;l<s;){const g=this.integer(0,h.length-1);r[l++]=h[g],h.splice(g,1)}return r}_pickSetWithDuplicates(t,s){if(s<0)throw new Error("Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT");const r=new Array(s);for(let l=0;l<s;l++)r[l]=this.pickOne(t);return r}shuffle(t){const s=t.slice(0);let r=null;for(let l=0;l<s.length-2;l++){const h=this.integer(l,s.length-1);r=s[l],s[l]=s[h],s[h]=r}return s}range(t,s,r){const l=new Array(t);for(let h=0;h<t;h++)l[h]=this.integer(s,r);return l}d4(){return this.integer(1,4)}d6(){return this.integer(1,6)}d8(){return this.integer(1,8)}d10(){return this.integer(1,10)}d12(){return this.integer(1,12)}d20(){return this.integer(1,20)}}const It=Math.PI*2;function Gt(d){return d>=0?d-Math.floor(d):d-Math.ceil(d)}function Ut(d){return d===0?0:d<0?-1:1}function ne(d,t,s){return Math.min(Math.max(t,d),s)}function ue(d){let t=d;if(d>It)for(;t>It;)t-=It;if(d<0)for(;t<0;)t+=It;return t}function Te(d){return 180/Math.PI*d}function Vs(d){return d/180*Math.PI}const bi=(d,t)=>Array.from(new Array(t-d+1),(s,r)=>r+d);function qs(d,t,s=new Pt){return s?s.floating(d,t):d+Math.random()*(t-d)}function Mn(d,t,s=new Pt){return s?s.integer(d,t):Math.round(qs(d,t))}class z{static get Zero(){return new z(0,0)}static get One(){return new z(1,1)}static get Half(){return new z(.5,.5)}static get Up(){return new z(0,-1)}static get Down(){return new z(0,1)}static get Left(){return new z(-1,0)}static get Right(){return new z(1,0)}static fromAngle(t){return new z(Math.cos(t),Math.sin(t))}static isValid(t){return!(t==null||isNaN(t.x)||isNaN(t.y)||t.x===1/0||t.y===1/0||t.x===-1/0||t.y===-1/0)}static distance(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}static min(t,s){return new z(Math.min(t.x,s.x),Math.min(t.y,s.y))}static max(t,s){return new z(Math.max(t.x,s.x),Math.max(t.y,s.y))}constructor(t,s){this._x=0,this._y=0,this._x=t,this._y=s}get x(){return this._x}set x(t){this._x=t}get y(){return this._y}set y(t){this._y=t}setTo(t,s){this.x=t,this.y=s}equals(t,s=.001){return Math.abs(this.x-t.x)<=s&&Math.abs(this.y-t.y)<=s}distance(t){if(!t)return Math.sqrt(this.x*this.x+this.y*this.y);const s=this.x-t.x,r=this.y-t.y;return Math.sqrt(s*s+r*r)}squareDistance(t){t||(t=z.Zero);const s=this.x-t.x,r=this.y-t.y;return s*s+r*r}clampMagnitude(t){const s=this.size,r=ne(s,0,t);return this.size=r,this}get size(){return this.distance()}set size(t){const s=this.normalize().scale(t);this.setTo(s.x,s.y)}normalize(){const t=this.distance();return t>0?new z(this.x/t,this.y/t):new z(0,1)}average(t){return this.add(t).scale(.5)}scale(t,s){const r=s||new z(0,0);return t instanceof z?(r.x=this.x*t.x,r.y=this.y*t.y):(r.x=this.x*t,r.y=this.y*t),r}add(t,s){return s?(s.x=this.x+t.x,s.y=this.y+t.y,s):new z(this.x+t.x,this.y+t.y)}sub(t){return new z(this.x-t.x,this.y-t.y)}addEqual(t){return this.setTo(this.x+t.x,this.y+t.y),this}subEqual(t){return this.setTo(this.x-t.x,this.y-t.y),this}scaleEqual(t){return this.setTo(this.x*t,this.y*t),this}dot(t){return this.x*t.x+this.y*t.y}cross(t){if(t instanceof z)return this.x*t.y-this.y*t.x;if(typeof t=="number")return new z(t*this.y,-t*this.x)}static cross(t,s){return new z(-t*s.y,t*s.x)}perpendicular(){return new z(this.y,-this.x)}normal(){return this.perpendicular().normalize()}negate(){return this.scale(-1)}toAngle(){return Math.atan2(this.y,this.x)}rotate(t,s){s||(s=new z(0,0));const r=Math.sin(t),l=Math.cos(t),h=l*(this.x-s.x)-r*(this.y-s.y)+s.x,g=r*(this.x-s.x)+l*(this.y-s.y)+s.y;return new z(h,g)}clone(t){const s=t??new z(0,0);return s.x=this.x,s.y=this.y,s}toString(t){return t?`(${this.x.toFixed(t)}, ${this.y.toFixed(t)})`:`(${this.x}, ${this.y})`}}function Z(d,t){return new z(d,t)}class ht{constructor(t,s,r,l){this.r=t,this.g=s,this.b=r,this.a=l??1}static fromRGB(t,s,r,l){return new ht(t,s,r,l)}static fromRGBString(t){const s=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)/i;let r=null;if(r=t.match(s)){const l=parseInt(r[1],10),h=parseInt(r[2],10),g=parseInt(r[3],10);let _=1;return r[4]&&(_=parseFloat(r[4])),new ht(l,h,g,_)}else throw new Error("Invalid rgb/a string: "+t)}static fromHex(t){const s=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;let r=null;if(r=t.match(s)){const l=parseInt(r[1],16),h=parseInt(r[2],16),g=parseInt(r[3],16);let _=1;return r[4]&&(_=parseInt(r[4],16)/255),new ht(l,h,g,_)}else throw new Error("Invalid hex string: "+t)}static fromHSL(t,s,r,l=1){return new xs(t,s,r,l).toRGBA()}lighten(t=.1){const s=xs.fromRGBA(this.r,this.g,this.b,this.a);return s.l+=(1-s.l)*t,s.toRGBA()}darken(t=.1){const s=xs.fromRGBA(this.r,this.g,this.b,this.a);return s.l-=s.l*t,s.toRGBA()}saturate(t=.1){const s=xs.fromRGBA(this.r,this.g,this.b,this.a);return s.s+=s.s*t,s.toRGBA()}desaturate(t=.1){const s=xs.fromRGBA(this.r,this.g,this.b,this.a);return s.s-=s.s*t,s.toRGBA()}multiply(t){const s=t.r/255*this.r/255*255,r=t.g/255*this.g/255*255,l=t.b/255*this.b/255*255,h=t.a*this.a;return new ht(s,r,l,h)}screen(t){const s=t.invert(),r=t.invert();return s.multiply(r).invert()}invert(){return new ht(255-this.r,255-this.g,255-this.b,1-this.a)}average(t){const s=(t.r+this.r)/2,r=(t.g+this.g)/2,l=(t.b+this.b)/2,h=(t.a+this.a)/2;return new ht(s,r,l,h)}equal(t){return this.toString()===t.toString()}toString(t="rgb"){switch(t){case"rgb":return this.toRGBA();case"hsl":return this.toHSLA();case"hex":return this.toHex();default:throw new Error("Invalid Color format")}}_componentToHex(t){const s=t.toString(16);return s.length===1?"0"+s:s}toHex(){return"#"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b)}toRGBA(){const t=String(this.r.toFixed(0))+", "+String(this.g.toFixed(0))+", "+String(this.b.toFixed(0));return this.a!==void 0||this.a!==null?"rgba("+t+", "+String(this.a)+")":"rgb("+t+")"}toHSLA(){return xs.fromRGBA(this.r,this.g,this.b,this.a).toString()}fillStyle(){return this.toString()}clone(){return new ht(this.r,this.g,this.b,this.a)}static get Black(){return ht.fromHex("#000000")}static get White(){return ht.fromHex("#FFFFFF")}static get Gray(){return ht.fromHex("#808080")}static get LightGray(){return ht.fromHex("#D3D3D3")}static get DarkGray(){return ht.fromHex("#A9A9A9")}static get Yellow(){return ht.fromHex("#FFFF00")}static get Orange(){return ht.fromHex("#FFA500")}static get Red(){return ht.fromHex("#FF0000")}static get Vermilion(){return ht.fromHex("#FF5B31")}static get Rose(){return ht.fromHex("#FF007F")}static get Magenta(){return ht.fromHex("#FF00FF")}static get Violet(){return ht.fromHex("#7F00FF")}static get Blue(){return ht.fromHex("#0000FF")}static get Azure(){return ht.fromHex("#007FFF")}static get Cyan(){return ht.fromHex("#00FFFF")}static get Viridian(){return ht.fromHex("#59978F")}static get Green(){return ht.fromHex("#00FF00")}static get Chartreuse(){return ht.fromHex("#7FFF00")}static get Transparent(){return ht.fromHex("#FFFFFF00")}static get ExcaliburBlue(){return ht.fromHex("#176BAA")}}class xs{constructor(t,s,r,l){this.h=t,this.s=s,this.l=r,this.a=l}static hue2rgb(t,s,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(s-t)*6*r:r<1/2?s:r<2/3?t+(s-t)*(2/3-r)*6:t}static fromRGBA(t,s,r,l){t/=255,s/=255,r/=255;const h=Math.max(t,s,r),g=Math.min(t,s,r);let _,b;const S=(h+g)/2;if(h===g)_=b=0;else{const A=h-g;switch(b=S>.5?A/(2-h-g):A/(h+g),h){case t:_=(s-r)/A+(s<r?6:0);break;case s:_=(r-t)/A+2;break;case r:_=(t-s)/A+4;break}_/=6}return new xs(_,b,S,l)}toRGBA(){let t,s,r;if(this.s===0)t=s=r=this.l;else{const l=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,h=2*this.l-l;t=xs.hue2rgb(h,l,this.h+1/3),s=xs.hue2rgb(h,l,this.h),r=xs.hue2rgb(h,l,this.h-1/3)}return new ht(t*255,s*255,r*255,this.a)}toString(){const t=this.h.toFixed(0),s=this.s.toFixed(0),r=this.l.toFixed(0),l=this.a.toFixed(0);return`hsla(${t}, ${s}, ${r}, ${l})`}}var Oe;(function(d){d.None="None",d.Top="Top",d.Bottom="Bottom",d.Left="Left",d.Right="Right"})(Oe||(Oe={})),function(d){function t(r){return r===d.Top?d.Bottom:r===d.Bottom?d.Top:r===d.Left?d.Right:r===d.Right?d.Left:d.None}d.getOpposite=t;function s(r){const l=[z.Left,z.Right,z.Up,z.Down],h=[d.Left,d.Right,d.Top,d.Bottom];let g=-Number.MAX_VALUE,_=-1;for(let b=0;b<l.length;b++)l[b].dot(r)>g&&(g=l[b].dot(r),_=b);return h[_]}d.fromDirection=s}(Oe||(Oe={}));class Wt{constructor(t=0,s=0,r=0,l=0){typeof t=="object"?(this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom):typeof t=="number"&&(this.left=t,this.top=s,this.right=r,this.bottom=l)}clone(){return new Wt(this.left,this.top,this.right,this.bottom)}static getSideFromIntersection(t){return t&&t?Math.abs(t.x)>Math.abs(t.y)?t.x<0?Oe.Right:Oe.Left:t.y<0?Oe.Bottom:Oe.Top:Oe.None}static fromPoints(t){let s=1/0,r=1/0,l=-1/0,h=-1/0;for(let g=0;g<t.length;g++)t[g].x<s&&(s=t[g].x),t[g].x>l&&(l=t[g].x),t[g].y<r&&(r=t[g].y),t[g].y>h&&(h=t[g].y);return new Wt(s,r,l,h)}static fromDimension(t,s,r=z.Half,l=z.Zero){return new Wt(-t*r.x+l.x,-s*r.y+l.y,t-t*r.x+l.x,s-s*r.y+l.y)}get width(){return this.right-this.left}get height(){return this.bottom-this.top}hasZeroDimensions(){return this.width===0||this.height===0}get center(){return new z((this.left+this.right)/2,(this.top+this.bottom)/2)}translate(t){return new Wt(this.left+t.x,this.top+t.y,this.right+t.x,this.bottom+t.y)}rotate(t,s=z.Zero){const r=this.getPoints().map(l=>l.rotate(t,s));return Wt.fromPoints(r)}scale(t,s=z.Zero){const r=this.translate(s);return new Wt(r.left*t.x,r.top*t.y,r.right*t.x,r.bottom*t.y)}transform(t){const s=t.data[0]*this.left,r=t.data[1]*this.left,l=t.data[0]*this.right,h=t.data[1]*this.right,g=t.data[2]*this.top,_=t.data[3]*this.top,b=t.data[2]*this.bottom,S=t.data[3]*this.bottom,A=t.getPosition(),I=Math.min(s,l)+Math.min(g,b)+A.x,V=Math.min(r,h)+Math.min(_,S)+A.y,H=Math.max(s,l)+Math.max(g,b)+A.x,tt=Math.max(r,h)+Math.max(_,S)+A.y;return new Wt({left:I,top:V,right:H,bottom:tt})}getPerimeter(){const t=this.width,s=this.height;return 2*(t+s)}getPoints(){const t=[];return t.push(new z(this.left,this.top)),t.push(new z(this.right,this.top)),t.push(new z(this.right,this.bottom)),t.push(new z(this.left,this.bottom)),t}rayCast(t,s=1/0){let r=-1/0,l=1/0;const h=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,g=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,_=(this.left-t.pos.x)*h,b=(this.right-t.pos.x)*h;r=Math.min(_,b),l=Math.max(_,b);const S=(this.top-t.pos.y)*g,A=(this.bottom-t.pos.y)*g;return r=Math.max(r,Math.min(S,A)),l=Math.min(l,Math.max(S,A)),l>=Math.max(0,r)&&r<s}rayCastTime(t,s=1/0){let r=-1/0,l=1/0;const h=t.dir.x===0?Number.MAX_VALUE:1/t.dir.x,g=t.dir.y===0?Number.MAX_VALUE:1/t.dir.y,_=(this.left-t.pos.x)*h,b=(this.right-t.pos.x)*h;r=Math.min(_,b),l=Math.max(_,b);const S=(this.top-t.pos.y)*g,A=(this.bottom-t.pos.y)*g;return r=Math.max(r,Math.min(S,A)),l=Math.min(l,Math.max(S,A)),l>=Math.max(0,r)&&r<s?r:-1}contains(t){return t instanceof z?this.left<=t.x&&this.top<=t.y&&this.bottom>=t.y&&this.right>=t.x:t instanceof Wt?this.left<=t.left&&this.top<=t.top&&t.bottom<=this.bottom&&t.right<=this.right:!1}combine(t){return new Wt(Math.min(this.left,t.left),Math.min(this.top,t.top),Math.max(this.right,t.right),Math.max(this.bottom,t.bottom))}get dimensions(){return new z(this.width,this.height)}overlaps(t,s){const r=s||0;if(t.hasZeroDimensions())return this.contains(t);if(this.hasZeroDimensions())return t.contains(this);const l=this.combine(t);return l.width+r<t.width+this.width&&l.height+r<t.height+this.height}intersect(t){const s=this.combine(t);if(s.width<t.width+this.width&&s.height<t.height+this.height&&!s.dimensions.equals(t.dimensions)&&!s.dimensions.equals(this.dimensions)){let r=0;this.right>=t.left&&this.right<=t.right?r=t.left-this.right:r=t.right-this.left;let l=0;return this.top<=t.bottom&&this.top>=t.top?l=t.bottom-this.top:l=t.top-this.bottom,Math.abs(r)<Math.abs(l)?new z(r,0):new z(0,l)}else if(s.dimensions.equals(t.dimensions)||s.dimensions.equals(this.dimensions)){let r=0;this.width-t.width>=0?this.right-t.right<=t.left-this.left?r=t.left-this.right:r=t.right-this.left:t.right-this.right<=this.left-t.left?r=this.left-t.right:r=this.right-t.left;let l=0;return this.height-t.height>=0?this.bottom-t.bottom<=t.top-this.top?l=t.top-this.bottom:l=t.bottom-this.top:t.bottom-this.bottom<=this.top-t.top?l=this.top-t.bottom:l=this.bottom-t.top,Math.abs(r)<Math.abs(l)?new z(r,0):new z(0,l)}else return null}intersectWithSide(t){const s=this.intersect(t);return Wt.getSideFromIntersection(s)}draw(t,s=ht.Yellow){t.debug.drawRect(this.left,this.top,this.width,this.height,{color:s})}}class cr{constructor(){this._isCompleted=!1,this.promise=new Promise((t,s)=>{this._resolver=t,this._rejecter=s})}get isCompleted(){return this._isCompleted}resolve(t){this._isCompleted||(this._isCompleted=!0,this._resolver(t))}reject(t){this._isCompleted||(this._isCompleted=!0,this._rejecter(t))}}function Kr(d){let t=0,s=0;const r=h=>{t+=h.offsetLeft,h.offsetParent&&r(h.offsetParent)},l=h=>{s+=h.offsetTop,h.offsetParent&&l(h.offsetParent)};return r(d),l(d),new z(t,s)}function Dv(d,t){return t.indexOf(d)===-1?(t.push(d),!0):!1}function Hi(d,t){let s=-1;return(s=t.indexOf(d))>-1?(t.splice(s,1),!0):!1}function Gl(d,t){for(let s=0;s<d.length;s++)if(d[s]===t)return!0;return!1}function Hh(d){throw new Error(d)}function jl(d,t){var s;const r=new cr;return((s=t==null?void 0:t.schedule.bind(t))!==null&&s!==void 0?s:setTimeout)(()=>{r.resolve()},d),r.promise}var Xl;(function(d){d[d.X=12]="X",d[d.Y=13]="Y"})(Xl||(Xl={}));class Cs{constructor(){this.data=new Float32Array(16),this._scaleX=1,this._scaleSignX=1,this._scaleY=1,this._scaleSignY=1}static ortho(t,s,r,l,h,g){const _=new Cs;return _.data[0]=2/(s-t),_.data[1]=0,_.data[2]=0,_.data[3]=0,_.data[4]=0,_.data[5]=2/(l-r),_.data[6]=0,_.data[7]=0,_.data[8]=0,_.data[9]=0,_.data[10]=-2/(g-h),_.data[11]=0,_.data[12]=-(s+t)/(s-t),_.data[13]=-(l+r)/(l-r),_.data[14]=-(g+h)/(g-h),_.data[15]=1,_}clone(t){const s=t||new Cs;return s.data[0]=this.data[0],s.data[1]=this.data[1],s.data[2]=this.data[2],s.data[3]=this.data[3],s.data[4]=this.data[4],s.data[5]=this.data[5],s.data[6]=this.data[6],s.data[7]=this.data[7],s.data[8]=this.data[8],s.data[9]=this.data[9],s.data[10]=this.data[10],s.data[11]=this.data[11],s.data[12]=this.data[12],s.data[13]=this.data[13],s.data[14]=this.data[14],s.data[15]=this.data[15],s}toDOMMatrix(){return new DOMMatrix([...this.data])}static fromFloat32Array(t){const s=new Cs;return s.data=t,s}static identity(){const t=new Cs;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=0,t.data[4]=0,t.data[5]=1,t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t}static translation(t,s){const r=Cs.identity();return r.data[12]=t,r.data[13]=s,r}static scale(t,s){const r=Cs.identity();return r.data[0]=t,r.data[5]=s,r.data[10]=1,r.data[15]=1,r}static rotation(t){const s=Cs.identity();return s.data[0]=Math.cos(t),s.data[4]=-Math.sin(t),s.data[1]=Math.sin(t),s.data[5]=Math.cos(t),s}multiply(t,s){if(t instanceof z){const r=s||new z(0,0),l=t,h=l.x*this.data[0]+l.y*this.data[4]+this.data[12],g=l.x*this.data[1]+l.y*this.data[5]+this.data[13];return r.x=h,r.y=g,r}else{const r=s||new Cs,l=t,h=this.data[0],g=this.data[1],_=this.data[2],b=this.data[3],S=this.data[4],A=this.data[5],I=this.data[6],V=this.data[7],H=this.data[8],tt=this.data[9],gt=this.data[10],pt=this.data[11],J=this.data[12],K=this.data[13],wt=this.data[14],Ct=this.data[15],Nt=l.data[0],Mt=l.data[1],ot=l.data[2],ce=l.data[3],ge=l.data[4],ve=l.data[5],de=l.data[6],$e=l.data[7],Ps=l.data[8],ks=l.data[9],Is=l.data[10],Ti=l.data[11],Pi=l.data[12],ki=l.data[13],$t=l.data[14],$n=l.data[15];r.data[0]=h*Nt+S*Mt+H*ot+J*ce,r.data[1]=g*Nt+A*Mt+tt*ot+K*ce,r.data[2]=_*Nt+I*Mt+gt*ot+wt*ce,r.data[3]=b*Nt+V*Mt+pt*ot+Ct*ce,r.data[4]=h*ge+S*ve+H*de+J*$e,r.data[5]=g*ge+A*ve+tt*de+K*$e,r.data[6]=_*ge+I*ve+gt*de+wt*$e,r.data[7]=b*ge+V*ve+pt*de+Ct*$e,r.data[8]=h*Ps+S*ks+H*Is+J*Ti,r.data[9]=g*Ps+A*ks+tt*Is+K*Ti,r.data[10]=_*Ps+I*ks+gt*Is+wt*Ti,r.data[11]=b*Ps+V*ks+pt*Is+Ct*Ti,r.data[12]=h*Pi+S*ki+H*$t+J*$n,r.data[13]=g*Pi+A*ki+tt*$t+K*$n,r.data[14]=_*Pi+I*ki+gt*$t+wt*$n,r.data[15]=b*Pi+V*ki+pt*$t+Ct*$n;const Sa=this.getScale();return r._scaleSignX=Ut(Sa.x)*Ut(r._scaleSignX),r._scaleSignY=Ut(Sa.y)*Ut(r._scaleSignY),r}}translate(t,s){const r=this.data[0],l=this.data[1],h=this.data[2],g=this.data[3],_=this.data[4],b=this.data[5],S=this.data[6],A=this.data[7],I=this.data[8],V=this.data[9],H=this.data[10],tt=this.data[11],gt=this.data[12],pt=this.data[13],J=this.data[14],K=this.data[15],wt=0,Ct=1;return this.data[12]=r*t+_*s+I*wt+gt*Ct,this.data[13]=l*t+b*s+V*wt+pt*Ct,this.data[14]=h*t+S*s+H*wt+J*Ct,this.data[15]=g*t+A*s+tt*wt+K*Ct,this}setPosition(t,s){this.data[12]=t,this.data[13]=s}getPosition(){return Z(this.data[12],this.data[13])}rotate(t){const s=this.data[0],r=this.data[1],l=this.data[2],h=this.data[3],g=this.data[4],_=this.data[5],b=this.data[6],S=this.data[7],A=Math.sin(t),I=Math.cos(t);return this.data[0]=I*s+A*g,this.data[1]=I*r+A*_,this.data[2]=I*l+A*b,this.data[3]=I*h+A*S,this.data[4]=I*g-A*s,this.data[5]=I*_-A*r,this.data[6]=I*b-A*l,this.data[7]=I*S-A*h,this}scale(t,s){const r=this.data[0],l=this.data[1],h=this.data[2],g=this.data[3],_=this.data[4],b=this.data[5],S=this.data[6],A=this.data[7];return this.data[0]=r*t,this.data[1]=l*t,this.data[2]=h*t,this.data[3]=g*t,this.data[4]=_*s,this.data[5]=b*s,this.data[6]=S*s,this.data[7]=A*s,this}setRotation(t){const s=this.getScale(),r=Math.sin(t),l=Math.cos(t);this.data[0]=l*s.x,this.data[1]=r*s.y,this.data[4]=-r*s.x,this.data[5]=l*s.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return ue(t)}getScaleX(){const t=Z(this.data[0],this.data[4]).size;return this._scaleSignX*t}getScaleY(){const t=Z(this.data[1],this.data[5]).size;return this._scaleSignY*t}getScale(){return Z(this.getScaleX(),this.getScaleY())}setScaleX(t){if(this._scaleX===t)return;this._scaleSignX=Ut(t);const s=Z(this.data[0]*this._scaleSignX,this.data[4]*this._scaleSignX).normalize();this.data[0]=s.x*t,this.data[4]=s.y*t,this._scaleX=t}setScaleY(t){if(this._scaleY===t)return;this._scaleSignY=Ut(t);const s=Z(this.data[1]*this._scaleSignY,this.data[5]*this._scaleSignY).normalize();this.data[1]=s.x*t,this.data[5]=s.y*t,this._scaleY=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}getBasisDeterminant(){return this.data[0]*this.data[5]-this.data[1]*this.data[4]}getAffineInverse(t){const r=1/this.getBasisDeterminant(),l=this.data[0],h=this.data[4],g=this.data[1],_=this.data[5],b=t||Cs.identity();b.data[0]=_*r,b.data[1]=-g*r,b.data[4]=-h*r,b.data[5]=l*r;const S=this.data[12],A=this.data[13];return b.data[12]=-(S*b.data[0]+A*b.data[4]),b.data[13]=-(S*b.data[1]+A*b.data[5]),b}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===0&&this.data[4]===0&&this.data[5]===1&&this.data[6]===0&&this.data[7]===0&&this.data[8]===0&&this.data[9]===0&&this.data[10]===1&&this.data[11]===0&&this.data[12]===0&&this.data[13]===0&&this.data[14]===0&&this.data[15]===1}toString(){return`
[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]
[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]
[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]
[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]
`}}class Ve{constructor(){this.data=new Float64Array(6),this._scale=new Float64Array([1,1]),this._scaleSignX=1,this._scaleSignY=1}toDOMMatrix(){return new DOMMatrix([...this.data])}static identity(){const t=new Ve;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}static translation(t,s){const r=Ve.identity();return r.data[4]=t,r.data[5]=s,r}static scale(t,s){const r=Ve.identity();return r.data[0]=t,r.data[3]=s,r._scale[0]=t,r._scale[1]=s,r}static rotation(t){const s=Ve.identity();return s.data[0]=Math.cos(t),s.data[1]=Math.sin(t),s.data[2]=-Math.sin(t),s.data[3]=Math.cos(t),s}setPosition(t,s){this.data[4]=t,this.data[5]=s}getPosition(){return Z(this.data[4],this.data[5])}rotate(t){const s=this.data[0],r=this.data[1],l=this.data[2],h=this.data[3],g=Math.sin(t),_=Math.cos(t);return this.data[0]=_*s+g*l,this.data[1]=_*r+g*h,this.data[2]=_*l-g*s,this.data[3]=_*h-g*r,this}translate(t,s){const r=this.data[0],l=this.data[1],h=this.data[2],g=this.data[3],_=this.data[4],b=this.data[5];return this.data[4]=r*t+h*s+_,this.data[5]=l*t+g*s+b,this}scale(t,s){const r=this.data[0],l=this.data[1],h=this.data[2],g=this.data[3];return this.data[0]=r*t,this.data[1]=l*t,this.data[2]=h*s,this.data[3]=g*s,this._scale[0]=t,this._scale[1]=s,this}determinant(){return this.data[0]*this.data[3]-this.data[1]*this.data[2]}inverse(t){const r=1/this.determinant(),l=this.data[0],h=this.data[2],g=this.data[1],_=this.data[3],b=t||Ve.identity();b.data[0]=_*r,b.data[1]=-g*r,b.data[2]=-h*r,b.data[3]=l*r;const S=this.data[4],A=this.data[5];return b.data[4]=-(S*b.data[0]+A*b.data[2]),b.data[5]=-(S*b.data[1]+A*b.data[3]),b}multiply(t,s){if(t instanceof z){const r=s||new z(0,0),l=t,h=l.x*this.data[0]+l.y*this.data[2]+this.data[4],g=l.x*this.data[1]+l.y*this.data[3]+this.data[5];return r.x=h,r.y=g,r}else{const r=s||new Ve,l=t,h=this.data[0],g=this.data[1],_=this.data[2],b=this.data[3],S=this.data[4],A=this.data[5],I=l.data[0],V=l.data[1],H=l.data[2],tt=l.data[3],gt=l.data[4],pt=l.data[5];r.data[0]=h*I+_*V,r.data[1]=g*I+b*V,r.data[2]=h*H+_*tt,r.data[3]=g*H+b*tt,r.data[4]=h*gt+_*pt+S,r.data[5]=g*gt+b*pt+A;const J=this.getScale();return r._scaleSignX=Ut(J.x)*Ut(r._scaleSignX),r._scaleSignY=Ut(J.y)*Ut(r._scaleSignY),r}}to4x4(){const t=new Cs;return t.data[0]=this.data[0],t.data[1]=this.data[1],t.data[2]=0,t.data[3]=0,t.data[4]=this.data[2],t.data[5]=this.data[3],t.data[6]=0,t.data[7]=0,t.data[8]=0,t.data[9]=0,t.data[10]=1,t.data[11]=0,t.data[12]=this.data[4],t.data[13]=this.data[5],t.data[14]=0,t.data[15]=1,t}setRotation(t){const s=this.getScale(),r=Math.sin(t),l=Math.cos(t);this.data[0]=l*s.x,this.data[1]=r*s.y,this.data[2]=-r*s.x,this.data[3]=l*s.y}getRotation(){const t=Math.atan2(this.data[1]/this.getScaleY(),this.data[0]/this.getScaleX());return ue(t)}getScaleX(){const t=Z(this.data[0],this.data[2]).distance();return this._scaleSignX*t}getScaleY(){const t=Z(this.data[1],this.data[3]).distance();return this._scaleSignY*t}getScale(){return Z(this.getScaleX(),this.getScaleY())}setScaleX(t){if(t===this._scale[0])return;this._scaleSignX=Ut(t);const s=Z(this.data[0]*this._scaleSignX,this.data[2]*this._scaleSignX).normalize();this.data[0]=s.x*t,this.data[2]=s.y*t,this._scale[0]=t}setScaleY(t){if(t===this._scale[1])return;this._scaleSignY=Ut(t);const s=Z(this.data[1]*this._scaleSignY,this.data[3]*this._scaleSignY).normalize();this.data[1]=s.x*t,this.data[3]=s.y*t,this._scale[1]=t}setScale(t){this.setScaleX(t.x),this.setScaleY(t.y)}isIdentity(){return this.data[0]===1&&this.data[1]===0&&this.data[2]===0&&this.data[3]===1&&this.data[4]===0&&this.data[5]===0}reset(){const t=this;return t.data[0]=1,t.data[1]=0,t.data[2]=0,t.data[3]=1,t.data[4]=0,t.data[5]=0,t}clone(t){const s=t||new Ve;return s.data[0]=this.data[0],s.data[1]=this.data[1],s.data[2]=this.data[2],s.data[3]=this.data[3],s.data[4]=this.data[4],s.data[5]=this.data[5],s}toString(){return`
[${this.data[0]} ${this.data[2]} ${this.data[4]}]
[${this.data[1]} ${this.data[3]} ${this.data[5]}]
[0 0 1]
`}}class Lv{constructor(){this._transforms=[],this._currentTransform=Ve.identity()}save(){this._transforms.push(this._currentTransform),this._currentTransform=this._currentTransform.clone()}restore(){this._currentTransform=this._transforms.pop()}translate(t,s){return this._currentTransform.translate(t,s)}rotate(t){return this._currentTransform.rotate(t)}scale(t,s){return this._currentTransform.scale(t,s)}set current(t){this._currentTransform=t}get current(){return this._currentTransform}}class $h{constructor(){this._states=[],this._currentState=this._getDefaultState()}_getDefaultState(){return{opacity:1,z:0,tint:ht.White,material:null}}_cloneState(){return{opacity:this._currentState.opacity,z:this._currentState.z,tint:this._currentState.tint.clone(),material:this._currentState.material}}save(){this._states.push(this._currentState),this._currentState=this._cloneState()}restore(){this._currentState=this._states.pop()}get current(){return this._currentState}set current(t){this._currentState=t}}const Ov={Complete:"complete",Load:"load",LoadStart:"loadstart",Progress:"progress",Error:"error"};class Qo{constructor(t,s,r=!1){this.path=t,this.responseType=s,this.bustCache=r,this.data=null,this.logger=D.getInstance(),this.events=new m}isLoaded(){return this.data!==null}_cacheBust(t){return/\?\w*=\w*/.test(t)?t+="&__="+Date.now():t+="?__="+Date.now(),t}load(){return new Promise((t,s)=>{if(this.data!==null){this.logger.debug("Already have data for resource",this.path),this.events.emit("complete",this.data),t(this.data);return}const r=new XMLHttpRequest;r.open("GET",this.bustCache?this._cacheBust(this.path):this.path,!0),r.responseType=this.responseType,r.addEventListener("loadstart",l=>this.events.emit("loadstart",l)),r.addEventListener("progress",l=>this.events.emit("progress",l)),r.addEventListener("error",l=>this.events.emit("error",l)),r.addEventListener("load",l=>this.events.emit("load",l)),r.addEventListener("load",()=>{if(r.status!==0&&r.status!==200){this.logger.error("Failed to load resource ",this.path," server responded with error code",r.status),this.events.emit("error",r.response),s(new Error(r.statusText));return}this.data=r.response,this.events.emit("complete",this.data),this.logger.debug("Completed loading resource",this.path),t(this.data)}),r.send()})}}function Bn(d,t){return d&&(d.__isProxy===void 0?new Proxy(d,{set:(s,r,l)=>(s[r]!==l&&(s[r]=l,typeof r=="string"&&r[0]!=="_"&&t(s)),!0),get:(s,r)=>r!=="__isProxy"?s[r]:!0}):d)}function Wh(d,t){return d&&(d.__isProxy===void 0?new Proxy(d,{set:(s,r,l)=>(s[r]=l,typeof r=="string"&&r[0]!=="_"&&t(s),!0),get:(s,r)=>r!=="__isProxy"?s[r]:!0}):d)}class Ss{isStale(){return this._transformStale}get flipHorizontal(){return this._flipHorizontal}set flipHorizontal(t){this._flipHorizontal=t,this._transformStale=!0}get flipVertical(){return this._flipVertical}set flipVertical(t){this._flipVertical=t,this._transformStale=!0}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this._transformStale=!0}get scale(){return this._scale}set scale(t){this._scale=Bn(t,()=>{this._transformStale=!0}),this._transformStale=!0}get origin(){return this._origin}set origin(t){this._origin=Bn(t,()=>{this._transformStale=!0}),this._transformStale=!0}constructor(t){var s,r,l,h,g,_;this.id=Ss._ID++,this.transform=Ve.identity(),this.tint=null,this._transformStale=!0,this.showDebug=!1,this._flipHorizontal=!1,this._flipVertical=!1,this._rotation=0,this.opacity=1,this._scale=z.One,this._origin=null,this._width=0,this._height=0,t&&(this.origin=(s=t.origin)!==null&&s!==void 0?s:this.origin,this.flipHorizontal=(r=t.flipHorizontal)!==null&&r!==void 0?r:this.flipHorizontal,this.flipVertical=(l=t.flipVertical)!==null&&l!==void 0?l:this.flipVertical,this.rotation=(h=t.rotation)!==null&&h!==void 0?h:this.rotation,this.opacity=(g=t.opacity)!==null&&g!==void 0?g:this.opacity,this.scale=(_=t.scale)!==null&&_!==void 0?_:this.scale)}cloneGraphicOptions(){return{origin:this.origin?this.origin.clone():null,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,rotation:this.rotation,opacity:this.opacity,scale:this.scale?this.scale.clone():null}}get width(){return Math.abs(this._width*this.scale.x)}get height(){return Math.abs(this._height*this.scale.y)}set width(t){this._width=t,this._transformStale=!0}set height(t){this._height=t,this._transformStale=!0}get localBounds(){return Wt.fromDimension(this.width,this.height,z.Zero)}draw(t,s,r){this._preDraw(t,s,r),this._drawImage(t,0,0),this._postDraw(t)}_preDraw(t,s,r){t.save(),t.translate(s,r),this._transformStale&&(this.transform.reset(),this.transform.scale(Math.abs(this.scale.x),Math.abs(this.scale.y)),this._rotate(this.transform),this._flip(this.transform),this._transformStale=!1),t.multiply(this.transform),t.opacity=t.opacity*this.opacity,this.tint&&(t.tint=this.tint)}_rotate(t){var s;const r=this.scale.x>0?1:-1,l=this.scale.y>0?1:-1,h=(s=this.origin)!==null&&s!==void 0?s:Z(this.width/2,this.height/2);t.translate(h.x,h.y),t.rotate(this.rotation),t.scale(r,l),t.translate(-h.x,-h.y)}_flip(t){this.flipHorizontal&&(t.translate(this.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.height/this.scale.y),t.scale(1,-1))}_postDraw(t){this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}Ss._ID=0;class Fn extends Ss{static from(t){return new Fn({image:t})}constructor(t){var s,r;super(t),this._logger=D.getInstance(),this._dirty=!0,this._logNotLoadedWarning=!1,this.image=t.image;const{width:l,height:h}=t;this.sourceView=(s=t.sourceView)!==null&&s!==void 0?s:{x:0,y:0,width:l??0,height:h??0},this.destSize=(r=t.destSize)!==null&&r!==void 0?r:{width:l??0,height:h??0},this._updateSpriteDimensions(),this.image.ready.then(()=>{this._updateSpriteDimensions()})}get width(){return Math.abs(this.destSize.width*this.scale.x)}get height(){return Math.abs(this.destSize.height*this.scale.y)}set width(t){t/=Math.abs(this.scale.x),this.destSize.width=t,super.width=Math.ceil(this.destSize.width)}set height(t){t/=Math.abs(this.scale.y),this.destSize.height=t,super.height=Math.ceil(this.destSize.height)}_updateSpriteDimensions(){var t,s,r,l,h,g;const{width:_,height:b}=this.image;this.sourceView.width=((t=this.sourceView)===null||t===void 0?void 0:t.width)||_,this.sourceView.height=((s=this.sourceView)===null||s===void 0?void 0:s.height)||b,this.destSize.width=((r=this.destSize)===null||r===void 0?void 0:r.width)||((l=this.sourceView)===null||l===void 0?void 0:l.width)||_,this.destSize.height=((h=this.destSize)===null||h===void 0?void 0:h.height)||((g=this.sourceView)===null||g===void 0?void 0:g.height)||b,this.width=Math.ceil(this.destSize.width)*this.scale.x,this.height=Math.ceil(this.destSize.height)*this.scale.y}_preDraw(t,s,r){this.image.isLoaded()&&this._dirty&&(this._dirty=!1,this._updateSpriteDimensions()),super._preDraw(t,s,r)}_drawImage(t,s,r){this.image.isLoaded()?t.drawImage(this.image.image,this.sourceView.x,this.sourceView.y,this.sourceView.width,this.sourceView.height,s,r,this.destSize.width,this.destSize.height):(this._logNotLoadedWarning||this._logger.warn(`ImageSource ${this.image.path} is not yet loaded and won't be drawn. Please call .load() or include in a Loader.

Read https://excaliburjs.com/docs/imagesource for more information.`),this._logNotLoadedWarning=!0)}clone(){return new Fn({image:this.image,sourceView:{...this.sourceView},destSize:{...this.destSize},...this.cloneGraphicOptions()})}}var cs;(function(d){d.Pixel="Pixel",d.Blended="Blended"})(cs||(cs={}));class is{constructor(t){this._textureMap=new Map,this._gl=t,is._MAX_TEXTURE_SIZE=t.getParameter(t.MAX_TEXTURE_SIZE)}get(t){return this._textureMap.get(t)}has(t){return this._textureMap.has(t)}load(t,s,r=!1){const l=this._gl;if(!l)return null;let h=null;if(this.has(t)&&(h=this.get(t)),h)return r&&(l.bindTexture(l.TEXTURE_2D,h),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,t)),h;h=l.createTexture(),is.checkImageSizeSupportedAndLog(t),l.bindTexture(l.TEXTURE_2D,h),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);const g=s??is.filtering;return l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,g===cs.Pixel?l.NEAREST:l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,g===cs.Pixel?l.NEAREST:l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,t),this._textureMap.set(t,h),h}delete(t){const s=this._gl;if(!s)return null;let r=null;this.has(t)&&(r=this.get(t),s.deleteTexture(r))}static checkImageSizeSupportedAndLog(t){var s;const r=(s=t.dataset.originalSrc)!==null&&s!==void 0?s:"internal canvas bitmap";return t.width>is._MAX_TEXTURE_SIZE||t.height>is._MAX_TEXTURE_SIZE?(is._LOGGER.error(`The image [${r}] provided to Excalibur is too large for the device's maximum texture size of (${is._MAX_TEXTURE_SIZE}x${is._MAX_TEXTURE_SIZE}) please resize to an image for excalibur to render properly.

Images will likely render as black rectangles.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!1):((t.width>4096||t.height>4096)&&is._LOGGER.warn(`The image [${r}] provided to excalibur is too large may not work on all mobile devices, it is recommended you resize images to a maximum (4096x4096).

Images will likely render as black rectangles on some mobile platforms.

Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`),!0)}}is._LOGGER=D.getInstance(),is.filtering=cs.Blended,is._MAX_TEXTURE_SIZE=4096;class Yl{get width(){return this.image.naturalWidth}get height(){return this.image.naturalHeight}isLoaded(){return this._src||(this._src=this.data.src),!!this._src}get image(){return this.data}constructor(t,s=!1,r){this.path=t,this._logger=D.getInstance(),this.data=new Image,this._readyFuture=new cr,this.ready=this._readyFuture.promise,this._resource=new Qo(t,"blob",s),this.filtering=r,(t.endsWith(".svg")||t.endsWith(".gif"))&&this._logger.warn(`Image type is not fully supported, you may have mixed results ${t}. Fully supported: jpg, bmp, and png`)}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}async load(){if(this.isLoaded())return this.data;try{let t;if(this.path.includes("data:image/"))t=this.path;else{const l=await this._resource.load();t=URL.createObjectURL(l)}const s=new Image,r=new cr;s.onload=()=>r.resolve(),s.src=t,s.setAttribute("data-original-src",this.path),await r.promise,this.data=s,is.checkImageSizeSupportedAndLog(this.data)}catch(t){throw`Error loading ImageSource from path '${this.path}' with error [${t.message}]`}return this.data.setAttribute("filtering",this.filtering),this._readyFuture.resolve(this.data),this.data}toSprite(){return Fn.from(this)}unload(){this.data=new Image}}class Dn{constructor(t){this._logger=D.getInstance(),this.sprites=[];const{sprites:s,rows:r,columns:l}=t;this.sprites=s,this.rows=r??1,this.columns=l??this.sprites.length}getSprite(t,s){if(t>=this.columns||t<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${t}, ${s}), x: ${t} should be between 0 and ${this.columns-1}`),null;if(s>=this.rows||s<0)return this._logger.warn(`No sprite exists in the SpriteSheet at (${t}, ${s}), y: ${s} should be between 0 and ${this.rows-1}`),null;const r=t+s*this.columns;return this.sprites[r]}static fromImageSourceWithSourceViews(t){const s=t.sourceViews.map(r=>new Fn({image:t.image,sourceView:r}));return new Dn({sprites:s})}static fromImageSource(t){var s;const r=[];t.spacing=(s=t.spacing)!==null&&s!==void 0?s:{};const{image:l,grid:{rows:h,columns:g,spriteWidth:_,spriteHeight:b},spacing:{originOffset:S,margin:A}}=t,I={x:0,y:0,...S},V={x:0,y:0,...A};for(let H=0;H<g;H++)for(let tt=0;tt<h;tt++)r[H+tt*g]=new Fn({image:l,sourceView:{x:H*_+V.x*H+I.x,y:tt*b+V.y*tt+I.y,width:_,height:b},destSize:{height:b,width:_}});return new Dn({sprites:r,rows:h,columns:g})}clone(){return new Dn({sprites:this.sprites.map(t=>t.clone()),rows:this.rows,columns:this.columns})}}class Jo extends Ss{constructor(t){super(t),this._text="",this.alphabet="",this.shadow=null,this.caseInsensitive=!1,this.spacing=0,this._logger=D.getInstance(),this._alreadyWarnedAlphabet=!1,this._alreadyWarnedSpriteSheet=!1;const{alphabet:s,spriteSheet:r,caseInsensitive:l,spacing:h,shadow:g}=t;this.alphabet=s,this.spriteSheet=r,this.caseInsensitive=l??this.caseInsensitive,this.spacing=h??this.spacing,this.shadow=g??this.shadow}_getCharacterSprites(t){const s=[],r=this.caseInsensitive?t.toLocaleLowerCase():t,l=this.caseInsensitive?this.alphabet.toLocaleLowerCase():this.alphabet;for(let h=0;h<r.length;h++){const g=r[h];let _=l.indexOf(g);_===-1&&(_=0,this._alreadyWarnedAlphabet||(this._logger.warn(`SpriteFont - Cannot find letter '${g}' in configured alphabet '${l}'.`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedAlphabet=!0));const b=this.spriteSheet.sprites[_];b?s.push(b):this._alreadyWarnedSpriteSheet||(this._logger.warn(`SpriteFont - Cannot find sprite for '${g}' at index '${_}' in configured SpriteSheet`),this._logger.warn("There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged."),this._alreadyWarnedSpriteSheet=!0)}return s}measureText(t,s){const r=this._getLinesFromText(t,s),l=r.reduce((b,S)=>b.length>S.length?b:S),h=this._getCharacterSprites(l);let g=0,_=0;for(const b of h)g+=b.width+this.spacing,_=Math.max(_,b.height);return Wt.fromDimension(g,_*r.length,z.Zero)}_drawImage(t,s,r,l){let h=0,g=0,_=0;const b=this._getLinesFromText(this._text,l);for(const S of b){for(const A of this._getCharacterSprites(S))A.draw(t,s+h,r+g),h+=A.width+this.spacing,_=Math.max(_,A.height);h=0,g+=_}}render(t,s,r,l,h,g){this._text=s;const _=this.measureText(s,g);this.width=_.width,this.height=_.height,this.shadow&&(t.save(),t.translate(this.shadow.offset.x,this.shadow.offset.y),this._preDraw(t,l,h),this._drawImage(t,0,0,g),this._postDraw(t),t.restore()),this._preDraw(t,l,h),this._drawImage(t,0,0,g),this._postDraw(t)}clone(){return new Jo({alphabet:this.alphabet,spriteSheet:this.spriteSheet,spacing:this.spacing})}_getLinesFromText(t,s){if(this._cachedText===t&&this._cachedRenderWidth===s)return this._cachedLines;const r=t.split(`
`);if(s==null)return r;for(let l=0;l<r.length;l++){let h=r[l],g="";if(this.measureText(h).width>s){for(;this.measureText(h).width>s;)g=h[h.length-1]+g,h=h.slice(0,-1);r[l]=h,r[l+1]=g}}return this._cachedText=t,this._cachedLines=r,this._cachedRenderWidth=s,r}}const Vv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAwCAYAAAD+f6R/AAAAAXNSR0IArs4c6QAABcJJREFUeJztnemu7CgMhGE07//KmT9NhrAFVzkQndQntXRP3/bCZkwCSQhCCCGEEEIIIYQQQog/TRz953Ecx/nDGIe/vdNhlc9tIz605Fk/ZmWfsO1hn9Gxuv1KHbvb3iL/VN+d1WORbyr7yR/5b9M4vjNeqko6jPJHq5wGHU151o9J2Udse9hndCxuv0rH7rY3yD/Wdyf13MrnQeDfkZIUSGKM4ff3cWN82pEZuTyQGX2IxeyR63va//8VNCYCq+1yEkLtWyagXv1P1r1H+110gP3PzT4gT8uW/mdQ8mUG8E9DqOz4MS9ICKGbXpS2BpnIrRzYeS96cll08INlCMl2/glzdcfazuuPqQO03lmqrBHsf272Q6NODXj6zzZIJd/LAHYTg3Mays5gBi7ZR27fOgs0yj8rm36DLMFiPgkAdXHKOwUQeMCQ/adSh/qBQrT/tPxbAwA9+DOZEILPAATSuHMgTv7+Auk/df2lHPCZLvMSLJe34LkEQ9PwXF1SRTllMYgvIaflqyVAjLGbsiCDcOK76jflxZ+sINPyROc5071yKWK5CJTV3dMp6+tBlyCtNlhAq/+XbWoBDcRNXYBMzD4VvQygSuPYC2jGGaSSOxXfy3dTUEsanIvNeepm38N/hssSALTPZnAXfwIYRJn2b7UBcw0FKX+nDdAMpm2j9WVnxrUa7TXaVAca/B+TgaAVh6R/rH0P/5m01dt/RLYViJn+w/bhVX2P7f/duqom5qb02pRLCLGIMgBU1wCEEN9BAUCID6MAIMSHUQAQ4sMoAAjxYRQAhPgwd1uB0fuZ7H3cnn2P+9mr/Pe4B8/eB/fwP4eRtci/0f6OfTCPt/9oHwC6G6y19RHZDumxmwzR4eE/s/2Tte/q/+XLdc9DeJ19diesQc/j7Z8fCe4tAS4CxZ7sp7eiJi7HiZmjmOTGJs+93CbS3nP0XIPH3vW8/qz6QPnX2QdsV/1uw/iZYvg8ACeHd28rpPzfNfhL+7vkw/4Ou9s+Onhbv91elpKZ48Dl6bzpwwibHigRArf+Ptk9+L3Y1Q5OB4LgCeSBw1iuB3GeJh1/HrX/zF0A9Mk+u45zMkc3r4rWPomma5+p/514LB+Zo93MErJ1JHxXPzByGa/licRYVKbpeQCoQ6Q8yxuCwJF9IPsoDkHAo/3Tx26cvA4EtJ/n04w8QOq/mrR7ddfLAC5BYFNlVI/0CnOVUflOpvJUQMx9AIMIW/nWDM67/qw0+95v9goBqD9j+72u/KD9U89IbnQbMIR2Zbneh5zUY7Hdk7XIP3UffVb+r+wDYAZLq+1n1+C7y3/ny2r7p5yeByDEh9HzAIQQJwoAQnwYBQAhPowCgBBjoNu3hNxSFACE6INuKvPajPZ4EFEAEKINcybGYzOd247WEd3TgA2jlmjEyrd+j9hvfVbD2PWQ3ZmGlu2HyO8og8eBuNUvNYWoDgMVpwHTJoLWdz1Y+ZYOy5uF7t6PPruZxANrud1lQXkP0jsGz/Yz+vGGMuygFyhSPcJnc1pMnQZElc+cRnoAlxdTvoDuK7puqF7uCQy+3fyFMiA02/vJQHh7DQDogMPTSGFNA56HTzbZ9yAfBOb1Zyo3qGM3MfMZ3f76huXf6xlmAHknMlLNXsBBBvbljIz9Uyz5Y5TzIBLR/qy/rNyrZ8+L/0BZ0m+tgXD0OK5XZxC/9P7I/g4hVFvzXf1/6i5A7+3AlijMPBLMZfCvuAp7A9rY56ApHitmLQc7c8bOv6ftAxlM9Xp35nkEK7nJetBsaMhtAAAuOLQGXwhh2dXQnn1rZ/a42BI3dL7L+jkFAbQddwdA9Ah35yMKhgEgVT46EFh5D4jz+OgavNKxeBCd1wDSJ/97oR8eoJkLi9t9/BDgDHTJ5NE7Dnzechh914OVv9M1K9PCqsfqb88XVg9qN9lm6nG176UPu+zn17GOxuO0vOWEEC/j+LFKTgghlvEfYJaLS+SA2O0AAAAASUVORK5CYII=";class ql{constructor(){this.fontSheet=Vv,this.size=16,this.load()}load(){return this._imageSource=new Yl(this.fontSheet),this._imageSource.load().then(()=>{this._spriteSheet=Dn.fromImageSource({image:this._imageSource,grid:{rows:3,columns:16,spriteWidth:16,spriteHeight:16}}),this._spriteFont=new Jo({alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!'&."?-()+ `,caseInsensitive:!0,spriteSheet:this._spriteSheet,spacing:-6})})}write(t,s,r){this._imageSource.isLoaded()&&this._spriteFont.render(t,s,null,r.x,r.y)}}class zv{constructor(t,s){this._gl=t,this._texture=s}use(){const t=this._gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this._texture)}disable(){const t=this._gl;t.bindTexture(t.TEXTURE_2D,null)}}class Zl{constructor(t){this.width=t.width,this.height=t.height,this._gl=t.gl,this._setupFramebuffer()}setResolution(t,s){const r=this._gl;this.width=t,this.height=s,r.bindTexture(r.TEXTURE_2D,this._frameTexture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null)}get frameBuffer(){return this._frameBuffer}get frameTexture(){return this._frameTexture}_setupFramebuffer(){const t=this._gl;this._frameTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._frameTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const s=t.COLOR_ATTACHMENT0;this._frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,s,t.TEXTURE_2D,this._frameTexture,0),this.disable()}toRenderSource(){return new zv(this._gl,this._frameTexture)}use(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._frameBuffer),t.viewport(0,0,this.width,this.height)}disable(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null)}}const Nv=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
\r
out lowp vec4 v_color;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Passthrough the color\r
   v_color = a_color;\r
}`,Uv=`#version 300 es\r
precision mediump float;\r
\r
// Color\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  fragColor = v_color;\r
}`;function Kl(d,t){switch(t){case d.FLOAT:return 4;case d.SHORT:return 2;case d.UNSIGNED_SHORT:return 2;case d.BYTE:return 1;case d.UNSIGNED_BYTE:return 1;default:return 1}}function Gh(d,t){switch(t){case d.LOW_FLOAT:case d.HIGH_FLOAT:case d.FLOAT:return 1;case d.FLOAT_VEC2:return 2;case d.FLOAT_VEC3:return 3;case d.FLOAT_VEC4:return 4;case d.BYTE:return 1;case d.UNSIGNED_BYTE:return 1;case d.UNSIGNED_SHORT:case d.SHORT:return 1;default:return 1}}function jh(d,t){switch(t){case d.LOW_FLOAT:case d.HIGH_FLOAT:case d.FLOAT:case d.FLOAT_VEC2:case d.FLOAT_VEC3:case d.FLOAT_VEC4:return d.FLOAT;case d.BYTE:return d.BYTE;case d.UNSIGNED_BYTE:return d.UNSIGNED_BYTE;case d.SHORT:return d.SHORT;case d.UNSIGNED_SHORT:return d.UNSIGNED_SHORT;default:return d.FLOAT}}class zs{get compiled(){return this._compiled}constructor(t){this._logger=D.getInstance(),this.uniforms={},this.attributes={},this._compiled=!1;const{gl:s,vertexSource:r,fragmentSource:l}=t;this._gl=s,this.vertexSource=r,this.fragmentSource=l}use(){this._gl.useProgram(this.program),zs._ACTIVE_SHADER_INSTANCE=this}isCurrentlyBound(){return zs._ACTIVE_SHADER_INSTANCE===this}compile(){const t=this._gl,s=this._compileShader(t,this.vertexSource,t.VERTEX_SHADER),r=this._compileShader(t,this.fragmentSource,t.FRAGMENT_SHADER);this.program=this._createProgram(t,s,r);const l=this.getAttributes();for(const g of l)this.attributes[g.name]=g;const h=this.getUniforms();for(const g of h)this.uniforms[g.name]=g;return this._compiled=!0,this.program}getUniforms(){const t=this._gl,s=t.getProgramParameter(this.program,t.ACTIVE_UNIFORMS),r=[];for(let l=0;l<s;l++){const h=t.getActiveUniform(this.program,l),g=t.getUniformLocation(this.program,h.name);r.push({name:h.name,glType:h.type,location:g})}return r}getAttributes(){const t=this._gl,s=t.getProgramParameter(this.program,t.ACTIVE_ATTRIBUTES),r=[];for(let l=0;l<s;l++){const h=t.getActiveAttrib(this.program,l),g=t.getAttribLocation(this.program,h.name);r.push({name:h.name,glType:jh(t,h.type),size:Gh(t,h.type),location:g,normalized:!1})}return r}setTexture(t,s){const r=this._gl;r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,s)}setUniformInt(t,s){this.setUniform("uniform1i",t,~~s)}trySetUniformInt(t,s){return this.trySetUniform("uniform1i",t,~~s)}setUniformIntArray(t,s){this.setUniform("uniform1iv",t,s)}trySetUniformIntArray(t,s){return this.trySetUniform("uniform1iv",t,s)}setUniformBoolean(t,s){this.setUniform("uniform1i",t,s?1:0)}trySetUniformBoolean(t,s){return this.trySetUniform("uniform1i",t,s?1:0)}setUniformFloat(t,s){this.setUniform("uniform1f",t,s)}trySetUniformFloat(t,s){return this.trySetUniform("uniform1f",t,s)}setUniformFloatArray(t,s){this.setUniform("uniform1fv",t,s)}trySetUniformFloatArray(t,s){return this.trySetUniform("uniform1fv",t,s)}setUniformFloatVector(t,s){this.setUniform("uniform2f",t,s.x,s.y)}trySetUniformFloatVector(t,s){return this.trySetUniform("uniform2f",t,s.x,s.y)}setUniformFloatColor(t,s){this.setUniform("uniform4f",t,s.r/255,s.g/255,s.b/255,s.a)}trySetUniformFloatColor(t,s){return this.trySetUniform("uniform4f",t,s.r/255,s.g/255,s.b/255,s.a)}setUniformMatrix(t,s){this.setUniform("uniformMatrix4fv",t,!1,s.data)}trySetUniformMatrix(t,s){return this.trySetUniform("uniformMatrix4fv",t,!1,s.data)}setUniform(t,s,...r){if(!this._compiled)throw Error(`Must compile shader before setting a uniform ${t}:${s}`);if(!this.isCurrentlyBound())throw Error("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms");const h=this._gl.getUniformLocation(this.program,s);if(h){const g=[h,...r];this._gl[t].apply(this._gl,g)}else throw Error(`Uniform ${t}:${s} doesn't exist or is not used in the shader source code, unused uniforms are optimized away by most browsers`)}trySetUniform(t,s,...r){if(!this._compiled)return this._logger.warn(`Must compile shader before setting a uniform ${t}:${s}`),!1;if(!this.isCurrentlyBound())return this._logger.warn("Currently accessed shader instance is not the current active shader in WebGL, must call `shader.use()` before setting uniforms"),!1;const h=this._gl.getUniformLocation(this.program,s);if(h){const g=[h,...r];this._gl[t].apply(this._gl,g)}else return!1;return!0}_createProgram(t,s,r){const l=t.createProgram();if(l===null)throw Error("Could not create graphics shader program");if(t.attachShader(l,s),t.attachShader(l,r),t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))throw Error(`Could not link the program: [${t.getProgramInfoLog(l)}]`);return l}_compileShader(t,s,r){const l=t.VERTEX_SHADER===r?"vertex":"fragment",h=t.createShader(r);if(h===null)throw Error(`Could not build shader: [${s}]`);if(t.shaderSource(h,s),t.compileShader(h),!t.getShaderParameter(h,t.COMPILE_STATUS)){const _=t.getShaderInfoLog(h);throw Error(`Could not compile ${l} shader:

${_}${this._processSourceForError(s,_)}`)}return h}_processSourceForError(t,s){const r=t.split(`
`),l=s.search(/\d:\d/),h=s.indexOf(" ",l),[g,_]=s.slice(l,h).split(":").map(b=>Number(b));for(let b=0;b<r.length;b++)r[b]=`${b+1}: ${r[b]}${_===b+1?" <----- ERROR!":""}`;return`

Source:
`+r.join(`
`)}}zs._ACTIVE_SHADER_INSTANCE=null;class $i{constructor(t){this.type="dynamic";const{gl:s,size:r,type:l,data:h}=t;if(this._gl=s,this.buffer=this._gl.createBuffer(),!h&&!r)throw Error("Must either provide data or a size to the VertexBuffer");h?this.bufferData=h:this.bufferData=new Float32Array(r),this.type=l??this.type,s.bindBuffer(s.ARRAY_BUFFER,this.buffer),s.bufferData(s.ARRAY_BUFFER,this.bufferData,this.type==="static"?s.STATIC_DRAW:s.DYNAMIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ARRAY_BUFFER,this.buffer)}upload(t){const s=this._gl;s.bindBuffer(s.ARRAY_BUFFER,this.buffer),t?s.bufferSubData(s.ARRAY_BUFFER,0,this.bufferData,0,t):s.bufferData(s.ARRAY_BUFFER,this.bufferData,this.type==="static"?s.STATIC_DRAW:s.DYNAMIC_DRAW)}}class Wi{get vertexBuffer(){return this._vertexBuffer}get attributes(){return this._attributes}constructor(t){this._logger=D.getInstance(),this._layout=[],this._attributes=[],this._vertexTotalSizeBytes=0;const{gl:s,shader:r,vertexBuffer:l,attributes:h}=t;this._gl=s,this._vertexBuffer=l,this._attributes=h,this._shader=r,r&&this.initialize()}get totalVertexSizeBytes(){return this._vertexTotalSizeBytes}set shader(t){t&&this._shader!==t&&(this._shader=t,this.initialize())}get shader(){return this._shader}initialize(){if(!this._shader)return;if(!this._shader.compiled)throw Error("Shader not compiled, shader must be compiled before defining a vertex layout");this._layout.length=0;const t=this._shader.attributes;for(const r of this._attributes){const l=t[r[0]];if(!l)throw Error(`The attribute named: ${r[0]} size ${r[1]} not found in the shader source code:
 ${this._shader.vertexSource}`);if(l.size!==r[1])throw Error(`VertexLayout size definition for attribute: [${r[0]}, ${r[1]}], doesnt match shader source size ${l.size}:
 ${this._shader.vertexSource}`);this._layout.push(l)}let s=0;for(const r of this._layout){const l=Kl(this._gl,r.glType);this._vertexTotalSizeBytes+=l*r.size,s+=r.size}this._vertexBuffer.bufferData.length%s!==0&&this._logger.warn(`The vertex component size (${s})  does divide evenly into the specified vertex buffer (${this._vertexBuffer.bufferData.length})`)}use(t=!1,s){if(!this._shader)throw Error("No shader is associated with this vertex layout, a shader must be set");const r=this._gl;if(!this._shader.isCurrentlyBound())throw Error("Shader associated with this vertex layout is not active! Call shader.use() before layout.use()");this._vertexBuffer.bind(),t&&this._vertexBuffer.upload(s);let l=0;for(const h of this._layout)r.vertexAttribPointer(h.location,h.size,h.glType,h.normalized,this.totalVertexSizeBytes,l),r.enableVertexAttribArray(h.location),l+=Kl(r,h.glType)*h.size}}class ze{static clear(){ze.DrawCallCount=0,ze.DrawnImagesCount=0}}ze.DrawCallCount=0,ze.DrawnImagesCount=0;class Hv{constructor(){this.type="ex.line",this.priority=0,this._maxLines=10922,this._vertexIndex=0,this._lineCount=0}initialize(t,s){this._gl=t,this._context=s,this._shader=new zs({gl:t,vertexSource:Nv,fragmentSource:Uv}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._vertexBuffer=new $i({gl:t,size:6*2*this._maxLines,type:"dynamic"}),this._layout=new Wi({gl:t,vertexBuffer:this._vertexBuffer,shader:this._shader,attributes:[["a_position",2],["a_color",4]]})}draw(t,s,r){this._isFull()&&this.flush(),this._lineCount++;const l=this._context.getTransform(),h=l.multiply(t),g=l.multiply(s),_=this._vertexBuffer.bufferData;_[this._vertexIndex++]=h.x,_[this._vertexIndex++]=h.y,_[this._vertexIndex++]=r.r/255,_[this._vertexIndex++]=r.g/255,_[this._vertexIndex++]=r.b/255,_[this._vertexIndex++]=r.a,_[this._vertexIndex++]=g.x,_[this._vertexIndex++]=g.y,_[this._vertexIndex++]=r.r/255,_[this._vertexIndex++]=r.g/255,_[this._vertexIndex++]=r.b/255,_[this._vertexIndex++]=r.a}_isFull(){return this._lineCount>=this._maxLines}hasPendingDraws(){return this._lineCount!==0}flush(){if(this._lineCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.LINES,0,this._lineCount*2),ze.DrawnImagesCount+=this._lineCount,ze.DrawCallCount++,this._vertexIndex=0,this._lineCount=0}}const $v=`#version 300 es\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_size;\r
out lowp vec4 v_color;\r
uniform mat4 u_matrix;\r
\r
void main() {\r
  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
  gl_PointSize = a_size * 2.0;\r
  v_color = a_color;\r
}`,Wv=`#version 300 es\r
\r
precision mediump float;\r
in lowp vec4 v_color;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  float r = 0.0, delta = 0.0, alpha = 1.0;\r
  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\r
  r = dot(cxy, cxy);\r
\r
  delta = fwidth(r);\r
  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\r
  // "premultiply" the color by alpha\r
  vec4 color = v_color;\r
  color.a = color.a * alpha;\r
  color.rgb = color.rgb * color.a;\r
  fragColor = color;\r
}`;class Gv{constructor(){this.type="ex.point",this.priority=0,this._maxPoints=10922,this._pointCount=0,this._vertexIndex=0}initialize(t,s){this._gl=t,this._context=s,this._shader=new zs({gl:t,vertexSource:$v,fragmentSource:Wv}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._buffer=new $i({gl:t,size:7*this._maxPoints,type:"dynamic"}),this._layout=new Wi({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_color",4],["a_size",1]]})}draw(t,s,r){this._isFull()&&this.flush(),this._pointCount++;const l=this._context.getTransform(),h=this._context.opacity,g=this._context.snapToPixel,_=l.multiply(t);g&&(_.x=~~(_.x+le),_.y=~~(_.y+le));const b=this._buffer.bufferData;b[this._vertexIndex++]=_.x,b[this._vertexIndex++]=_.y,b[this._vertexIndex++]=s.r/255,b[this._vertexIndex++]=s.g/255,b[this._vertexIndex++]=s.b/255,b[this._vertexIndex++]=s.a*h,b[this._vertexIndex++]=r*Math.max(l.getScaleX(),l.getScaleY())}_isFull(){return this._pointCount>=this._maxPoints}hasPendingDraws(){return this._pointCount!==0}flush(){if(this._pointCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),t.drawArrays(t.POINTS,0,this._pointCount),ze.DrawnImagesCount+=this._pointCount,ze.DrawCallCount++,this._pointCount=0,this._vertexIndex=0}}const jv=`#version 300 es\r
in vec2 a_position;\r
\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
void main() {\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
\r
  // Pass the texcoord to the fragment shader.\r
  v_texcoord = a_texcoord;\r
}`,Xv=`#version 300 es\r
precision mediump float;\r
\r
// Passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// The texture.\r
uniform sampler2D u_texture;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   fragColor = texture(u_texture, v_texcoord);\r
}`;class Yv{constructor(t){this._gl=t,this._shader=new zs({gl:t,vertexSource:jv,fragmentSource:Xv}),this._shader.compile(),this._buffer=new $i({gl:t,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Wi({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}renderWithPostProcessor(t){const s=this._gl;t.getShader().use(),t.getLayout().use(),s.drawArrays(s.TRIANGLES,0,6)}renderToScreen(){const t=this._gl;this._shader.use(),this._layout.use(),t.drawArrays(t.TRIANGLES,0,6)}}class Qr{constructor(t,s,r){this._logger=D.getInstance(),this._gl=t,this.buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer);const l=s*6;if(!r)this.bufferData=new Uint32Array(l);else{const _=Math.floor(16383.5);this.bufferGlType=t.UNSIGNED_SHORT,this.bufferData=new Uint16Array(l),s>_&&this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${_}) requested quads(${s})`)}let h=0;for(let g=0;g<l;g+=6)this.bufferData[g+0]=h+0,this.bufferData[g+1]=h+1,this.bufferData[g+2]=h+2,this.bufferData[g+3]=h+2,this.bufferData[g+4]=h+1,this.bufferData[g+5]=h+3,h+=4;t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}get size(){return this.bufferData.length}upload(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.bufferData,t.STATIC_DRAW)}bind(){const t=this._gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer)}}const qv=`#version 300 es\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_texcoord;\r
\r
// Texture index\r
in lowp float v_textureIndex;\r
\r
// Textures in the current draw\r
uniform sampler2D u_textures[%%count%%];\r
\r
// Opacity\r
in float v_opacity;\r
\r
in vec4 v_tint;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
   // In order to support the most efficient sprite batching, we have multiple\r
   // textures loaded into the gpu (usually 8) this picker logic skips over textures\r
   // that do not apply to a particular sprite.\r
\r
   vec4 color = vec4(1.0, 0, 0, 1.0);\r
\r
   // GLSL is templated out to pick the right texture and set the vec4 color\r
   %%texture_picker%%\r
\r
   color.rgb = color.rgb * v_opacity;\r
   color.a = color.a * v_opacity;\r
   fragColor = color * v_tint;\r
}`,Zv=`#version 300 es\r
in vec2 a_position;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
// UV coordinate\r
in vec2 a_texcoord;\r
out vec2 v_texcoord;\r
\r
// Texture number\r
in lowp float a_textureIndex;\r
out lowp float v_textureIndex;\r
\r
in vec4 a_tint;\r
out vec4 v_tint;\r
\r
uniform mat4 u_matrix;\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the UV coord to the fragment shader\r
   v_texcoord = a_texcoord;\r
   // Pass through the texture number to the fragment shader\r
   v_textureIndex = a_textureIndex;\r
   // Pass through the tint\r
   v_tint = a_tint;\r
}`;class Kv{constructor(){this.type="ex.image",this.priority=0,this._maxImages=10922,this._maxTextures=0,this._imageCount=0,this._textures=[],this._vertexIndex=0}initialize(t,s){this._gl=t,this._context=s,this._maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),125);const r=this._transformFragmentSource(qv,this._maxTextures);this._shader=new zs({gl:t,fragmentSource:r,vertexSource:Zv}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",s.ortho),this._shader.setUniformIntArray("u_textures",[...Array(this._maxTextures)].map((l,h)=>h)),this._buffer=new $i({gl:t,size:10*4*this._maxImages,type:"dynamic"}),this._layout=new Wi({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_opacity",1],["a_texcoord",2],["a_textureIndex",1],["a_tint",4]]}),this._quads=new Qr(t,this._maxImages,!0)}_transformFragmentSource(t,s){let r=t.replace("%%count%%",s.toString()),l="";for(let h=0;h<s;h++)h===0?l+=`if (v_textureIndex <= ${h}.5) {
`:l+=`   else if (v_textureIndex <= ${h}.5) {
`,l+=`      color = texture(u_textures[${h}], v_texcoord);
`,l+=`   }
`;return r=r.replace("%%texture_picker%%",l),r}_addImageAsTexture(t){const s=t.getAttribute("filtering");let r=null;(s===cs.Blended||s===cs.Pixel)&&(r=s);const l=t.getAttribute("forceUpload")==="true",h=this._context.textureLoader.load(t,r,l);t.removeAttribute("forceUpload"),this._textures.indexOf(h)===-1&&this._textures.push(h)}_bindTextures(t){for(let s=0;s<this._maxTextures;s++)t.activeTexture(t.TEXTURE0+s),t.bindTexture(t.TEXTURE_2D,this._textures[s]||this._textures[0])}_getTextureIdForImage(t){if(t){const s=this._context.textureLoader.get(t);return this._textures.indexOf(s)}return-1}_isFull(){return this._imageCount>=this._maxImages||this._textures.length>=this._maxTextures}draw(t,s,r,l,h,g,_,b,S){var A,I,V,H;this._isFull()&&this.flush(),this._imageCount++,this._addImageAsTexture(t);let tt=(t==null?void 0:t.width)||l||0,gt=(t==null?void 0:t.height)||h||0,pt=[0,0,(A=l??(t==null?void 0:t.width))!==null&&A!==void 0?A:0,(I=h??(t==null?void 0:t.height))!==null&&I!==void 0?I:0],J=[s??1,r??1];g!==void 0&&_!==void 0&&b!==void 0&&S!==void 0&&(pt=[s??1,r??1,(V=l??(t==null?void 0:t.width))!==null&&V!==void 0?V:0,(H=h??(t==null?void 0:t.height))!==null&&H!==void 0?H:0],J=[g,_],tt=b,gt=S),s=pt[0],r=pt[1];const K=pt[2],wt=pt[3],Ct=this._context.getTransform(),Nt=this._context.opacity,Mt=this._context.snapToPixel;let ot=Z(J[0],J[1]),ce=Z(J[0]+tt,J[1]),ge=Z(J[0],J[1]+gt),ve=Z(J[0]+tt,J[1]+gt);ot=Ct.multiply(ot),ce=Ct.multiply(ce),ge=Ct.multiply(ge),ve=Ct.multiply(ve),Mt&&(ot.x=~~(ot.x+le),ot.y=~~(ot.y+le),ce.x=~~(ce.x+le),ce.y=~~(ce.y+le),ge.x=~~(ge.x+le),ge.y=~~(ge.y+le),ve.x=~~(ve.x+le),ve.y=~~(ve.y+le));const de=this._context.tint,$e=this._getTextureIdForImage(t),Ps=t.width||tt,ks=t.height||gt,Is=s/Ps,Ti=r/ks,Pi=(s+K-.01)/Ps,ki=(r+wt-.01)/ks,$t=this._layout.vertexBuffer.bufferData;$t[this._vertexIndex++]=ot.x,$t[this._vertexIndex++]=ot.y,$t[this._vertexIndex++]=Nt,$t[this._vertexIndex++]=Is,$t[this._vertexIndex++]=Ti,$t[this._vertexIndex++]=$e,$t[this._vertexIndex++]=de.r/255,$t[this._vertexIndex++]=de.g/255,$t[this._vertexIndex++]=de.b/255,$t[this._vertexIndex++]=de.a,$t[this._vertexIndex++]=ge.x,$t[this._vertexIndex++]=ge.y,$t[this._vertexIndex++]=Nt,$t[this._vertexIndex++]=Is,$t[this._vertexIndex++]=ki,$t[this._vertexIndex++]=$e,$t[this._vertexIndex++]=de.r/255,$t[this._vertexIndex++]=de.g/255,$t[this._vertexIndex++]=de.b/255,$t[this._vertexIndex++]=de.a,$t[this._vertexIndex++]=ce.x,$t[this._vertexIndex++]=ce.y,$t[this._vertexIndex++]=Nt,$t[this._vertexIndex++]=Pi,$t[this._vertexIndex++]=Ti,$t[this._vertexIndex++]=$e,$t[this._vertexIndex++]=de.r/255,$t[this._vertexIndex++]=de.g/255,$t[this._vertexIndex++]=de.b/255,$t[this._vertexIndex++]=de.a,$t[this._vertexIndex++]=ve.x,$t[this._vertexIndex++]=ve.y,$t[this._vertexIndex++]=Nt,$t[this._vertexIndex++]=Pi,$t[this._vertexIndex++]=ki,$t[this._vertexIndex++]=$e,$t[this._vertexIndex++]=de.r/255,$t[this._vertexIndex++]=de.g/255,$t[this._vertexIndex++]=de.b/255,$t[this._vertexIndex++]=de.a}hasPendingDraws(){return this._imageCount!==0}flush(){if(this._imageCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0,4*10*this._imageCount),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._bindTextures(t),this._quads.bind(),t.drawElements(t.TRIANGLES,this._imageCount*6,this._quads.bufferGlType,0),ze.DrawnImagesCount+=this._imageCount,ze.DrawCallCount++,this._imageCount=0,this._vertexIndex=0,this._textures.length=0}}const Qv=`#version 300 es\r
\r
precision mediump float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
in vec2 v_size; // in pixels\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness; // in pixels\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r
    vec2 uv = v_uv;\r
    vec2 fragCoord = uv * v_size;\r
    float maxX = v_size.x - v_strokeThickness;\r
    float minX = v_strokeThickness;\r
    float maxY = v_size.y - v_strokeThickness;\r
    float minY = v_strokeThickness;\r
\r
    if (fragCoord.x < maxX && fragCoord.x > minX &&\r
        fragCoord.y < maxY && fragCoord.y > minY) {\r
      fragColor = v_color;\r
    } else {\r
      fragColor = v_strokeColor;\r
    }\r
    fragColor.a *= v_opacity;\r
    fragColor.rgb *= fragColor.a;\r
\r
    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\r
    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\r
\r
    // float fHalfBorderDist      = 0.0;\r
    // float fHalfBorderThickness = 0.0;\r
\r
    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \r
    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \r
    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\r
    // {\r
    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\r
    //     fHalfBorderThickness = v_strokeThickness / 2.0;\r
    // }\r
    // else\r
    // {\r
    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\r
    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\r
    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\r
        \r
    //     float ellipse_ab    = v_radius-v_strokeThickness;\r
    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\r
    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \r
            \r
    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\r
    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\r
    // }\r
\r
    // vec4 v4FromColor = v_strokeColor;\r
    // v4FromColor.rgb *= v4FromColor.a;\r
    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\r
    // if (fHalfBorderDist < 0.0) {\r
    //     v4ToColor = v_color;\r
    //     v4ToColor.rgb *= v4ToColor.a;\r
    // }\r
\r
    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\r
\r
    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\r
    // gl_FragColor = finalColor;\r
}`,Jv=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
in vec2 a_size;\r
out vec2 v_size;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through size\r
   v_size = a_size;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class ty{constructor(){this.type="ex.rectangle",this.priority=0,this._maxRectangles=10922,this._rectangleCount=0,this._vertexIndex=0}initialize(t,s){this._gl=t,this._context=s,this._shader=new zs({gl:t,fragmentSource:Qv,vertexSource:Jv}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",s.ortho),this._buffer=new $i({gl:t,size:16*4*this._maxRectangles,type:"dynamic"}),this._layout=new Wi({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_size",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Qr(t,this._maxRectangles,!0)}_isFull(){return this._rectangleCount>=this._maxRectangles}draw(...t){t[0]instanceof z&&t[1]instanceof z?this.drawLine.apply(this,t):this.drawRectangle.apply(this,t)}drawLine(t,s,r,l=1){this._isFull()&&this.flush(),this._rectangleCount++;const h=this._context.getTransform(),g=this._context.opacity,_=this._context.snapToPixel,b=s.sub(t),S=b.size,A=b.normalize().perpendicular(),I=l/2,V=h.multiply(A.scale(I).add(t)),H=h.multiply(A.scale(-I).add(t)),tt=h.multiply(A.scale(I).add(s)),gt=h.multiply(A.scale(-I).add(s));_&&(V.x=~~(V.x+le),V.y=~~(V.y+le),tt.x=~~(tt.x+le),tt.y=~~(tt.y+le),H.x=~~(H.x+le),H.y=~~(H.y+le),gt.x=~~(gt.x+le),gt.y=~~(gt.y+le));const pt=0,J=0,K=1,wt=1,Ct=ht.Transparent,Nt=0,Mt=1,ot=this._layout.vertexBuffer.bufferData;ot[this._vertexIndex++]=V.x,ot[this._vertexIndex++]=V.y,ot[this._vertexIndex++]=pt,ot[this._vertexIndex++]=J,ot[this._vertexIndex++]=S,ot[this._vertexIndex++]=l,ot[this._vertexIndex++]=g,ot[this._vertexIndex++]=r.r/255,ot[this._vertexIndex++]=r.g/255,ot[this._vertexIndex++]=r.b/255,ot[this._vertexIndex++]=r.a,ot[this._vertexIndex++]=Ct.r/255,ot[this._vertexIndex++]=Ct.g/255,ot[this._vertexIndex++]=Ct.b/255,ot[this._vertexIndex++]=Ct.a,ot[this._vertexIndex++]=Nt/Mt,ot[this._vertexIndex++]=H.x,ot[this._vertexIndex++]=H.y,ot[this._vertexIndex++]=pt,ot[this._vertexIndex++]=wt,ot[this._vertexIndex++]=S,ot[this._vertexIndex++]=l,ot[this._vertexIndex++]=g,ot[this._vertexIndex++]=r.r/255,ot[this._vertexIndex++]=r.g/255,ot[this._vertexIndex++]=r.b/255,ot[this._vertexIndex++]=r.a,ot[this._vertexIndex++]=Ct.r/255,ot[this._vertexIndex++]=Ct.g/255,ot[this._vertexIndex++]=Ct.b/255,ot[this._vertexIndex++]=Ct.a,ot[this._vertexIndex++]=Nt/Mt,ot[this._vertexIndex++]=tt.x,ot[this._vertexIndex++]=tt.y,ot[this._vertexIndex++]=K,ot[this._vertexIndex++]=J,ot[this._vertexIndex++]=S,ot[this._vertexIndex++]=l,ot[this._vertexIndex++]=g,ot[this._vertexIndex++]=r.r/255,ot[this._vertexIndex++]=r.g/255,ot[this._vertexIndex++]=r.b/255,ot[this._vertexIndex++]=r.a,ot[this._vertexIndex++]=Ct.r/255,ot[this._vertexIndex++]=Ct.g/255,ot[this._vertexIndex++]=Ct.b/255,ot[this._vertexIndex++]=Ct.a,ot[this._vertexIndex++]=Nt/Mt,ot[this._vertexIndex++]=gt.x,ot[this._vertexIndex++]=gt.y,ot[this._vertexIndex++]=K,ot[this._vertexIndex++]=wt,ot[this._vertexIndex++]=S,ot[this._vertexIndex++]=l,ot[this._vertexIndex++]=g,ot[this._vertexIndex++]=r.r/255,ot[this._vertexIndex++]=r.g/255,ot[this._vertexIndex++]=r.b/255,ot[this._vertexIndex++]=r.a,ot[this._vertexIndex++]=Ct.r/255,ot[this._vertexIndex++]=Ct.g/255,ot[this._vertexIndex++]=Ct.b/255,ot[this._vertexIndex++]=Ct.a,ot[this._vertexIndex++]=Nt/Mt}drawRectangle(t,s,r,l,h=ht.Transparent,g=0){this._isFull()&&this.flush(),this._rectangleCount++;const _=this._context.getTransform(),b=this._context.opacity,S=this._context.snapToPixel,A=_.multiply(t.add(Z(0,0))),I=_.multiply(t.add(Z(s,0))),V=_.multiply(t.add(Z(s,r))),H=_.multiply(t.add(Z(0,r)));S&&(A.x=~~(A.x+le),A.y=~~(A.y+le),I.x=~~(I.x+le),I.y=~~(I.y+le),H.x=~~(H.x+le),H.y=~~(H.y+le),V.x=~~(V.x+le),V.y=~~(V.y+le));const tt=0,gt=0,pt=1,J=1,K=this._layout.vertexBuffer.bufferData;K[this._vertexIndex++]=A.x,K[this._vertexIndex++]=A.y,K[this._vertexIndex++]=tt,K[this._vertexIndex++]=gt,K[this._vertexIndex++]=s,K[this._vertexIndex++]=r,K[this._vertexIndex++]=b,K[this._vertexIndex++]=l.r/255,K[this._vertexIndex++]=l.g/255,K[this._vertexIndex++]=l.b/255,K[this._vertexIndex++]=l.a,K[this._vertexIndex++]=h.r/255,K[this._vertexIndex++]=h.g/255,K[this._vertexIndex++]=h.b/255,K[this._vertexIndex++]=h.a,K[this._vertexIndex++]=g,K[this._vertexIndex++]=H.x,K[this._vertexIndex++]=H.y,K[this._vertexIndex++]=tt,K[this._vertexIndex++]=J,K[this._vertexIndex++]=s,K[this._vertexIndex++]=r,K[this._vertexIndex++]=b,K[this._vertexIndex++]=l.r/255,K[this._vertexIndex++]=l.g/255,K[this._vertexIndex++]=l.b/255,K[this._vertexIndex++]=l.a,K[this._vertexIndex++]=h.r/255,K[this._vertexIndex++]=h.g/255,K[this._vertexIndex++]=h.b/255,K[this._vertexIndex++]=h.a,K[this._vertexIndex++]=g,K[this._vertexIndex++]=I.x,K[this._vertexIndex++]=I.y,K[this._vertexIndex++]=pt,K[this._vertexIndex++]=gt,K[this._vertexIndex++]=s,K[this._vertexIndex++]=r,K[this._vertexIndex++]=b,K[this._vertexIndex++]=l.r/255,K[this._vertexIndex++]=l.g/255,K[this._vertexIndex++]=l.b/255,K[this._vertexIndex++]=l.a,K[this._vertexIndex++]=h.r/255,K[this._vertexIndex++]=h.g/255,K[this._vertexIndex++]=h.b/255,K[this._vertexIndex++]=h.a,K[this._vertexIndex++]=g,K[this._vertexIndex++]=V.x,K[this._vertexIndex++]=V.y,K[this._vertexIndex++]=pt,K[this._vertexIndex++]=J,K[this._vertexIndex++]=s,K[this._vertexIndex++]=r,K[this._vertexIndex++]=b,K[this._vertexIndex++]=l.r/255,K[this._vertexIndex++]=l.g/255,K[this._vertexIndex++]=l.b/255,K[this._vertexIndex++]=l.a,K[this._vertexIndex++]=h.r/255,K[this._vertexIndex++]=h.g/255,K[this._vertexIndex++]=h.b/255,K[this._vertexIndex++]=h.a,K[this._vertexIndex++]=g}hasPendingDraws(){return this._rectangleCount!==0}flush(){if(this._rectangleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._rectangleCount*6,this._quads.bufferGlType,0),ze.DrawnImagesCount+=this._rectangleCount,ze.DrawCallCount++,this._rectangleCount=0,this._vertexIndex=0}}const ey=`#version 300 es\r
precision highp float;\r
\r
// UV coord\r
in vec2 v_uv;\r
\r
// Color coord to blend with image\r
in lowp vec4 v_color;\r
\r
// Stroke color if used\r
in lowp vec4 v_strokeColor;\r
\r
// Stroke thickness if used\r
in lowp float v_strokeThickness;\r
\r
// Opacity\r
in float v_opacity;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  // make (0, 0) the center the uv \r
  vec2 uv = v_uv * 2.0 - 1.0;\r
\r
  vec4 color = v_color;\r
  vec4 strokeColor = v_strokeColor;\r
\r
  // circle border is at radius 1.0 \r
  // dist is > 0 when inside the circle \r
  float d = length(uv);\r
  float dist = 1.0 - length(uv);\r
\r
  // Fade based on fwidth\r
  float fade = fwidth(dot(uv, uv));\r
\r
  // if dist is greater than 0 step to 1;\r
  // when we cross this 0 threshold add a smooth fade\r
  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\r
\r
  // if dist is greater than the stroke thickness step to 1\r
  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\r
\r
  strokeColor.a *= fill * stroke;\r
  strokeColor.rgb *= strokeColor.a;\r
\r
  color.a *= fill * (1.0 - stroke);\r
  color.rgb *= color.a;\r
\r
  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\r
  finalColor.rgb = finalColor.rgb * v_opacity;\r
  finalColor.a = finalColor.a * v_opacity;\r
  fragColor = finalColor;\r
}`,sy=`#version 300 es\r
in vec2 a_position;\r
\r
// UV coordinate\r
in vec2 a_uv;\r
out vec2 v_uv;\r
\r
// Opacity \r
in float a_opacity;\r
out float v_opacity;\r
\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
in vec4 a_strokeColor;\r
out vec4 v_strokeColor;\r
\r
in float a_strokeThickness;\r
out float v_strokeThickness;\r
\r
uniform mat4 u_matrix;\r
\r
\r
void main() {\r
   // Set the vertex position using the ortho transform matrix\r
   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\r
\r
   // Pass through UV coords\r
   v_uv = a_uv;\r
   // Pass through the Opacity to the fragment shader\r
   v_opacity = a_opacity;\r
   // Pass through the color to the fragment shader\r
   v_color = a_color;\r
   // Pass through the stroke color to the fragment shader\r
   v_strokeColor = a_strokeColor;\r
   // Pass through the stroke thickenss to the fragment shader\r
   v_strokeThickness = a_strokeThickness;\r
}`;class iy{constructor(){this.type="ex.circle",this.priority=0,this._maxCircles=10922,this._circleCount=0,this._vertexIndex=0}initialize(t,s){this._gl=t,this._context=s,this._shader=new zs({gl:t,fragmentSource:ey,vertexSource:sy}),this._shader.compile(),this._shader.use(),this._shader.setUniformMatrix("u_matrix",s.ortho),this._buffer=new $i({gl:t,size:14*4*this._maxCircles,type:"dynamic"}),this._layout=new Wi({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2],["a_opacity",1],["a_color",4],["a_strokeColor",4],["a_strokeThickness",1]]}),this._quads=new Qr(t,this._maxCircles,!0)}_isFull(){return this._circleCount>=this._maxCircles}draw(t,s,r,l=ht.Transparent,h=0){this._isFull()&&this.flush(),this._circleCount++;const g=this._context.getTransform(),_=this._context.opacity,b=this._context.snapToPixel,S=g.multiply(t.add(Z(-s,-s))),A=g.multiply(t.add(Z(s,-s))),I=g.multiply(t.add(Z(s,s))),V=g.multiply(t.add(Z(-s,s)));b&&(S.x=~~(S.x+le),S.y=~~(S.y+le),A.x=~~(A.x+le),A.y=~~(A.y+le),V.x=~~(V.x+le),V.y=~~(V.y+le),I.x=~~(I.x+le),I.y=~~(I.y+le));const H=0,tt=0,gt=1,pt=1,J=this._layout.vertexBuffer.bufferData;J[this._vertexIndex++]=S.x,J[this._vertexIndex++]=S.y,J[this._vertexIndex++]=H,J[this._vertexIndex++]=tt,J[this._vertexIndex++]=_,J[this._vertexIndex++]=r.r/255,J[this._vertexIndex++]=r.g/255,J[this._vertexIndex++]=r.b/255,J[this._vertexIndex++]=r.a,J[this._vertexIndex++]=l.r/255,J[this._vertexIndex++]=l.g/255,J[this._vertexIndex++]=l.b/255,J[this._vertexIndex++]=l.a,J[this._vertexIndex++]=h/s,J[this._vertexIndex++]=V.x,J[this._vertexIndex++]=V.y,J[this._vertexIndex++]=H,J[this._vertexIndex++]=pt,J[this._vertexIndex++]=_,J[this._vertexIndex++]=r.r/255,J[this._vertexIndex++]=r.g/255,J[this._vertexIndex++]=r.b/255,J[this._vertexIndex++]=r.a,J[this._vertexIndex++]=l.r/255,J[this._vertexIndex++]=l.g/255,J[this._vertexIndex++]=l.b/255,J[this._vertexIndex++]=l.a,J[this._vertexIndex++]=h/s,J[this._vertexIndex++]=A.x,J[this._vertexIndex++]=A.y,J[this._vertexIndex++]=gt,J[this._vertexIndex++]=tt,J[this._vertexIndex++]=_,J[this._vertexIndex++]=r.r/255,J[this._vertexIndex++]=r.g/255,J[this._vertexIndex++]=r.b/255,J[this._vertexIndex++]=r.a,J[this._vertexIndex++]=l.r/255,J[this._vertexIndex++]=l.g/255,J[this._vertexIndex++]=l.b/255,J[this._vertexIndex++]=l.a,J[this._vertexIndex++]=h/s,J[this._vertexIndex++]=I.x,J[this._vertexIndex++]=I.y,J[this._vertexIndex++]=gt,J[this._vertexIndex++]=pt,J[this._vertexIndex++]=_,J[this._vertexIndex++]=r.r/255,J[this._vertexIndex++]=r.g/255,J[this._vertexIndex++]=r.b/255,J[this._vertexIndex++]=r.a,J[this._vertexIndex++]=l.r/255,J[this._vertexIndex++]=l.g/255,J[this._vertexIndex++]=l.b/255,J[this._vertexIndex++]=l.a,J[this._vertexIndex++]=h/s}hasPendingDraws(){return this._circleCount!==0}flush(){if(this._circleCount===0)return;const t=this._gl;this._shader.use(),this._layout.use(!0),this._shader.setUniformMatrix("u_matrix",this._context.ortho),this._quads.bind(),t.drawElements(t.TRIANGLES,this._circleCount*6,this._quads.bufferGlType,0),ze.DrawnImagesCount+=this._circleCount,ze.DrawCallCount++,this._circleCount=0,this._vertexIndex=0}}class Xh{constructor(t,s,r=100){this.builder=t,this.recycler=s,this.maxObjects=r,this.totalAllocations=0,this.index=0,this.objects=[],this.disableWarnings=!1,this._logger=D.getInstance()}preallocate(){for(let t=0;t<this.maxObjects;t++)this.objects[t]=this.builder()}using(t){const s=t(this);return s?this.done(...s):this.done()}borrow(t){const s=this.get();t(s),this.index--}get(...t){return this.index===this.maxObjects&&(this.disableWarnings||this._logger.warn("Max pooled objects reached, possible memory leak? Doubling"),this.maxObjects=this.maxObjects*2),this.objects[this.index]?this.recycler(this.objects[this.index++],...t):(this.totalAllocations++,this.objects[this.index++]=this.builder(...t))}done(...t){this.index=0;for(const s of t){const r=this.objects.indexOf(s);this.objects[r]=this.builder(),this.totalAllocations++}return t}}class ny{constructor(){this.z=0,this.priority=0,this.transform=Ve.identity(),this.state={z:0,opacity:1,tint:ht.White,material:null}}}const ry=`#version 300 es
in vec2 a_position;

in vec2 a_uv;
out vec2 v_uv;

uniform mat4 u_matrix;
uniform mat4 u_transform;

void main() {
  // Set the vertex position using the ortho & transform matrix
  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);

  // Pass through the UV coord to the fragment shader
  v_uv = a_uv;
}
`;class Yh{constructor(t){this._color=ht.Transparent,this._initialized=!1;const{color:s,name:r,vertexSource:l,fragmentSource:h}=t;this._name=r,this._vertexSource=l??ry,this._fragmentSource=h,this._color=s??this._color}initialize(t,s){this._initialized||(this._shader=s.createShader({vertexSource:this._vertexSource,fragmentSource:this._fragmentSource}),this._shader.compile(),this._initialized=!0)}get name(){var t;return(t=this._name)!==null&&t!==void 0?t:"anonymous material"}getShader(){return this._shader}use(){if(this._initialized)this._shader.use(),this._shader.trySetUniformFloatColor("u_color",this._color);else throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`)}}class oy{constructor(){this.type="ex.material",this.priority=0,this._textures=[]}initialize(t,s){this._gl=t,this._context=s,this._buffer=new $i({gl:t,size:4*4,type:"dynamic"}),this._layout=new Wi({gl:t,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_uv",2]]}),this._quads=new Qr(t,1,!0)}draw(t,s,r,l,h,g,_,b,S){var A,I,V,H;const tt=this._gl,gt=this._context.material;gt.initialize(tt,this._context);const pt=this._context.getTransform(),J=this._context.opacity,K=gt.getShader(),wt=this._layout.vertexBuffer.bufferData;let Ct=0,Nt=(t==null?void 0:t.width)||l||0,Mt=(t==null?void 0:t.height)||h||0,ot=[0,0,(A=l??(t==null?void 0:t.width))!==null&&A!==void 0?A:0,(I=h??(t==null?void 0:t.height))!==null&&I!==void 0?I:0],ce=[s??1,r??1];g!==void 0&&_!==void 0&&b!==void 0&&S!==void 0&&(ot=[s??1,r??1,(V=l??(t==null?void 0:t.width))!==null&&V!==void 0?V:0,(H=h??(t==null?void 0:t.height))!==null&&H!==void 0?H:0],ce=[g,_],Nt=b,Mt=S),s=ot[0],r=ot[1];const ge=ot[2],ve=ot[3],de=Z(ce[0],ce[1]),$e=Z(ce[0]+Nt,ce[1]),Ps=Z(ce[0],ce[1]+Mt),ks=Z(ce[0]+Nt,ce[1]+Mt),Is=t.width||Nt,Ti=t.height||Mt,Pi=s/Is,ki=r/Ti,$t=(s+ge-.01)/Is,$n=(r+ve-.01)/Ti;wt[Ct++]=de.x,wt[Ct++]=de.y,wt[Ct++]=Pi,wt[Ct++]=ki,wt[Ct++]=Ps.x,wt[Ct++]=Ps.y,wt[Ct++]=Pi,wt[Ct++]=$n,wt[Ct++]=$e.x,wt[Ct++]=$e.y,wt[Ct++]=$t,wt[Ct++]=ki,wt[Ct++]=ks.x,wt[Ct++]=ks.y,wt[Ct++]=$t,wt[Ct++]=$n;const Sa=this._addImageAsTexture(t);gt.use(),this._layout.shader=K,this._layout.use(!0),K.trySetUniformFloat("u_opacity",J),K.trySetUniformFloatVector("u_resolution",Z(this._context.width,this._context.height)),K.trySetUniformFloatVector("u_size",Z(ge,ve)),K.trySetUniformMatrix("u_matrix",this._context.ortho),K.trySetUniformMatrix("u_transform",pt.to4x4()),tt.activeTexture(tt.TEXTURE0+0),tt.bindTexture(tt.TEXTURE_2D,Sa),K.trySetUniformInt("u_graphic",0),this._quads.bind(),tt.drawElements(tt.TRIANGLES,6,this._quads.bufferGlType,0)}_addImageAsTexture(t){const s=t.getAttribute("filtering");let r=null;(s===cs.Blended||s===cs.Pixel)&&(r=s);const l=t.getAttribute("forceUpload")==="true",h=this._context.textureLoader.load(t,r,l);return t.removeAttribute("forceUpload"),this._textures.indexOf(h)===-1&&this._textures.push(h),h}hasPendingDraws(){return!1}flush(){}}const le=1e-4;class ay{constructor(t){this._webglCtx=t,this._debugText=new ql}drawRect(t,s,r,l,h={color:ht.Black}){this.drawLine(Z(t,s),Z(t+r,s),{...h}),this.drawLine(Z(t+r,s),Z(t+r,s+l),{...h}),this.drawLine(Z(t+r,s+l),Z(t,s+l),{...h}),this.drawLine(Z(t,s+l),Z(t,s),{...h})}drawLine(t,s,r={color:ht.Black}){this._webglCtx.draw("ex.line",t,s,r.color)}drawPoint(t,s={color:ht.Black,size:5}){this._webglCtx.draw("ex.point",t,s.color,s.size)}drawText(t,s){this._debugText.write(this._webglCtx,t,s)}}class un{get z(){return this._state.current.z}set z(t){this._state.current.z=t}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get width(){return this.__gl.canvas.width}get height(){return this.__gl.canvas.height}get ortho(){return this._ortho}checkIfResolutionSupported(t){let s=!0;return(t.width>4096||t.height>4096)&&(s=!1),s}constructor(t){this._logger=D.getInstance(),this._renderers=new Map,this._isDrawLifecycle=!1,this.useDrawSorting=!0,this._drawCallPool=new Xh(()=>new ny,b=>(b.priority=0,b.z=0,b.renderer=void 0,b.args=void 0,b),4e3),this._drawCalls=[],this._postProcessTargets=[],this._postprocessors=[],this._transform=new Lv,this._state=new $h,this.snapToPixel=!1,this.smoothing=!1,this.backgroundColor=ht.ExcaliburBlue,this._alreadyWarnedDrawLifecycle=!1,this.debug=new ay(this),this._totalPostProcessorTime=0;const{canvasElement:s,enableTransparency:r,smoothing:l,snapToPixel:h,backgroundColor:g,useDrawSorting:_}=t;if(this.__gl=s.getContext("webgl2",{antialias:l??this.smoothing,premultipliedAlpha:!1,alpha:r??!0,depth:!0,powerPreference:"high-performance"}),!this.__gl)throw Error("Failed to retrieve webgl context from browser");this.textureLoader=new is(this.__gl),this.snapToPixel=h??this.snapToPixel,this.smoothing=l??this.smoothing,this.backgroundColor=g??this.backgroundColor,this.useDrawSorting=_??this.useDrawSorting,this._drawCallPool.disableWarnings=!0,this._drawCallPool.preallocate(),this._init()}_init(){const t=this.__gl;this._ortho=Cs.ortho(0,t.canvas.width,t.canvas.height,0,400,-400),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.register(new Kv),this.register(new oy),this.register(new ty),this.register(new iy),this.register(new Gv),this.register(new Hv),this._screenRenderer=new Yv(t),this._renderTarget=new Zl({gl:t,width:t.canvas.width,height:t.canvas.height}),this._postProcessTargets=[new Zl({gl:t,width:t.canvas.width,height:t.canvas.height}),new Zl({gl:t,width:t.canvas.width,height:t.canvas.height})]}register(t){this._renderers.set(t.type,t),t.initialize(this.__gl,this)}get(t){return this._renderers.get(t)}_isCurrentRenderer(t){return!this._currentRenderer||this._currentRenderer===t}beginDrawLifecycle(){this._isDrawLifecycle=!0}endDrawLifecycle(){this._isDrawLifecycle=!1}draw(t,...s){!this._isDrawLifecycle&&!this._alreadyWarnedDrawLifecycle&&(this._logger.warn(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.
If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`),this._alreadyWarnedDrawLifecycle=!0);const r=this._renderers.get(t);if(r)if(this.useDrawSorting){const l=this._drawCallPool.get();l.z=this._state.current.z,l.priority=r.priority,l.renderer=t,this.getTransform().clone(l.transform),l.state.z=this._state.current.z,l.state.opacity=this._state.current.opacity,l.state.tint=this._state.current.tint,l.state.material=this._state.current.material,l.args=s,this._drawCalls.push(l)}else this._currentRenderer||(this._currentRenderer=r),this._isCurrentRenderer(r)||this._currentRenderer.flush(),r.draw(...s),this._currentRenderer=r;else throw Error(`No renderer with name ${t} has been registered`)}resetTransform(){this._transform.current=Ve.identity()}updateViewport(t){const s=this.__gl;this._ortho=this._ortho=Cs.ortho(0,t.width,t.height,0,400,-400),this._renderTarget.setResolution(s.canvas.width,s.canvas.height),this._postProcessTargets[0].setResolution(s.canvas.width,s.canvas.height),this._postProcessTargets[1].setResolution(s.canvas.width,s.canvas.height)}drawImage(t,s,r,l,h,g,_,b,S){if(!(l===0||h===0)){{if(b===0||S===0)return;if(t.width===0||t.height===0)return}if(!t){D.getInstance().warn("Cannot draw a null or undefined image"),console.trace&&console.trace();return}this._state.current.material?this.draw("ex.material",t,s,r,l,h,g,_,b,S):this.draw("ex.image",t,s,r,l,h,g,_,b,S)}}drawLine(t,s,r,l=1){this.draw("ex.rectangle",t,s,r,l)}drawRectangle(t,s,r,l,h,g){this.draw("ex.rectangle",t,s,r,l,h,g)}drawCircle(t,s,r,l,h){this.draw("ex.circle",t,s,r,l,h)}save(){this._transform.save(),this._state.save()}restore(){this._transform.restore(),this._state.restore()}translate(t,s){this._transform.translate(this.snapToPixel?~~(t+le):t,this.snapToPixel?~~(s+le):s)}rotate(t){this._transform.rotate(t)}scale(t,s){this._transform.scale(t,s)}transform(t){this._transform.current=t}getTransform(){return this._transform.current}multiply(t){this._transform.current.multiply(t,this._transform.current)}addPostProcessor(t){this._postprocessors.push(t),t.initialize(this.__gl)}removePostProcessor(t){const s=this._postprocessors.indexOf(t);s!==-1&&this._postprocessors.splice(s,1)}clearPostProcessors(){this._postprocessors.length=0}updatePostProcessors(t){for(const s of this._postprocessors){const r=s.getShader();r.use();const l=r.getUniforms();this._totalPostProcessorTime+=t,l.find(h=>h.name==="u_time_ms")&&r.setUniformFloat("u_time_ms",this._totalPostProcessorTime),l.find(h=>h.name==="u_elapsed_ms")&&r.setUniformFloat("u_elapsed_ms",t),l.find(h=>h.name==="u_resolution")&&r.setUniformFloatVector("u_resolution",Z(this.width,this.height)),s.onUpdate&&s.onUpdate(t)}}set material(t){this._state.current.material=t}get material(){return this._state.current.material}createMaterial(t){const s=new Yh(t);return s.initialize(this.__gl,this),s}createShader(t){const s=this.__gl,{vertexSource:r,fragmentSource:l}=t,h=new zs({gl:s,vertexSource:r,fragmentSource:l});return h.compile(),h}clear(){const t=this.__gl;this._renderTarget.use(),t.clearColor(this.backgroundColor.r/255,this.backgroundColor.g/255,this.backgroundColor.b/255,this.backgroundColor.a),t.clear(t.COLOR_BUFFER_BIT)}flush(){const t=this.__gl;if(this._renderTarget.use(),this.useDrawSorting){const r=new Map;for(const[g]of this._renderers){const _=this._drawCalls.findIndex(b=>b.renderer===g);r.set(g,_)}this._drawCalls.sort((g,_)=>{const b=g.z-_.z,S=r.get(g.renderer)-r.get(_.renderer),A=g.priority-_.priority;return b===0?A===0?S:A:b});const l=this._transform.current,h=this._state.current;if(this._drawCalls.length){let g=this._drawCalls[0].renderer,_=this._renderers.get(g);for(let b=0;b<this._drawCalls.length;b++)this._transform.current=this._drawCalls[b].transform,this._state.current=this._drawCalls[b].state,this._drawCalls[b].renderer!==g&&(_.flush(),g=this._drawCalls[b].renderer,_=this._renderers.get(g)),_.draw(...this._drawCalls[b].args);_.hasPendingDraws()&&_.flush()}this._transform.current=l,this._state.current=h,this._drawCallPool.done(),this._drawCalls.length=0}else for(const r of this._renderers.values())r.hasPendingDraws()&&r.flush();this._renderTarget.disable(),this._renderTarget.toRenderSource().use();for(let r=0;r<this._postprocessors.length;r++)this._postProcessTargets[r%2].use(),this._screenRenderer.renderWithPostProcessor(this._postprocessors[r]),this._postProcessTargets[r%2].toRenderSource().use();t.bindFramebuffer(t.FRAMEBUFFER,null),this._screenRenderer.renderToScreen()}}const Fe=1e-4;class ly{constructor(t){this._ex=t,this._debugText=new ql}drawRect(t,s,r,l){this._ex.__ctx.save(),this._ex.__ctx.strokeStyle="red",this._ex.__ctx.strokeRect(this._ex.snapToPixel?~~(t+Fe):t,this._ex.snapToPixel?~~(s+Fe):s,this._ex.snapToPixel?~~(r+Fe):r,this._ex.snapToPixel?~~(l+Fe):l),this._ex.__ctx.restore()}drawLine(t,s,r={color:ht.Black}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.strokeStyle=r.color.toString(),this._ex.__ctx.moveTo(this._ex.snapToPixel?~~(t.x+Fe):t.x,this._ex.snapToPixel?~~(t.y+Fe):t.y),this._ex.__ctx.lineTo(this._ex.snapToPixel?~~(s.x+Fe):s.x,this._ex.snapToPixel?~~(s.y+Fe):s.y),this._ex.__ctx.lineWidth=2,this._ex.__ctx.stroke(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawPoint(t,s={color:ht.Black,size:5}){this._ex.__ctx.save(),this._ex.__ctx.beginPath(),this._ex.__ctx.fillStyle=s.color.toString(),this._ex.__ctx.arc(this._ex.snapToPixel?~~(t.x+Fe):t.x,this._ex.snapToPixel?~~(t.y+Fe):t.y,s.size,0,Math.PI*2),this._ex.__ctx.fill(),this._ex.__ctx.closePath(),this._ex.__ctx.restore()}drawText(t,s){this._debugText.write(this._ex,t,s)}}class ta{get width(){return this.__ctx.canvas.width}get height(){return this.__ctx.canvas.height}get opacity(){return this._state.current.opacity}set opacity(t){this._state.current.opacity=t}get tint(){return this._state.current.tint}set tint(t){this._state.current.tint=t}get smoothing(){return this.__ctx.imageSmoothingEnabled}set smoothing(t){this.__ctx.imageSmoothingEnabled=t}constructor(t){this.useDrawSorting=!1,this.z=0,this.backgroundColor=ht.ExcaliburBlue,this._state=new $h,this.snapToPixel=!1,this.debug=new ly(this);const{canvasElement:s,enableTransparency:r,snapToPixel:l,smoothing:h,backgroundColor:g}=t;this.__ctx=s.getContext("2d",{alpha:r??!0}),this.backgroundColor=g??this.backgroundColor,this.snapToPixel=l??this.snapToPixel,this.smoothing=h??this.smoothing}resetTransform(){this.__ctx.resetTransform()}updateViewport(t){}drawImage(t,s,r,l,h,g,_,b,S){if(l===0||h===0)return;if(b===0||S===0)return;if(t.width===0||t.height===0)return;this.__ctx.globalAlpha=this.opacity;const A=[t,s,r,l,h,g,_,b,S].filter(I=>I!==void 0).map(I=>typeof I=="number"&&this.snapToPixel?~~I:I);this.__ctx.drawImage.apply(this.__ctx,A),ze.DrawCallCount++,ze.DrawnImagesCount=1}drawLine(t,s,r,l=1){this.__ctx.save(),this.__ctx.beginPath(),this.__ctx.strokeStyle=r.toString(),this.__ctx.moveTo(this.snapToPixel?~~(t.x+Fe):t.x,this.snapToPixel?~~(t.y+Fe):t.y),this.__ctx.lineTo(this.snapToPixel?~~(s.x+Fe):s.x,this.snapToPixel?~~(s.y+Fe):s.y),this.__ctx.lineWidth=l,this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}drawRectangle(t,s,r,l){this.__ctx.save(),this.__ctx.fillStyle=l.toString(),this.__ctx.fillRect(this.snapToPixel?~~(t.x+Fe):t.x,this.snapToPixel?~~(t.y+Fe):t.y,this.snapToPixel?~~(s+Fe):s,this.snapToPixel?~~(r+Fe):r),this.__ctx.restore()}drawCircle(t,s,r,l,h){this.__ctx.save(),this.__ctx.beginPath(),l&&(this.__ctx.strokeStyle=l.toString()),h&&(this.__ctx.lineWidth=h),this.__ctx.fillStyle=r.toString(),this.__ctx.arc(this.snapToPixel?~~(t.x+Fe):t.x,this.snapToPixel?~~(t.y+Fe):t.y,s,0,Math.PI*2),this.__ctx.fill(),l&&this.__ctx.stroke(),this.__ctx.closePath(),this.__ctx.restore()}save(){this.__ctx.save()}restore(){this.__ctx.restore()}translate(t,s){this.__ctx.translate(this.snapToPixel?~~(t+Fe):t,this.snapToPixel?~~(s+Fe):s)}rotate(t){this.__ctx.rotate(t)}scale(t,s){this.__ctx.scale(t,s)}getTransform(){throw new Error("Not implemented")}multiply(t){this.__ctx.setTransform(this.__ctx.getTransform().multiply(t.toDOMMatrix()))}addPostProcessor(t){}removePostProcessor(t){}clearPostProcessors(){}updatePostProcessors(t){}beginDrawLifecycle(){}endDrawLifecycle(){}set material(t){this._state.current.material=t}get material(){return this._state.current.material}createMaterial(t){return null}clear(){this.__ctx.clearRect(0,0,this.width,this.height),this.__ctx.fillStyle=this.backgroundColor.toString(),this.__ctx.fillRect(0,0,this.width,this.height),ze.clear()}flush(){}}var je;(function(d){d.Fixed="Fixed",d.FitContainerAndFill="FitContainerAndFill",d.FitScreenAndFill="FitScreenAndFill",d.FitContainerAndZoom="FitContainerAndZoom",d.FitScreenAndZoom="FitScreenAndZoom",d.FitScreen="FitScreen",d.FillScreen="FillScreen",d.FitContainer="FitContainer",d.FillContainer="FillContainer"})(je||(je={}));class Ql{static get SVGA(){return{width:800,height:600}}static get Standard(){return{width:1920,height:1080}}static get Atari2600(){return{width:160,height:192}}static get GameBoy(){return{width:160,height:144}}static get GameBoyAdvance(){return{width:240,height:160}}static get NintendoDS(){return{width:256,height:192}}static get NES(){return{width:256,height:224}}static get SNES(){return{width:256,height:244}}}class Jl{constructor(t){var s,r,l;this._antialiasing=!0,this._resolutionStack=[],this._viewportStack=[],this._pixelRatioOverride=null,this._isFullScreen=!1,this._isDisposed=!1,this._logger=D.getInstance(),this._fullscreenChangeHandler=()=>{this._isFullScreen=!this._isFullScreen,this._logger.debug("Fullscreen Change",this._isFullScreen)},this._pixelRatioChangeHandler=()=>{this._logger.debug("Pixel Ratio Change",window.devicePixelRatio),this._listenForPixelRatio(),this._devicePixelRatio=this._calculateDevicePixelRatio(),this.applyResolutionAndViewport()},this._resizeHandler=()=>{const h=this.parent;this._logger.debug("View port resized"),this._setResolutionAndViewportByDisplayMode(h),this.applyResolutionAndViewport()},this._devicePixelRatio=this._calculateDevicePixelRatio(),this._alreadyWarned=!1,this._contentArea=new Wt,this.viewport=t.viewport,this.resolution=(s=t.resolution)!==null&&s!==void 0?s:{...this.viewport},this._contentResolution=this.resolution,this._displayMode=(r=t.displayMode)!==null&&r!==void 0?r:je.Fixed,this._canvas=t.canvas,this.graphicsContext=t.context,this._antialiasing=(l=t.antialiasing)!==null&&l!==void 0?l:this._antialiasing,this._browser=t.browser,this._pixelRatioOverride=t.pixelRatio,this._applyDisplayMode(),this._listenForPixelRatio(),this._canvas.addEventListener("fullscreenchange",this._fullscreenChangeHandler),this.applyResolutionAndViewport()}_listenForPixelRatio(){this._mediaQueryList&&!this._mediaQueryList.addEventListener&&this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._mediaQueryList=this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener?this._mediaQueryList.addEventListener("change",this._pixelRatioChangeHandler,{once:!0}):this._mediaQueryList.addListener(this._pixelRatioChangeHandler)}dispose(){this._isDisposed||(this._isDisposed=!0,this._browser.window.off("resize",this._resizeHandler),this._resizeObserver&&this._resizeObserver.disconnect(),this.parent.removeEventListener("resize",this._resizeHandler),this._mediaQueryList.removeEventListener?this._mediaQueryList.removeEventListener("change",this._pixelRatioChangeHandler):this._mediaQueryList.removeListener(this._pixelRatioChangeHandler),this._canvas.removeEventListener("fullscreenchange",this._fullscreenChangeHandler))}_calculateDevicePixelRatio(){return window.devicePixelRatio<1?1:window.devicePixelRatio||1}get pixelRatio(){return this._pixelRatioOverride?this._pixelRatioOverride:this._devicePixelRatio}get isHiDpi(){return this.pixelRatio!==1}get displayMode(){return this._displayMode}get canvas(){return this._canvas}get parent(){switch(this.displayMode){case je.FillContainer:case je.FitContainer:case je.FitContainerAndFill:case je.FitContainerAndZoom:return this.canvas.parentElement||document.body;default:return window}}get resolution(){return this._resolution}set resolution(t){this._resolution=t}get viewport(){return this._viewport?this._viewport:this._resolution}set viewport(t){this._viewport=t}get aspectRatio(){return this._resolution.width/this._resolution.height}get scaledWidth(){return this._resolution.width*this.pixelRatio}get scaledHeight(){return this._resolution.height*this.pixelRatio}setCurrentCamera(t){this._camera=t}pushResolutionAndViewport(){this._resolutionStack.push(this.resolution),this._viewportStack.push(this.viewport),this.resolution={...this.resolution},this.viewport={...this.viewport}}peekViewport(){return this._viewportStack[this._viewportStack.length-1]}peekResolution(){return this._resolutionStack[this._resolutionStack.length-1]}popResolutionAndViewport(){this.resolution=this._resolutionStack.pop(),this.viewport=this._viewportStack.pop()}applyResolutionAndViewport(){this._canvas.width=this.scaledWidth,this._canvas.height=this.scaledHeight,this.graphicsContext instanceof un&&!this.graphicsContext.checkIfResolutionSupported({width:this.scaledWidth,height:this.scaledHeight})&&!this._alreadyWarned&&(this._alreadyWarned=!0,this._logger.warn(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio}) are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly. Try reducing the resolution or disabling Hi DPI scaling to avoid this (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).`)),this._antialiasing?this._canvas.style.imageRendering="auto":(this._canvas.style.imageRendering="pixelated",this._canvas.style.imageRendering===""&&(this._canvas.style.imageRendering="crisp-edges")),this._canvas.style.width=this.viewport.width+"px",this._canvas.style.height=this.viewport.height+"px",this.graphicsContext.updateViewport(this.resolution),this.graphicsContext.resetTransform(),this.graphicsContext.smoothing=this._antialiasing,this.graphicsContext instanceof ta&&this.graphicsContext.scale(this.pixelRatio,this.pixelRatio)}get antialiasing(){return this._antialiasing}set antialiasing(t){this._antialiasing=t,this.graphicsContext.smoothing=this._antialiasing}get isFullScreen(){return this._isFullScreen}goFullScreen(t){if(t){const s=document.getElementById(t);if(s)return s.requestFullscreen()}return this._canvas.requestFullscreen()}exitFullScreen(){return document.exitFullscreen()}pageToScreenCoordinates(t){let s=t.x,r=t.y;if(this._isFullScreen||(s-=Kr(this._canvas).x,r-=Kr(this._canvas).y),this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const l=window.innerWidth/this.aspectRatio,h=(window.innerHeight-l)/2;r=(r-h)/l*this.viewport.height,s=s/window.innerWidth*this.viewport.width}else{const l=window.innerHeight*this.aspectRatio,h=(window.innerWidth-l)/2;s=(s-h)/l*this.viewport.width,r=r/window.innerHeight*this.viewport.height}return s=s/this.viewport.width*this.resolution.width,r=r/this.viewport.height*this.resolution.height,new z(s,r)}screenToPageCoordinates(t){let s=t.x,r=t.y;if(s=s/this.resolution.width*this.viewport.width,r=r/this.resolution.height*this.viewport.height,this._isFullScreen)if(window.innerWidth/this.aspectRatio<window.innerHeight){const l=window.innerWidth/this.aspectRatio,h=(window.innerHeight-l)/2;r=r/this.viewport.height*l+h,s=s/this.viewport.width*window.innerWidth}else{const l=window.innerHeight*this.aspectRatio,h=(window.innerWidth-l)/2;s=s/this.viewport.width*l+h,r=r/this.viewport.height*window.innerHeight}return this._isFullScreen||(s+=Kr(this._canvas).x,r+=Kr(this._canvas).y),new z(s,r)}screenToWorldCoordinates(t){return this._camera?this._camera.inverse.multiply(t):t.sub(Z(this.resolution.width/2,this.resolution.height/2))}worldToScreenCoordinates(t){return this._camera?this._camera.transform.multiply(t):t.add(Z(this.resolution.width/2,this.resolution.height/2))}pageToWorldCoordinates(t){const s=this.pageToScreenCoordinates(t);return this.screenToWorldCoordinates(s)}worldToPageCoordinates(t){const s=this.worldToScreenCoordinates(t);return this.screenToPageCoordinates(s)}getWorldBounds(){return Wt.fromDimension(this.resolution.width,this.resolution.height,z.Half).scale(Z(1/this._camera.zoom,1/this._camera.zoom)).rotate(this._camera.rotation).translate(this._camera.pos)}get canvasWidth(){return this.canvas.width}get halfCanvasWidth(){return this.canvas.width/2}get canvasHeight(){return this.canvas.height}get halfCanvasHeight(){return this.canvas.height/2}get drawWidth(){return this._camera?this.resolution.width/this._camera.zoom:this.resolution.width}get halfDrawWidth(){return this.drawWidth/2}get drawHeight(){return this._camera?this.resolution.height/this._camera.zoom:this.resolution.height}get halfDrawHeight(){return this.drawHeight/2}get center(){return Z(this.halfDrawWidth,this.halfDrawHeight)}get contentArea(){return this._contentArea}_computeFit(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.aspectRatio;let s=0,r=0;window.innerWidth/t<window.innerHeight?(s=window.innerWidth,r=window.innerWidth/t):(s=window.innerHeight*t,r=window.innerHeight),this.viewport={width:s,height:r},this._contentArea=Wt.fromDimension(this.resolution.width,this.resolution.height,z.Zero)}_computeFitScreenAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=window.innerWidth,s=window.innerHeight;this._computeFitAndFill(t,s)}_computeFitContainerAndFill(){document.body.style.margin="0px",document.body.style.overflow="hidden";const t=this.canvas.parentElement,s=t.clientWidth,r=t.clientHeight;this._computeFitAndFill(s,r)}_computeFitAndFill(t,s){if(this.viewport={width:t,height:s},t/s<=this._contentResolution.width/this._contentResolution.height){this.resolution={width:t*this._contentResolution.width/t,height:t*this._contentResolution.width/t*s/t};const r=(this.resolution.height-this._contentResolution.height)/2;this._contentArea=new Wt({top:r,left:0,right:this._contentResolution.width,bottom:this.resolution.height-r})}else{this.resolution={width:s*this._contentResolution.height/s*t/s,height:s*this._contentResolution.height/s};const r=(this.resolution.width-this._contentResolution.width)/2;this._contentArea=new Wt({top:0,left:r,right:this.resolution.width-r,bottom:this._contentResolution.height})}}_computeFitScreenAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=window.innerWidth,s=window.innerHeight;this._computeFitAndZoom(t,s)}_computeFitContainerAndZoom(){document.body.style.margin="0px",document.body.style.overflow="hidden",this.canvas.style.position="absolute";const t=this.canvas.parentElement;t.style.position="relative",t.style.overflow="hidden";const s=t.clientWidth,r=t.clientHeight;this._computeFitAndZoom(s,r)}_computeFitAndZoom(t,s){const r=this.aspectRatio;let l=0,h=0;t/r<s?(l=t,h=t/r):(l=s*r,h=s);const g=t/l,_=s/h,b=Math.max(g,_),S=l*b,A=h*b;S>t?this.canvas.style.left=-(S-t)/2+"px":this.canvas.style.left="",A>s?this.canvas.style.top=-(A-s)/2+"px":this.canvas.style.top="",this.viewport={width:S,height:A};const I=Wt.fromDimension(this.viewport.width,this.viewport.height,z.Zero);if(this.viewport.width>t){const V=(this.viewport.width-t)/this.viewport.width*this.resolution.width;I.top=0,I.left=V/2,I.right=this.resolution.width-V/2,I.bottom=this.resolution.height}if(this.viewport.height>s){const V=(this.viewport.height-s)/this.viewport.height*this.resolution.height;I.top=V/2,I.left=0,I.bottom=this.resolution.height-V/2,I.right=this.resolution.width}this._contentArea=I}_computeFitContainer(){const t=this.aspectRatio;let s=0,r=0;const l=this.canvas.parentElement;l.clientWidth/t<l.clientHeight?(s=l.clientWidth,r=l.clientWidth/t):(s=l.clientHeight*t,r=l.clientHeight),this.viewport={width:s,height:r},this._contentArea=Wt.fromDimension(this.resolution.width,this.resolution.height,z.Zero)}_applyDisplayMode(){this._setResolutionAndViewportByDisplayMode(this.parent),this.parent instanceof Window?this._browser.window.on("resize",this._resizeHandler):(this._resizeObserver=new ResizeObserver(()=>{this._resizeHandler()}),this._resizeObserver.observe(this.parent)),this.parent.addEventListener("resize",this._resizeHandler)}_setResolutionAndViewportByDisplayMode(t){this.displayMode===je.FillContainer&&(this.resolution={width:t.clientWidth,height:t.clientHeight},this.viewport=this.resolution),this.displayMode===je.FillScreen&&(document.body.style.margin="0px",document.body.style.overflow="hidden",this.resolution={width:t.innerWidth,height:t.innerHeight},this.viewport=this.resolution),this._contentArea=Wt.fromDimension(this.resolution.width,this.resolution.height,z.Zero),this.displayMode===je.FitScreen&&this._computeFit(),this.displayMode===je.FitContainer&&this._computeFitContainer(),this.displayMode===je.FitScreenAndFill&&this._computeFitScreenAndFill(),this.displayMode===je.FitContainerAndFill&&this._computeFitContainerAndFill(),this.displayMode===je.FitScreenAndZoom&&this._computeFitScreenAndZoom(),this.displayMode===je.FitContainerAndZoom&&this._computeFitContainerAndZoom()}}class ur{static create(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new AudioContext),this._INSTANCE}}ur._INSTANCE=null;function cy(d){return!!d.playbackState}class Ln{static unlock(){return new Promise((s,r)=>{if(Ln._UNLOCKED||!ur.create())return s(!0);const l=setTimeout(()=>{D.getInstance().warn("Excalibur was unable to unlock the audio context, audio probably will not play in this browser."),s(!1)},200),h=ur.create();h.resume().then(()=>{const g=h.createBuffer(1,1,22050),_=h.createBufferSource();let b=!1;_.buffer=g,_.connect(h.destination),_.onended=()=>b=!0,_.start(0),setTimeout(()=>{cy(_)?(_.playbackState===_.PLAYING_STATE||_.playbackState===_.FINISHED_STATE)&&(Ln._UNLOCKED=!0):(h.currentTime>0||b)&&(Ln._UNLOCKED=!0)},0),clearTimeout(l),s(!0)},()=>{r()})})}static isUnlocked(){return this._UNLOCKED}}Ln._UNLOCKED=!1;function tc(d,t=ht.Red,s,r,l,h,g=1,_="butt"){d.save(),d.beginPath(),d.lineWidth=g,d.lineCap=_,d.strokeStyle=t.toString(),d.moveTo(s,r),d.lineTo(l,h),d.closePath(),d.stroke(),d.restore()}function uy(d,t=ht.Red,s){d.beginPath(),d.strokeStyle=t.toString(),d.arc(s.x,s.y,5,0,Math.PI*2),d.closePath(),d.stroke()}function hy(d,t,s,r,l=1){const h=t?t.toString():"blue",g=r.scale(l);d.beginPath(),d.strokeStyle=h,d.moveTo(s.x,s.y),d.lineTo(s.x+g.x,s.y+g.y),d.closePath(),d.stroke()}function ec(d,t,s,r,l,h=5,g=ht.White,_=null){let b;if(typeof h=="number")b={tl:h,tr:h,br:h,bl:h};else{const S={tl:0,tr:0,br:0,bl:0};for(const A in S)if(S.hasOwnProperty(A)){const I=A;b[I]=h[I]||S[I]}}d.beginPath(),d.moveTo(t+b.tl,s),d.lineTo(t+r-b.tr,s),d.quadraticCurveTo(t+r,s,t+r,s+b.tr),d.lineTo(t+r,s+l-b.br),d.quadraticCurveTo(t+r,s+l,t+r-b.br,s+l),d.lineTo(t+b.bl,s+l),d.quadraticCurveTo(t,s+l,t,s+l-b.bl),d.lineTo(t,s+b.tl),d.quadraticCurveTo(t,s,t+b.tl,s),d.closePath(),_&&(d.fillStyle=_.toString(),d.fill()),g&&(d.strokeStyle=g.toString(),d.stroke())}function dy(d,t,s,r,l=ht.White,h=null){d.beginPath(),d.arc(t,s,r,0,Math.PI*2),d.closePath(),h&&(d.fillStyle=h.toString(),d.fill()),l&&(d.strokeStyle=l.toString(),d.stroke())}const fy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAB2CAYAAABxhGI9AAAACXBIWXMAAAsSAAALEgHS3X78AAAKnUlEQVR42u3dP2wjSx0H8N8hJIonIRmJjsq0SBR+BQ1dcqKhe0lD77SvSwpKkJKGPulpktfRIMUdEqKIqV57rpAokM4dbSiyq7ONPTP7x39ifz7SFbnEnp3xer47O7uzH15fXwMA6OYHmgAABCoACFQAEKgAgEAFAIEKAAIVAAQqACBQAUCgAoBABQCBCgAIVAAQqAAgUAFAoAIAAhUABCoACFQAEKgAgECFLbmOiNeFf2PbAyz68Pr6qhUgbRwR92v+/zwiJrYHMEKFMmcN///UtgcQqFBk1PD/97U9Qx8VCFSgu4EmAIEKAAIVAAQqACBQ4Z25jojP8eX+0WtNAgIVaOY+Im5j+eKh24h41jQgUIEyZ7F5NaPU7wCBCiwYd/w9cOB+qAlgJ3KLLow0EV198803RWvJfvfddx+0lhEqHKu5JgAjVCBvlhmFzjQRXUekHz9+TP79y8uLRjNChXfvoePvAYEKxNtj1e42/O5JoIJABcrdRMRVLM+X3kTEpaaB988cKuzWg9EobTWdMx0Oly8uN4dqhAoARqgnaN3arHfqu7OyH8ItKLVB/P+CEfMTHyGPY3npx1m8zWGDEeoBfUk/xdti57dr/r1Wv2+6EPow3tZ5rRdS72s1neuF97xvWd+XTH0/V+UMttDWqbI/r2nrxfp+jv2uSjSO7S+OXy/A/3lN+9xX5T5HxEUPZZ0tfB71+w57eJ/HFu+z+jkv1u92YX9fbI/HhX3JA9rp5MPr66tWaG9UfUGbrHIzi7cLUyYFf/tpTady03EEeL8mUJ6i7MKYNvWNqr4Pe2jradXO60LrvPAz2PQ5RPX684ah8dxD+2zantnCgVipSVV+m/tgB9W2DDq2Sx/vM95wcHhZhWVJm8yrv58cSgfTdc70+++/X/r522+/tUKSEepBqo+om4ZLPerMjUwuNnQCtx1GWJtee1FwdD5uWd86xLs8UaVt2aNEO1/saZ/Z5rYMW4zq6v34rGV9Bg3q2eZ9SkeNm9qwyUh30OPIHYFKx5FG03C7znSOqYBq+qW/zpQ3anH037TNHluG6f0WPsPhHvab4QFty7ogOeuxDYcNy2/zu2214WNYWxmBurNO8bGn97pNBOO8xy/9uCorZZ4I2r4C7aJgO7ZV9iE49Dm6NvOWx+pWE9CUq3zbdTp9doz38TbXtzqH9RT5CyWe422OaZoZGeZCabrhPQY9HjwsjpTvCg4YtlE2+Ta/j2bzn8fqrDqgm+6yUHOmAvWUjAtGhbNYvsBknDnqH1Qhc7VmxHgeb/NbudA5j/UXlYwif2p6luhAc9teu1npiHKnDs8if6tCm7JLX3NKpgttXe9ruc9mHMd7a83iwdxF5vt8tutARaCeklRnNK9C8WnNF7geJQ4T4XG3JhSnVdilQrG+yOnrlVHfsEGYzhNBn7Lu6tS7+HJafJQ4EMiNlNqWXZ9WPvVgnVYHG5M1ByDXkT6leX2EgTqJtyt45yv7S2qO3sEZjZhDLXeR+YKdJ0Zdk8QocvH9N732KrNtq+FZ/zzIHABcJrYpd+Xv14lOd5ap76SgrduW/VTQ1qcQpqnbgu4ifZvUMNpd9XuoZmvCtPaQ2Y/BCHVLgbrJTeRPDdVf6pfMKDU2fOkHmVFFfXr3MsouLsnNvV5kRoe5+s431PeuoKPqWnaurY/ZPBEeqwceN4l96iwO6H7Mjq4y7VGPVNe10VaZMzVCPVWpI/Z6FZbcv5fMqGCU+dLfFGzj58jP8+bCdJCo7yzKTwdOF0bu9Ug7V4c+yz7FJfYeGoysUss0HssIdVZwYLDujMqlESoCdTtGsZtbHnJBeNdDSJSs0jTKdMJN1HNX54Wv7bvsU9NkVJVa13dX+/wuArV0X/l5RHyo/lnfF4G6p6DrS0kHdtXhy35TGErDPYZUn2WfWqDOo/lVqdMD2O/hKJhD7S/odukymq9s02QN4EEPR/zbaOumZc+r15zK1Zqznl9jsfiemTM1QmV3HUuTkedlg9HIQzRbUD93dfC+2tpj2fIHEH2+RqCCQH13gZq7hWXTNpVu19OB1fc9nQ0AKOKUb5lU0P1kDyOneoWk0lOZ9cIP0x7qu8+2BhCoR2wYu1+e7DmaXzBSsu5vaX1ne2zrpmUPTmxf7PM1Dm4y/vC7ny7Nif7+z/9ZmtM0Z3panPLtPmra9f16bcK0Dpbnwk43Vd/RHtu6zfNQTy1QBy3aqG2g9nVmxml+BOoJyT3NpWmn9xhfFnu4bvDa+44BXhqqfdf3uUF9+yz77AT31Yue2mjecYQ62NLfgkA9ghHqLNEhNem4H1c6vdyDxhf/bpz5m4coW/c39wi6VH2bPtHlcaV9cvXts+zxCe6rTeqc2ndL7uGd93QwM9bFcAzMoZZ7SgTBbWx+asui61h/iq1+RmjqdbnQXQ3T1DNQ63V/U9ucqm/pMzPb1rePsk/1iTOjgvatR4W3Lc8ULB78pELyrnAfeTcj1NU509/86mfJ33/8+Mf00a05UyPUEw7UVCeWG/WNEiExyHRMt5ltW30izUPk18ytt7lNfc8i//DvtvXto+ySA5BjljsLUF8lPkqMPEtW1JomDsiGBZ9Byb4NAvUITSN9GuwsIj6t6UTOqk7jJREkmzqli8xIs96udSO20sX0H1vW92IL9e1a9rgqVyf91gbPsTy9UD9n9lOkT8k+RfkFR5PMNqxOcdSf32PBvg3vilO+zdxE+okx9Wm0ph36XYsRZCpMF993GOk5qvqB3Dct6jvssb67KvuUNJ3frw92bhr8/STSF0JdRPMLpUCgnsgo9S76PZ246ZFk1wWvK5m3vVoYvW1Sz7nN91jfXbQ1ZQc7TW6HeaoOalypG/8/p/rP1aNAc6ZHzSnfdqPUPhdy2PQw6Nz9gSVhuhiqueUHR3uu7y7K3rdDX4u46ZrPbUa0IFBZ0seKQ3XQTRt2vm3W/a2DbNKys++rvm3ep6+y1x2UdP3bWU9lzra47U1GmlctX/sQ23t+aOlByLTh/4NAPaCRxtcdO5HLSJ/6vNtCwGx67VPmPbvWd1q9frKHtp4kAqRJ2HR9j762JfX3bZ//elPtj13PPDx1+D5tqk/Xi6NO8SHz7MmH19dXrdBNfVFP6T2PT1UHNit87/t4m5+aRH+nQBdvqyhZDKJLfZs8h7XPsqdV2ZOV+tanKB8aln0dyxdAXbV4j4gvt4oMOrbP6vbU73NW7TMlbdTnPrWpfqXfh9HKZ9vke7KuTeZRNtXRSe6+1FV//ce/ln5eXfsXgcqXzr6+9261M3moOoa7E6nvTZTfy7iNsmfb7kjfgXGsvxe0vihsEts9HTquPpt1q1vtahu2TqAiUAEEKj0zhwoARqgAu/OnX/442WH+9xc/Wvr58re/Tr7f41/+ZsRqhAoACFQAEKgAcHjMoQJskJsz/eqrr5Z+vvr7v5fmQFevAl5lztQIFQAQqAAgUAHgIJlDBdhgdQ41N2eKESoAIFABQKACwFEwhwoARqgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAEKgAgUAFAoAKAQAUAgQoACFQAEKgAIFABQKACAAIVAAQqAAhUABCoAIBABQCBCgACFQAQqAAgUAFAoAKAQAUAlvwPcFDns1DsH4sAAAAASUVORK5CYII=";var gy=Ee(1388);class hr extends Ss{constructor(t){var s,r,l,h,g,_,b,S,A,I;super(t),this.filtering=null,this.lineCap="butt",this.quality=1,this._dirty=!0,this._smoothing=!1,this._color=Bn(ht.Black,()=>this.flagDirty()),this._lineWidth=1,this._lineDash=[],this._padding=0,t&&(this.quality=(s=t.quality)!==null&&s!==void 0?s:this.quality,this.color=(r=t.color)!==null&&r!==void 0?r:ht.Black,this.strokeColor=t==null?void 0:t.strokeColor,this.smoothing=(l=t.smoothing)!==null&&l!==void 0?l:this.smoothing,this.lineWidth=(h=t.lineWidth)!==null&&h!==void 0?h:this.lineWidth,this.lineDash=(g=t.lineDash)!==null&&g!==void 0?g:this.lineDash,this.lineCap=(_=t.lineCap)!==null&&_!==void 0?_:this.lineCap,this.padding=(b=t.padding)!==null&&b!==void 0?b:this.padding,this.filtering=(S=t.filtering)!==null&&S!==void 0?S:this.filtering),this._bitmap=document.createElement("canvas");const V=(A=t==null?void 0:t.width)!==null&&A!==void 0?A:this._bitmap.width,H=(I=t==null?void 0:t.height)!==null&&I!==void 0?I:this._bitmap.height;this.width=V,this.height=H;const tt=this._bitmap.getContext("2d");if(tt)this._ctx=tt;else throw new Error("Browser does not support 2d canvas drawing, cannot create Raster graphic")}cloneRasterOptions(){return{color:this.color?this.color.clone():null,strokeColor:this.strokeColor?this.strokeColor.clone():null,smoothing:this.smoothing,lineWidth:this.lineWidth,lineDash:this.lineDash,lineCap:this.lineCap,quality:this.quality,padding:this.padding}}get dirty(){return this._dirty}flagDirty(){this._dirty=!0}get width(){return Math.abs(this._getTotalWidth()*this.scale.x)}set width(t){t/=Math.abs(this.scale.x),this._bitmap.width=t,this._originalWidth=t,this.flagDirty()}get height(){return Math.abs(this._getTotalHeight()*this.scale.y)}set height(t){t/=Math.abs(this.scale.y),this._bitmap.height=t,this._originalHeight=t,this.flagDirty()}_getTotalWidth(){var t;return(((t=this._originalWidth)!==null&&t!==void 0?t:this._bitmap.width)+this.padding*2)*1}_getTotalHeight(){var t;return(((t=this._originalHeight)!==null&&t!==void 0?t:this._bitmap.height)+this.padding*2)*1}get localBounds(){return Wt.fromDimension(this._getTotalWidth()*this.scale.x,this._getTotalHeight()*this.scale.y,z.Zero)}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this.flagDirty()}get color(){return this._color}set color(t){this.flagDirty(),this._color=Bn(t,()=>this.flagDirty())}get strokeColor(){return this._strokeColor}set strokeColor(t){this.flagDirty(),this._strokeColor=Bn(t,()=>this.flagDirty())}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.flagDirty()}get lineDash(){return this._lineDash}set lineDash(t){this._lineDash=t,this.flagDirty()}get padding(){return this._padding}set padding(t){this._padding=t,this.flagDirty()}rasterize(){this._dirty=!1,this._ctx.clearRect(0,0,this._getTotalWidth(),this._getTotalHeight()),this._ctx.save(),this._applyRasterProperties(this._ctx),this.execute(this._ctx),this._ctx.restore()}_applyRasterProperties(t){var s,r,l;this._bitmap.width=this._getTotalWidth()*this.quality,this._bitmap.height=this._getTotalHeight()*this.quality,this._bitmap.setAttribute("filtering",this.filtering),this._bitmap.setAttribute("forceUpload","true"),t.scale(this.quality,this.quality),t.translate(this.padding,this.padding),t.imageSmoothingEnabled=this.smoothing,t.lineWidth=this.lineWidth,t.setLineDash((s=this.lineDash)!==null&&s!==void 0?s:t.getLineDash()),t.lineCap=this.lineCap,t.strokeStyle=(r=this.strokeColor)===null||r===void 0?void 0:r.toString(),t.fillStyle=(l=this.color)===null||l===void 0?void 0:l.toString()}_drawImage(t,s,r){this._dirty&&this.rasterize(),t.scale(1/this.quality,1/this.quality),t.drawImage(this._bitmap,s,r)}}class ea extends hr{get ctx(){return this._ctx}constructor(t){super(t),this._options=t}clone(){return new ea({...this._options,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){var s,r;!((s=this._options)===null||s===void 0)&&s.draw&&((r=this._options)===null||r===void 0||r.draw(t)),this._options.cache||this.flagDirty()}}class sc{}sc.type={any:"",blob:"blob",json:"json",text:"text",document:"document",arraybuffer:"arraybuffer"};class sa{constructor(){this.states=new Map}get currentState(){return this._currentState}set currentState(t){this._currentState=t}static create(t,s){const r=new sa;r.data=s;for(const l in t.states)r.states.set(l,{name:l,...t.states[l]});for(const l of r.states.values())for(const h of l.transitions)if(h!=="*"&&!r.states.has(h))throw Error(`Invalid state machine, state [${l.name}] has a transition to another state that doesn't exist [${h}]`);return r.currentState=r.startState=r.states.get(t.start),r}in(t){return this.currentState.name===t}go(t,s){var r,l;if(this.currentState.transitions.includes(t)||this.currentState.transitions.includes("*")){const h=this.states.get(t);return this.currentState.onExit&&((r=this.currentState)===null||r===void 0?void 0:r.onExit({to:h.name,data:this.data}))===!1||h!=null&&h.onEnter&&(h==null?void 0:h.onEnter({from:this.currentState.name,eventData:s,data:this.data}))===!1?!1:(this.currentState=h,!((l=this.currentState)===null||l===void 0)&&l.onState&&this.currentState.onState(),!0)}return!1}update(t){this.currentState.onUpdate&&this.currentState.onUpdate(this.data,t)}save(t){localStorage.setItem(t,JSON.stringify({currentState:this.currentState.name,data:this.data}))}restore(t){const s=JSON.parse(localStorage.getItem(t));this.currentState=this.states.get(s.currentState),this.data=s.data}}class qh{_createNewBufferSource(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.value=this._playbackRate,this._instance.connect(this._volumeNode),this._volumeNode.connect(this._audioContext.destination)}_handleEnd(){this.loop||(this._instance.onended=()=>{this._playingResolve(!0)})}set loop(t){this._loop=t,this._instance&&(this._instance.loop=t,this.loop||(this._instance.onended=()=>{this._playingResolve(!0)}))}get loop(){return this._loop}set volume(t){t=ne(t,0,1),this._volume=t,this._stateMachine.in("PLAYING")&&this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(t,this._audioContext.currentTime,.1):this._volumeNode.gain.value=t}get volume(){return this._volume}get duration(){var t;return(t=this._duration)!==null&&t!==void 0?t:this.getTotalPlaybackDuration()}set duration(t){this._duration=t}constructor(t){this._src=t,this._audioContext=ur.create(),this._volumeNode=this._audioContext.createGain(),this._playingPromise=new Promise(s=>{this._playingResolve=s}),this._stateMachine=sa.create({start:"STOPPED",states:{PLAYING:{onEnter:({data:s})=>{this._createNewBufferSource(),this._handleEnd(),this.loop?this._instance.start(0,s.pausedAt*this._playbackRate):this._instance.start(0,s.pausedAt*this._playbackRate,this.duration),s.startedAt=this._audioContext.currentTime-s.pausedAt,s.pausedAt=0},onState:()=>this._playStarted(),onExit:({to:s})=>{s==="STOPPED"&&this._playingResolve(!0),this._instance.onended=null,this._instance.disconnect(),this._instance.stop(0),this._instance=null},transitions:["STOPPED","PAUSED","SEEK"]},SEEK:{onEnter:({eventData:s,data:r})=>{r.pausedAt=(s??0)/this._playbackRate,r.startedAt=0},transitions:["*"]},STOPPED:{onEnter:({data:s})=>{s.pausedAt=0,s.startedAt=0,this._playingResolve(!0)},transitions:["PLAYING","PAUSED","SEEK"]},PAUSED:{onEnter:({data:s})=>{s.pausedAt=this._audioContext.currentTime-s.startedAt},transitions:["PLAYING","STOPPED","SEEK"]}}},{startedAt:0,pausedAt:0}),this._volume=1,this._loop=!1,this._playStarted=()=>{},this._playbackRate=1,this._createNewBufferSource()}isPlaying(){return this._stateMachine.in("PLAYING")}isPaused(){return this._stateMachine.in("PAUSED")||this._stateMachine.in("SEEK")}play(t=()=>{}){return this._playStarted=t,this._stateMachine.go("PLAYING"),this._playingPromise}pause(){this._stateMachine.go("PAUSED")}stop(){this._stateMachine.go("STOPPED")}seek(t){this._stateMachine.go("PAUSED"),this._stateMachine.go("SEEK",t)}getTotalPlaybackDuration(){return this._src.duration}getPlaybackPosition(){const{pausedAt:t,startedAt:s}=this._stateMachine.data;return t?t*this._playbackRate:s?(this._audioContext.currentTime-s)*this._playbackRate:0}set playbackRate(t){this._instance.playbackRate.value=this._playbackRate=t}get playbackRate(){return this._instance.playbackRate.value}}class ic extends v{set bubbles(t){}get bubbles(){return!1}get _path(){return null}set _path(t){}constructor(t,s="MediaEvent"){super(),this.target=t,this._name=s}stopPropagation(){}action(){}propagate(){}layPath(t){}}class hn extends ic{constructor(t,s){super(t,"NativeSoundEvent"),this.track=s}}class Zh extends ic{constructor(t,s){super(t,"NativeSoundProcessedEvent"),this._processedData=s,this.data=this._processedData}}function my(d){try{const t=new Audio,s=/.*\.([A-Za-z0-9]+)(?:(?:\?|\#).*)*$/,r=d.match(s)[1];return!!t.canPlayType("audio/"+r)}catch(t){return D.getInstance().warn("Cannot determine audio support, assuming no support for the Audio Tag",t),!1}}const py={VolumeChange:"volumechange",Processed:"processed",Pause:"pause",Stop:"stop",PlaybackEnd:"playbackend",Resume:"resume",PlaybackStart:"playbackstart"};class Kh{set loop(t){this._loop=t;for(const s of this._tracks)s.loop=this._loop;this.logger.debug("Set loop for all instances of sound",this.path,"to",this._loop)}get loop(){return this._loop}set volume(t){this._volume=t;for(const s of this._tracks)s.volume=this._volume;this.events.emit("volumechange",new hn(this)),this.logger.debug("Set loop for all instances of sound",this.path,"to",this._volume)}get volume(){return this._volume}get duration(){return this._duration}set duration(t){this._duration=t}get instances(){return this._tracks}get path(){return this._resource.path}set path(t){this._resource.path=t}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}constructor(...t){this.events=new m,this.logger=D.getInstance(),this._loop=!1,this._volume=1,this._isStopped=!1,this._tracks=[],this._wasPlayingOnHidden=!1,this._playbackRate=1,this._audioContext=ur.create(),this._resource=new Qo("",sc.type.arraybuffer);for(const s of t)if(my(s)){this.path=s;break}this.path||(this.logger.warn("This browser does not support any of the audio files specified:",t.join(", ")),this.logger.warn("Attempting to use",t[0]),this.path=t[0])}isLoaded(){return!!this.data}async load(){var t,s;if(this.data)return this.data;const r=await this._resource.load(),l=await this.decodeAudio(r.slice(0));return this._duration=(s=(t=this._duration)!==null&&t!==void 0?t:l==null?void 0:l.duration)!==null&&s!==void 0?s:void 0,this.events.emit("processed",new Zh(this,l)),this.data=l}async decodeAudio(t){try{return await this._audioContext.decodeAudioData(t.slice(0))}catch{return this.logger.error("Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file."),await Promise.reject()}}wireEngine(t){t&&(this._engine=t,this._engine.on("hidden",()=>{t.pauseAudioWhenHidden&&this.isPlaying()&&(this._wasPlayingOnHidden=!0,this.pause())}),this._engine.on("visible",()=>{t.pauseAudioWhenHidden&&this._wasPlayingOnHidden&&(this.play(),this._wasPlayingOnHidden=!1)}),this._engine.on("start",()=>{this._isStopped=!1}),this._engine.on("stop",()=>{this.stop(),this._isStopped=!0}))}instanceCount(){return this._tracks.length}isPlaying(){return this._tracks.some(t=>t.isPlaying())}isPaused(){return this._tracks.some(t=>t.isPaused())}play(t){return this.isLoaded()?this._isStopped?(this.logger.warn("Cannot start playing. Engine is in a stopped state."),Promise.resolve(!1)):(this.volume=t||this.volume,this.isPaused()?this._resumePlayback():this._startPlayback()):(this.logger.warn("Cannot start playing. Resource",this.path,"is not loaded yet"),Promise.resolve(!0))}pause(){if(this.isPlaying()){for(const t of this._tracks)t.pause();this.events.emit("pause",new hn(this)),this.logger.debug("Paused all instances of sound",this.path)}}stop(){for(const t of this._tracks)t.stop();this.events.emit("stop",new hn(this)),this._tracks.length=0,this.logger.debug("Stopped all instances of sound",this.path)}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._tracks.forEach(s=>{s.playbackRate=this._playbackRate})}seek(t,s=0){this._tracks.length===0&&this._getTrackInstance(this.data),this._tracks[s].seek(t)}getTotalPlaybackDuration(){return this.data.duration}getPlaybackPosition(t=0){return this._tracks.length?this._tracks[t].getPlaybackPosition():0}getTrackId(t){return this._tracks.indexOf(t)}async _resumePlayback(){if(this.isPaused){const t=[];for(const s of this._tracks)t.push(s.play().then(()=>(this.events.emit("playbackend",new hn(this,s)),this._tracks.splice(this.getTrackId(s),1),!0)));this.events.emit("resume",new hn(this)),this.logger.debug("Resuming paused instances for sound",this.path,this._tracks),await Promise.all(t)}return!0}async _startPlayback(){const t=await this._getTrackInstance(this.data),s=await t.play(()=>{this.events.emit("playbackstart",new hn(this,t)),this.logger.debug("Playing new instance for sound",this.path)});return this.events.emit("playbackend",new hn(this,t)),this._tracks.splice(this.getTrackId(t),1),s}_getTrackInstance(t){const s=new qh(t);return s.loop=this.loop,s.volume=this.volume,s.duration=this.duration,s.playbackRate=this._playbackRate,this._tracks.push(s),s}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}}const _y={};class Qh{get _image(){return this._imageElement||(this._imageElement=new Image,this._imageElement.src=this.logo),this._imageElement}get playButtonRootElement(){return this._playButtonRootElement}get playButtonElement(){return this._playButtonElement}get _playButton(){const t=document.getElementById("excalibur-play-root");return t&&(this._playButtonRootElement=t),this._playButtonRootElement||(this._playButtonRootElement=document.createElement("div"),this._playButtonRootElement.id="excalibur-play-root",this._playButtonRootElement.style.position="absolute",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement}constructor(t){this.events=new m,this.canvas=new ea({filtering:cs.Blended,smoothing:!0,cache:!0,draw:this.draw.bind(this)}),this._resourceList=[],this._index=0,this._playButtonShown=!1,this._resourceCount=0,this._numLoaded=0,this._progressCounts={},this._totalCounts={},this.logo=fy,this.logoWidth=468,this.logoHeight=118,this.loadingBarColor=ht.White,this.backgroundColor="#176BAA",this.suppressPlayButton=!1,this._playButtonStyles=gy.Z.toString(),this.playButtonText="Play game",this.startButtonFactory=()=>{let s=document.getElementById("excalibur-play");return s||(s=document.createElement("button")),s.id="excalibur-play",s.textContent=this.playButtonText,s.style.display="none",s},this._loadingFuture=new cr,t&&this.addResources(t)}wireEngine(t){this._engine=t,this.canvas.width=this._engine.canvas.width,this.canvas.height=this._engine.canvas.height}addResource(t){const s=this._index++;this._resourceList.push(t),this._progressCounts[s]=0,this._totalCounts[s]=1,this._resourceCount++}addResources(t){let s=0;const r=t.length;for(s;s<r;s++)this.addResource(t[s])}isLoaded(){return this._numLoaded===this._resourceCount}async showPlayButton(){var t,s;if(this.suppressPlayButton)this.hidePlayButton(),await jl(500,(t=this._engine)===null||t===void 0?void 0:t.clock);else{const r=()=>{this._positionPlayButton()};return!((s=this._engine)===null||s===void 0)&&s.browser&&this._engine.browser.window.on("resize",r),this._playButtonShown=!0,this._playButton.style.display="block",document.body.addEventListener("keyup",h=>{h.key==="Enter"&&this._playButton.click()}),this._positionPlayButton(),await new Promise(h=>{const g=_=>{var b;_.stopPropagation(),this.hidePlayButton(),!((b=this._engine)===null||b===void 0)&&b.browser&&this._engine.browser.window.off("resize",r),h()};this._playButton.addEventListener("click",g),this._playButton.addEventListener("touchend",g),this._playButton.addEventListener("pointerup",g)})}}hidePlayButton(){this._playButtonShown=!1,this._playButton.style.display="none"}dispose(){this._playButtonRootElement.parentElement&&(this._playButtonRootElement.removeChild(this._playButtonElement),document.body.removeChild(this._playButtonRootElement),document.head.removeChild(this._styleBlock),this._playButtonRootElement=null,this._playButtonElement=null,this._styleBlock=null)}update(t,s){}areResourcesLoaded(){return this._loadingFuture.promise}async load(){var t,s;await((t=this._image)===null||t===void 0?void 0:t.decode()),this.canvas.flagDirty(),await Promise.all(this._resourceList.map(async r=>{await r.load().finally(()=>{this._numLoaded++,this.canvas.flagDirty()})}));for(const r of this._resourceList)r instanceof Kh&&r.wireEngine(this._engine);return this._loadingFuture.resolve(),await jl(200,(s=this._engine)===null||s===void 0?void 0:s.clock),this.canvas.flagDirty(),await this.showPlayButton(),await Ln.unlock(),this.data=this._resourceList}markResourceComplete(){this._numLoaded++}get progress(){return this._resourceCount>0?ne(this._numLoaded,0,this._resourceCount)/this._resourceCount:1}_positionPlayButton(){if(this._engine){const t=this._engine.screen.viewport.height,s=this._engine.screen.viewport.width;if(this._playButtonRootElement){const r=this._engine.canvas.offsetLeft,l=this._engine.canvas.offsetTop,h=this._playButton.clientWidth,g=this._playButton.clientHeight;this.playButtonPosition?(this._playButtonRootElement.style.left=`${this.playButtonPosition.x}px`,this._playButtonRootElement.style.top=`${this.playButtonPosition.y}px`):(this._playButtonRootElement.style.left=`${r+s/2-h/2}px`,this._playButtonRootElement.style.top=`${l+t/2-g/2+100}px`)}}}draw(t){const s=this._engine.canvasHeight/this._engine.pixelRatio,r=this._engine.canvasWidth/this._engine.pixelRatio;this._positionPlayButton(),t.fillStyle=this.backgroundColor,t.fillRect(0,0,r,s);let l=s/2;const h=Math.min(this.logoWidth,r*.75);let g=r/2-h/2;this.logoPosition&&(g=this.logoPosition.x,l=this.logoPosition.y);const _=Math.floor(h*(this.logoHeight/this.logoWidth)),b=this._engine.getAntialiasing();if(this._engine.setAntialiasing(!0),this.logoPosition?t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,g,l,h,_):t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,g,l-_-20,h,_),!this.suppressPlayButton&&this._playButtonShown){this._engine.setAntialiasing(b);return}let S=g,A=l;this.loadingBarPosition&&(S=this.loadingBarPosition.x,A=this.loadingBarPosition.y),t.lineWidth=2,ec(t,S,A,h,20,10,this.loadingBarColor);const I=h*this.progress,V=5,H=I-V*2,tt=20-V*2;ec(t,S+V,A+V,H>10?H:10,tt,5,null,this.loadingBarColor),this._engine.setAntialiasing(b)}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}}const Jh={webgl:"WebGL",webaudio:"WebAudio",gamepadapi:"Gamepad API"};class td{constructor(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("2d"))},arrayBufferSupport:function(){const t=new XMLHttpRequest;t.open("GET","/");try{t.responseType="arraybuffer"}catch{return!1}return t.responseType==="arraybuffer"},dataUrlSupport:function(){return document.createElement("canvas").toDataURL("image/png").indexOf("data:image/png")===0},objectUrlSupport:function(){return"URL"in window&&"revokeObjectURL"in URL&&"createObjectURL"in URL},rgbaSupport:function(){const t=document.createElement("a").style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){const t=document.createElement("canvas");return!!(t.getContext&&t.getContext("webgl"))}},this._features=this._loadBrowserFeatures()}getBrowserFeatures(){return this._features===null&&(this._features=this._loadBrowserFeatures()),this._features}logBrowserFeatures(){let t=`%cSUPPORTED BROWSER FEATURES
==========================%c
`;const s=["font-weight: bold; color: navy","font-weight: normal; color: inherit"],r=this.getBrowserFeatures();for(const l of Object.keys(Jh))r[l]?(t+="(%c%c)",s.push("font-weight: bold; color: green"),s.push("font-weight: normal; color: inherit")):(t+="(%c%c)",s.push("font-weight: bold; color: red"),s.push("font-weight: normal; color: inherit")),t+=" "+Jh[l]+`
`;s.unshift(t),console.log.apply(console,s)}_loadBrowserFeatures(){return{canvas:(()=>this._criticalTests.canvasSupport())(),arraybuffer:(()=>this._criticalTests.arrayBufferSupport())(),dataurl:(()=>this._criticalTests.dataUrlSupport())(),objecturl:(()=>this._criticalTests.objectUrlSupport())(),rgba:(()=>this._criticalTests.rgbaSupport())(),webaudio:(()=>this._warningTest.webAudioSupport())(),webgl:(()=>this._warningTest.webglSupport())(),gamepadapi:(()=>!!navigator.getGamepads)()}}test(){let t=!1;for(const s in this._criticalTests)this._criticalTests[s].call(this)||(this.failedTests.push(s),D.getInstance().error("Critical browser feature missing, Excalibur requires:",s),t=!0);if(t)return!1;for(const s in this._warningTest)this._warningTest[s]()||D.getInstance().warn("Warning browser feature missing, Excalibur will have reduced performance:",s);return!0}}var Xt;(function(d){d.PreventCollision="PreventCollision",d.Passive="Passive",d.Active="Active",d.Fixed="Fixed"})(Xt||(Xt={}));const ed=5,dr={},vy=()=>{for(const d in dr)dr[d]=0},ia=(d,t)=>{const s=u.isEnabled("suppress-obsolete-message");dr[d]<ed&&!s&&(D.getInstance().warn(d),console.trace&&t.showStackTrace&&console.trace()),dr[d]++};function sd(d){return d={message:"This feature will be removed in future versions of Excalibur.",alternateMethod:null,showStackTrace:!1,...d},function(t,s,r){if(r&&!(typeof r.value=="function"||typeof r.get=="function"||typeof r.set=="function"))throw new SyntaxError("Only classes/functions/getters/setters can be marked as obsolete");const h=`${`${t.name||""}${t.name&&s?".":""}${s||""}`} is marked obsolete: ${d.message}`+(d.alternateMethod?` Use ${d.alternateMethod} instead`:"");dr[h]||(dr[h]=0);const g=r?{...r}:t;if(!r){class _ extends g{constructor(...S){ia(h,d),super(...S)}}return _}return r&&r.value?(g.value=function(){return ia(h,d),r.value.apply(this,arguments)},g):(r&&r.get&&(g.get=function(){return ia(h,d),r.get.apply(this,arguments)}),r&&r.set&&(g.set=function(){return ia(h,d),r.set.apply(this,arguments)}),g)}}var yy=function(d,t,s,r){var l=arguments.length,h=l<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,s):r,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(d,t,s,r);else for(var _=d.length-1;_>=0;_--)(g=d[_])&&(h=(l<3?g(h):l>3?g(t,s,h):g(t,s))||h);return l>3&&h&&Object.defineProperty(t,s,h),h},On;(function(d){d.Arcade="arcade",d.Realistic="realistic"})(On||(On={}));var na;(function(d){d[d.DynamicAABBTree=0]="DynamicAABBTree"})(na||(na={}));var ra;(function(d){d[d.Euler=0]="Euler"})(ra||(ra={}));class Dt{static get gravity(){return Dt.acc}static set gravity(t){Dt.acc=t}static useArcadePhysics(){Dt.collisionResolutionStrategy=On.Arcade}static useRealisticPhysics(){Dt.collisionResolutionStrategy=On.Realistic}static get dynamicTreeVelocityMultiplyer(){return Dt.dynamicTreeVelocityMultiplier}static set dynamicTreeVelocityMultiplyer(t){Dt.dynamicTreeVelocityMultiplier=t}}Dt.acc=new z(0,0),Dt.enabled=!0,Dt.broadphaseStrategy=na.DynamicAABBTree,Dt.collisionResolutionStrategy=On.Arcade,Dt.defaultMass=10,Dt.integrator=ra.Euler,Dt.dynamicTreeVelocityMultiplier=2,Dt.boundsPadding=5,Dt.positionIterations=3,Dt.velocityIterations=8,Dt.slop=1,Dt.steeringFactor=.2,Dt.warmStart=!0,Dt.bodiesCanSleepByDefault=!1,Dt.surfaceEpsilon=.1,Dt.sleepEpsilon=.07,Dt.wakeThreshold=Dt.sleepEpsilon*3,Dt.sleepBias=.9,Dt.checkForFastBodies=!0,Dt.disableMinimumSpeedForFastBody=!1,yy([sd({message:"Alias for incorrect spelling used in older versions, will be removed in v0.25.0",alternateMethod:"dynamicTreeVelocityMultiplier"})],Dt,"dynamicTreeVelocityMultiplyer",null);var Es;(function(d){d.World="world",d.Screen="screen"})(Es||(Es={}));class nc extends z{constructor(t){super(0,0),this._getX=t.getX,this._getY=t.getY,this._setX=t.setX,this._setY=t.setY}get x(){return this._x=this._getX()}set x(t){this._setX(t),this._x=t}get y(){return this._y=this._getY()}set y(t){this._setY(t),this._y=t}}class id extends z{constructor(t,s){super(t.x,t.y),this.original=t,this.change=s}get x(){return this._x=this.original.x}set x(t){this.change(t,this._y),this._x=this.original.x=t}get y(){return this._y=this.original.y}set y(t){this.change(this._x,t),this._y=this.original.y=t}}class Jr{constructor(){this._parent=null,this._children=[],this._pos=Z(0,0),this._rotation=0,this._scale=Z(1,1),this._isDirty=!1,this._isInverseDirty=!1,this._matrix=Ve.identity(),this._inverse=Ve.identity()}get parent(){return this._parent}set parent(t){if(this._parent){const s=this._parent._children.indexOf(this);s>-1&&this._parent._children.splice(s,1)}this._parent=t,this._parent&&this._parent._children.push(this),this.flagDirty()}get children(){return this._children}set pos(t){t.equals(this._pos)||(this._pos.x=t.x,this._pos.y=t.y,this.flagDirty())}get pos(){return new id(this._pos,(t,s)=>{(t!==this._pos.x||s!==this._pos.y)&&this.flagDirty()})}set globalPos(t){let s=t.clone();this.parent&&(s=this.parent.inverse.multiply(t)),s.equals(this._pos)||(this._pos=s,this.flagDirty())}get globalPos(){return new nc({getX:()=>this.matrix.data[4],getY:()=>this.matrix.data[5],setX:t=>{if(this.parent){const{x:s}=this.parent.inverse.multiply(Z(t,this.pos.y));this.pos.x=s}else this.pos.x=t;t!==this.matrix.data[4]&&this.flagDirty()},setY:t=>{if(this.parent){const{y:s}=this.parent.inverse.multiply(Z(this.pos.x,t));this.pos.y=s}else this.pos.y=t;t!==this.matrix.data[5]&&this.flagDirty()}})}set rotation(t){const s=ue(t);s!==this._rotation&&this.flagDirty(),this._rotation=s}get rotation(){return this._rotation}set globalRotation(t){let s=0;this.parent&&(s=this.parent.globalRotation);const r=ue(t+s);r!==this._rotation&&this.flagDirty(),this._rotation=r}get globalRotation(){return this.parent?this.matrix.getRotation():this.rotation}set scale(t){t.equals(this._scale)||(this._scale.x=t.x,this._scale.y=t.y,this.flagDirty())}get scale(){return new id(this._scale,(t,s)=>{(t!==this._scale.x||s!==this._scale.y)&&this.flagDirty()})}set globalScale(t){let s=Z(1,1);this.parent&&(s=this.parent.globalScale),this.scale=t.scale(Z(1/s.x,1/s.y))}get globalScale(){return new nc({getX:()=>this.parent?this.matrix.getScaleX():this.scale.x,getY:()=>this.parent?this.matrix.getScaleY():this.scale.y,setX:t=>{if(this.parent){const s=this.parent.globalScale.x;this.scale.x=t/s}else this.scale.x=t},setY:t=>{if(this.parent){const s=this.parent.globalScale.y;this.scale.y=t/s}else this.scale.y=t}})}get matrix(){return this._isDirty&&(this.parent===null?this._matrix=this._calculateMatrix():this._matrix=this.parent.matrix.multiply(this._calculateMatrix()),this._isDirty=!1),this._matrix}get inverse(){return this._isInverseDirty&&(this._inverse=this.matrix.inverse(),this._isInverseDirty=!1),this._inverse}_calculateMatrix(){return Ve.identity().translate(this.pos.x,this.pos.y).rotate(this.rotation).scale(this.scale.x,this.scale.y)}flagDirty(){this._isDirty=!0,this._isInverseDirty=!0;for(let t=0;t<this._children.length;t++)this._children[t].flagDirty()}apply(t){return this.matrix.multiply(t)}applyInverse(t){return this.inverse.multiply(t)}setTransform(t,s,r){this._pos.x=t.x,this._pos.y=t.y,this._rotation=ue(s),this._scale.x=r.x,this._scale.y=r.y,this.flagDirty()}clone(t){const s=t??new Jr;return this._pos.clone(s._pos),s._rotation=this._rotation,this._scale.clone(s._scale),s.flagDirty(),s}}function by(d){return!!(d!=null&&d.clone)}class Ns{constructor(){this.owner=null}clone(){const t=new this.constructor;for(const s in this)if(this.hasOwnProperty(s)){const r=this[s];by(r)&&s!=="owner"&&s!=="clone"?t[s]=r.clone():t[s]=r}return t}}class rc extends Ns{constructor(t,s){super(),this.type=t,this.value=s}}class wi{constructor(){this.observers=[],this.subscriptions=[]}register(t){this.observers.push(t)}subscribe(t){this.subscriptions.push(t)}unregister(t){const s=this.observers.indexOf(t);s!==-1&&this.observers.splice(s,1)}unsubscribe(t){const s=this.subscriptions.indexOf(t);s!==-1&&this.subscriptions.splice(s,1)}notifyAll(t){const s=this.observers.length;for(let l=0;l<s;l++)this.observers[l].notify(t);const r=this.subscriptions.length;for(let l=0;l<r;l++)this.subscriptions[l](t)}clear(){this.observers.length=0,this.subscriptions.length=0}}class kt extends Ns{constructor(){super(...arguments),this.type="ex.transform",this._transform=new Jr,this._addChildTransform=t=>{const s=t.get(kt);s&&(s._transform.parent=this._transform)},this.zIndexChanged$=new wi,this._z=0,this.coordPlane=Es.World}get(){return this._transform}onAdd(t){for(const s of t.children)this._addChildTransform(s);t.childrenAdded$.subscribe(s=>this._addChildTransform(s)),t.childrenRemoved$.subscribe(s=>{const r=s.get(kt);r&&(r._transform.parent=null)})}onRemove(t){this._transform.parent=null}get z(){return this._z}set z(t){const s=this._z;this._z=t,s!==t&&this.zIndexChanged$.notifyAll(t)}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get globalPos(){return this._transform.globalPos}set globalPos(t){this._transform.globalPos=t}get rotation(){return this._transform.rotation}set rotation(t){this._transform.rotation=t}get globalRotation(){return this._transform.globalRotation}set globalRotation(t){this._transform.globalRotation=t}get scale(){return this._transform.scale}set scale(t){this._transform.scale=t}get globalScale(){return this._transform.globalScale}set globalScale(t){this._transform.globalScale=t}applyInverse(t){return this._transform.applyInverse(t)}apply(t){return this._transform.apply(t)}clone(){const t=new kt;return t._transform=this._transform.clone(),t._z=this._z,t}}class De extends Ns{constructor(){super(...arguments),this.type="ex.motion",this.vel=z.Zero,this.acc=z.Zero,this.scaleFactor=z.Zero,this.angularVelocity=0,this.torque=0,this.inertia=1}}class ri{constructor(t,s,r){this._name=t,this._category=s,this._mask=r}get name(){return this._name}get category(){return this._category}get mask(){return this._mask}canCollide(t){return(this.category&t.mask)!==0&&(t.category&this.mask)!==0}invert(){return new ri("~("+this.name+")",~this.category,~this.mask)}static combine(t){const s=t.map(h=>h.name).join("+"),r=t.reduce((h,g)=>g.category|h,0),l=~r;return new ri(s,r,l)}static collidesWith(t){return ri.combine(t).invert()}}ri.All=new ri("Collide with all groups",-1,-1);class Us{constructor(t,s){this.colliderA=t,this.colliderB=s,this.id=null,this.id=Us.calculatePairHash(t.id,s.id)}static canCollide(t,s){var r,l;const h=(r=t==null?void 0:t.owner)===null||r===void 0?void 0:r.get(ae),g=(l=s==null?void 0:s.owner)===null||l===void 0?void 0:l.get(ae);return!(t.id===s.id||t.owner&&s.owner&&t.owner.id===s.owner.id||t.localBounds.hasZeroDimensions()||s.localBounds.hasZeroDimensions()||!h||!g||!h.group.canCollide(g.group)||h.collisionType===Xt.Fixed&&g.collisionType===Xt.Fixed||g.collisionType===Xt.PreventCollision||h.collisionType===Xt.PreventCollision||!h.active||!g.active)}get canCollide(){const t=this.colliderA,s=this.colliderB;return Us.canCollide(t,s)}collide(){return this.colliderA.collide(this.colliderB)}hasCollider(t){return t===this.colliderA||t===this.colliderB}static calculatePairHash(t,s){return t.value<s.value?`#${t.value}+${s.value}`:`#${s.value}+${t.value}`}}class to{constructor(t,s){this.min=t,this.max=s}overlaps(t){return this.max>t.min&&t.max>this.min}getOverlap(t){return this.overlaps(t)?this.max>t.max?t.max-this.min:this.max-t.min:0}}class oc{constructor(t){this.parent=t,this.parent=t||null,this.data=null,this.bounds=new Wt,this.left=null,this.right=null,this.height=0}isLeaf(){return!this.left&&!this.right}}class ac{constructor(t=new Wt(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)){this.worldBounds=t,this.root=null,this.nodes={}}_insert(t){if(this.root===null){this.root=t,this.root.parent=null;return}const s=t.bounds;let r=this.root;for(;!r.isLeaf();){const _=r.left,b=r.right,S=r.bounds.getPerimeter(),I=r.bounds.combine(s).getPerimeter(),V=2*I,H=2*(I-S);let tt=0;const gt=s.combine(_.bounds);let pt,J;_.isLeaf()?tt=gt.getPerimeter()+H:(J=_.bounds.getPerimeter(),pt=gt.getPerimeter(),tt=pt-J+H);let K=0;const wt=s.combine(b.bounds);if(b.isLeaf()?K=wt.getPerimeter()+H:(J=b.bounds.getPerimeter(),pt=wt.getPerimeter(),K=pt-J+H),V<tt&&V<K)break;tt<K?r=_:r=b}const l=r.parent,h=new oc(l);h.bounds=s.combine(r.bounds),h.height=r.height+1,l!==null?(l.left===r?l.left=h:l.right=h,h.left=r,h.right=t,r.parent=h,t.parent=h):(h.left=r,h.right=t,r.parent=h,t.parent=h,this.root=h);let g=t.parent;for(;g;){if(g=this._balance(g),!g.left)throw new Error("Parent of current leaf cannot have a null left child"+g);if(!g.right)throw new Error("Parent of current leaf cannot have a null right child"+g);g.height=1+Math.max(g.left.height,g.right.height),g.bounds=g.left.bounds.combine(g.right.bounds),g=g.parent}}_remove(t){if(t===this.root){this.root=null;return}const s=t.parent,r=s.parent;let l;if(s.left===t?l=s.right:l=s.left,r){r.left===s?r.left=l:r.right=l,l.parent=r;let h=r;for(;h;)h=this._balance(h),h.bounds=h.left.bounds.combine(h.right.bounds),h.height=1+Math.max(h.left.height,h.right.height),h=h.parent}else this.root=l,l.parent=null}trackCollider(t){const s=new oc;s.data=t,s.bounds=t.bounds,s.bounds.left-=2,s.bounds.top-=2,s.bounds.right+=2,s.bounds.bottom+=2,this.nodes[t.id.value]=s,this._insert(s)}updateCollider(t){var s;const r=this.nodes[t.id.value];if(!r)return!1;const l=t.bounds;if(!this.worldBounds.contains(l))return D.getInstance().warn("Collider with id "+t.id.value+" is outside the world bounds and will no longer be tracked for physics"),this.untrackCollider(t),!1;if(r.bounds.contains(l))return!1;if(this._remove(r),l.left-=Dt.boundsPadding,l.top-=Dt.boundsPadding,l.right+=Dt.boundsPadding,l.bottom+=Dt.boundsPadding,t.owner){const h=(s=t.owner)===null||s===void 0?void 0:s.get(ae);if(h){const g=h.vel.x*32/1e3*Dt.dynamicTreeVelocityMultiplier,_=h.vel.y*32/1e3*Dt.dynamicTreeVelocityMultiplier;g<0?l.left+=g:l.right+=g,_<0?l.top+=_:l.bottom+=_}}return r.bounds=l,this._insert(r),!0}untrackCollider(t){const s=this.nodes[t.id.value];s&&(this._remove(s),this.nodes[t.id.value]=null,delete this.nodes[t.id.value])}_balance(t){if(t===null)throw new Error("Cannot balance at null node");if(t.isLeaf()||t.height<2)return t;const s=t.left,r=t.right,l=t,h=s,g=r,_=s.left,b=s.right,S=r.left,A=r.right,I=g.height-h.height;if(I>1)return g.left=l,g.parent=l.parent,l.parent=g,g.parent?g.parent.left===l?g.parent.left=g:g.parent.right=g:this.root=g,S.height>A.height?(g.right=S,l.right=A,A.parent=l,l.bounds=h.bounds.combine(A.bounds),g.bounds=l.bounds.combine(S.bounds),l.height=1+Math.max(h.height,A.height),g.height=1+Math.max(l.height,S.height)):(g.right=A,l.right=S,S.parent=l,l.bounds=h.bounds.combine(S.bounds),g.bounds=l.bounds.combine(A.bounds),l.height=1+Math.max(h.height,S.height),g.height=1+Math.max(l.height,A.height)),g;if(I<-1){if(h.left=l,h.parent=l.parent,l.parent=h,h.parent)if(h.parent.left===l)h.parent.left=h;else{if(h.parent.right!==l)throw"Error rotating Dynamic Tree";h.parent.right=h}else this.root=h;return _.height>b.height?(h.right=_,l.left=b,b.parent=l,l.bounds=g.bounds.combine(b.bounds),h.bounds=l.bounds.combine(_.bounds),l.height=1+Math.max(g.height,b.height),h.height=1+Math.max(l.height,_.height)):(h.right=b,l.left=_,_.parent=l,l.bounds=g.bounds.combine(_.bounds),h.bounds=l.bounds.combine(b.bounds),l.height=1+Math.max(g.height,_.height),h.height=1+Math.max(l.height,b.height)),h}return t}getHeight(){return this.root===null?0:this.root.height}query(t,s){const r=t.bounds,l=h=>{if(h&&h.bounds.overlaps(r))if(h.isLeaf()&&h.data!==t){if(s.call(t,h.data))return!0}else return l(h.left)||l(h.right);return!1};l(this.root)}rayCastQuery(t,s=1/0,r){const l=h=>{if(h&&h.bounds.rayCast(t,s))if(h.isLeaf()){if(r.call(t,h.data))return!0}else return l(h.left)||l(h.right);return!1};l(this.root)}getNodes(){const t=s=>s?[s].concat(t(s.left),t(s.right)):[];return t(this.root)}debug(t){const s=r=>{r&&(r.isLeaf()?r.bounds.draw(t,ht.Green):r.bounds.draw(t,ht.White),r.left&&s(r.left),r.right&&s(r.right))};s(this.root)}}class Gi{constructor(t,s){this.pos=t,this.dir=s.normalize()}intersect(t){const s=t.begin.sub(this.pos);if(this.dir.cross(t.getSlope())===0&&s.cross(this.dir)!==0)return-1;const r=this.dir.cross(t.getSlope());if(r===0)return-1;const l=s.cross(t.getSlope())/r;if(l>=0){const h=s.cross(this.dir)/r/t.getLength();if(h>=0&&h<=1)return l}return-1}intersectPoint(t){const s=this.intersect(t);return s<0?null:this.getPoint(s)}getPoint(t){return this.pos.add(this.dir.scale(t))}}class lc{constructor(){this._dynamicCollisionTree=new ac,this._pairs=new Set,this._collisionPairCache=[],this._colliders=[]}getColliders(){return this._colliders}rayCast(t,s){var r,l,h;const g=[],_=(r=s==null?void 0:s.maxDistance)!==null&&r!==void 0?r:1/0,b=(l=s==null?void 0:s.collisionGroup)!==null&&l!==void 0?l:ri.All,S=(h=s==null?void 0:s.searchAllColliders)!==null&&h!==void 0?h:!1;return this._dynamicCollisionTree.rayCastQuery(t,_,A=>{var I;const H=A.owner.get(ae);if(b.mask!==ri.All.mask&&((I=H==null?void 0:H.group)===null||I===void 0?void 0:I.mask)!==b.mask)return!1;const tt=A.rayCast(t,_);return!!(tt&&(g.push({distance:tt.sub(t.pos).distance(),point:tt,collider:A,body:H}),!S))}),g}track(t){if(!t){D.getInstance().warn("Cannot track null collider");return}if(t instanceof us){const s=t.getColliders();for(const r of s)r.owner=t.owner,this._colliders.push(r),this._dynamicCollisionTree.trackCollider(r)}else this._colliders.push(t),this._dynamicCollisionTree.trackCollider(t)}untrack(t){if(!t){D.getInstance().warn("Cannot untrack a null collider");return}if(t instanceof us){const s=t.getColliders();for(const r of s){const l=this._colliders.indexOf(r);l!==-1&&this._colliders.splice(l,1),this._dynamicCollisionTree.untrackCollider(r)}}else{const s=this._colliders.indexOf(t);s!==-1&&this._colliders.splice(s,1),this._dynamicCollisionTree.untrackCollider(t)}}_pairExists(t,s){const r=Us.calculatePairHash(t.id,s.id);return this._pairs.has(r)}broadphase(t,s,r){const l=s/1e3,h=t.filter(_=>{var b,S;const A=(b=_.owner)===null||b===void 0?void 0:b.get(ae);return((S=_.owner)===null||S===void 0?void 0:S.active)&&A.collisionType!==Xt.PreventCollision});this._collisionPairCache=[],this._pairs.clear();let g;for(let _=0,b=h.length;_<b;_++)g=h[_],this._dynamicCollisionTree.query(g,S=>{if(!this._pairExists(g,S)&&Us.canCollide(g,S)){const A=new Us(g,S);this._pairs.add(A.id),this._collisionPairCache.push(A)}return!1});if(r&&(r.physics.pairs=this._collisionPairCache.length),Dt.checkForFastBodies)for(const _ of h){const b=_.owner.get(ae);if(b.collisionType!==Xt.Active)continue;const S=b.vel.size*l+b.acc.size*.5*l*l,A=Math.min(_.bounds.height,_.bounds.width);if(Dt.disableMinimumSpeedForFastBody||S>A/2){r&&r.physics.fastBodies++;const I=b.globalPos.sub(b.oldPos),V=_.center,H=_.getFurthestPoint(b.vel),tt=H.sub(I),gt=new Gi(tt,b.vel);gt.pos=gt.pos.add(gt.dir.scale(-2*Dt.surfaceEpsilon));let pt,J=new z(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(gt,S+Dt.surfaceEpsilon*2,K=>{if(!this._pairExists(_,K)&&Us.canCollide(_,K)){const wt=K.rayCast(gt,S+Dt.surfaceEpsilon*10);if(wt){const Ct=wt.sub(tt);Ct.size<J.size&&(J=Ct,pt=K)}}return!1}),pt&&z.isValid(J)){const K=new Us(_,pt);this._pairs.has(K.id)||(this._pairs.add(K.id),this._collisionPairCache.push(K));const wt=V.sub(H);b.globalPos=tt.add(wt).add(J).add(gt.dir.scale(10*Dt.surfaceEpsilon)),_.update(b.transform.get()),r&&r.physics.fastBodyCollisions++}}}return this._collisionPairCache}narrowphase(t,s){let r=[];for(let l=0;l<t.length;l++){const h=t[l].collide();if(r=r.concat(h),s&&h.length>0)for(const g of h)s.physics.contacts.set(g.id,g)}return s&&(s.physics.collisions+=r.length),r}update(t){let s=0;const r=t.length;for(let l=0;l<r;l++)this._dynamicCollisionTree.updateCollider(t[l])&&s++;return s}debug(t){this._dynamicCollisionTree.debug(t)}}class dn{constructor(){this.id=f("collider",dn._ID++),this.__compositeColliderId=null,this.events=new m}touching(t){return!!this.collide(t)}}dn._ID=0;class us extends dn{constructor(t){super(),this._collisionProcessor=new lc,this._dynamicAABBTree=new ac,this._colliders=[];for(const s of t)this.addCollider(s)}clearColliders(){this._colliders=[]}addCollider(t){t.events.pipe(this.events),t.__compositeColliderId=this.id,this._colliders.push(t),this._collisionProcessor.track(t),this._dynamicAABBTree.trackCollider(t)}removeCollider(t){t.events.pipe(this.events),t.__compositeColliderId=null,Hi(t,this._colliders),this._collisionProcessor.untrack(t),this._dynamicAABBTree.untrackCollider(t)}getColliders(){return this._colliders}get worldPos(){var t,s;return(s=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&s!==void 0?s:z.Zero}get center(){var t,s;return(s=(t=this._transform)===null||t===void 0?void 0:t.pos)!==null&&s!==void 0?s:z.Zero}get bounds(){var t,s;const r=this.getColliders();return r.reduce((h,g)=>h.combine(g.bounds),(s=(t=r[0])===null||t===void 0?void 0:t.bounds)!==null&&s!==void 0?s:new Wt().translate(this.worldPos))}get localBounds(){var t,s;const r=this.getColliders();return r.reduce((h,g)=>h.combine(g.localBounds),(s=(t=r[0])===null||t===void 0?void 0:t.localBounds)!==null&&s!==void 0?s:new Wt)}get axes(){const t=this.getColliders();let s=[];for(const r of t)s=s.concat(r.axes);return s}getFurthestPoint(t){const s=this.getColliders(),r=[];for(const g of s)r.push(g.getFurthestPoint(t));let l=r[0],h=-Number.MAX_VALUE;for(const g of r){const _=g.dot(t);_>h&&(l=g,h=_)}return l}getInertia(t){const s=this.getColliders();let r=0;for(const l of s)r+=l.getInertia(t);return r}collide(t){let s=[t];t instanceof us&&(s=t.getColliders());const r=[];for(const h of s)this._dynamicAABBTree.query(h,g=>(r.push(new Us(h,g)),!1));let l=[];for(const h of r)l=l.concat(h.collide());return l}getClosestLineBetween(t){const s=this.getColliders(),r=[];if(t instanceof us){const l=t.getColliders();for(const h of s)for(const g of l){const _=h.getClosestLineBetween(g);_&&r.push(_)}}else for(const l of s){const h=t.getClosestLineBetween(l);h&&r.push(h)}if(r.length){let l=r[0].getLength(),h=r[0];for(const g of r){const _=g.getLength();_<l&&(l=_,h=g)}return h}return null}contains(t){const s=this.getColliders();for(const r of s)if(r.contains(t))return!0;return!1}rayCast(t,s){const r=this.getColliders(),l=[];for(const h of r){const g=h.rayCast(t,s);g&&l.push(g)}if(l.length){let h=l[0],g=h.dot(t.dir);for(const _ of l){const b=t.dir.dot(_);b<g&&(h=_,g=b)}return h}return null}project(t){const s=this.getColliders(),r=[];for(const l of s){const h=l.project(t);h&&r.push(h)}if(r.length){const l=new to(r[0].min,r[0].max);for(const h of r)l.min=Math.min(h.min,l.min),l.max=Math.max(h.max,l.max);return l}return null}update(t){if(t){const s=this.getColliders();for(const r of s)r.owner=this.owner,r.update(t)}}debug(t,s){const r=this.getColliders();for(const l of r)l.debug(t,s)}clone(){return new us(this._colliders.map(t=>t.clone()))}}class gs{constructor(t,s){this.begin=t,this.end=s}get slope(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)}get intercept(){return this.begin.y-this.slope*this.begin.x}normal(){return this._normal?this._normal:this._normal=this.end.sub(this.begin).normal()}dir(){return this._dir?this._dir:this._dir=this.end.sub(this.begin)}getPoints(){return[this.begin,this.end]}getSlope(){if(this._slope)return this._slope;const t=this.begin,s=this.end,r=t.distance(s);return this._slope=s.sub(t).scale(1/r)}getEdge(){const t=this.begin;return this.end.sub(t)}getLength(){if(this._length)return this._length;const t=this.begin,s=this.end,r=t.distance(s);return this._length=r}get midpoint(){return this.begin.add(this.end).scale(.5)}flip(){return new gs(this.end,this.begin)}below(t){return(this.end.x-this.begin.x)*(t.y-this.begin.y)-(this.end.y-this.begin.y)*(t.x-this.begin.x)>=0}clip(t,s){let r=t;r=r.normalize();const l=r.dot(this.begin)-s,h=r.dot(this.end)-s,g=[];if(l<=0&&g.push(this.begin),h<=0&&g.push(this.end),l*h<0){const _=l/(l-h);g.push(this.begin.add(this.end.sub(this.begin).scale(_)))}return g.length!==2?null:new gs(g[0],g[1])}distanceToPoint(t,s=!1){const r=t.x,l=t.y,h=this.getLength(),g=this.end.y-this.begin.y,_=this.end.x-this.begin.x,b=(g*r-_*l+this.end.x*this.begin.y-this.end.y*this.begin.x)/h;return s?b:Math.abs(b)}findVectorToPoint(t){const s=this.begin.sub(t),r=this.getSlope();return s.sub(r.scale(s.dot(r)))}findPoint(t=null,s=null){const r=this.slope,l=this.intercept;if(t!==null)return new z(t,r*t+l);if(s!==null)return new z((s-l)/r,s);throw new Error("You must provide an X or a Y value")}hasPoint(){let t,s=0;if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t=new z(arguments[0],arguments[1]),s=arguments[2]||0;else if(arguments[0]instanceof z)t=arguments[0],s=arguments[1]||0;else throw"Could not determine the arguments for Vector.hasPoint";const r=t.x-this.begin.x,l=t.y-this.begin.y,h=this.end.x-this.begin.x,g=this.end.y-this.begin.y,_=r*g-l*h;return Math.abs(_)>s?!1:Math.abs(h)>=Math.abs(g)?h>0?this.begin.x<=t.x&&t.x<=this.end.x:this.end.x<=t.x&&t.x<=this.begin.x:g>0?this.begin.y<=t.y&&t.y<=this.end.y:this.end.y<=t.y&&t.y<=this.begin.y}}function oa(d,t,s,r){const l=d.sub(s),h=t.dot(t),g=t.dot(r),_=r.dot(r),b=t.dot(l),S=r.dot(l),A=h*_-g*g;let I=A,V=A;if(A===0||A<=.01){const gt=b/g;return new gs(d,s.add(r.scale(gt)))}let H=g*S-_*b,tt=h*S-g*b;return H<0?(H=0,tt=S,V=_):H>I&&(H=I,tt=S+g,V=_),tt<0?(tt=0,-b<0?H=0:-b>h?H=I:(H=-b,I=h)):tt>V&&(tt=V,-b+g<0?H=0:-b+g>h?H=I:(H=-b+g,I=h)),H=Math.abs(H)<.001?0:H/I,tt=Math.abs(tt)<.001?0:tt/V,new gs(d.add(t.scale(H)),s.add(r.scale(tt)))}const xi={PolygonPolygonClosestLine(d,t){const s=t.worldPos,r=s.sub(d.worldPos),l=r.negate(),h=new Gi(d.worldPos,r),g=new Gi(s,l),_=d.rayCast(h).add(h.dir.scale(.1)),b=t.rayCast(g).add(g.dir.scale(.1)),S=d.getClosestFace(_),A=t.getClosestFace(b),I=S.face.begin,V=S.face.getEdge(),H=A.face.begin,tt=A.face.getEdge();return oa(I,V,H,tt)},PolygonEdgeClosestLine(d,t){const r=t.worldPos.sub(d.worldPos),l=new Gi(d.worldPos,r),h=d.rayCast(l).add(l.dir.scale(.1)),g=d.getClosestFace(h),_=g.face.begin,b=g.face.getEdge(),S=t.asLine(),A=S.begin,I=S.getEdge();return oa(_,b,A,I)},PolygonCircleClosestLine(d,t){const s=t.worldPos,r=s.sub(d.worldPos),l=new Gi(d.worldPos,r.normalize()),h=d.rayCast(l).add(l.dir.scale(.1)),g=d.getClosestFace(h),_=g.face.begin,b=g.face.getEdge();let S=(b.x*(s.x-_.x)+b.y*(s.y-_.y))/(b.x*b.x+b.y*b.y);S>1?S=1:S<0&&(S=0);const A=Math.sqrt(Math.pow(_.x+b.x*S-s.x,2)+Math.pow(_.y+b.y*S-s.y,2))-t.radius,I=(_.x+b.x*S-s.x)*t.radius/(t.radius+A),V=(_.y+b.y*S-s.y)*t.radius/(t.radius+A);return new gs(b.scale(S).add(_),new z(s.x+I,s.y+V))},CircleCircleClosestLine(d,t){const r=t.worldPos.sub(d.worldPos),h=d.worldPos.sub(t.worldPos),g=new Gi(d.worldPos,r),_=new Gi(t.worldPos,h),b=d.rayCast(g),S=t.rayCast(_);return new gs(b,S)},CircleEdgeClosestLine(d,t){const s=d.worldPos,r=t.asLine(),l=r.begin,h=r.getEdge(),g=l,_=h;let b=(_.x*(s.x-g.x)+_.y*(s.y-g.y))/(_.x*_.x+_.y*_.y);b>1?b=1:b<0&&(b=0);const S=Math.sqrt(Math.pow(g.x+_.x*b-s.x,2)+Math.pow(g.y+_.y*b-s.y,2))-d.radius,A=(g.x+_.x*b-s.x)*d.radius/(d.radius+S),I=(g.y+_.y*b-s.y)*d.radius/(d.radius+S);return new gs(_.scale(b).add(g),new z(s.x+A,s.y+I))},EdgeEdgeClosestLine(d,t){const s=d.asLine(),r=s.begin,l=s.getEdge(),h=r,g=l,_=t.asLine(),b=_.begin,S=_.getEdge();return oa(h,g,b,S)}};class ns extends dn{get worldPos(){return this._globalMatrix.getPosition()}get radius(){var t;const s=this._transform,r=(t=s==null?void 0:s.globalScale)!==null&&t!==void 0?t:z.One;return this._naturalRadius*Math.min(r.x,r.y)}set radius(t){var s;const r=this._transform,l=(s=r==null?void 0:r.globalScale)!==null&&s!==void 0?s:z.One;this._naturalRadius=t/Math.min(l.x,l.y)}constructor(t){super(),this.offset=z.Zero,this._globalMatrix=Ve.identity(),this.offset=t.offset||z.Zero,this.radius=t.radius||0,this._globalMatrix.translate(this.offset.x,this.offset.y)}clone(){return new ns({offset:this.offset.clone(),radius:this.radius})}get center(){return this._globalMatrix.getPosition()}contains(t){var s,r;return((r=(s=this._transform)===null||s===void 0?void 0:s.pos)!==null&&r!==void 0?r:this.offset).distance(t)<=this.radius}rayCast(t,s=1/0){const r=this.center,l=t.dir,h=t.pos,g=Math.sqrt(Math.pow(l.dot(h.sub(r)),2)-Math.pow(h.sub(r).distance(),2)+Math.pow(this.radius,2));if(g<0)return null;{let _=0;if(g===0)return _=-l.dot(h.sub(r)),_>0&&_<s?t.getPoint(_):null;{const b=-l.dot(h.sub(r))+g,S=-l.dot(h.sub(r))-g,A=[];b>=0&&A.push(b),S>=0&&A.push(S);const I=Math.min(...A);return I<=s?t.getPoint(I):null}}}getClosestLineBetween(t){if(t instanceof ns)return xi.CircleCircleClosestLine(this,t);if(t instanceof Ze)return xi.PolygonCircleClosestLine(t,this).flip();if(t instanceof As)return xi.CircleEdgeClosestLine(this,t).flip();throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof ns)return oi.CollideCircleCircle(this,t);if(t instanceof Ze)return oi.CollideCirclePolygon(this,t);if(t instanceof As)return oi.CollideCircleEdge(this,t);throw new Error(`Circle could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){return this.center.add(t.normalize().scale(this.radius))}getFurthestLocalPoint(t){return t.normalize().scale(this.radius)}get bounds(){var t,s,r;const l=this._transform,h=(t=l==null?void 0:l.globalScale)!==null&&t!==void 0?t:z.One,g=(s=l==null?void 0:l.globalRotation)!==null&&s!==void 0?s:0,_=(r=l==null?void 0:l.globalPos)!==null&&r!==void 0?r:z.Zero;return new Wt(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius).rotate(g).scale(h).translate(_)}get localBounds(){return new Wt(this.offset.x-this._naturalRadius,this.offset.y-this._naturalRadius,this.offset.x+this._naturalRadius,this.offset.y+this._naturalRadius)}get axes(){return[]}getInertia(t){return t*this.radius*this.radius/2}update(t){var s;this._transform=t,((s=t.matrix)!==null&&s!==void 0?s:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const s=[],l=this.center.dot(t);return s.push(l),s.push(l+this.radius),s.push(l-this.radius),new to(Math.min.apply(Math,s),Math.max.apply(Math,s))}debug(t,s){var r,l,h,g;const _=this._transform,b=(r=_==null?void 0:_.globalScale)!==null&&r!==void 0?r:z.One,S=(l=_==null?void 0:_.globalRotation)!==null&&l!==void 0?l:0,A=(h=_==null?void 0:_.globalPos)!==null&&h!==void 0?h:z.Zero;t.save(),t.translate(A.x,A.y),t.rotate(S),t.scale(b.x,b.y),t.drawCircle((g=this.offset)!==null&&g!==void 0?g:z.Zero,this._naturalRadius,ht.Transparent,s,2),t.restore()}}class Vn{constructor(t,s,r,l,h,g,_,b){var S,A;this._canceled=!1,this.colliderA=t,this.colliderB=s,this.mtv=r,this.normal=l,this.tangent=h,this.points=g,this.localPoints=_,this.info=b,this.id=Us.calculatePairHash(t.id,s.id),(t.__compositeColliderId||s.__compositeColliderId)&&(this.id+="|"+Us.calculatePairHash((S=t.__compositeColliderId)!==null&&S!==void 0?S:t.id,(A=s.__compositeColliderId)!==null&&A!==void 0?A:s.id))}matchAwake(){const t=this.colliderA.owner.get(ae),s=this.colliderB.owner.get(ae);t&&s&&t.sleeping!==s.sleeping&&(t.sleeping&&t.collisionType!==Xt.Fixed&&s.sleepMotion>=Dt.wakeThreshold&&t.setSleeping(!1),s.sleeping&&s.collisionType!==Xt.Fixed&&t.sleepMotion>=Dt.wakeThreshold&&s.setSleeping(!1))}isCanceled(){return this._canceled}cancel(){this._canceled=!0}}class cc{static findPolygonPolygonSeparation(t,s){let r=-Number.MAX_VALUE,l=null,h=null,g=-1,_=null;const b=t.getSides(),S=t.getLocalSides();for(let A=0;A<b.length;A++){const I=b[A],V=I.normal(),H=s.getFurthestPoint(V.negate()),tt=I.distanceToPoint(H,!0);tt>r&&(r=tt,l=I,h=V,g=A,_=H)}return{collider:t,separation:h?r:99,axis:h,side:l,localSide:S[g],sideId:g,point:_,localPoint:h?s.getFurthestLocalPoint(h.negate()):null}}static findCirclePolygonSeparation(t,s){const r=s.axes,h=s.center.sub(t.worldPos),g=s.getFurthestPoint(h.negate());r.push(g.sub(t.worldPos).normalize());let _=Number.MAX_VALUE,b=null,S=-1;for(let A=0;A<r.length;A++){const I=s.project(r[A]),V=t.project(r[A]),H=I.getOverlap(V);if(H<=0)return null;H<_&&(_=H,b=r[A],S=A)}return S<0?null:b.normalize().scale(_)}}const oi={CollideCircleCircle(d,t){const s=d.worldPos,r=t.worldPos,l=d.radius+t.radius,h=s.distance(r);if(h>l)return[];const g=l-h,_=r.sub(s).normalize(),b=_.perpendicular(),S=_.scale(g),A=d.getFurthestPoint(_),I=d.getFurthestLocalPoint(_),V={collider:d,separation:g,axis:_,point:A};return[new Vn(d,t,S,_,b,[A],[I],V)]},CollideCirclePolygon(d,t){var s,r;let l=cc.findCirclePolygonSeparation(d,t);if(!l)return[];l=l.dot(t.center.sub(d.center))<0?l.negate():l;const g=d.getFurthestPoint(l),b=((r=(s=d.owner)===null||s===void 0?void 0:s.get(kt))!==null&&r!==void 0?r:new kt).applyInverse(g),S=l.normalize(),A={collider:d,separation:-l.size,axis:S,point:g,localPoint:b,side:t.findSide(S.negate()),localSide:t.findLocalSide(S.negate())};return[new Vn(d,t,l,S,S.perpendicular(),[g],[b],A)]},CollideCircleEdge(d,t){const s=d.center,r=t.asLine(),l=r.end.sub(r.begin),h=l.dot(r.end.sub(s)),g=l.dot(s.sub(r.begin)),_=t.asLine(),b=t.asLocalLine();if(g<=0){const J=r.begin.sub(s),K=J.dot(J);if(K>d.radius*d.radius)return[];const wt=J.normalize(),Ct=d.radius-Math.sqrt(K),Nt={collider:d,separation:Ct,axis:wt,point:_.begin,side:_,localSide:b};return[new Vn(d,t,wt.scale(Ct),wt,wt.perpendicular(),[_.begin],[b.begin],Nt)]}if(h<=0){const J=r.end.sub(s),K=J.dot(J);if(K>d.radius*d.radius)return[];const wt=J.normalize(),Ct=d.radius-Math.sqrt(K),Nt={collider:d,separation:Ct,axis:wt,point:_.end,side:_,localSide:b};return[new Vn(d,t,wt.scale(Ct),wt,wt.perpendicular(),[_.end],[b.end],Nt)]}const S=l.dot(l),A=r.begin.scale(h).add(r.end.scale(g)).scale(1/S),I=s.sub(A),V=I.dot(I);if(V>d.radius*d.radius)return[];let H=l.perpendicular();H.dot(s.sub(r.begin))<0&&(H.x=-H.x,H.y=-H.y),H=H.normalize();const tt=d.radius-Math.sqrt(V),gt=H.scale(tt),pt={collider:d,separation:tt,axis:H,point:A,side:_,localSide:b};return[new Vn(d,t,gt,H.negate(),H.negate().perpendicular(),[A],[A.sub(t.worldPos)],pt)]},CollideEdgeEdge(){return[]},CollidePolygonEdge(d,t){var s;const r=d.center,h=t.center.sub(r).normalize(),g=new Ze({points:[t.begin,t.end,t.end.add(h.scale(100)),t.begin.add(h.scale(100))],offset:t.offset});g.owner=t.owner,((s=t.owner)===null||s===void 0?void 0:s.get(kt))&&g.update(t.owner.get(kt).get());const b=this.CollidePolygonPolygon(d,g);return b.length&&(b[0].colliderB=t,b[0].id=Us.calculatePairHash(d.id,t.id)),b},CollidePolygonPolygon(d,t){var s,r,l,h;const g=cc.findPolygonPolygonSeparation(d,t);if(g.separation>0)return[];const _=cc.findPolygonPolygonSeparation(t,d);if(_.separation>0)return[];const b=g.separation>_.separation?g:_,A=(b.collider===d?t:d).findSide(b.axis.negate()),I=b.side,V=I.dir().normalize(),H=A.clip(V.negate(),-V.dot(I.begin));let tt=null;if(H&&(tt=H.clip(V,V.dot(I.end))),tt){const gt=tt.getPoints().filter(wt=>I.below(wt));let pt=b.axis,J=pt.perpendicular();t.center.sub(d.center).dot(pt)<0&&(pt=pt.negate(),J=pt.perpendicular());let K=[];if(b.collider===d){const wt=(r=(s=t.owner)===null||s===void 0?void 0:s.get(kt))!==null&&r!==void 0?r:new kt;K=gt.map(Ct=>wt.applyInverse(Ct))}else{const wt=(h=(l=d.owner)===null||l===void 0?void 0:l.get(kt))!==null&&h!==void 0?h:new kt;K=gt.map(Ct=>wt.applyInverse(Ct))}return[new Vn(d,t,pt.scale(-b.separation),pt,J,gt,K,b)]}return[]},FindContactSeparation(d,t){var s,r,l,h;const g=d.colliderA,_=(r=(s=d.colliderA.owner)===null||s===void 0?void 0:s.get(kt))!==null&&r!==void 0?r:new kt,b=d.colliderB,S=(h=(l=d.colliderB.owner)===null||l===void 0?void 0:l.get(kt))!==null&&h!==void 0?h:new kt;if(g instanceof ns&&b instanceof ns){const A=g.radius+b.radius,I=_.pos.distance(S.pos);return-(A-I)}if(g instanceof Ze&&b instanceof Ze&&d.info.localSide){let A,I;return d.info.collider===g?(A=new gs(_.apply(d.info.localSide.begin),_.apply(d.info.localSide.end)),I=S.apply(t)):(A=new gs(S.apply(d.info.localSide.begin),S.apply(d.info.localSide.end)),I=_.apply(t)),A.distanceToPoint(I,!0)}if(g instanceof Ze&&b instanceof ns||b instanceof Ze&&g instanceof ns){const A=_.apply(t);if(d.info.side)return d.info.side.distanceToPoint(A,!0)}if(g instanceof As&&b instanceof Ze||b instanceof As&&g instanceof Ze){let A;if(d.info.collider===g?A=S.apply(t):A=_.apply(t),d.info.side)return d.info.side.distanceToPoint(A,!0)}if(g instanceof ns&&b instanceof As||b instanceof ns&&g instanceof As){const A=S.apply(t);let I;g instanceof ns&&(I=g.getFurthestPoint(d.normal));const V=A.distance(I);if(d.info.side)return V>0?-V:0}return 0}};class As extends dn{constructor(t){var s;super(),this._globalMatrix=Ve.identity(),this.begin=t.begin||z.Zero,this.end=t.end||z.Zero,this.offset=(s=t.offset)!==null&&s!==void 0?s:z.Zero}clone(){return new As({begin:this.begin.clone(),end:this.end.clone()})}get worldPos(){var t;const s=this._transform;return(t=s==null?void 0:s.globalPos.add(this.offset))!==null&&t!==void 0?t:this.offset}get center(){const t=this._getTransformedBegin(),s=this._getTransformedEnd();return t.average(s)}_getTransformedBegin(){return this._globalMatrix.multiply(this.begin)}_getTransformedEnd(){return this._globalMatrix.multiply(this.end)}getSlope(){const t=this._getTransformedBegin(),s=this._getTransformedEnd(),r=t.distance(s);return s.sub(t).scale(1/r)}getLength(){const t=this._getTransformedBegin(),s=this._getTransformedEnd();return t.distance(s)}contains(){return!1}rayCast(t,s=1/0){const r=this._getTransformedBegin().sub(t.pos);if(t.dir.cross(this.getSlope())===0&&r.cross(t.dir)!==0)return null;const l=t.dir.cross(this.getSlope());if(l===0)return null;const h=r.cross(this.getSlope())/l;if(h>=0&&h<=s){const g=r.cross(t.dir)/l/this.getLength();if(g>=0&&g<=1)return t.getPoint(h)}return null}getClosestLineBetween(t){if(t instanceof ns)return xi.CircleEdgeClosestLine(t,this);if(t instanceof Ze)return xi.PolygonEdgeClosestLine(t,this).flip();if(t instanceof As)return xi.EdgeEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof ns)return oi.CollideCircleEdge(t,this);if(t instanceof Ze)return oi.CollidePolygonEdge(t,this);if(t instanceof As)return oi.CollideEdgeEdge();throw new Error(`Edge could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const s=this._getTransformedBegin(),r=this._getTransformedEnd();return t.dot(s)>0?s:r}_boundsFromBeginEnd(t,s,r=10){return new Wt(Math.min(t.x,s.x)-r,Math.min(t.y,s.y)-r,Math.max(t.x,s.x)+r,Math.max(t.y,s.y)+r)}get bounds(){const t=this._getTransformedBegin(),s=this._getTransformedEnd();return this._boundsFromBeginEnd(t,s)}get localBounds(){return this._boundsFromBeginEnd(this.begin,this.end)}asLine(){return new gs(this._getTransformedBegin(),this._getTransformedEnd())}asLocalLine(){return new gs(this.begin,this.end)}get axes(){const s=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),r=[];return r.push(s),r.push(s.negate()),r.push(s.normal()),r.push(s.normal().negate()),r}getInertia(t){const s=this.end.sub(this.begin).distance()/2;return t*s*s}update(t){var s;this._transform=t,((s=t.matrix)!==null&&s!==void 0?s:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y)}project(t){const s=[],r=[this._getTransformedBegin(),this._getTransformedEnd()],l=r.length;for(let h=0;h<l;h++)s.push(r[h].dot(t));return new to(Math.min.apply(Math,s),Math.max.apply(Math,s))}debug(t,s){const r=this._getTransformedBegin(),l=this._getTransformedEnd();t.drawLine(r,l,s,2),t.drawCircle(r,2,s),t.drawCircle(l,2,s)}}class Ze extends dn{set points(t){this._localBoundsDirty=!0,this._localSidesDirty=!0,this._sidesDirty=!0,this._points=t}get points(){return this._points}constructor(t){var s,r;super(),this._logger=D.getInstance(),this._transformedPoints=[],this._sides=[],this._localSides=[],this._globalMatrix=Ve.identity(),this._transformedPointsDirty=!0,this._sidesDirty=!0,this._localSidesDirty=!0,this._localBoundsDirty=!0,this.offset=(s=t.offset)!==null&&s!==void 0?s:z.Zero,this._globalMatrix.translate(this.offset.x,this.offset.y),this.points=(r=t.points)!==null&&r!==void 0?r:[],this._isCounterClockwiseWinding(this.points)||this.points.reverse(),this.isConvex()||this._logger.warn("Excalibur only supports convex polygon colliders and will not behave properly.Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles"),this._calculateTransformation()}_isCounterClockwiseWinding(t){let s=0;for(let r=0;r<t.length;r++)s+=(t[(r+1)%t.length].x-t[r].x)*(t[(r+1)%t.length].y+t[r].y);return s<0}isConvex(){if(this.points.length<3)return!1;let t=this.points[this.points.length-2],s=this.points[this.points.length-1],r=Math.atan2(s.y-t.y,s.x-t.x),l=0,h=0,g=0;for(const[_,b]of this.points.entries()){if(t=s,l=r,s=b,r=Math.atan2(s.y-t.y,s.x-t.x),t.equals(s))return!1;let S=r-l;if(S<=-Math.PI?S+=Math.PI*2:S>Math.PI&&(S-=Math.PI*2),_===0){if(S===0)return!1;h=S>0?1:-1}else if(h*S<=0)return!1;g+=S}return Math.abs(Math.round(g/(Math.PI*2)))===1}tessellate(){const t=[];for(let s=1;s<this.points.length-2;s++)t.push([this.points[0],this.points[s+1],this.points[s+2]]);return t.push([this.points[0],this.points[1],this.points[2]]),new us(t.map(s=>rs.Polygon(s)))}triangulate(){if(this.points.length<3)throw Error("Invalid polygon");function t(g,_){return g>=_.length?_[g%_.length]:g<0?_[g%_.length+_.length]:_[g]}function s(g,_,b,S){const A=b.sub(_),I=S.sub(b),V=_.sub(S),H=g.sub(_),tt=g.sub(b),gt=g.sub(S),pt=A.cross(H),J=I.cross(tt),K=V.cross(gt);return!(pt>0||J>0||K>0)}const r=[],l=[...this.points],h=bi(0,this.points.length-1);for(;h.length>3;)for(let g=0;g<h.length;g++){const _=h[g],b=t(g-1,h),S=t(g+1,h),A=l[_],I=l[b],V=l[S],H=I.sub(A);if(!(V.sub(A).cross(H)>0))continue;let pt=!0;for(let J=0;J<h.length;J++){const K=h[J];if(K===_||K===b||K===S)continue;const wt=l[K];if(s(wt,I,A,V)){pt=!1;break}}if(pt){r.push([I,A,V]),h.splice(g,1);break}}return r.push([l[h[0]],l[h[1]],l[h[2]]]),new us(r.map(g=>rs.Polygon(g)))}clone(){return new Ze({offset:this.offset.clone(),points:this.points.map(t=>t.clone())})}get worldPos(){return this._transform?this._transform.pos.add(this.offset):this.offset}get center(){return this.bounds.center}_calculateTransformation(){const t=this.points,s=t.length;this._transformedPoints.length=0;for(let r=0;r<s;r++)this._transformedPoints[r]=this._globalMatrix.multiply(t[r].clone())}getTransformedPoints(){return this._transformedPointsDirty&&(this._calculateTransformation(),this._transformedPointsDirty=!1),this._transformedPoints}getSides(){if(this._sidesDirty){const t=[],s=this.getTransformedPoints(),r=s.length;for(let l=0;l<r;l++)t.push(new gs(s[l],s[(l+1)%r]));this._sides=t,this._sidesDirty=!1}return this._sides}getLocalSides(){if(this._localSidesDirty){const t=[],s=this.points,r=s.length;for(let l=0;l<r;l++)t.push(new gs(s[l],s[(l+1)%r]));this._localSides=t,this._localSidesDirty=!1}return this._localSides}findSide(t){const s=this.getSides();let r=s[0],l=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=s[h],b=g.normal().dot(t);b>l&&(r=g,l=b)}return r}findLocalSide(t){const s=this.getLocalSides();let r=s[0],l=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=s[h],b=g.normal().dot(t);b>l&&(r=g,l=b)}return r}get axes(){const t=[],s=this.getSides();for(let r=0;r<s.length;r++)t.push(s[r].normal());return t}update(t){var s;t&&(this._transform=t,this._transformedPointsDirty=!0,this._sidesDirty=!0,((s=t.matrix)!==null&&s!==void 0?s:this._globalMatrix).clone(this._globalMatrix),this._globalMatrix.translate(this.offset.x,this.offset.y))}contains(t){const s=new Gi(t,new z(1,0));return this.getSides().reduce(function(l,h){return s.intersect(h)>=0?l+1:l},0)%2!==0}getClosestLineBetween(t){if(t instanceof ns)return xi.PolygonCircleClosestLine(this,t);if(t instanceof Ze)return xi.PolygonPolygonClosestLine(this,t);if(t instanceof As)return xi.PolygonEdgeClosestLine(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}collide(t){if(t instanceof ns)return oi.CollideCirclePolygon(t,this);if(t instanceof Ze)return oi.CollidePolygonPolygon(this,t);if(t instanceof As)return oi.CollidePolygonEdge(this,t);throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof t}`)}getFurthestPoint(t){const s=this.getTransformedPoints();let r=null,l=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=t.dot(s[h]);g>l&&(l=g,r=s[h])}return r}getFurthestLocalPoint(t){const s=this.points;let r=s[0],l=-Number.MAX_VALUE;for(let h=0;h<s.length;h++){const g=t.dot(s[h]);g>l&&(l=g,r=s[h])}return r}getClosestFace(t){const s=this.getSides();let r=Number.POSITIVE_INFINITY,l=-1,h=-1;for(let g=0;g<s.length;g++){const _=s[g].distanceToPoint(t);_<r&&(r=_,l=g,h=_)}return l!==-1?{distance:s[l].normal().scale(h),face:s[l]}:null}get bounds(){return this.localBounds.transform(this._globalMatrix)}get localBounds(){return this._localBoundsDirty&&(this._localBounds=Wt.fromPoints(this.points),this._localBoundsDirty=!1),this._localBounds}getInertia(t){if(this._cachedMass===t&&this._cachedInertia)return this._cachedInertia;let s=0,r=0;const l=this.points;for(let h=0;h<l.length;h++){const g=(h+1)%l.length,_=l[g].cross(l[h]);s+=_*(l[h].dot(l[h])+l[h].dot(l[g])+l[g].dot(l[g])),r+=_}return this._cachedMass=t,this._cachedInertia=t/6*(s/r)}rayCast(t,s=1/0){const r=this.getSides(),l=r.length;let h=Number.MAX_VALUE,g=-1;for(let _=0;_<l;_++){const b=t.intersect(r[_]);b>=0&&b<h&&b<=s&&(h=b,g=_)}return g>=0?t.getPoint(h):null}project(t){const s=this.getTransformedPoints(),r=s.length;let l=Number.MAX_VALUE,h=-Number.MAX_VALUE;for(let g=0;g<r;g++){const _=s[g].dot(t);l=Math.min(l,_),h=Math.max(h,_)}return new to(l,h)}debug(t,s){const r=this.getTransformedPoints()[0],l=[r,...this.getTransformedPoints(),r];for(let h=0;h<l.length-1;h++)t.drawLine(l[h],l[h+1],s,2),t.drawCircle(l[h],2,s),t.drawCircle(l[h+1],2,s)}}class rs{static Box(t,s,r=z.Half,l=z.Zero){return new Ze({points:new Wt(-t*r.x,-s*r.y,t-t*r.x,s-s*r.y).getPoints(),offset:l})}static Polygon(t,s=z.Zero){return new Ze({points:t,offset:s})}static Circle(t,s=z.Zero){return new ns({radius:t,offset:s})}static Edge(t,s){return new As({begin:t,end:s})}static Capsule(t,s,r=z.Zero){const l=D.getInstance();return t===s&&l.warn("A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider"),s>=t?new us([rs.Circle(t/2,Z(0,-s/2+t/2).add(r)),rs.Box(t,s-t,z.Half,r),rs.Circle(t/2,Z(0,s/2-t/2).add(r))]):new us([rs.Circle(s/2,Z(-t/2+s/2,0).add(r)),rs.Box(t-s,s,z.Half,r),rs.Circle(s/2,Z(t/2-s/2,0).add(r))])}}class Ne extends Ns{constructor(t){super(),this.type="ex.collider",this.events=new m,this.$colliderAdded=new wi,this.$colliderRemoved=new wi,this.set(t)}get(){return this._collider}set(t){return this.clear(),t&&(this._collider=t,this._collider.owner=this.owner,t.events.pipe(this.events),this.$colliderAdded.notifyAll(t),this.update()),t}clear(){this._collider&&(this._collider.events.unpipe(this.events),this.$colliderRemoved.notifyAll(this._collider),this._collider.owner=null,this._collider=null)}clone(){return new Ne(this._collider.clone())}get bounds(){var t,s;return(s=(t=this._collider)===null||t===void 0?void 0:t.bounds)!==null&&s!==void 0?s:new Wt}get localBounds(){var t,s;return(s=(t=this._collider)===null||t===void 0?void 0:t.localBounds)!==null&&s!==void 0?s:new Wt}update(){var t;const s=(t=this.owner)===null||t===void 0?void 0:t.get(kt);this._collider&&(this._collider.owner=this.owner,s&&this._collider.update(s.get()))}collide(t){let s=this._collider,r=t._collider;if(!s||!r)return[];let l=!1;if(r instanceof us&&(s=r,r=this._collider,l=!0),this._collider){const h=s.collide(r);return h?(l&&h.forEach(g=>{g.mtv=g.mtv.negate(),g.normal=g.normal.negate(),g.tangent=g.normal.perpendicular(),g.colliderA=this._collider,g.colliderB=t._collider}),h):[]}return[]}onAdd(t){this._collider&&this.update(),this.events.on("precollision",s=>{const r=s;t.events.emit("precollision",new Q(r.target.owner,r.other.owner,r.side,r.intersection))}),this.events.on("postcollision",s=>{const r=s;t.events.emit("postcollision",new rt(r.target.owner,r.other.owner,r.side,r.intersection))}),this.events.on("collisionstart",s=>{const r=s;t.events.emit("collisionstart",new te(r.target.owner,r.other.owner,r.contact))}),this.events.on("collisionend",s=>{const r=s;t.events.emit("collisionend",new Jt(r.target.owner,r.other.owner))})}onRemove(){this.events.clear(),this.$colliderRemoved.notifyAll(this._collider)}useBoxCollider(t,s,r=z.Half,l=z.Zero){const h=rs.Box(t,s,r,l);return this.set(h)}usePolygonCollider(t,s=z.Zero){const r=rs.Polygon(t,s);return this.set(r)}useCircleCollider(t,s=z.Zero){const r=rs.Circle(t,s);return this.set(r)}useEdgeCollider(t,s){const r=rs.Edge(t,s);return this.set(r)}useCompositeCollider(t){return this.set(new us(t))}}var ms;(function(d){d.Rotation="rotation",d.X="x",d.Y="y"})(ms||(ms={}));class ae extends Ns{constructor(t){var s,r,l;super(),this.type="ex.body",this.dependencies=[kt,De],this.id=f("body",ae._ID++),this.events=new m,this._oldTransform=new Jr,this.__oldTransformCaptured=!1,this.enableFixedUpdateInterpolate=!0,this.collisionType=Xt.PreventCollision,this.group=ri.All,this._mass=Dt.defaultMass,this.sleepMotion=Dt.sleepEpsilon*5,this.canSleep=Dt.bodiesCanSleepByDefault,this._sleeping=!1,this.bounciness=.2,this.friction=.99,this.useGravity=!0,this.limitDegreeOfFreedom=[],this.oldVel=new z(0,0),this.oldAcc=z.Zero,t&&(this.collisionType=(s=t.type)!==null&&s!==void 0?s:this.collisionType,this.group=(r=t.group)!==null&&r!==void 0?r:this.group,this.useGravity=(l=t.useGravity)!==null&&l!==void 0?l:this.useGravity)}get matrix(){return this.transform.get().matrix}get mass(){return this._mass}set mass(t){this._mass=t,this._cachedInertia=void 0,this._cachedInverseInertia=void 0}get inverseMass(){return this.collisionType===Xt.Fixed?0:1/this.mass}get sleeping(){return this._sleeping}setSleeping(t){this._sleeping=t,t?(this.vel=z.Zero,this.acc=z.Zero,this.angularVelocity=0,this.sleepMotion=0):this.sleepMotion=Dt.sleepEpsilon*5}updateMotion(){this._sleeping&&this.setSleeping(!0);const t=this.vel.size*this.vel.size+Math.abs(this.angularVelocity*this.angularVelocity),s=Dt.sleepBias;this.sleepMotion=s*this.sleepMotion+(1-s)*t,this.sleepMotion=ne(this.sleepMotion,0,10*Dt.sleepEpsilon),this.canSleep&&this.sleepMotion<Dt.sleepEpsilon&&this.setSleeping(!0)}get inertia(){if(this._cachedInertia)return this._cachedInertia;const t=this.owner.get(Ne);if(t){t.$colliderAdded.subscribe(()=>{this._cachedInertia=null}),t.$colliderRemoved.subscribe(()=>{this._cachedInertia=null});const s=t.get();if(s)return this._cachedInertia=s.getInertia(this.mass)}return 0}get inverseInertia(){return this._cachedInverseInertia?this._cachedInverseInertia:this._cachedInverseInertia=this.collisionType===Xt.Fixed?0:1/this.inertia}get active(){var t;return!!(!((t=this.owner)===null||t===void 0)&&t.active)}get center(){return this.globalPos}get transform(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(kt)}get motion(){var t;return(t=this.owner)===null||t===void 0?void 0:t.get(De)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t}get globalPos(){return this.transform.globalPos}set globalPos(t){this.transform.globalPos=t}get oldPos(){return this._oldTransform.pos}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t}get torque(){return this.motion.torque}set torque(t){this.motion.torque=t}get oldRotation(){return this._oldTransform.rotation}get rotation(){return this.transform.globalRotation}set rotation(t){this.transform.globalRotation=t}get scale(){return this.transform.globalScale}set scale(t){this.transform.globalScale=t}get oldScale(){return this._oldTransform.scale}get scaleFactor(){return this.motion.scaleFactor}set scaleFactor(t){this.motion.scaleFactor=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}applyImpulse(t,s){if(this.collisionType!==Xt.Active)return;const r=s.scale(this.inverseMass);if(this.limitDegreeOfFreedom.includes(ms.X)&&(r.x=0),this.limitDegreeOfFreedom.includes(ms.Y)&&(r.y=0),this.vel.addEqual(r),!this.limitDegreeOfFreedom.includes(ms.Rotation)){const l=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*l.cross(s)}}applyLinearImpulse(t){if(this.collisionType!==Xt.Active)return;const s=t.scale(this.inverseMass);this.limitDegreeOfFreedom.includes(ms.X)&&(s.x=0),this.limitDegreeOfFreedom.includes(ms.Y)&&(s.y=0),this.vel=this.vel.add(s)}applyAngularImpulse(t,s){if(this.collisionType===Xt.Active&&!this.limitDegreeOfFreedom.includes(ms.Rotation)){const r=t.sub(this.globalPos);this.angularVelocity+=this.inverseInertia*r.cross(s)}}captureOldTransform(){this.__oldTransformCaptured=!0,this.transform.get().clone(this._oldTransform),this.oldVel.setTo(this.vel.x,this.vel.y),this.oldAcc.setTo(this.acc.x,this.acc.y)}clone(){return super.clone()}}ae._ID=0;class nd{constructor(t){this.data=t,this.type="Component Added"}}function rd(d){return!!d&&d.type==="Component Added"}class od{constructor(t){this.data=t,this.type="Component Removed"}}function ad(d){return!!d&&d.type==="Component Removed"}const wy={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate"};class Ke{constructor(t,s){if(this.events=new m,this.id=Ke._ID++,this.scene=null,this._name="anonymous",this.active=!0,this._componentsToRemove=[],this._componentTypeToInstance=new Map,this._componentStringToInstance=new Map,this._tagsMemo=[],this._typesMemo=[],this.componentAdded$=new wi,this.componentRemoved$=new wi,this._parent=null,this.childrenAdded$=new wi,this.childrenRemoved$=new wi,this._children=[],this._isInitialized=!1,this._setName(s),t)for(const r of t)this.addComponent(r)}_setName(t){t&&(this._name=t)}get name(){return this._name}kill(){this.active&&(this.active=!1,this.unparent())}isKilled(){return!this.active}get tags(){return this._tagsMemo}hasTag(t){return this.tags.includes(t)}addTag(t){return this.addComponent(new rc(t))}removeTag(t,s=!1){return this.removeComponent(t,s)}get types(){return this._typesMemo}_rebuildMemos(){this._tagsMemo=Array.from(this._componentStringToInstance.values()).filter(t=>t instanceof rc).map(t=>t.type),this._typesMemo=Array.from(this._componentStringToInstance.keys())}getComponents(){return Array.from(this._componentStringToInstance.values())}_notifyAddComponent(t){this._rebuildMemos();const s=new nd({component:t,entity:this});this.componentAdded$.notifyAll(s)}_notifyRemoveComponent(t){const s=new od({component:t,entity:this});this.componentRemoved$.notifyAll(s),this._rebuildMemos()}get parent(){return this._parent}get children(){return this._children}unparent(){this._parent&&(this._parent.removeChild(this),this._parent=null)}addChild(t){if(t.parent===null){if(this.getAncestors().includes(t))throw new Error("Cycle detected, cannot add entity");this._children.push(t),t._parent=this,this.childrenAdded$.notifyAll(t)}else throw new Error("Entity already has a parent, cannot add without unparenting");return this}removeChild(t){return t.parent===this&&(Hi(t,this._children),t._parent=null,this.childrenRemoved$.notifyAll(t)),this}removeAllChildren(){for(let t=this.children.length-1;t>=0;t--)this.removeChild(this.children[t]);return this}getAncestors(){const t=[this];let s=this.parent;for(;s;)t.push(s),s=s.parent;return t.reverse()}getDescendants(){let t=[this],s=[this];for(;s.length>0;){const r=s.pop();s=s.concat(r.children),t=t.concat(r.children)}return t}clone(){const t=new Ke;for(const s of this.types)t.addComponent(this.get(s).clone());for(const s of this.children)t.addChild(s.clone());return t}addTemplate(t,s=!1){for(const r of t.getComponents())this.addComponent(r.clone(),s);for(const r of t.children)this.addChild(r.clone().addTemplate(r));return this}addComponent(t,s=!1){if(this.has(t.type))if(s)this.removeComponent(t,!0);else return this;if(t.dependencies&&t.dependencies.length)for(const l of t.dependencies)this.addComponent(new l);t.owner=this;const r=t.constructor;return this._componentTypeToInstance.set(r,t),this._componentStringToInstance.set(t.type,t),t.onAdd&&t.onAdd(this),this._notifyAddComponent(t),this}removeComponent(t,s=!1){return s?typeof t=="string"?this._removeComponentByType(t):t instanceof Ns&&this._removeComponentByType(t.type):this._componentsToRemove.push(t),this}clearComponents(){const t=this.getComponents();for(const s of t)this.removeComponent(s)}_removeComponentByType(t){if(this.has(t)){const s=this.get(t);s.owner=null,s.onRemove&&s.onRemove(this);const r=s.constructor;this._componentTypeToInstance.delete(r),this._componentStringToInstance.delete(s.type),this._notifyRemoveComponent(s)}}processComponentRemoval(){for(const t of this._componentsToRemove){const s=typeof t=="string"?t:t.type;this._removeComponentByType(s)}this._componentsToRemove.length=0}has(t){return typeof t=="string"?this._componentStringToInstance.has(t):this._componentTypeToInstance.has(t)}get(t){return typeof t=="string"?this._componentStringToInstance.get(t):this._componentTypeToInstance.get(t)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.onInitialize(t),this.events.emit("initialize",new he(t,this)),this._isInitialized=!0)}_preupdate(t,s){this.events.emit("preupdate",new W(t,s,this)),this.onPreUpdate(t,s)}_postupdate(t,s){this.events.emit("postupdate",new G(t,s,this)),this.onPostUpdate(t,s)}onInitialize(t){}onPreUpdate(t,s){}onPostUpdate(t,s){}update(t,s){this._initialize(t),this._preupdate(t,s);for(const r of this.children)r.update(t,s);this._postupdate(t,s)}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}}Ke._ID=0;function uc(d){return!!d.tick}class eo{constructor(t,s){this._options=t,this._graphics=s,this.graphics=[]}get name(){return this._options.name}hide(t){if(!t)this.graphics.length=0;else{let s=null;t instanceof Ss?s=t:s=this._graphics.getGraphic(t),this.graphics=this.graphics.filter(r=>r.graphic!==s),this._graphics.recalculateBounds()}}show(t,s){s={...s};let r;return t instanceof Ss?r=this._graphics.copyGraphics?t.clone():t:(r=this._graphics.getGraphic(t),r||D.getInstance().error(`No such graphic added to component named ${t}. These named graphics are available: `,this._graphics.getNames())),r?(this.graphics.push({graphic:r,options:s}),this._graphics.recalculateBounds(),r):null}use(t,s){return s={...s},this.hide(),this.show(t,s)}get order(){return this._options.order}set order(t){this._options.order=t}get offset(){var t;return(t=this._options.offset)!==null&&t!==void 0?t:z.Zero}set offset(t){this._options.offset=t}get currentKeys(){var t;return(t=this.name)!==null&&t!==void 0?t:"anonymous"}clone(t){const s=new eo({...this._options},t);return s.graphics=[...this.graphics.map(r=>({graphic:r.graphic.clone(),options:{...r.options}}))],s}}class aa{constructor(t){this._component=t,this._layers=[],this._layerMap={},this.default=new eo({name:"default",order:0},t),this._maybeAddLayer(this.default)}create(t){const s=new eo(t,this._component);return this._maybeAddLayer(s)}get(t){return t?this._getLayer(t):this._layers}currentKeys(){const t=[];for(const s of this._layers)t.push(s.currentKeys);return t}has(t){return t in this._layerMap}_maybeAddLayer(t){return this._layerMap[t.name]?this._layerMap[t.name]:(this._layerMap[t.name]=t,this._layers.push(t),this._layers.sort((s,r)=>s.order-r.order),t)}_getLayer(t){return this._layerMap[t]}clone(t){const s=new aa(t);return s._layerMap={},s._layers=[],s.default=this.default.clone(t),s._maybeAddLayer(s.default),this._layers.filter(l=>l.name!=="default").map(l=>l.clone(t)).forEach(l=>s._maybeAddLayer(l)),s}}class os extends Ns{getGraphic(t){return this._graphics[t]}getNames(){return Object.keys(this._graphics)}constructor(t){super(),this.type="ex.graphics",this._graphics={},this.visible=!0,this.opacity=1,this.offset=z.Zero,this.anchor=z.Half,this.flipHorizontal=!1,this.flipVertical=!1,this.copyGraphics=!1,this._localBounds=null,t={visible:this.visible,...t};const{current:s,anchor:r,opacity:l,visible:h,graphics:g,offset:_,copyGraphics:b,onPreDraw:S,onPostDraw:A}=t;this._graphics=g||{},this.offset=_??this.offset,this.opacity=l??this.opacity,this.anchor=r??this.anchor,this.copyGraphics=b??this.copyGraphics,this.onPreDraw=S??this.onPreDraw,this.onPostDraw=A??this.onPostDraw,this.visible=!!h,this.layers=new aa(this),s&&this._graphics[s]&&this.show(this._graphics[s])}get current(){return this.layers.default.graphics}get graphics(){return this._graphics}add(t,s){let r="default",l=null;return typeof t=="string"?(r=t,l=s):l=t,this._graphics[r]=this.copyGraphics?l.clone():l,r==="default"&&this.show("default"),l}show(t,s){const r=this.layers.default.show(t,s);return this.recalculateBounds(),r}use(t,s){const r=this.layers.default.use(t,s);return this.recalculateBounds(),r}hide(t){this.layers.default.hide(t)}set localBounds(t){this._localBounds=t}recalculateBounds(){let t=new Wt;for(const s of this.layers.get())for(const{graphic:r,options:l}of s.graphics){let h=this.anchor,g=this.offset;l!=null&&l.anchor&&(h=l.anchor),l!=null&&l.offset&&(g=l.offset);const _=r.localBounds,b=-_.width*h.x+g.x,S=-_.height*h.y+g.y;t=r==null?void 0:r.localBounds.translate(Z(b+s.offset.x,S+s.offset.y)).combine(t)}this._localBounds=t}get localBounds(){return(!this._localBounds||this._localBounds.hasZeroDimensions())&&this.recalculateBounds(),this._localBounds}update(t,s=0){for(const r of this.layers.get())for(const{graphic:l}of r.graphics)uc(l)&&(l==null||l.tick(t,s))}clone(){const t=new os;return t._graphics={...this._graphics},t.offset=this.offset.clone(),t.opacity=this.opacity,t.anchor=this.anchor.clone(),t.copyGraphics=this.copyGraphics,t.onPreDraw=this.onPreDraw,t.onPostDraw=this.onPostDraw,t.visible=this.visible,t.layers=this.layers.clone(t),t}}class la extends hr{constructor(t){super(t),this.width=t.width,this.height=t.height,this.rasterize()}clone(){return new la({width:this.width,height:this.height,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.color&&t.fillRect(0,0,this.width,this.height),this.strokeColor&&t.strokeRect(0,0,this.width,this.height)}}class ca extends hr{get radius(){return this._radius}set radius(t){this._radius=t,this.width=this._radius*2,this.height=this._radius*2,this.flagDirty()}constructor(t){var s,r,l;super(t),this._radius=0;const h=(s=t.lineWidth)!==null&&s!==void 0?s:t.strokeColor?1:0;this.padding=(r=t.padding)!==null&&r!==void 0?r:2+h/2,this.radius=t.radius,this.filtering=(l=t.filtering)!==null&&l!==void 0?l:cs.Blended,this.rasterize()}clone(){return new ca({radius:this.radius,...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){this.radius>0&&(t.beginPath(),t.arc(this.radius,this.radius,this.radius,0,Math.PI*2),this.color&&t.fill(),this.strokeColor&&t.stroke())}}class fr extends Ns{constructor(){super(...arguments),this.type="ex.pointer",this.useColliderShape=!0,this.useGraphicsBounds=!1}}class Pe{static CreateReversibleEasingFunction(t){return(s,r,l,h)=>l<r?r-(t(s,l,r,h)-l):t(s,r,l,h)}static CreateVectorEasingFunction(t){return(s,r,l,h)=>new z(t(s,r.x,l.x,h),t(s,r.y,l.y,h))}}Pe.Linear=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,s*d/r+t)),Pe.EaseInQuad=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,d/=r,s*d*d+t)),Pe.EaseOutQuad=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,d/=r,-s*d*(d-2)+t)),Pe.EaseInOutQuad=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,d/=r/2,d<1?s/2*d*d+t:(d--,-s/2*(d*(d-2)-1)+t))),Pe.EaseInCubic=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,d/=r,s*d*d*d+t)),Pe.EaseOutCubic=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,d/=r,d--,s*(d*d*d+1)+t)),Pe.EaseInOutCubic=Pe.CreateReversibleEasingFunction((d,t,s,r)=>(s=s-t,d/=r/2,d<1?s/2*d*d*d+t:(d-=2,s/2*(d*d*d+2)+t)));class ld{constructor(t){this._actions=[],this._completedActions=[],this._entity=t}add(t){this._actions.push(t)}remove(t){const s=this._actions.indexOf(t);this._actions.splice(s,1)}clearActions(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()}getActions(){return this._actions.concat(this._completedActions)}hasNext(){return this._actions.length>0}isComplete(){return this._actions.length===0}reset(){this._actions=this.getActions();const t=this._actions.length;for(let s=0;s<t;s++)this._actions[s].reset();this._completedActions=[]}update(t){this._actions.length>0&&(this._currentAction=this._actions[0],this._currentAction.update(t),this._currentAction.isComplete(this._entity)&&this._completedActions.push(this._actions.shift()))}}class cd{constructor(t,s,r){this._stopped=!1,this._repeatBuilder=s,this._repeatContext=new so(t),this._actionQueue=this._repeatContext.getQueue(),this._repeat=r,this._originalRepeat=r,this._repeatBuilder(this._repeatContext),this._repeat--}update(t){this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext),this._repeat--),this._actionQueue.update(t)}isComplete(){return this._stopped||this._repeat<=0&&this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._repeat=this._originalRepeat}}class ud{constructor(t,s){this._stopped=!1,this._repeatBuilder=s,this._repeatContext=new so(t),this._actionQueue=this._repeatContext.getQueue(),this._repeatBuilder(this._repeatContext)}update(t){this._stopped||(this._actionQueue.isComplete()&&(this._actionQueue.clearActions(),this._repeatBuilder(this._repeatContext)),this._actionQueue.update(t))}isComplete(){return this._stopped}stop(){this._stopped=!0,this._actionQueue.clearActions()}reset(){}}class hd{constructor(t,s,r,l){if(this._started=!1,this._stopped=!1,this._entity=t,this._tx=t.get(kt),this._motion=t.get(De),this._speed=l,this._offset=new z(s,r),l<=0)throw D.getInstance().error("Attempted to moveBy with speed less than or equal to zero : "+l),new Error("Speed must be greater than 0 pixels per second")}update(t){this._started||(this._started=!0,this._start=new z(this._tx.pos.x,this._tx.pos.y),this._end=this._start.add(this._offset),this._distance=this._offset.size,this._dir=this._end.sub(this._start).normalize()),this.isComplete(this._entity)?(this._tx.pos=Z(this._end.x,this._end.y),this._motion.vel=Z(0,0)):this._motion.vel=this._dir.scale(this._speed)}isComplete(t){const s=t.get(kt);return this._stopped||s.pos.distance(this._start)>=this._distance}stop(){this._motion.vel=Z(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class dd{constructor(t,s,r,l){this.entity=t,this._started=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._end=new z(s,r),this._speed=l}update(t){this._started||(this._started=!0,this._start=new z(this._tx.pos.x,this._tx.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());const s=this._dir.scale(this._speed);this._motion.vel=Z(s.x,s.y),this.isComplete(this.entity)&&(this._tx.pos=Z(this._end.x,this._end.y),this._motion.vel=Z(0,0))}isComplete(t){const s=t.get(kt);return this._stopped||new z(s.pos.x,s.pos.y).distance(this._start)>=this._distance}stop(){this._motion.vel=Z(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}var Hs;(function(d){d[d.ShortestPath=0]="ShortestPath",d[d.LongestPath=1]="LongestPath",d[d.Clockwise=2]="Clockwise",d[d.CounterClockwise=3]="CounterClockwise"})(Hs||(Hs={}));class fd{constructor(t,s,r,l){this._started=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._end=s,this._speed=r,this._rotationType=l||Hs.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation;const s=Math.abs(this._end-this._start),r=It-s;switch(s>r?(this._shortDistance=r,this._longDistance=s):(this._shortDistance=s,this._longDistance=r),this._shortestPathIsPositive=(this._start-this._end+It)%It>=Math.PI,this._rotationType){case Hs.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Hs.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Hs.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Hs.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class gd{constructor(t,s,r,l){this._started=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._speed=r,this._offset=s,this._rotationType=l||Hs.ShortestPath}update(t){if(!this._started){this._started=!0,this._start=this._tx.rotation,this._currentNonCannonAngle=this._tx.rotation,this._end=this._start+this._offset;const s=Math.abs(this._end-this._start),r=It-s;switch(s>r?(this._shortDistance=r,this._longDistance=s):(this._shortDistance=s,this._longDistance=r),this._shortestPathIsPositive=(this._start-this._end+It)%It>=Math.PI,this._rotationType){case Hs.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Hs.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Hs.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Hs.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance;break}}this._motion.angularVelocity=this._direction*this._speed,this._currentNonCannonAngle+=this._direction*this._speed*(t/1e3),this.isComplete()&&(this._tx.rotation=this._end,this._motion.angularVelocity=0,this._stopped=!0)}isComplete(){const t=Math.abs(this._currentNonCannonAngle-this._start);return this._stopped||t>=Math.abs(this._distance)}stop(){this._motion.angularVelocity=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._start=void 0,this._currentNonCannonAngle=void 0,this._distance=void 0}}class md{constructor(t,s,r,l,h){this._started=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._endX=s,this._endY=r,this._speedX=l,this._speedY=h}update(t){if(this._started||(this._started=!0,this._startX=this._tx.scale.x,this._startY=this._tx.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._tx.scale.x-this._startX)>=this._distanceX)this._motion.scaleFactor.x=0;else{const s=this._endY<this._startY?-1:1;this._motion.scaleFactor.x=this._speedX*s}if(Math.abs(this._tx.scale.y-this._startY)>=this._distanceY)this._motion.scaleFactor.y=0;else{const s=this._endY<this._startY?-1:1;this._motion.scaleFactor.y=this._speedY*s}this.isComplete()&&(this._tx.scale=Z(this._endX,this._endY),this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startX)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startY)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class pd{constructor(t,s,r,l){this._started=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._offset=new z(s,r),this._speedX=this._speedY=l}update(t){this._started||(this._started=!0,this._startScale=this._tx.scale.clone(),this._endScale=this._startScale.add(this._offset),this._distanceX=Math.abs(this._endScale.x-this._startScale.x),this._distanceY=Math.abs(this._endScale.y-this._startScale.y),this._directionX=this._endScale.x<this._startScale.x?-1:1,this._directionY=this._endScale.y<this._startScale.y?-1:1),this._motion.scaleFactor.x=this._speedX*this._directionX,this._motion.scaleFactor.y=this._speedY*this._directionY,this.isComplete()&&(this._tx.scale=this._endScale,this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0)}isComplete(){return this._stopped||Math.abs(this._tx.scale.x-this._startScale.x)>=this._distanceX-.01&&Math.abs(this._tx.scale.y-this._startScale.y)>=this._distanceY-.01}stop(){this._motion.scaleFactor.x=0,this._motion.scaleFactor.y=0,this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class _d{constructor(t){this._method=null,this._hasBeenCalled=!1,this._method=t}update(t){this._method(),this._hasBeenCalled=!0}isComplete(){return this._hasBeenCalled}reset(){this._hasBeenCalled=!1}stop(){this._hasBeenCalled=!0}}class vd{constructor(t,s,r,l,h){this.easingFcn=h,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new z(0,0),this._lerpEnd=new z(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._lerpDuration=l,this._lerpEnd=new z(s,r)}_initialize(){this._lerpStart=new z(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let s=this._tx.pos.x,r=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?s=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):s=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?r=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):r=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=Z((s-this._tx.pos.x)/(t/1e3),(r-this._tx.pos.y)/(t/1e3))):(this._tx.pos=Z(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=z.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=Z(0,0),this._stopped=!0}}class yd{constructor(t,s,r,l,h){this.easingFcn=h,this._currentLerpTime=0,this._lerpDuration=1*1e3,this._lerpStart=new z(0,0),this._lerpEnd=new z(0,0),this._initialized=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._lerpDuration=l,this._offset=new z(s,r)}_initialize(){this._lerpStart=new z(this._tx.pos.x,this._tx.pos.y),this._currentLerpTime=0,this._lerpEnd=this._lerpStart.add(this._offset)}update(t){this._initialized||(this._initialize(),this._initialized=!0),this._currentLerpTime+=t;let s=this._tx.pos.x,r=this._tx.pos.y;this._currentLerpTime<this._lerpDuration?(this._lerpEnd.x<this._lerpStart.x?s=this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):s=this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),this._lerpEnd.y<this._lerpStart.y?r=this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):r=this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this._motion.vel=Z((s-this._tx.pos.x)/(t/1e3),(r-this._tx.pos.y)/(t/1e3))):(this._tx.pos=Z(this._lerpEnd.x,this._lerpEnd.y),this._motion.vel=z.Zero)}isComplete(){return this._stopped||this._currentLerpTime>=this._lerpDuration}reset(){this._initialized=!1,this._stopped=!1,this._currentLerpTime=0}stop(){this._motion.vel=Z(0,0),this._stopped=!0}}class bd{constructor(t,s,r,l=1){this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._graphics=t.get(os),this._timeVisible=s,this._timeNotVisible=r,this._duration=(s+r)*l}update(t){this._started||(this._started=!0,this._elapsedTime=0,this._totalTime=0),this._graphics&&(this._elapsedTime+=t,this._totalTime+=t,this._graphics.visible&&this._elapsedTime>=this._timeVisible&&(this._graphics.visible=!1,this._elapsedTime=0),!this._graphics.visible&&this._elapsedTime>=this._timeNotVisible&&(this._graphics.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._graphics.visible=!0))}isComplete(){return this._stopped||this._totalTime>=this._duration}stop(){this._graphics&&(this._graphics.visible=!0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._elapsedTime=0,this._totalTime=0}}class wd{constructor(t,s,r){this._multiplier=1,this._started=!1,this._stopped=!1,this._graphics=t.get(os),this._endOpacity=s,this._speed=this._ogspeed=r}update(t){this._graphics&&(this._started||(this._started=!0,this._speed=this._ogspeed,this._endOpacity<this._graphics.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._graphics.opacity+=this._multiplier*(Math.abs(this._graphics.opacity-this._endOpacity)*t)/this._speed),this._speed-=t,this.isComplete()&&(this._graphics.opacity=this._endOpacity),D.getInstance().debug("[Action fade] Actor opacity:",this._graphics.opacity))}isComplete(){return this._stopped||Math.abs(this._graphics.opacity-this._endOpacity)<.05}stop(){this._stopped=!0}reset(){this._started=!1,this._stopped=!1}}class xd{constructor(t){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._delay=t}update(t){this._started||(this._started=!0),this._elapsedTime+=t}isComplete(){return this._stopped||this._elapsedTime>=this._delay}stop(){this._stopped=!0}reset(){this._elapsedTime=0,this._started=!1,this._stopped=!1}}class Cd{constructor(t){this._stopped=!1,this._entity=t}update(t){this._entity.get(gr).clearActions(),this._entity.kill(),this._stopped=!0}isComplete(){return this._stopped}stop(){}reset(){}}class hc{constructor(t,s,r){this._started=!1,this._stopped=!1,this._tx=t.get(kt),this._motion=t.get(De),this._followTx=s.get(kt),this._followMotion=s.get(De),this._current=new z(this._tx.pos.x,this._tx.pos.y),this._end=new z(this._followTx.pos.x,this._followTx.pos.y),this._maximumDistance=r!==void 0?r:this._current.distance(this._end),this._speed=0}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const s=Math.sqrt(Math.pow(this._followMotion.vel.x,2)+Math.pow(this._followMotion.vel.y,2));if(s!==0&&(this._speed=s),this._current=Z(this._tx.pos.x,this._tx.pos.y),this._end=Z(this._followTx.pos.x,this._followTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){const r=this._dir.scale(this._speed);this._motion.vel=Z(r.x,r.y)}else this._motion.vel=Z(0,0);this.isComplete()&&(this._tx.pos=Z(this._end.x,this._end.y),this._motion.vel=Z(0,0))}stop(){this._motion.vel=Z(0,0),this._stopped=!0}isComplete(){return this._stopped}reset(){this._started=!1,this._stopped=!1}}class dc{constructor(t,s,r){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._tx=t.get(kt),this._motion=t.get(De),this._meetTx=s.get(kt),this._meetMotion=s.get(De),this._current=new z(this._tx.pos.x,this._tx.pos.y),this._end=new z(this._meetTx.pos.x,this._meetTx.pos.y),this._speed=r||0,r!==void 0&&(this._speedWasSpecified=!0)}update(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());const s=Math.sqrt(Math.pow(this._meetMotion.vel.x,2)+Math.pow(this._meetMotion.vel.y,2));s!==0&&!this._speedWasSpecified&&(this._speed=s),this._current=Z(this._tx.pos.x,this._tx.pos.y),this._end=Z(this._meetTx.pos.x,this._meetTx.pos.y),this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();const r=this._dir.scale(this._speed);this._motion.vel=Z(r.x,r.y),this.isComplete()&&(this._tx.pos=Z(this._end.x,this._end.y),this._motion.vel=Z(0,0))}isComplete(){return this._stopped||this._distanceBetween<=1}stop(){this._motion.vel=Z(0,0),this._stopped=!0}reset(){this._started=!1,this._stopped=!1,this._distanceBetween=void 0}}class so{constructor(t){this._entity=t,this._queue=new ld(t)}getQueue(){return this._queue}update(t){this._queue.update(t)}clearActions(){this._queue.clearActions()}runAction(t){return t.reset(),this._queue.add(t),this}easeTo(...t){var s,r;let l=0,h=0,g=0,_=Pe.Linear;return t[0]instanceof z?(l=t[0].x,h=t[0].y,g=t[1],_=(s=t[2])!==null&&s!==void 0?s:_):(l=t[0],h=t[1],g=t[2],_=(r=t[3])!==null&&r!==void 0?r:_),this._queue.add(new vd(this._entity,l,h,g,_)),this}easeBy(...t){var s,r;let l=0,h=0,g=0,_=Pe.Linear;return t[0]instanceof z?(l=t[0].x,h=t[0].y,g=t[1],_=(s=t[2])!==null&&s!==void 0?s:_):(l=t[0],h=t[1],g=t[2],_=(r=t[3])!==null&&r!==void 0?r:_),this._queue.add(new yd(this._entity,l,h,g,_)),this}moveTo(t,s,r){let l=0,h=0,g=0;return t instanceof z?(l=t.x,h=t.y,g=s):(l=t,h=s,g=r),this._queue.add(new dd(this._entity,l,h,g)),this}moveBy(t,s,r){let l=0,h=0,g=0;return t instanceof z?(l=t.x,h=t.y,g=s):(l=t,h=s,g=r),this._queue.add(new hd(this._entity,l,h,g)),this}rotateTo(t,s,r){return this._queue.add(new fd(this._entity,t,s,r)),this}rotateBy(t,s,r){return this._queue.add(new gd(this._entity,t,s,r)),this}scaleTo(t,s,r,l){let h=1,g=1,_=0,b=0;return t instanceof z&&s instanceof z&&(h=t.x,g=t.y,_=s.x,b=s.y),typeof t=="number"&&typeof s=="number"&&(h=t,g=s,_=r,b=l),this._queue.add(new md(this._entity,h,g,_,b)),this}scaleBy(t,s,r){let l=1,h=1;return t instanceof z&&(l=t.x,h=t.y,r=s),typeof t=="number"&&typeof s=="number"&&(l=t,h=s),this._queue.add(new pd(this._entity,l,h,r)),this}blink(t,s,r=1){return this._queue.add(new bd(this._entity,t,s,r)),this}fade(t,s){return this._queue.add(new wd(this._entity,t,s)),this}delay(t){return this._queue.add(new xd(t)),this}die(){return this._queue.add(new Cd(this._entity)),this}callMethod(t){return this._queue.add(new _d(t)),this}repeat(t,s){return s?(this._queue.add(new cd(this._entity,t,s)),this):(this.repeatForever(t),this)}repeatForever(t){return this._queue.add(new ud(this._entity,t)),this}follow(t,s){return s===void 0?this._queue.add(new hc(this._entity,t)):this._queue.add(new hc(this._entity,t,s)),this}meet(t,s){return s===void 0?this._queue.add(new dc(this._entity,t)):this._queue.add(new dc(this._entity,t,s)),this}toPromise(){return new Promise(s=>{this._queue.add(new _d(()=>{s()}))})}}class gr extends Ns{constructor(){super(...arguments),this.type="ex.actions",this.dependencies=[kt,De]}onAdd(t){this._ctx=new so(t)}onRemove(){this._ctx=null}getQueue(){var t;return(t=this._ctx)===null||t===void 0?void 0:t.getQueue()}runAction(t){var s;return(s=this._ctx)===null||s===void 0?void 0:s.runAction(t)}update(t){var s;return(s=this._ctx)===null||s===void 0?void 0:s.update(t)}clearActions(){var t;(t=this._ctx)===null||t===void 0||t.clearActions()}easeTo(...t){return this._ctx.easeTo.apply(this._ctx,t)}easeBy(...t){return this._ctx.easeBy.apply(this._ctx,t)}moveTo(t,s,r){return this._ctx.moveTo.apply(this._ctx,[t,s,r])}moveBy(t,s,r){return this._ctx.moveBy.apply(this._ctx,[t,s,r])}rotateTo(t,s,r){return this._ctx.rotateTo(t,s,r)}rotateBy(t,s,r){return this._ctx.rotateBy(t,s,r)}scaleTo(t,s,r,l){return this._ctx.scaleTo.apply(this._ctx,[t,s,r,l])}scaleBy(t,s,r){return this._ctx.scaleBy.apply(this._ctx,[t,s,r])}blink(t,s,r){return this._ctx.blink(t,s,r)}fade(t,s){return this._ctx.fade(t,s)}delay(t){return this._ctx.delay(t)}die(){return this._ctx.die()}callMethod(t){return this._ctx.callMethod(t)}repeat(t,s){return this._ctx.repeat(t,s)}repeatForever(t){return this._ctx.repeatForever(t)}follow(t,s){return this._ctx.follow(t,s)}meet(t,s){return this._ctx.meet(t,s)}toPromise(){return this._ctx.toPromise()}}var ua;(function(d){d.Em="em",d.Rem="rem",d.Px="px",d.Pt="pt",d.Percent="%"})(ua||(ua={}));var ha;(function(d){d.Left="left",d.Right="right",d.Center="center",d.Start="start",d.End="end"})(ha||(ha={}));var da;(function(d){d.Top="top",d.Hanging="hanging",d.Middle="middle",d.Alphabetic="alphabetic",d.Ideographic="ideographic",d.Bottom="bottom"})(da||(da={}));var fa;(function(d){d.Normal="normal",d.Italic="italic",d.Oblique="oblique"})(fa||(fa={}));var ga;(function(d){d.LeftToRight="ltr",d.RightToLeft="rtl"})(ga||(ga={}));class mr{constructor(t,s,r,l){this.font=t,this.text=s,this.color=r,this.maxWidth=l,this._textFragments=[],this.disposed=!1,this._dirty=!0,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.dimensions=this.measureText(s),this._setDimension(this.dimensions,this.ctx),this._lastHashCode=this.getHashCode()}measureText(t,s){if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);let r=null;s!=null?r=this._getLinesFromText(t,s):r=t.split(`
`);const l=r.reduce((V,H)=>V.length>H.length?V:H);this._applyFont(this.ctx);const h=this.ctx.measureText(l);let g=Math.abs(h.actualBoundingBoxAscent)+Math.abs(h.actualBoundingBoxDescent);const _=g*r.length;g=_;const b=_-Math.abs(h.actualBoundingBoxAscent),S=0,A=0;return new Wt({left:S-Math.abs(h.actualBoundingBoxLeft)-this.font.padding,top:A-Math.abs(h.actualBoundingBoxAscent)-this.font.padding,bottom:A+b+this.font.padding,right:S+Math.abs(h.actualBoundingBoxRight)+this.font.padding})}_setDimension(t,s){s.canvas.width=(t.width+this.font.padding*2)*2*this.font.quality,s.canvas.height=(t.height+this.font.padding*2)*2*this.font.quality}static getHashCode(t,s,r){var l;return s+"__hashcode__"+t.fontString+t.showDebug+t.textAlign+t.baseAlign+t.direction+JSON.stringify(t.shadow)+(t.padding.toString()+t.smoothing.toString()+t.lineWidth.toString()+t.lineDash.toString()+((l=t.strokeColor)===null||l===void 0?void 0:l.toString())+(r?r.toString():t.color.toString()))}getHashCode(t=!0){return mr.getHashCode(this.font,this.text,t?this.color:void 0)}_applyRasterProperties(t){var s,r;t.translate(this.font.padding,this.font.padding),t.imageSmoothingEnabled=this.font.smoothing,t.lineWidth=this.font.lineWidth,t.setLineDash((s=this.font.lineDash)!==null&&s!==void 0?s:t.getLineDash()),t.strokeStyle=(r=this.font.strokeColor)===null||r===void 0?void 0:r.toString(),t.fillStyle=this.color.toString()}_applyFont(t){t.resetTransform(),t.translate(this.font.padding+t.canvas.width/2,this.font.padding+t.canvas.height/2),t.scale(this.font.quality,this.font.quality),t.textAlign=this.font.textAlign,t.textBaseline=this.font.baseAlign,t.font=this.font.fontString,t.direction=this.font.direction,this.font.shadow&&(t.shadowColor=this.font.shadow.color.toString(),t.shadowBlur=this.font.shadow.blur,t.shadowOffsetX=this.font.shadow.offset.x,t.shadowOffsetY=this.font.shadow.offset.y)}_drawText(t,s,r){this._applyRasterProperties(t),this._applyFont(t);for(let l=0;l<s.length;l++){const h=s[l];this.color&&t.fillText(h,0,l*r),this.font.strokeColor&&t.strokeText(h,0,l*r)}this.font.showDebug&&(tc(t,ht.Green,-t.canvas.width/2,0,t.canvas.width/2,0,2),tc(t,ht.Red,0,-t.canvas.height/2,0,t.canvas.height/2,2))}_splitTextBitmap(t){const s=[];let r=0,l=0;const h=Math.min(4096,t.canvas.width),g=Math.min(4096,t.canvas.height);for(;r<t.canvas.width;){for(;l<t.canvas.height;){const _=document.createElement("canvas");_.width=h,_.height=g,_.getContext("2d").drawImage(t.canvas,r,l,h,g,0,0,h,g),s.push({x:r,y:l,canvas:_}),l+=g}r+=h,l=0}return s}flagDirty(){this._dirty=!0}render(t,s,r,l){if(this.disposed)throw Error("Accessing disposed text instance! "+this.text);this._ex=t;const h=this.getHashCode();if(this._lastHashCode!==h&&(this._dirty=!0),this._dirty){this.dimensions=this.measureText(this.text,l),this._setDimension(this.dimensions,this.ctx);const g=this._getLinesFromText(this.text,l),_=this.dimensions.height/g.length;if(this._drawText(this.ctx,g,_),t instanceof un)for(const b of this._textFragments)t.textureLoader.delete(b.canvas);if(this._textFragments=this._splitTextBitmap(this.ctx),t instanceof un)for(const b of this._textFragments)t.textureLoader.load(b.canvas,this.font.filtering,!0);this._lastHashCode=h,this._dirty=!1}for(const g of this._textFragments)t.drawImage(g.canvas,0,0,g.canvas.width,g.canvas.height,g.x/this.font.quality+s-this.ctx.canvas.width/this.font.quality/2,g.y/this.font.quality+r-this.ctx.canvas.height/this.font.quality/2,g.canvas.width/this.font.quality,g.canvas.height/this.font.quality)}dispose(){if(this.disposed=!0,this.dimensions=void 0,this.canvas=void 0,this.ctx=void 0,this._ex instanceof un)for(const t of this._textFragments)this._ex.textureLoader.delete(t.canvas);this._textFragments.length=0}_getLinesFromText(t,s){if(this._chachedText===t&&this._cachedRenderWidth===s)return this._chachedLines;const r=t.split(`
`);if(s==null)return r;for(let l=0;l<r.length;l++){let h=r[l],g="";if(this.measureText(h).width>s){for(;this.measureText(h).width>s;)g=h[h.length-1]+g,h=h.slice(0,-1);r[l]=h,r[l+1]=g}}return this._chachedText=t,this._chachedLines=r,this._cachedRenderWidth=s,r}}class be{static measureText(t,s,r){const l=mr.getHashCode(s,t);if(be._MEASURE_CACHE.has(l))return be._MEASURE_CACHE.get(l);be._LOGGER.debug("Font text measurement cache miss");const h=s.measureTextWithoutCache(t,r);return be._MEASURE_CACHE.set(l,h),h}static getTextInstance(t,s,r){const l=mr.getHashCode(s,t,r);let h=be._TEXT_CACHE.get(l);return h||(h=new mr(s,t,r),be._TEXT_CACHE.set(l,h),be._LOGGER.debug("Font text instance cache miss")),be._TEXT_USAGE.set(h,performance.now()),h}static checkAndClearCache(){const t=[],s=new Set;for(const[l,h]of be._TEXT_USAGE.entries())if(h+100<performance.now())be._LOGGER.debug(`Text cache entry timed out ${l.text}`),t.push(l),l.dispose();else{const g=l.getHashCode(!1);s.add(g)}t.forEach(l=>{be._TEXT_USAGE.delete(l)}),this._TEXT_CACHE.clear();for(const[l]of this._TEXT_USAGE.entries())this._TEXT_CACHE.set(l.getHashCode(),l);const r=new Map;for(const l of s)be._MEASURE_CACHE.has(l)&&r.set(l,be._MEASURE_CACHE.get(l));this._MEASURE_CACHE.clear(),this._MEASURE_CACHE=r}static get cacheSize(){return be._TEXT_USAGE.size}static clearCache(){for(const[t]of be._TEXT_USAGE.entries())t.dispose();be._TEXT_USAGE.clear(),be._TEXT_CACHE.clear(),be._MEASURE_CACHE.clear()}}be._LOGGER=D.getInstance(),be._TEXT_USAGE=new Map,be._TEXT_CACHE=new Map,be._MEASURE_CACHE=new Map;class pr extends Ss{constructor(t={}){var s,r,l,h,g,_,b,S,A,I,V,H,tt,gt,pt,J,K,wt,Ct;super(t),this.filtering=cs.Blended,this.quality=2,this.padding=2,this.smoothing=!1,this.lineWidth=1,this.lineDash=[],this.color=ht.Black,this.family="sans-serif",this.style=fa.Normal,this.bold=!1,this.unit=ua.Px,this.textAlign=ha.Left,this.baseAlign=da.Alphabetic,this.direction=ga.LeftToRight,this.size=10,this.shadow=null,this._textBounds=new Wt,this._textMeasurement=new mr(this,"",ht.Black),this.smoothing=(s=t==null?void 0:t.smoothing)!==null&&s!==void 0?s:this.smoothing,this.padding=(r=t==null?void 0:t.padding)!==null&&r!==void 0?r:this.padding,this.color=(l=t==null?void 0:t.color)!==null&&l!==void 0?l:this.color,this.strokeColor=(h=t==null?void 0:t.strokeColor)!==null&&h!==void 0?h:this.strokeColor,this.lineDash=(g=t==null?void 0:t.lineDash)!==null&&g!==void 0?g:this.lineDash,this.lineWidth=(_=t==null?void 0:t.lineWidth)!==null&&_!==void 0?_:this.lineWidth,this.filtering=(b=t==null?void 0:t.filtering)!==null&&b!==void 0?b:this.filtering,this.family=(S=t==null?void 0:t.family)!==null&&S!==void 0?S:this.family,this.style=(A=t==null?void 0:t.style)!==null&&A!==void 0?A:this.style,this.bold=(I=t==null?void 0:t.bold)!==null&&I!==void 0?I:this.bold,this.size=(V=t==null?void 0:t.size)!==null&&V!==void 0?V:this.size,this.unit=(H=t==null?void 0:t.unit)!==null&&H!==void 0?H:this.unit,this.textAlign=(tt=t==null?void 0:t.textAlign)!==null&&tt!==void 0?tt:this.textAlign,this.baseAlign=(gt=t==null?void 0:t.baseAlign)!==null&&gt!==void 0?gt:this.baseAlign,this.direction=(pt=t==null?void 0:t.direction)!==null&&pt!==void 0?pt:this.direction,this.quality=(J=t==null?void 0:t.quality)!==null&&J!==void 0?J:this.quality,t!=null&&t.shadow&&(this.shadow={},this.shadow.blur=(K=t.shadow.blur)!==null&&K!==void 0?K:this.shadow.blur,this.shadow.offset=(wt=t.shadow.offset)!==null&&wt!==void 0?wt:this.shadow.offset,this.shadow.color=(Ct=t.shadow.color)!==null&&Ct!==void 0?Ct:this.shadow.color)}clone(){return new pr({...this.cloneGraphicOptions(),size:this.size,unit:this.unit,family:this.family,style:this.style,bold:this.bold,textAlign:this.textAlign,baseAlign:this.baseAlign,direction:this.direction,shadow:this.shadow?{blur:this.shadow.blur,offset:this.shadow.offset,color:this.shadow.color}:null})}get fontString(){return`${this.style} ${this.bold?"bold":""} ${this.size}${this.unit} ${this.family}`}get localBounds(){return this._textBounds}_drawImage(t,s,r){}_rotate(t){var s;const r=(s=this.origin)!==null&&s!==void 0?s:this._textBounds.center;t.translate(r.x,r.y),t.rotate(this.rotation),t.translate(-r.x,-r.y)}_flip(t){this.flipHorizontal&&(t.translate(this._textBounds.width/this.scale.x,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,-this._textBounds.height/2/this.scale.y),t.scale(1,-1))}measureTextWithoutCache(t,s){return this._textMeasurement.measureText(t,s)}measureText(t,s){return be.measureText(t,this,s)}_postDraw(t){t.restore()}render(t,s,r,l,h,g){const _=be.getTextInstance(s,this,r);this._textBounds=_.dimensions,this._preDraw(t,l,h),_.render(t,l,h,g),this._postDraw(t)}}class io extends Ss{constructor(t){var s,r;super(t),this._text="",this._textWidth=0,this._textHeight=0,this.font=(s=t.font)!==null&&s!==void 0?s:new pr,this.color=(r=t.color)!==null&&r!==void 0?r:this.color,this.text=t.text,this.maxWidth=t.maxWidth}clone(){var t,s;return new io({text:this.text.slice(),color:(s=(t=this.color)===null||t===void 0?void 0:t.clone())!==null&&s!==void 0?s:ht.Black,font:this.font.clone(),maxWidth:this.maxWidth})}get text(){return this._text}set text(t){this._text=t,this._calculateDimension()}get font(){return this._font}set font(t){this._font=t}get width(){return this._textWidth===0&&this._calculateDimension(),this._textWidth*this.scale.x}get height(){return this._textHeight===0&&this._calculateDimension(),this._textHeight*this.scale.y}_calculateDimension(){const{width:t,height:s}=this.font.measureText(this._text,this.maxWidth);this._textWidth=t,this._textHeight=s}get localBounds(){return this.font.measureText(this._text,this.maxWidth).scale(this.scale)}_rotate(t){}_flip(t){}_preDraw(t,s,r){(this.isStale()||this.font.isStale())&&(this.font.flipHorizontal=this.flipHorizontal,this.font.flipVertical=this.flipVertical,this.font.rotation=this.rotation,this.font.origin=this.origin,this.font.opacity=this.opacity),this.font.tint=this.tint,super._preDraw(t,s,r)}_drawImage(t,s,r){var l;let h=ht.Black;this.font instanceof pr&&(h=(l=this.color)!==null&&l!==void 0?l:this.font.color);const{width:g,height:_}=this.font.measureText(this._text,this.maxWidth);this._textWidth=g,this._textHeight=_,this.font.render(t,this._text,h,s,r,this.maxWidth),this.font.showDebug&&(t.debug.drawRect(s-g,r-_,g*2,_*2),this.maxWidth!=null&&t.debug.drawRect(s,r,this.maxWidth,this.height,{color:ht.Yellow}))}}class Ci extends Ke{get body(){return this.get(ae)}get transform(){return this.get(kt)}get motion(){return this.get(De)}get graphics(){return this.get(os)}get collider(){return this.get(Ne)}get pointer(){return this.get(fr)}get actions(){return this.get(gr)}get pos(){return this.transform.pos}set pos(t){this.transform.pos=t.clone()}get oldPos(){return this.body.oldPos}set oldPos(t){this.body.oldPos.setTo(t.x,t.y)}get vel(){return this.motion.vel}set vel(t){this.motion.vel=t.clone()}get oldVel(){return this.body.oldVel}set oldVel(t){this.body.oldVel.setTo(t.x,t.y)}get acc(){return this.motion.acc}set acc(t){this.motion.acc=t.clone()}set oldAcc(t){this.body.oldAcc.setTo(t.x,t.y)}get oldAcc(){return this.body.oldAcc}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angularVelocity(){return this.motion.angularVelocity}set angularVelocity(t){this.motion.angularVelocity=t}get scale(){return this.get(kt).scale}set scale(t){this.get(kt).scale=t}get anchor(){return this._anchor}set anchor(t){this._anchor=Bn(t,s=>this._handleAnchorChange(s)),this._handleAnchorChange(t)}_handleAnchorChange(t){this.graphics&&(this.graphics.anchor=t)}get isOffScreen(){return this.hasTag("ex.offscreen")}get draggable(){return this._draggable}set draggable(t){t&&(t&&!this._draggable?(this.events.on("pointerdragstart",this._pointerDragStartHandler),this.events.on("pointerdragend",this._pointerDragEndHandler),this.events.on("pointerdragmove",this._pointerDragMoveHandler),this.events.on("pointerdragleave",this._pointerDragLeaveHandler)):!t&&this._draggable&&(this.events.off("pointerdragstart",this._pointerDragStartHandler),this.events.off("pointerdragend",this._pointerDragEndHandler),this.events.off("pointerdragmove",this._pointerDragMoveHandler),this.events.off("pointerdragleave",this._pointerDragLeaveHandler)),this._draggable=t)}get color(){return this._color}set color(t){var s;this._color=t.clone();const l=(s=this.graphics.layers.default.graphics[0])===null||s===void 0?void 0:s.graphic;(l instanceof hr||l instanceof io)&&(l.color=this._color)}constructor(t){super(),this.events=new m,this._anchor=Bn(z.Half,ot=>this._handleAnchorChange(ot)),this.logger=D.getInstance(),this._draggable=!1,this._dragging=!1,this._pointerDragStartHandler=()=>{this._dragging=!0},this._pointerDragEndHandler=()=>{this._dragging=!1},this._pointerDragMoveHandler=ot=>{this._dragging&&(this.pos=ot.worldPos)},this._pointerDragLeaveHandler=ot=>{this._dragging&&(this.pos=ot.worldPos)};const{name:s,x:r,y:l,pos:h,coordPlane:g,scale:_,width:b,height:S,radius:A,collider:I,vel:V,acc:H,rotation:tt,angularVelocity:gt,z:pt,color:J,visible:K,anchor:wt,collisionType:Ct,collisionGroup:Nt}={...t};this._setName(s),this.anchor=wt??Ci.defaults.anchor.clone();const Mt=new kt;this.addComponent(Mt),this.pos=h??Z(r??0,l??0),this.rotation=tt??0,this.scale=_??Z(1,1),this.z=pt??0,Mt.coordPlane=g??Es.World,this.addComponent(new fr),this.addComponent(new os({anchor:this.anchor})),this.addComponent(new De),this.vel=V??z.Zero,this.acc=H??z.Zero,this.angularVelocity=gt??0,this.addComponent(new gr),this.addComponent(new ae),this.body.collisionType=Ct??Xt.Passive,Nt&&(this.body.group=Nt),I?this.addComponent(new Ne(I)):A?this.addComponent(new Ne(rs.Circle(A))):b>0&&S>0?this.addComponent(new Ne(rs.Box(b,S,this.anchor))):this.addComponent(new Ne),this.graphics.visible=K??!0,J&&(this.color=J,b&&S?this.graphics.add(new la({color:J,width:b,height:S})):A&&this.graphics.add(new ca({color:J,radius:A})))}clone(){const t=new Ci({color:this.color.clone(),anchor:this.anchor.clone()});t.clearComponents(),t.processComponentRemoval();const s=this.getComponents();for(const r of s)t.addComponent(r.clone(),!0);return t}onInitialize(t){}_initialize(t){super._initialize(t);for(const s of this.children)s._initialize(t)}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}_prekill(t){this.events.emit("prekill",new w(this)),this.onPreKill(t)}onPreKill(t){}_postkill(t){this.events.emit("postkill",new C(this)),this.onPostKill(t)}onPostKill(t){}kill(){this.scene?(this._prekill(this.scene),this.events.emit("kill",new y(this)),super.kill(),this._postkill(this.scene)):this.logger.warn(`Cannot kill actor named "${this.name}", it was never added to the Scene`)}unkill(){this.active=!0}isKilled(){return!this.active}get z(){return this.get(kt).z}set z(t){this.get(kt).z=t}get center(){const t=this.getGlobalPos();return new z(t.x+this.width/2-this.anchor.x*this.width,t.y+this.height/2-this.anchor.y*this.height)}get localCenter(){return new z(this.pos.x+this.width/2-this.anchor.x*this.width,this.pos.y+this.height/2-this.anchor.y*this.height)}get width(){return this.collider.localBounds.width*this.getGlobalScale().x}get height(){return this.collider.localBounds.height*this.getGlobalScale().y}getGlobalRotation(){return this.get(kt).globalRotation}getGlobalPos(){return this.get(kt).globalPos}getGlobalScale(){return this.get(kt).globalScale}contains(t,s,r=!1){const l=Z(t,s),h=this.get(Ne);h.update();const g=h.get();if(!g)return!1;const _=g.contains(l);return r?_||this.children.some(b=>b.contains(t,s,!0)):_}within(t,s){const r=this.get(Ne),l=t.get(Ne),h=r.get(),g=l.get();return h&&g?h.getClosestLineBetween(g).getLength()<=s:!1}update(t,s){this._initialize(t),this._preupdate(t,s),this._postupdate(t,s)}onPreUpdate(t,s){}onPostUpdate(t,s){}_preupdate(t,s){this.events.emit("preupdate",new W(t,s,this)),this.onPreUpdate(t,s)}_postupdate(t,s){this.events.emit("postupdate",new G(t,s,this)),this.onPostUpdate(t,s)}}Ci.defaults={anchor:z.Half};function Sd(d){return d instanceof fc}class fc extends Ci{constructor(t){var s,r;super({...t}),this.get(kt).coordPlane=Es.Screen,this.anchor=(s=t==null?void 0:t.anchor)!==null&&s!==void 0?s:Z(0,0),this.body.collisionType=(r=t==null?void 0:t.collisionType)!==null&&r!==void 0?r:Xt.PreventCollision,this.pointer.useGraphicsBounds=!0,this.pointer.useColliderShape=!1,!(t!=null&&t.collider)&&(t==null?void 0:t.width)>0&&(t==null?void 0:t.height)>0&&this.collider.useBoxCollider(this.width,this.height,this.anchor)}_initialize(t){this._engine=t,super._initialize(t)}contains(t,s,r=!0){if(r)return super.contains(t,s);const l=this._engine.worldToScreenCoordinates(new z(t,s));return super.contains(l.x,l.y)}}class zn{get complete(){return this._complete}constructor(t,s,r,l,h,g){if(this._logger=D.getInstance(),this.id=0,this._elapsedTime=0,this._totalTimeAlive=0,this._running=!1,this._numberOfTicks=0,this.interval=10,this.repeats=!1,this.maxNumberOfRepeats=-1,this.randomRange=[0,0],this._baseInterval=10,this._generateRandomInterval=()=>this._baseInterval+this.random.integer(this.randomRange[0],this.randomRange[1]),this._complete=!1,this.scene=null,typeof t!="function"){const _=t;t=_.fcn,s=_.interval,r=_.repeats,l=_.numberOfRepeats,h=_.randomRange,g=_.random}if(l&&l>=0&&(this.maxNumberOfRepeats=l,!r))throw new Error("repeats must be set to true if numberOfRepeats is set");if(this.id=zn._MAX_ID++,this._callbacks=[],this._baseInterval=this.interval=s,h){if(h[0]>h[1])throw new Error("min value must be lower than max value for range");this.random=g??new Pt,this.randomRange=h,this.interval=this._generateRandomInterval(),this.on(()=>{this.interval=this._generateRandomInterval()})}this.repeats=r||this.repeats,t&&this.on(t)}on(t){this._callbacks.push(t)}off(t){const s=this._callbacks.indexOf(t);this._callbacks.splice(s,1)}update(t){this._running&&(this._totalTimeAlive+=t,this._elapsedTime+=t,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this._complete=!0,this._running=!1,this._elapsedTime=0),!this.complete&&this._elapsedTime>=this.interval&&(this._callbacks.forEach(s=>{s.call(this)}),this._numberOfTicks++,this.repeats?this._elapsedTime=0:(this._complete=!0,this._running=!1,this._elapsedTime=0)))}reset(t,s){if(t&&t>=0&&(this._baseInterval=this.interval=t),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=s,!this.repeats))throw new Error("repeats must be set to true if numberOfRepeats is set");this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0}get timesRepeated(){return this._numberOfTicks}getTimeRunning(){return this._totalTimeAlive}get timeToNextAction(){return this.complete?0:this.interval-this._elapsedTime}get timeElapsedTowardNextAction(){return this._elapsedTime}get isRunning(){return this._running}pause(){return this._running=!1,this}resume(){return this._running=!0,this}start(){return this.scene||this._logger.warn("Cannot start a timer not part of a scene, timer wont start until added"),this._running=!0,this.complete&&(this._complete=!1,this._elapsedTime=0,this._numberOfTicks=0),this}stop(){return this._running=!1,this._elapsedTime=0,this._numberOfTicks=0,this}cancel(){this.pause(),this.scene&&this.scene.cancelTimer(this)}}zn._MAX_ID=0;class ma extends Ns{constructor(t){super(),this.type="ex.parallax",this.parallaxFactor=Z(1,1),this.parallaxFactor=t??this.parallaxFactor}}class pa extends Ns{constructor(t,s=!0){super(),this.draw=t,this.useTransform=s,this.type="ex.debuggraphics"}}const xy={PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw"};class Ed extends Ke{flagCollidersDirty(){this._collidersDirty=!0}flagTilesDirty(){for(let t=0;t<this.tiles.length;t++)this.tiles[t]&&this.tiles[t].flagDirty()}get x(){var t;return(t=this._transform.pos.x)!==null&&t!==void 0?t:0}set x(t){var s;!((s=this._transform)===null||s===void 0)&&s.pos&&(this.get(kt).pos=Z(t,this.y))}get y(){var t,s;return(s=(t=this._transform)===null||t===void 0?void 0:t.pos.y)!==null&&s!==void 0?s:0}set y(t){var s;!((s=this._transform)===null||s===void 0)&&s.pos&&(this._transform.pos=Z(this.x,t))}get z(){var t;return(t=this._transform.z)!==null&&t!==void 0?t:0}set z(t){this._transform&&(this._transform.z=t)}get rotation(){var t,s;return(s=(t=this._transform)===null||t===void 0?void 0:t.rotation)!==null&&s!==void 0?s:0}set rotation(t){var s;!((s=this._transform)===null||s===void 0)&&s.rotation&&(this._transform.rotation=t)}get scale(){var t,s;return(s=(t=this._transform)===null||t===void 0?void 0:t.scale)!==null&&s!==void 0?s:z.One}set scale(t){var s;!((s=this._transform)===null||s===void 0)&&s.scale&&(this._transform.scale=t)}get pos(){return this._transform.pos}set pos(t){this._transform.pos=t}get vel(){return this._motion.vel}set vel(t){this._motion.vel=t}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}constructor(t){var s,r;super(null,t.name),this.events=new m,this._token=0,this.logger=D.getInstance(),this.tiles=[],this._rows=[],this._cols=[],this.renderFromTopOfGraphic=!1,this._collidersDirty=!0,this._originalOffsets=new WeakMap,this.addComponent(new kt),this.addComponent(new De),this.addComponent(new ae({type:Xt.Fixed})),this.addComponent(new os({onPostDraw:(h,g)=>this.draw(h,g)})),this.addComponent(new pa(h=>this.debug(h))),this.addComponent(new Ne),this._graphics=this.get(os),this._transform=this.get(kt),this._motion=this.get(De),this._collider=this.get(Ne),this._composite=this._collider.useCompositeCollider([]),this._transform.pos=(s=t.pos)!==null&&s!==void 0?s:z.Zero,this._oldPos=this._transform.pos.clone(),this._oldScale=this._transform.scale.clone(),this.renderFromTopOfGraphic=(r=t.renderFromTopOfGraphic)!==null&&r!==void 0?r:this.renderFromTopOfGraphic,this.tileWidth=t.tileWidth,this.tileHeight=t.tileHeight,this.rows=t.rows,this.columns=t.columns,this.tiles=new Array(this.rows*this.columns),this._rows=new Array(this.rows),this._cols=new Array(this.columns);let l=[];for(let h=0;h<this.columns;h++){for(let g=0;g<this.rows;g++){const _=new Ad({x:h,y:g,map:this});_.map=this,this.tiles[h+g*this.columns]=_,l.push(_),this._rows[g]||(this._rows[g]=[]),this._rows[g].push(_)}this._cols[h]=l,l=[]}this._graphics.localBounds=new Wt({left:0,top:0,right:this.columns*this.tileWidth*this.scale.x,bottom:this.rows*this.tileHeight*this.scale.y})}_initialize(t){super._initialize(t),this._engine=t}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const s=t.offset;return this._originalOffsets.set(t,s),s}}_updateColliders(){this._collider.$colliderRemoved.notifyAll(this._composite),this._composite.clearColliders();const t=[];this._composite=this._collider.useCompositeCollider([]);let s;for(let r=0;r<this.columns;r++){for(let l=0;l<this.rows;l++){l===0&&(s=null);const h=this.tiles[r+l*this.columns];if(h.solid)if(h.getColliders().length>0){for(const g of h.getColliders()){const _=this._getOrSetColliderOriginalOffset(g);g.offset=Z(h.x*this.tileWidth*this.scale.x,h.y*this.tileHeight*this.scale.y).add(_),g.owner=this,this._composite.addCollider(g)}s&&t.push(s),s=null}else s?s=s.combine(h.bounds):s=h.bounds;else s&&t.push(s),s=null}if(s){const l=t[t.length-1];l&&l.top===s.top&&l.bottom===s.bottom?t[t.length-1]=l.combine(s):t.push(s)}}for(const r of t){const l=rs.Box(r.width,r.height,z.Zero,Z(r.left-this.pos.x,r.top-this.pos.y));l.owner=this,this._composite.addCollider(l)}this._collider.update(),this._collider.$colliderAdded.notifyAll(this._composite)}getTileByIndex(t){return this.tiles[t]}getTile(t,s){return t<0||s<0||t>=this.columns||s>=this.rows?null:this.tiles[t+s*this.columns]}getTileByPoint(t){const s=Math.floor((t.x-this.pos.x)/(this.tileWidth*this.scale.x)),r=Math.floor((t.y-this.pos.y)/(this.tileHeight*this.scale.y)),l=this.getTile(s,r);return s>=0&&r>=0&&s<this.columns&&r<this.rows&&l?l:null}getRows(){return this._rows}getColumns(){return this._cols}update(t,s){this.onPreUpdate(t,s),this.emit("preupdate",new W(t,s,this)),(!this._oldPos.equals(this.pos)||!this._oldScale.equals(this.scale))&&(this.flagCollidersDirty(),this.flagTilesDirty()),this._collidersDirty&&(this._collidersDirty=!1,this._updateColliders()),this._token++,this.pos.clone(this._oldPos),this.scale.clone(this._oldScale),this._transform.pos=this.pos,this.onPostUpdate(t,s),this.emit("postupdate",new G(t,s,this))}draw(t,s){this.emit("predraw",new k(t,s,this));let r=this._engine.screen.getWorldBounds(),l=0;const h=this.columns;let g=0;const _=this.rows;let b,S,A;const I=this.get(ma);if(I){let H=this.pos;const tt=z.One.sub(I.parallaxFactor),gt=this._engine.currentScene.camera.pos.scale(tt);H=H.sub(gt),r=r.translate(H)}let V;for(l;l<h;l++){for(g;g<_;g++)if(V=this.getTile(l,g),!!r.overlaps(V.bounds))for(b=this.getTile(l,g).getGraphics(),S=0,A=b.length;S<A;S++){const H=b[S];if(H){uc(H)&&(H==null||H.tick(s,this._token));const tt=this.renderFromTopOfGraphic?0:H.height-this.tileHeight;H.draw(t,l*this.tileWidth,g*this.tileHeight-tt)}}g=0}this.emit("postdraw",new R(t,s,this))}debug(t){const s=this.tileWidth*this.columns,r=this.tileHeight*this.rows,l=z.Zero;for(let g=0;g<this.rows+1;g++){const _=Z(0,g*this.tileHeight);t.drawLine(l.add(_),l.add(Z(s,_.y)),ht.Red,2)}for(let g=0;g<this.columns+1;g++){const _=Z(g*this.tileWidth,0);t.drawLine(l.add(_),l.add(Z(_.x,r)),ht.Red,2)}const h=this._composite.getColliders();for(const g of h){const _=ht.Gray;_.a=.5;const b=g.localBounds,S=g.worldPos.sub(this.pos);t.drawRectangle(S,b.width,b.height,_)}}}class Ad extends Ke{get pos(){return this._posDirty&&(this._recalculate(),this._posDirty=!1),this._pos}get width(){return this._width}get height(){return this._height}get solid(){return this._solid}set solid(t){var s;(s=this.map)===null||s===void 0||s.flagCollidersDirty(),this._solid=t}getGraphics(){return this._graphics}addGraphic(t){this._graphics.push(t)}removeGraphic(t){Hi(t,this._graphics)}clearGraphics(){this._graphics.length=0}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const s=this._colliders.indexOf(t);s>-1&&this._colliders.splice(s,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}constructor(t){var s,r;super(),this._posDirty=!1,this._solid=!1,this._graphics=[],this._colliders=[],this.data=new Map,this.x=t.x,this.y=t.y,this.map=t.map,this._width=t.map.tileWidth*this.map.scale.x,this._height=t.map.tileHeight*this.map.scale.y,this.solid=(s=t.solid)!==null&&s!==void 0?s:this.solid,this._graphics=(r=t.graphics)!==null&&r!==void 0?r:[],this._recalculate()}flagDirty(){return this._posDirty=!0}_recalculate(){this._width=this.map.tileWidth*this.map.scale.x,this._height=this.map.tileHeight*this.map.scale.y,this._pos=this.map.pos.add(Z(this.x*this._width,this.y*this._height)),this._bounds=new Wt(this._pos.x,this._pos.y,this._pos.x+this._width,this._pos.y+this._height),this._posDirty=!1}get bounds(){return this._posDirty&&this._recalculate(),this._bounds}get center(){return this._posDirty&&this._recalculate(),new z(this._pos.x+this._width/2,this._pos.y+this._height/2)}}class Td{constructor(t){this.camera=t}lockToActor(t){this.camera.addStrategy(new Pd(t))}lockToActorAxis(t,s){this.camera.addStrategy(new kd(t,s))}elasticToActor(t,s,r){this.camera.addStrategy(new Id(t,s,r))}radiusAroundActor(t,s){this.camera.addStrategy(new Rd(t,s))}limitCameraBounds(t){this.camera.addStrategy(new Md(t))}}var _a;(function(d){d[d.X=0]="X",d[d.Y=1]="Y"})(_a||(_a={}));class Pd{constructor(t){this.target=t,this.action=(s,r,l,h)=>s.center}}class kd{constructor(t,s){this.target=t,this.axis=s,this.action=(r,l,h,g)=>{const _=r.center,b=l.getFocus();return this.axis===_a.X?new z(_.x,b.y):new z(b.x,_.y)}}}class Id{constructor(t,s,r){this.target=t,this.cameraElasticity=s,this.cameraFriction=r,this.action=(l,h,g,_)=>{const b=l.center;let S=h.getFocus(),A=h.vel.clone();const I=b.sub(S).scale(this.cameraElasticity);A=A.add(I);const V=A.scale(-1).scale(this.cameraFriction);return A=A.add(V),S=S.add(A),S}}}class Rd{constructor(t,s){this.target=t,this.radius=s,this.action=(r,l,h,g)=>{const _=r.center,b=l.getFocus(),S=_.sub(b),A=S.size;if(A>=this.radius){const I=A-this.radius;return b.add(S.normalize().scale(I))}return b}}}class Md{constructor(t){this.target=t,this.boundSizeChecked=!1,this.action=(s,r,l,h)=>{const g=r.getFocus();this.boundSizeChecked||((s.bottom-s.top<l.drawHeight||s.right-s.left<l.drawWidth)&&D.getInstance().warn("Camera bounds should not be smaller than the engine viewport"),this.boundSizeChecked=!0);let _=g.x,b=g.y;return g.x<s.left+l.halfDrawWidth?_=s.left+l.halfDrawWidth:g.x>s.right-l.halfDrawWidth&&(_=s.right-l.halfDrawWidth),g.y<s.top+l.halfDrawHeight?b=s.top+l.halfDrawHeight:g.y>s.bottom-l.halfDrawHeight&&(b=s.bottom-l.halfDrawHeight),Z(_,b)}}}const Cy={Initialize:"initialize",PreUpdate:"preupdate",PostUpdate:"postupdate"};class Bd{constructor(){this.events=new m,this.transform=Ve.identity(),this.inverse=Ve.identity(),this._cameraStrategies=[],this.strategy=new Td(this),this._z=1,this.dz=0,this.az=0,this.rotation=0,this._angularVelocity=0,this._posChanged=!1,this._pos=Wh(z.Zero,()=>this._posChanged=!0),this.vel=z.Zero,this.acc=z.Zero,this._cameraMoving=!1,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=null,this._lerpEnd=null,this._isShaking=!1,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._elapsedShakeTime=0,this._xShake=0,this._yShake=0,this._isZooming=!1,this._zoomStart=1,this._zoomEnd=1,this._currentZoomTime=0,this._zoomDuration=0,this._zoomEasing=Pe.EaseInOutCubic,this._easing=Pe.EaseInOutCubic,this._halfWidth=0,this._halfHeight=0,this._viewport=null,this._isInitialized=!1}get zoom(){return this._z}set zoom(t){this._z=t,this._engine&&(this._halfWidth=this._engine.halfDrawWidth,this._halfHeight=this._engine.halfDrawHeight)}get angularVelocity(){return this._angularVelocity}set angularVelocity(t){this._angularVelocity=t}get pos(){return this._pos}set pos(t){this._pos=Wh(t,()=>this._posChanged=!0),this._posChanged=!0}get x(){return this.pos.x}set x(t){!this._follow&&!this._cameraMoving&&(this.pos=Z(t,this.pos.y))}get y(){return this.pos.y}set y(t){!this._follow&&!this._cameraMoving&&(this.pos=Z(this.pos.x,t))}get dx(){return this.vel.x}set dx(t){this.vel=Z(t,this.vel.y)}get dy(){return this.vel.y}set dy(t){this.vel=Z(this.vel.x,t)}get ax(){return this.acc.x}set ax(t){this.acc=Z(t,this.acc.y)}get ay(){return this.acc.y}set ay(t){this.acc=Z(this.acc.x,t)}getFocus(){return this.pos}move(t,s,r=Pe.EaseInOutCubic){if(typeof r!="function")throw"Please specify an EasingFunction";return this._follow?Promise.reject(t):(this._lerpPromise&&this._lerpResolve&&this._lerpResolve(t),this._lerpPromise=new Promise(l=>{this._lerpResolve=l}),this._lerpStart=this.getFocus().clone(),this._lerpDuration=s,this._lerpEnd=t,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=r,this._lerpPromise)}shake(t,s,r){this._isShaking=!0,this._shakeMagnitudeX=t,this._shakeMagnitudeY=s,this._shakeDuration=r}zoomOverTime(t,s=0,r=Pe.EaseInOutCubic){if(this._zoomPromise=new Promise(l=>{this._zoomResolve=l}),s)this._isZooming=!0,this._zoomEasing=r,this._currentZoomTime=0,this._zoomDuration=s,this._zoomStart=this.zoom,this._zoomEnd=t;else return this._isZooming=!1,this.zoom=t,Promise.resolve(!0);return this._zoomPromise}get viewport(){return this._viewport?this._viewport:new Wt(0,0,0,0)}addStrategy(t){this._cameraStrategies.push(t)}removeStrategy(t){Hi(t,this._cameraStrategies)}clearAllStrategies(){this._cameraStrategies.length=0}_preupdate(t,s){this.events.emit("preupdate",new W(t,s,this)),this.onPreUpdate(t,s)}onPreUpdate(t,s){}_postupdate(t,s){this.events.emit("postupdate",new G(t,s,this)),this.onPostUpdate(t,s)}onPostUpdate(t,s){}get isInitialized(){return this._isInitialized}_initialize(t){if(!this.isInitialized){this._engine=t,this._screen=t.screen;const s=this._screen.contentArea;let r=Z(s.width/2,s.height/2);if(!this._engine.loadingComplete){const l=this._screen.peekResolution();l&&(r=Z(l.width/2,l.height/2))}this._halfWidth=r.x,this._halfHeight=r.y,this._posChanged||(this.pos=r),this.updateTransform(),this.runStrategies(t,t.clock.elapsed()),this.updateViewport(),this.updateTransform(),this.onInitialize(t),this.events.emit("initialize",new he(t,this)),this._isInitialized=!0}}onInitialize(t){}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}runStrategies(t,s){for(const r of this._cameraStrategies)this.pos=r.action.call(r,r.target,this,t,s)}updateViewport(){this._viewport=new Wt(this.x-this._halfWidth,this.y-this._halfHeight,this.x+this._halfWidth,this.y+this._halfHeight)}update(t,s){if(this._initialize(t),this._preupdate(t,s),this.pos=this.pos.add(this.vel.scale(s/1e3)),this.zoom+=this.dz*s/1e3,this.vel=this.vel.add(this.acc.scale(s/1e3)),this.dz+=this.az*s/1e3,this.rotation+=this.angularVelocity*s/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){const r=this._zoomEasing,l=r(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.zoom=l,this._currentZoomTime+=s}else this._isZooming=!1,this.zoom=this._zoomEnd,this._currentZoomTime=0,this._zoomResolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){const l=Pe.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this.pos=l,this._currentLerpTime+=s}else{this.pos=this._lerpEnd;const r=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpResolve(r)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=s,this._xShake=(Math.random()*this._shakeMagnitudeX|0)+1,this._yShake=(Math.random()*this._shakeMagnitudeY|0)+1),this.runStrategies(t,s),this.updateViewport(),this.updateTransform(),this._postupdate(t,s)}draw(t){t.multiply(this.transform)}updateTransform(){const t=this._screen.resolution.width/this.zoom,s=this._screen.resolution.height/this.zoom,r=Z(-this.x+t/2+this._xShake,-this.y+s/2+this._yShake);this.transform.reset(),this.transform.scale(this.zoom,this.zoom),this.transform.translate(t/2,s/2),this.transform.rotate(this.rotation),this.transform.translate(-t/2,-s/2),this.transform.translate(r.x,r.y),this.transform.inverse(this.inverse)}_isDoneShaking(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration}}const Sy={ExitTrigger:"exittrigger",EnterTrigger:"entertrigger"},Ey={pos:z.Zero,width:10,height:10,visible:!1,action:()=>{},filter:()=>!0,repeat:-1};class Fd extends Ci{constructor(t){super({x:t.pos.x,y:t.pos.y,width:t.width,height:t.height}),this.events=new m,this.action=()=>{},this.filter=()=>!0,this.repeat=-1,t={...Ey,...t},this.filter=t.filter||this.filter,this.repeat=t.repeat||this.repeat,this.action=t.action||this.action,t.target&&(this.target=t.target),this.graphics.visible=t.visible,this.body.collisionType=Xt.Passive,this.events.on("collisionstart",s=>{this.filter(s.other)&&(this.emit("enter",new et(this,s.other)),this._dispatchAction(),this.repeat===0&&this.kill())}),this.events.on("collisionend",s=>{this.filter(s.other)&&this.emit("exit",new Tt(this,s.other))})}set target(t){this._target=t,this.filter=s=>s===t}get target(){return this._target}_initialize(t){super._initialize(t)}_dispatchAction(){this.repeat!==0&&(this.action.call(this),this.repeat--)}}var Ts;(function(d){d.Update="update",d.Draw="draw"})(Ts||(Ts={}));class ai{constructor(){this.priority=0}notify(t){}}class Dd{constructor(t){this.data=t,this.type="Entity Added"}}function no(d){return!!d&&d.type==="Entity Added"}class Ld{constructor(t){this.data=t,this.type="Entity Removed"}}function Ay(d){return!!d&&d.type==="Entity Removed"}class Od{constructor(t){this._world=t,this.entities=[],this._entityIndex={},this._entitiesToRemove=[]}updateEntities(t,s){for(const r of this.entities)r.update(t.engine,s),r.active||this.removeEntity(r)}findEntitiesForRemoval(){for(const t of this.entities)t.active||this.removeEntity(t)}notify(t){rd(t)&&this._world.queryManager.addEntity(t.data.entity),ad(t)&&this._world.queryManager.removeComponent(t.data.entity,t.data.component)}addEntity(t){t.active=!0,t.scene=this._world.context,t&&!this._entityIndex[t.id]&&(this._entityIndex[t.id]=t,this.entities.push(t),this._world.queryManager.addEntity(t),t.componentAdded$.register(this),t.componentRemoved$.register(this),t.children.forEach(s=>{s.scene=t.scene,this.addEntity(s)}),t.childrenAdded$.register({notify:s=>{this.addEntity(s)}}),t.childrenRemoved$.register({notify:s=>{this.removeEntity(s,!1)}}))}removeEntity(t,s=!0){var r;let l=0;t instanceof Ke?l=t.id:l=t;const h=this._entityIndex[l];if(h&&h.active&&(h.active=!1),h&&s){this._entitiesToRemove.push(h);return}delete this._entityIndex[l],h&&(h.scene=null,Hi(h,this.entities),this._world.queryManager.removeEntity(h),h.componentAdded$.unregister(this),h.componentRemoved$.unregister(this),h.children.forEach(g=>{g.scene=null,this.removeEntity(g,s)}),h.childrenAdded$.clear(),h.childrenRemoved$.clear(),!((r=this._world.context)===null||r===void 0)&&r.engine&&this._world.context.engine.stats.currFrame.actors.killed++)}processEntityRemovals(){for(const t of this._entitiesToRemove)t.active||this.removeEntity(t,!1);this._entitiesToRemove.length=0}processComponentRemovals(){for(const t of this.entities)t.processComponentRemoval()}getById(t){return this._entityIndex[t]}getByName(t){return this.entities.filter(s=>s.name===t)}clear(){for(const t of this.entities)this.removeEntity(t)}}const va=d=>[...d].sort((s,r)=>s.localeCompare(r)).join("+");class Vd extends wi{get key(){return this._key?this._key:this._key=va(this.types)}constructor(t){super(),this._entities=[],t[0]instanceof Function?this.types=t.map(s=>new s().type):this.types=t}getEntities(t){return t&&this._entities.sort(t),this._entities}addEntity(t){!Gl(this._entities,t)&&this.matches(t)&&(this._entities.push(t),this.notifyAll(new Dd(t)))}removeEntity(t){Hi(t,this._entities)&&this.notifyAll(new Ld(t))}clear(){this._entities.length=0;for(const t of this.observers)this.unregister(t)}matches(t){let s=[];t instanceof Ke?s=t.types:s=t;let r=!0;for(const l of this.types)if(r=r&&s.indexOf(l)>-1,!r)return!1;return r}contain(t){return this.types.indexOf(t)>-1}}class zd{constructor(t){this._world=t,this._queries={}}_addQuery(t){this._queries[va(t.types)]=t;for(const s of this._world.entityManager.entities)t.addEntity(s)}maybeRemoveQuery(t){t.observers.length===0&&(t.clear(),delete this._queries[va(t.types)])}addEntity(t){for(const s in this._queries)this._queries[s]&&this._queries[s].addEntity(t)}removeComponent(t,s){for(const r in this._queries)this._queries[r].contain(s.type)&&this._queries[r].removeEntity(t)}removeEntity(t){for(const s in this._queries)this._queries[s].removeEntity(t)}createQuery(t){const s=this.getQuery(t);if(s)return s;const r=new Vd(t);return this._addQuery(r),r}getQuery(t){const s=va(t);return this._queries[s]?this._queries[s]:null}}class Nd{constructor(t){this._world=t,this.systems=[],this.initialized=!1}get(t){return this.systems.find(s=>s instanceof t)}addSystem(t){if(!t.types||t.types.length===0)throw new Error("Attempted to add a System without any types");const s=this._world.queryManager.createQuery(t.types);this.systems.push(t),this.systems.sort((r,l)=>r.priority-l.priority),s.register(t),this.initialized&&t.initialize&&t.initialize(this._world.context)}removeSystem(t){Hi(t,this.systems);const s=this._world.queryManager.getQuery(t.types);s&&(s.unregister(t),this._world.queryManager.maybeRemoveQuery(s))}initialize(){if(!this.initialized){this.initialized=!0;for(const t of this.systems)t.initialize&&t.initialize(this._world.context)}}updateSystems(t,s,r){const l=this.systems.filter(h=>h.systemType===t);for(const h of l)h.preupdate&&h.preupdate(s,r);for(const h of l){const g=this._world.queryManager.getQuery(h.types).getEntities(h.sort);if(s instanceof ao)for(const _ of g)_._initialize(s==null?void 0:s.engine);h.update(g,r)}for(const h of l)h.postupdate&&h.postupdate(s,r)}clear(){for(const t of this.systems)this.removeSystem(t)}}class Ud{constructor(t){this.context=t,this.queryManager=new zd(this),this.entityManager=new Od(this),this.systemManager=new Nd(this)}update(t,s){t===Ts.Update&&this.entityManager.updateEntities(this.context,s),this.systemManager.updateSystems(t,this.context,s),this.entityManager.findEntitiesForRemoval(),this.entityManager.processComponentRemovals(),this.entityManager.processEntityRemovals()}add(t){t instanceof Ke&&this.entityManager.addEntity(t),t instanceof ai&&this.systemManager.addSystem(t)}remove(t,s=!0){t instanceof Ke&&this.entityManager.removeEntity(t,s),t instanceof ai&&this.systemManager.removeSystem(t)}clearEntities(){this.entityManager.clear()}clearSystems(){this.systemManager.clear()}}class ps{static integrate(t,s,r,l){const h=l/1e3;s.vel.addEqual(r.scale(h,ps._ACC)),t.pos.add(s.vel.scale(h,ps._VEL),ps._POS).addEqual(r.scale(.5*h*h,ps._VEL_ACC)),s.angularVelocity+=s.torque*(1/s.inertia)*h;const g=t.rotation+s.angularVelocity*h;t.scale.add(s.scaleFactor.scale(h,this._SCALE_FACTOR),ps._SCALE),t.get().setTransform(ps._POS,g,ps._SCALE)}}ps._POS=new z(0,0),ps._SCALE=new z(1,1),ps._ACC=new z(0,0),ps._VEL=new z(0,0),ps._VEL_ACC=new z(0,0),ps._SCALE_FACTOR=new z(0,0);class Hd extends ai{constructor(){super(...arguments),this.types=["ex.transform","ex.motion"],this.systemType=Ts.Update,this.priority=-1}update(t,s){let r,l;for(let h=0;h<t.length;h++){r=t[h].get(kt),l=t[h].get(De);const g=t[h].get(ae);if(g!=null&&g.sleeping)continue;const _=l.acc.clone();(g==null?void 0:g.collisionType)===Xt.Active&&(g!=null&&g.useGravity)&&_.addEqual(Dt.gravity),g==null||g.captureOldTransform(),ps.integrate(r,l,_,s)}}}class $d{constructor(){this.directionMap=new Map,this.distanceMap=new Map}solve(t){this.preSolve(t),t=t.filter(s=>!s.isCanceled()),t.sort((s,r)=>{const l=this.distanceMap.get(s.id),h=this.distanceMap.get(r.id);return l-h});for(const s of t)this.solvePosition(s),this.solveVelocity(s);return this.postSolve(t),t}preSolve(t){for(const r of t){if(Math.abs(r.mtv.x)<1e-4&&Math.abs(r.mtv.y)<1e-4){r.cancel();continue}const l=Oe.fromDirection(r.mtv),h=r.mtv.negate(),g=r.colliderA.worldPos.squareDistance(r.colliderB.worldPos);this.distanceMap.set(r.id,g),r.colliderA.events.emit("precollision",new Q(r.colliderA,r.colliderB,l,h)),r.colliderB.events.emit("precollision",new Q(r.colliderB,r.colliderA,Oe.getOpposite(l),h.negate()))}}postSolve(t){var s,r;for(const l of t){if(l.isCanceled())continue;const h=l.colliderA,g=l.colliderB,_=(s=h.owner)===null||s===void 0?void 0:s.get(ae),b=(r=g.owner)===null||r===void 0?void 0:r.get(ae);if(_&&b&&(_.collisionType===Xt.Passive||b.collisionType===Xt.Passive))continue;const S=Oe.fromDirection(l.mtv),A=l.mtv.negate();l.colliderA.events.emit("postcollision",new rt(l.colliderA,l.colliderB,S,A)),l.colliderB.events.emit("postcollision",new rt(l.colliderB,l.colliderA,Oe.getOpposite(S),A.negate()))}}solvePosition(t){var s,r;if(!t.colliderA.bounds.overlaps(t.colliderB.bounds,1e-4)){t.cancel();return}if(Math.abs(t.mtv.x)<1e-4&&Math.abs(t.mtv.y)<1e-4){t.cancel();return}let h=t.mtv;const g=t.colliderA,_=t.colliderB,b=(s=g.owner)===null||s===void 0?void 0:s.get(ae),S=(r=_.owner)===null||r===void 0?void 0:r.get(ae);if(b&&S){if(b.collisionType===Xt.Passive||S.collisionType===Xt.Passive)return;b.collisionType===Xt.Active&&S.collisionType===Xt.Active&&(h=h.scale(.5)),b.collisionType===Xt.Active&&(b.globalPos.x-=h.x,b.globalPos.y-=h.y,g.update(b.transform.get())),S.collisionType===Xt.Active&&(S.globalPos.x+=h.x,S.globalPos.y+=h.y,_.update(S.transform.get()))}}solveVelocity(t){var s,r;if(t.isCanceled())return;const l=t.colliderA,h=t.colliderB,g=(s=l.owner)===null||s===void 0?void 0:s.get(ae),_=(r=h.owner)===null||r===void 0?void 0:r.get(ae);if(g&&_){if(g.collisionType===Xt.Passive||_.collisionType===Xt.Passive)return;const b=t.normal,S=b.negate();if(g.collisionType===Xt.Active&&g.vel.normalize().dot(S)<0){const A=b.scale(b.dot(g.vel.negate()));g.vel=g.vel.add(A)}if(_.collisionType===Xt.Active&&_.vel.normalize().dot(b)<0){const A=S.scale(S.dot(_.vel.negate()));_.vel=_.vel.add(A)}}}}class Wd{constructor(t,s,r){this.point=t,this.local=s,this.contact=r,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.aToContact=new z(0,0),this.bToContact=new z(0,0),this.originalVelocityAndRestitution=0,this.update()}update(){var t,s;const r=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(ae),l=(s=this.contact.colliderB.owner)===null||s===void 0?void 0:s.get(ae);if(r&&l){const h=this.contact.normal,g=this.contact.tangent;this.aToContact=this.point.sub(r.globalPos),this.bToContact=this.point.sub(l.globalPos);const _=this.aToContact.cross(h),b=this.bToContact.cross(h);this.normalMass=r.inverseMass+l.inverseMass+r.inverseInertia*_*_+l.inverseInertia*b*b;const S=this.aToContact.cross(g),A=this.bToContact.cross(g);this.tangentMass=r.inverseMass+l.inverseMass+r.inverseInertia*S*S+l.inverseInertia*A*A}return this}getRelativeVelocity(){var t,s;const r=(t=this.contact.colliderA.owner)===null||t===void 0?void 0:t.get(ae),l=(s=this.contact.colliderB.owner)===null||s===void 0?void 0:s.get(ae);if(r&&l){const h=r.vel.add(z.cross(r.angularVelocity,this.aToContact));return l.vel.add(z.cross(l.angularVelocity,this.bToContact)).sub(h)}return z.Zero}}class Gd{constructor(){this.lastFrameContacts=new Map,this.idToContactConstraint=new Map}getContactConstraints(t){var s;return(s=this.idToContactConstraint.get(t))!==null&&s!==void 0?s:[]}solve(t){return this.preSolve(t),t=t.filter(s=>!s.isCanceled()),this.solveVelocity(t),this.solvePosition(t),this.postSolve(t),t}preSolve(t){var s,r,l;for(const _ of t){if(Math.abs(_.mtv.x)<1e-4&&Math.abs(_.mtv.y)<1e-4){_.cancel();continue}const b=Oe.fromDirection(_.mtv);_.colliderA.events.emit("precollision",new Q(_.colliderA,_.colliderB,b,_.mtv)),_.colliderA.events.emit("beforecollisionresolve",new ut(_.colliderA,_.colliderB,b,_.mtv,_)),_.colliderB.events.emit("precollision",new Q(_.colliderB,_.colliderA,Oe.getOpposite(b),_.mtv.negate())),_.colliderB.events.emit("beforecollisionresolve",new ut(_.colliderB,_.colliderA,Oe.getOpposite(b),_.mtv.negate(),_)),_.matchAwake()}const g=Array.from(this.idToContactConstraint.keys());for(const _ of t){const b=g.indexOf(_.id);b>-1&&g.splice(b,1);const S=(s=this.idToContactConstraint.get(_.id))!==null&&s!==void 0?s:[];let A=0;const I=_.colliderA.owner.get(ae),V=_.colliderB.owner.get(ae);if(I&&V)for(const H of _.points){const tt=_.normal,gt=_.tangent,pt=H.sub(I.globalPos),J=H.sub(V.globalPos),K=pt.cross(tt),wt=J.cross(tt),Ct=I.inverseMass+V.inverseMass+I.inverseInertia*K*K+V.inverseInertia*wt*wt,Nt=pt.cross(gt),Mt=J.cross(gt),ot=I.inverseMass+V.inverseMass+I.inverseInertia*Nt*Nt+V.inverseInertia*Mt*Mt;S[A]&&((l=(r=S[A])===null||r===void 0?void 0:r.point)===null||l===void 0?void 0:l.squareDistance(H))<4?(S[A].point=H,S[A].local=_.localPoints[A]):S[A]=new Wd(H,_.localPoints[A],_),S[A].aToContact=pt,S[A].bToContact=J,S[A].normalMass=1/Ct,S[A].tangentMass=1/ot;const ce=I.bounciness>V.bounciness?I.bounciness:V.bounciness,ge=_.normal.dot(S[A].getRelativeVelocity());S[A].originalVelocityAndRestitution=0,ge<-.1&&(S[A].originalVelocityAndRestitution=-ce*ge),A++}this.idToContactConstraint.set(_.id,S)}for(const _ of g)this.idToContactConstraint.delete(_);if(Dt.warmStart)this.warmStart(t);else for(const _ of t){const b=this.getContactConstraints(_.id);for(const S of b)S.normalImpulse=0,S.tangentImpulse=0}}postSolve(t){for(const s of t){const r=s.colliderA.owner.get(ae),l=s.colliderB.owner.get(ae);if(r&&l){if(r.collisionType===Xt.Passive||l.collisionType===Xt.Passive)continue;r.updateMotion(),l.updateMotion()}const h=Oe.fromDirection(s.mtv);s.colliderA.events.emit("postcollision",new rt(s.colliderA,s.colliderB,h,s.mtv)),s.colliderA.events.emit("aftercollisionresolve",new Rt(s.colliderA,s.colliderB,h,s.mtv,s)),s.colliderB.events.emit("postcollision",new rt(s.colliderB,s.colliderA,Oe.getOpposite(h),s.mtv.negate())),s.colliderB.events.emit("aftercollisionresolve",new Rt(s.colliderB,s.colliderA,Oe.getOpposite(h),s.mtv.negate(),s))}this.lastFrameContacts.clear();for(const s of t)this.lastFrameContacts.set(s.id,s)}warmStart(t){var s,r,l;for(const h of t){const g=(s=h.colliderA.owner)===null||s===void 0?void 0:s.get(ae),_=(r=h.colliderB.owner)===null||r===void 0?void 0:r.get(ae);if(g&&_){const b=(l=this.idToContactConstraint.get(h.id))!==null&&l!==void 0?l:[];for(const S of b)if(Dt.warmStart){const A=h.normal.scale(S.normalImpulse),I=h.tangent.scale(S.tangentImpulse),V=A.add(I);g.applyImpulse(S.point,V.negate()),_.applyImpulse(S.point,V)}else S.normalImpulse=0,S.tangentImpulse=0}}}solvePosition(t){var s,r,l;for(let h=0;h<Dt.positionIterations;h++)for(const g of t){const _=(s=g.colliderA.owner)===null||s===void 0?void 0:s.get(ae),b=(r=g.colliderB.owner)===null||r===void 0?void 0:r.get(ae);if(_&&b){if(_.collisionType===Xt.Passive||b.collisionType===Xt.Passive)continue;const S=(l=this.idToContactConstraint.get(g.id))!==null&&l!==void 0?l:[];for(const A of S){const I=g.normal,V=oi.FindContactSeparation(g,A.local),H=Dt.steeringFactor,tt=-5,gt=Dt.slop,pt=ne(H*(V+gt),tt,0),J=I.scale(-pt*A.normalMass);if(_.collisionType===Xt.Active){const K=J.negate().scale(_.inverseMass);_.limitDegreeOfFreedom.includes(ms.X)&&(K.x=0),_.limitDegreeOfFreedom.includes(ms.Y)&&(K.y=0),_.globalPos=_.globalPos.add(K),_.limitDegreeOfFreedom.includes(ms.Rotation)||(_.rotation-=A.aToContact.cross(J)*_.inverseInertia)}if(b.collisionType===Xt.Active){const K=J.scale(b.inverseMass);b.limitDegreeOfFreedom.includes(ms.X)&&(K.x=0),b.limitDegreeOfFreedom.includes(ms.Y)&&(K.y=0),b.globalPos=b.globalPos.add(K),b.limitDegreeOfFreedom.includes(ms.Rotation)||(b.rotation+=A.bToContact.cross(J)*b.inverseInertia)}}}}}solveVelocity(t){var s,r,l;for(let h=0;h<Dt.velocityIterations;h++)for(const g of t){const _=(s=g.colliderA.owner)===null||s===void 0?void 0:s.get(ae),b=(r=g.colliderB.owner)===null||r===void 0?void 0:r.get(ae);if(_&&b){if(_.collisionType===Xt.Passive||b.collisionType===Xt.Passive)continue;const S=Math.min(_.friction,b.friction),A=(l=this.idToContactConstraint.get(g.id))!==null&&l!==void 0?l:[];for(const I of A){let tt=-I.getRelativeVelocity().dot(g.tangent)*I.tangentMass;const gt=S*I.normalImpulse,pt=ne(I.tangentImpulse+tt,-gt,gt);tt=pt-I.tangentImpulse,I.tangentImpulse=pt;const J=g.tangent.scale(tt);_.applyImpulse(I.point,J.negate()),b.applyImpulse(I.point,J)}for(const I of A){const H=I.getRelativeVelocity().dot(g.normal);let tt=-I.normalMass*(H-I.originalVelocityAndRestitution);const gt=Math.max(I.normalImpulse+tt,0);tt=gt-I.normalImpulse,I.normalImpulse=gt;const pt=g.normal.scale(tt);_.applyImpulse(I.point,pt.negate()),b.applyImpulse(I.point,pt)}}}}}class gc extends ai{constructor(t){super(),this.types=["ex.transform","ex.motion","ex.collider"],this.systemType=Ts.Update,this.priority=-1,this._realisticSolver=new Gd,this._arcadeSolver=new $d,this._lastFrameContacts=new Map,this._currentFrameContacts=new Map,this._processor=t.collisionProcessor,this._trackCollider=s=>this._processor.track(s),this._untrackCollider=s=>this._processor.untrack(s)}notify(t){if(no(t)){const s=t.data.get(Ne);s.$colliderAdded.subscribe(this._trackCollider),s.$colliderRemoved.subscribe(this._untrackCollider);const r=s.get();r&&this._processor.track(r)}else{const s=t.data.get(Ne),r=s.get();s&&r&&this._processor.untrack(r)}}initialize(t){this._engine=t.engine}update(t,s){var r,l,h,g;if(!Dt.enabled)return;let _=[];for(const I of t){const V=I.get(Ne),H=V==null?void 0:V.get();if(V&&(!((r=V.owner)===null||r===void 0)&&r.active)&&H)if(V.update(),H instanceof us){const tt=H.getColliders();_=_.concat(tt)}else _.push(H)}this._processor.update(_);const b=this._processor.broadphase(_,s);this._currentFrameContacts.clear();let S=this._processor.narrowphase(b,(g=(h=(l=this._engine)===null||l===void 0?void 0:l.debug)===null||h===void 0?void 0:h.stats)===null||g===void 0?void 0:g.currFrame);S=this.getSolver().solve(S);for(const I of S){const V=I.id.indexOf("|");if(V>0){const H=I.id.substring(V+1);this._currentFrameContacts.set(H,I)}else this._currentFrameContacts.set(I.id,I)}this.runContactStartEnd(),this._lastFrameContacts.clear(),this._lastFrameContacts=new Map(this._currentFrameContacts)}getSolver(){return Dt.collisionResolutionStrategy===On.Realistic?this._realisticSolver:this._arcadeSolver}debug(t){this._processor.debug(t)}runContactStartEnd(){for(const[t,s]of this._currentFrameContacts)if(!this._lastFrameContacts.has(t)){const r=s.colliderA,l=s.colliderB;r.events.emit("collisionstart",new te(r,l,s)),r.events.emit("contactstart",new dt(r,l,s)),l.events.emit("collisionstart",new te(l,r,s)),l.events.emit("contactstart",new dt(l,r,s))}for(const[t,s]of this._lastFrameContacts)if(!this._currentFrameContacts.has(t)){const r=s.colliderA,l=s.colliderB;r.events.emit("collisionend",new Jt(r,l)),r.events.emit("contactend",new At(r,l)),l.events.emit("collisionend",new Jt(l,r)),l.events.emit("contactend",new At(l,r))}}}var ro;(function(d){d.Forward="forward",d.Backward="backward"})(ro||(ro={}));var li;(function(d){d.End="end",d.Loop="loop",d.PingPong="pingpong",d.Freeze="freeze"})(li||(li={}));const Ty={Frame:"frame",Loop:"loop",Ended:"ended"};class Si extends Ss{constructor(t){var s,r;super(t),this.events=new m,this.frames=[],this.strategy=li.Loop,this.frameDuration=100,this.timeScale=1,this._idempotencyToken=-1,this._firstTick=!0,this._currentFrame=0,this._timeLeftInFrame=0,this._pingPongDirection=1,this._done=!1,this._playing=!0,this._reversed=!1,this.frames=t.frames,this.strategy=(s=t.strategy)!==null&&s!==void 0?s:this.strategy,this.frameDuration=t.totalDuration?t.totalDuration/this.frames.length:(r=t.frameDuration)!==null&&r!==void 0?r:this.frameDuration,t.reverse&&this.reverse(),this.goToFrame(0)}clone(){return new Si({frames:this.frames.map(t=>({...t})),frameDuration:this.frameDuration,reverse:this._reversed,strategy:this.strategy,...this.cloneGraphicOptions()})}get width(){const t=this.currentFrame;return t?Math.abs(t.graphic.width*this.scale.x):0}get height(){const t=this.currentFrame;return t?Math.abs(t.graphic.height*this.scale.y):0}static fromSpriteSheet(t,s,r,l=li.Loop){const h=t.sprites.length-1,g=s.filter(_=>_<0||_>h);return g.length&&Si._LOGGER.warn(`Indices into SpriteSheet were provided that don't exist: ${g.join(",")} no frame will be shown`),new Si({frames:t.sprites.filter((_,b)=>s.indexOf(b)>-1).map(_=>({graphic:_,duration:r})),strategy:l})}static fromSpriteSheetCoordinates(t){const{spriteSheet:s,frameCoordinates:r,durationPerFrameMs:l,strategy:h,reverse:g}=t,_=l??100,b=[];for(const S of r){const{x:A,y:I,duration:V}=S,H=s.getSprite(A,I);H?b.push({graphic:H,duration:V??_}):Si._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${A}, ${I}), please check your SpriteSheet to confirm that sprite exists`)}return new Si({frames:b,strategy:h,reverse:g})}get currentFrame(){return this._currentFrame>=0&&this._currentFrame<this.frames.length?this.frames[this._currentFrame]:null}get currentFrameIndex(){return this._currentFrame}get isPlaying(){return this._playing}reverse(){this.frames=this.frames.slice().reverse(),this._reversed=!this._reversed}get direction(){return!!(this._reversed&&this._pingPongDirection===1)?ro.Backward:ro.Forward}play(){this._playing=!0}pause(){this._playing=!1,this._firstTick=!0}reset(){this._done=!1,this._firstTick=!0,this._currentFrame=0}get canFinish(){switch(this.strategy){case li.End:case li.Freeze:return!0;default:return!1}}get done(){return this._done}goToFrame(t){this._currentFrame=t,this._timeLeftInFrame=this.frameDuration;const s=this.frames[this._currentFrame];s&&!this._done&&(this._timeLeftInFrame=(s==null?void 0:s.duration)||this.frameDuration,this.events.emit("frame",{...s,frameIndex:this.currentFrameIndex}))}_nextFrame(){const t=this._currentFrame;if(this._done)return t;let s=-1;switch(this.strategy){case li.Loop:{s=(t+1)%this.frames.length,s===0&&this.events.emit("loop",this);break}case li.End:{s=t+1,s>=this.frames.length&&(this._done=!0,this._currentFrame=this.frames.length,this.events.emit("end",this));break}case li.Freeze:{s=ne(t+1,0,this.frames.length-1),s>=this.frames.length-1&&(this._done=!0,this.events.emit("end",this));break}case li.PingPong:{t+this._pingPongDirection>=this.frames.length&&(this._pingPongDirection=-1,this.events.emit("loop",this)),t+this._pingPongDirection<0&&(this._pingPongDirection=1,this.events.emit("loop",this)),s=t+this._pingPongDirection%this.frames.length;break}}return s}tick(t,s=0){this._idempotencyToken!==s&&(this._idempotencyToken=s,this._playing&&(this._firstTick&&(this._firstTick=!1,this.events.emit("frame",{...this.currentFrame,frameIndex:this.currentFrameIndex})),this._timeLeftInFrame-=t*this.timeScale,this._timeLeftInFrame<=0&&this.goToFrame(this._nextFrame())))}_drawImage(t,s,r){this.currentFrame&&this.currentFrame.graphic.draw(t,s,r)}}Si._LOGGER=D.getInstance();class oo extends Ss{constructor(t){super(t),this.members=[],this.members=t.members,this._updateDimensions()}clone(){return new oo({members:[...this.members],...this.cloneGraphicOptions()})}_updateDimensions(){let t=new Wt;for(const{graphic:s,pos:r}of this.members)t=s.localBounds.translate(r).combine(t);return this.width=t.width,this.height=t.height,t}get localBounds(){let t=new Wt;for(const{graphic:s,pos:r}of this.members)t=s.localBounds.translate(r).combine(t);return t}_isAnimationOrGroup(t){return t instanceof Si||t instanceof oo}tick(t,s){for(const r of this.members){const l=r.graphic;this._isAnimationOrGroup(l)&&l.tick(t,s)}}reset(){for(const t of this.members){const s=t.graphic;this._isAnimationOrGroup(s)&&s.reset()}}_preDraw(t,s,r){this._updateDimensions(),super._preDraw(t,s,r)}_drawImage(t,s,r){for(const l of this.members)t.save(),t.translate(s,r),l.graphic.draw(t,l.pos.x,l.pos.y),this.showDebug&&t.debug.drawRect(0,0,this.width,this.height),t.restore()}}function jd(d){return class extends d{assign(t){for(const s in t)typeof this[s]!="function"&&(this[s]=t[s])}constructor(...t){super(...t),t.filter(function(r){return r!==void 0}).length===1&&t[0]&&typeof t[0]=="object"&&!(t[0]instanceof Array)&&this.assign(t[0])}}}var _r;(function(d){d[d.Circle=0]="Circle",d[d.Rectangle=1]="Rectangle"})(_r||(_r={}));class Py extends Ke{constructor(t,s,r,l,h,g,_,b,S,A){super(),this.position=new z(0,0),this.velocity=new z(0,0),this.acceleration=new z(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=ht.White,this.endColor=ht.White,this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=ht.White,this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0,this.visible=!0,this.isOffscreen=!1;let I=t;if(I&&!(t instanceof Xd)){const V=t;I=V.emitter,s=V.life,r=V.opacity,h=V.endColor,l=V.beginColor,g=V.position,_=V.velocity,b=V.acceleration,S=V.startSize,A=V.endSize}if(this.emitter=I,this.life=s||this.life,this.opacity=r||this.opacity,this.endColor=h||this.endColor.clone(),this.beginColor=l||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.emitter.particleTransform===vr.Global){const V=this.emitter.transform.globalPos;this.position=(g||this.position).add(V),this.velocity=(_||this.velocity).rotate(this.emitter.transform.globalRotation)}else this.velocity=_||this.velocity,this.position=g||this.position;this.acceleration=b||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=S||0,this.endSize=A||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize),this.addComponent(this.transform=new kt),this.addComponent(this.graphics=new os),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=Z(1,1),this.particleSprite?(this.graphics.opacity=this.opacity,this.graphics.use(this.particleSprite)):(this.graphics.localBounds=Wt.fromDimension(this.particleSize,this.particleSize,z.Half),this.graphics.onPostDraw=V=>{V.save(),this.graphics.opacity=this.opacity;const H=this._currentColor.clone();H.a=1,V.debug.drawPoint(Z(0,0),{color:H,size:this.particleSize}),V.restore()})}kill(){this.emitter.removeParticle(this)}update(t,s){if(this.life=this.life-s,this.elapsedMultiplier=this.elapsedMultiplier+s,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=ne(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=ne(this.sizeRate*s+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=ne(this._currentColor.r+this._rRate*s,0,255),this._currentColor.g=ne(this._currentColor.g+this._gRate*s,0,255),this._currentColor.b=ne(this._currentColor.b+this._bRate*s,0,255),this._currentColor.a=ne(this.opacity,1e-4,1),this.focus){const r=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(s/1e3);this.velocity=this.velocity.add(r)}else this.velocity=this.velocity.add(this.acceleration.scale(s/1e3));this.position=this.position.add(this.velocity.scale(s/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*s/1e3)%(2*Math.PI)),this.transform.pos=this.position,this.transform.rotation=this.currentRotation,this.transform.scale=Z(1,1),this.graphics.opacity=this.opacity}}class ya extends jd(Py){constructor(t,s,r,l,h,g,_,b,S,A){super(t,s,r,l,h,g,_,b,S,A)}}var vr;(function(d){d.Global="global",d.Local="local"})(vr||(vr={}));class Xd extends Ci{get opacity(){return super.graphics.opacity}set opacity(t){super.graphics.opacity=t}get particleSprite(){return this._sprite}set particleSprite(t){t&&(this._sprite=t)}constructor(t){var s,r;super({width:(s=t.width)!==null&&s!==void 0?s:0,height:(r=t.height)!==null&&r!==void 0?r:0}),this._particlesToEmit=0,this.numParticles=0,this.isEmitting=!0,this.particles=[],this.deadParticles=[],this.minVel=0,this.maxVel=0,this.acceleration=new z(0,0),this.minAngle=0,this.maxAngle=0,this.emitRate=1,this.particleLife=2e3,this.fadeFlag=!1,this.focus=null,this.focusAccel=null,this.startSize=null,this.endSize=null,this.minSize=5,this.maxSize=5,this.beginColor=ht.White,this.endColor=ht.White,this._sprite=null,this.emitterType=_r.Rectangle,this.radius=0,this.particleRotationalVelocity=0,this.randomRotation=!1,this.particleTransform=vr.Global;const{x:l,y:h,pos:g,isEmitting:_,minVel:b,maxVel:S,acceleration:A,minAngle:I,maxAngle:V,emitRate:H,particleLife:tt,opacity:gt,fadeFlag:pt,focus:J,focusAccel:K,startSize:wt,endSize:Ct,minSize:Nt,maxSize:Mt,beginColor:ot,endColor:ce,particleSprite:ge,emitterType:ve,radius:de,particleRotationalVelocity:$e,particleTransform:Ps,randomRotation:ks,random:Is}={...t};this.pos=g??Z(l??0,h??0),this.isEmitting=_??this.isEmitting,this.minVel=b??this.minVel,this.maxVel=S??this.maxVel,this.acceleration=A??this.acceleration,this.minAngle=I??this.minAngle,this.maxAngle=V??this.maxAngle,this.emitRate=H??this.emitRate,this.particleLife=tt??this.particleLife,this.opacity=gt??this.opacity,this.fadeFlag=pt??this.fadeFlag,this.focus=J??this.focus,this.focusAccel=K??this.focusAccel,this.startSize=wt??this.startSize,this.endSize=Ct??this.endSize,this.minSize=Nt??this.minSize,this.maxSize=Mt??this.maxSize,this.beginColor=ot??this.beginColor,this.endColor=ce??this.endColor,this.particleSprite=ge??this.particleSprite,this.emitterType=ve??this.emitterType,this.radius=de??this.radius,this.particleRotationalVelocity=$e??this.particleRotationalVelocity,this.randomRotation=ks??this.randomRotation,this.particleTransform=Ps??this.particleTransform,this.body.collisionType=Xt.PreventCollision,this.random=Is??new Pt}removeParticle(t){this.deadParticles.push(t)}emitParticles(t){var s;for(let r=0;r<t;r++){const l=this._createParticle();this.particles.push(l),!((s=this===null||this===void 0?void 0:this.scene)===null||s===void 0)&&s.world&&(this.particleTransform===vr.Global?this.scene.world.add(l):this.addChild(l))}}clearParticles(){this.particles.length=0}_createParticle(){let t=0,s=0;const r=qs(this.minAngle,this.maxAngle,this.random),l=qs(this.minVel,this.maxVel,this.random),h=this.startSize||qs(this.minSize,this.maxSize,this.random),g=l*Math.cos(r),_=l*Math.sin(r);if(this.emitterType===_r.Rectangle)t=qs(0,this.width,this.random),s=qs(0,this.height,this.random);else if(this.emitterType===_r.Circle){const S=qs(0,this.radius,this.random);t=S*Math.cos(r),s=S*Math.sin(r)}const b=new ya(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new z(t,s),new z(g,_),this.acceleration,this.startSize,this.endSize);return b.fadeFlag=this.fadeFlag,b.particleSize=h,this.particleSprite&&(b.particleSprite=this.particleSprite,b.graphics.opacity=this.opacity,b.graphics.use(this._sprite)),b.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(b.currentRotation=qs(0,Math.PI*2,this.random)),this.focus&&(b.focus=this.focus.add(new z(this.pos.x,this.pos.y)),b.focusAccel=this.focusAccel),b}update(t,s){var r;super.update(t,s),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(s/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit)));for(let l=0;l<this.deadParticles.length;l++)Hi(this.deadParticles[l],this.particles),!((r=this===null||this===void 0?void 0:this.scene)===null||r===void 0)&&r.world&&this.scene.world.remove(this.deadParticles[l],!1);this.deadParticles.length=0}}class Yd extends ai{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=Ts.Draw,this.priority=0,this._token=0,this._sortedTransforms=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}get sortedTransforms(){return this._sortedTransforms}initialize(t){this._camera=t.camera,this._engine=t.engine}preupdate(){this._graphicsContext=this._engine.graphicsContext,this._zHasChanged&&(this._sortedTransforms.sort((t,s)=>t.z-s.z),this._zHasChanged=!1)}notify(t){if(no(t)){const s=t.data.get(kt);this._sortedTransforms.push(s),s.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const s=t.data.get(kt);s.zIndexChanged$.unsubscribe(this._zIndexUpdate);const r=this._sortedTransforms.indexOf(s);r>-1&&this._sortedTransforms.splice(r,1)}}update(t,s){this._token++;let r;be.checkAndClearCache(),this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext);for(const l of this._sortedTransforms){const h=l.owner;if(h.hasTag("ex.offscreen")||(r=h.get(os),!r.visible))continue;l.coordPlane===Es.Screen&&this._graphicsContext.restore(),this._graphicsContext.save(),l.coordPlane===Es.Screen&&this._graphicsContext.translate(this._engine.screen.contentArea.left,this._engine.screen.contentArea.top),r.update(s,this._token);const g=h.get(ma);if(g){const b=z.One.sub(g.parallaxFactor),S=this._camera.pos.scale(b);this._graphicsContext.translate(S.x,S.y)}this._applyTransform(h),r.material&&(this._graphicsContext.material=r.material),r.onPreDraw&&r.onPreDraw(this._graphicsContext,s);const _=h instanceof ya?h.opacity:1;this._graphicsContext.opacity*=r.opacity*_,this._drawGraphicsComponent(r),r.onPostDraw&&r.onPostDraw(this._graphicsContext,s),this._graphicsContext.restore(),l.coordPlane===Es.Screen&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}this._graphicsContext.restore()}_drawGraphicsComponent(t){var s,r;if(t.visible){const l=t.flipHorizontal,h=t.flipVertical;for(const g of t.layers.get())for(const{graphic:_,options:b}of g.graphics){let S=t.anchor,A=t.offset;b!=null&&b.anchor&&(S=b.anchor),b!=null&&b.offset&&(A=b.offset);const I=-_.width*S.x+A.x,V=-_.height*S.y+A.y,H=_.flipHorizontal,tt=_.flipVertical;if((l||h)&&(_.flipHorizontal=l?!H:H,_.flipVertical=h?!tt:tt),_==null||_.draw(this._graphicsContext,I+g.offset.x,V+g.offset.y),(l||h)&&(_.flipHorizontal=H,_.flipVertical=tt),!((s=this._engine)===null||s===void 0)&&s.isDebug&&this._engine.debug.graphics.showBounds){const gt=Z(I+g.offset.x,V+g.offset.y);if(_ instanceof oo)for(const pt of _.members)(r=pt.graphic)===null||r===void 0||r.localBounds.translate(gt.add(pt.pos)).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor);else _==null||_.localBounds.translate(gt).draw(this._graphicsContext,this._engine.debug.graphics.boundsColor)}}}}_applyTransform(t){const s=t.getAncestors();for(const r of s){const l=r==null?void 0:r.get(kt),h=r==null?void 0:r.get(ae);let g=l.pos,_=l.scale,b=l.rotation;if(h&&this._engine.fixedUpdateFps&&h.__oldTransformCaptured&&h.enableFixedUpdateInterpolate){const S=this._engine.currentFrameLagMs/(1e3/this._engine.fixedUpdateFps);g=l.pos.scale(S).add(h.oldPos.scale(1-S)),_=l.scale.scale(S).add(h.oldScale.scale(1-S));const A=(1-S)*Math.cos(h.oldRotation)+S*Math.cos(l.rotation),I=(1-S)*Math.sin(h.oldRotation)+S*Math.sin(l.rotation);b=Math.atan2(I,A)}l&&(this._graphicsContext.z=l.z,this._graphicsContext.translate(g.x,g.y),this._graphicsContext.scale(_.x,_.y),this._graphicsContext.rotate(b))}}}class qd extends ai{constructor(){super(...arguments),this.types=["ex.transform"],this.systemType=Ts.Draw,this.priority=999}initialize(t){this._graphicsContext=t.engine.graphicsContext,this._camera=t.camera,this._engine=t.engine,this._collisionSystem=t.world.systemManager.get(gc)}update(t,s){var r;if(!this._engine.isDebug)return;const l=this._engine.debug.filter;let h,g;const _=this._engine.debug.entity;let b;const S=this._engine.debug.transform;let A;const I=this._engine.debug.motion;let V;const H=this._engine.debug.collider,tt=this._engine.debug.physics;let gt;const pt=this._engine.debug.graphics;let J,K;const wt=this._engine.debug.body,Ct=this._engine.debug.camera;for(const Nt of t){if(Nt.hasTag("offscreen")||Nt instanceof ya||l.useFilter&&(!(l.ids.length===0||l.ids.includes(Nt.id))||!(l.nameQuery===""||Nt.name.includes(l.nameQuery))))continue;let Mt=z.Zero;const ot=Z(0,16);if(h=Nt.id,g=Nt.name,b=Nt.get(kt),this._pushCameraTransform(b),this._graphicsContext.save(),this._applyTransform(Nt),b&&((S.showAll||S.showPosition)&&this._graphicsContext.debug.drawPoint(z.Zero,{size:4,color:S.positionColor}),(S.showAll||S.showPositionLabel)&&(this._graphicsContext.debug.drawText(`pos${b.pos.toString(2)}`,Mt),Mt=Mt.add(ot)),(S.showAll||S.showZIndex)&&(this._graphicsContext.debug.drawText(`z(${b.z.toFixed(1)})`,Mt),Mt=Mt.add(ot)),(_.showAll||_.showId)&&(this._graphicsContext.debug.drawText(`id(${h}) ${Nt.parent?"child of id("+((r=Nt.parent)===null||r===void 0?void 0:r.id)+")":""}`,Mt),Mt=Mt.add(ot)),(_.showAll||_.showName)&&(this._graphicsContext.debug.drawText(`name(${g})`,Mt),Mt=Mt.add(ot)),(S.showAll||S.showRotation)&&(this._graphicsContext.drawLine(z.Zero,z.fromAngle(b.rotation).scale(50).add(z.Zero),S.rotationColor,2),this._graphicsContext.debug.drawText(`rot deg(${Te(b.rotation).toFixed(2)})`,Mt),Mt=Mt.add(ot)),(S.showAll||S.showScale)&&this._graphicsContext.drawLine(z.Zero,b.scale.add(z.Zero),S.scaleColor,2)),gt=Nt.get(os),gt&&(pt.showAll||pt.showBounds)&&gt.localBounds.draw(this._graphicsContext,pt.boundsColor),J=Nt.get(pa),J&&(J.useTransform||this._graphicsContext.restore(),J.draw(this._graphicsContext),J.useTransform||(this._graphicsContext.save(),this._applyTransform(Nt))),K=Nt.get(ae),K&&((wt.showAll||wt.showCollisionGroup)&&(this._graphicsContext.debug.drawText(`collision group(${K.group.name})`,Mt),Mt=Mt.add(ot)),(wt.showAll||wt.showCollisionType)&&(this._graphicsContext.debug.drawText(`collision type(${K.collisionType})`,Mt),Mt=Mt.add(ot)),(wt.showAll||wt.showMass)&&(this._graphicsContext.debug.drawText(`mass(${K.mass})`,Mt),Mt=Mt.add(ot)),(wt.showAll||wt.showMotion)&&(this._graphicsContext.debug.drawText(`motion(${K.sleepMotion})`,Mt),Mt=Mt.add(ot)),(wt.showAll||wt.showSleeping)&&(this._graphicsContext.debug.drawText(`sleeping(${K.canSleep?K.sleeping:"cant sleep"})`,Mt),Mt=Mt.add(ot))),this._graphicsContext.restore(),A=Nt.get(De),A&&((I.showAll||I.showVelocity)&&(this._graphicsContext.debug.drawText(`vel${A.vel.toString(2)}`,Mt.add(b.globalPos)),this._graphicsContext.drawLine(b.globalPos,b.globalPos.add(A.vel),I.velocityColor,2),Mt=Mt.add(ot)),(I.showAll||I.showAcceleration)&&this._graphicsContext.drawLine(b.globalPos,b.globalPos.add(A.acc),I.accelerationColor,2)),V=Nt.get(Ne),V){const ce=V.get();if((H.showAll||H.showGeometry)&&ce&&ce.debug(this._graphicsContext,H.geometryColor),H.showAll||H.showBounds){if(ce instanceof us){const ge=ce.getColliders();for(const ve of ge){const de=ve.bounds,$e=Z(de.left,de.top);this._graphicsContext.debug.drawRect($e.x,$e.y,de.width,de.height,{color:H.boundsColor}),(H.showAll||H.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${ve.owner.id})`,$e)}V.bounds.draw(this._graphicsContext,H.boundsColor)}else if(ce){const ge=V.bounds,ve=Z(ge.left,ge.top);this._graphicsContext.debug.drawRect(ve.x,ve.y,ge.width,ge.height,{color:H.boundsColor}),(H.showAll||H.showOwner)&&this._graphicsContext.debug.drawText(`owner id(${V.owner.id})`,ve)}}}this._popCameraTransform(b)}if(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(tt.showAll||tt.showBroadphaseSpacePartitionDebug)&&this._collisionSystem.debug(this._graphicsContext),tt.showAll||tt.showCollisionContacts||tt.showCollisionNormals)for(const[Nt,Mt]of this._engine.debug.stats.currFrame.physics.contacts){if(tt.showAll||tt.showCollisionContacts)for(const ot of Mt.points)this._graphicsContext.debug.drawPoint(ot,{size:5,color:tt.collisionContactColor});if(tt.showAll||tt.showCollisionNormals)for(const ot of Mt.points)this._graphicsContext.debug.drawLine(ot,Mt.normal.scale(30).add(ot),{color:tt.collisionNormalColor})}this._graphicsContext.restore(),Ct&&(this._graphicsContext.save(),this._camera.draw(this._graphicsContext),(Ct.showAll||Ct.showFocus)&&this._graphicsContext.drawCircle(this._camera.pos,4,Ct.focusColor),(Ct.showAll||Ct.showZoom)&&this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`,this._camera.pos),this._graphicsContext.restore()),this._graphicsContext.flush()}_applyTransform(t){const s=t.getAncestors();for(const r of s){const l=r==null?void 0:r.get(kt);l&&(this._graphicsContext.translate(l.pos.x,l.pos.y),this._graphicsContext.scale(l.scale.x,l.scale.y),this._graphicsContext.rotate(l.rotation))}}_pushCameraTransform(t){t.coordPlane===Es.World&&(this._graphicsContext.save(),this._camera&&this._camera.draw(this._graphicsContext))}_popCameraTransform(t){t.coordPlane===Es.World&&this._graphicsContext.restore()}}class ba extends ai{constructor(){super(...arguments),this.types=["ex.transform","ex.pointer"],this.systemType=Ts.Update,this.priority=-1,this.overrideUseColliderShape=!1,this.overrideUseGraphicsBounds=!1,this.lastFrameEntityToPointers=new Map,this.currentFrameEntityToPointers=new Map,this._sortedTransforms=[],this._sortedEntities=[],this._zHasChanged=!1,this._zIndexUpdate=()=>{this._zHasChanged=!0}}initialize(t){this._engine=t.engine}preupdate(){this._receiver=this._engine.input.pointers,this._zHasChanged&&(this._sortedTransforms.sort((t,s)=>s.z-t.z),this._sortedEntities=this._sortedTransforms.map(t=>t.owner),this._zHasChanged=!1)}notify(t){if(no(t)){const s=t.data.get(kt);this._sortedTransforms.push(s),this._sortedEntities.push(s.owner),s.zIndexChanged$.subscribe(this._zIndexUpdate),this._zHasChanged=!0}else{const s=t.data.get(kt);s.zIndexChanged$.unsubscribe(this._zIndexUpdate);const r=this._sortedTransforms.indexOf(s);r>-1&&(this._sortedTransforms.splice(r,1),this._sortedEntities.splice(r,1))}}entityCurrentlyUnderPointer(t,s){return this.currentFrameEntityToPointers.has(t.id)&&this.currentFrameEntityToPointers.get(t.id).includes(s)}entityWasUnderPointer(t,s){return this.lastFrameEntityToPointers.has(t.id)&&this.lastFrameEntityToPointers.get(t.id).includes(s)}entered(t,s){return this.entityCurrentlyUnderPointer(t,s)&&!this.lastFrameEntityToPointers.has(t.id)}left(t,s){return!this.currentFrameEntityToPointers.has(t.id)&&this.entityWasUnderPointer(t,s)}addPointerToEntity(t,s){if(!this.currentFrameEntityToPointers.has(t.id)){this.currentFrameEntityToPointers.set(t.id,[s]);return}const r=this.currentFrameEntityToPointers.get(t.id);this.currentFrameEntityToPointers.set(t.id,r.concat(s))}update(t){this._processPointerToEntity(this._sortedEntities),this._dispatchEvents(this._sortedEntities),this._receiver.update(),this.lastFrameEntityToPointers.clear(),this.lastFrameEntityToPointers=new Map(this.currentFrameEntityToPointers),this.currentFrameEntityToPointers.clear(),this._receiver.clear()}_processPointerToEntity(t){var s;let r,l,h,g;for(const _ of t){if(r=_.get(kt),g=(s=_.get(fr))!==null&&s!==void 0?s:new fr,l=_.get(Ne),l&&(g.useColliderShape||this.overrideUseColliderShape)){l.update();const b=l.get();if(b)for(const[S,A]of this._receiver.currentFramePointerCoords.entries())b.contains(r.coordPlane===Es.World?A.worldPos:A.screenPos)&&this.addPointerToEntity(_,S)}if(h=_.get(os),h&&(g.useGraphicsBounds||this.overrideUseGraphicsBounds)){const b=h.localBounds.transform(r.get().matrix);for(const[S,A]of this._receiver.currentFramePointerCoords.entries())b.contains(r.coordPlane===Es.World?A.worldPos:A.screenPos)&&this.addPointerToEntity(_,S)}}}_processDownAndEmit(t){const s=new Map;for(const r of this._receiver.currentFrameDown)r.active&&t.active&&this.entityCurrentlyUnderPointer(t,r.pointerId)&&(t.events.emit("pointerdown",r),this._receiver.isDragStart(r.pointerId)&&t.events.emit("pointerdragstart",r)),s.set(r.pointerId,r);return s}_processUpAndEmit(t){const s=new Map;for(const r of this._receiver.currentFrameUp)r.active&&t.active&&this.entityCurrentlyUnderPointer(t,r.pointerId)&&(t.events.emit("pointerup",r),this._receiver.isDragEnd(r.pointerId)&&t.events.emit("pointerdragend",r)),s.set(r.pointerId,r);return s}_processMoveAndEmit(t){const s=new Map;for(const r of this._receiver.currentFrameMove)r.active&&t.active&&this.entityCurrentlyUnderPointer(t,r.pointerId)&&(t.events.emit("pointermove",r),this._receiver.isDragging(r.pointerId)&&t.events.emit("pointerdragmove",r)),s.set(r.pointerId,r);return s}_processEnterLeaveAndEmit(t,s){for(const r of s){if(r.active&&t.active&&this.entered(t,r.pointerId)){t.events.emit("pointerenter",r),this._receiver.isDragging(r.pointerId)&&t.events.emit("pointerdragenter",r);break}if(r.active&&t.active&&(this.left(t,r.pointerId)||this.entityCurrentlyUnderPointer(t,r.pointerId)&&r.type==="up")){t.events.emit("pointerleave",r),this._receiver.isDragging(r.pointerId)&&t.events.emit("pointerdragleave",r);break}}}_processCancelAndEmit(t){for(const s of this._receiver.currentFrameCancel)s.active&&t.active&&this.entityCurrentlyUnderPointer(t,s.pointerId)&&t.events.emit("pointercancel",s)}_processWheelAndEmit(t){for(const s of this._receiver.currentFrameWheel)s.active&&t.active&&this.entityCurrentlyUnderPointer(t,0)&&t.events.emit("pointerwheel",s)}_dispatchEvents(t){const s=new Set(this.lastFrameEntityToPointers.keys()),r=new Set(this.currentFrameEntityToPointers.keys()),l=t.filter(b=>s.has(b.id)||r.has(b.id));let h,g,_;for(const b of l){_=this._processDownAndEmit(b),g=this._processUpAndEmit(b),h=this._processMoveAndEmit(b);const S=[...h.values(),..._.values(),...g.values()];this._processEnterLeaveAndEmit(b,S),this._processCancelAndEmit(b),this._processWheelAndEmit(b)}}}class Zd extends ai{constructor(){super(...arguments),this.types=["ex.actions"],this.systemType=Ts.Update,this.priority=-1,this._actions=[]}notify(t){if(no(t)){const s=t.data.get(gr);this._actions.push(s)}else{const s=t.data.get(gr),r=this._actions.indexOf(s);r>-1&&this._actions.splice(r,1)}}update(t,s){for(const r of this._actions)r.update(s)}}class wa extends Ns{constructor(t){super(),this.type="ex.isometricentity",this.elevation=0,this.map=t}}class Kd extends ai{constructor(){super(...arguments),this.types=["ex.transform","ex.isometricentity"],this.systemType=Ts.Update,this.priority=99}update(t,s){let r,l;for(const h of t){r=h.get(kt),l=h.get(wa);const _=Math.max(l.map.columns*l.map.tileWidth,l.map.rows*l.map.tileHeight)*l.elevation+r.pos.y;r.z=_}}}class Qd extends ai{constructor(){super(...arguments),this.types=["ex.transform","ex.graphics"],this.systemType=Ts.Draw,this.priority=-1}initialize(t){this._camera=t.camera,this._screen=t.engine.screen}update(t){this._worldBounds=this._screen.getWorldBounds();let s,r,l;for(const h of t){r=h.get(os),s=h.get(kt),l=h.get(ma);let g;if(l){const b=z.One.sub(l.parallaxFactor);g=this._camera.pos.scale(b)}const _=this._isOffscreen(s,r,g);_&&!h.hasTag("ex.offscreen")&&(h.events.emit("exitviewport",new ss(h)),h.addTag("ex.offscreen")),!_&&h.hasTag("ex.offscreen")&&(h.events.emit("enterviewport",new _t(h)),h.removeTag("ex.offscreen"))}}_isOffscreen(t,s,r){if(t.coordPlane===Es.World){let l=s.localBounds;r&&(l=l.translate(r));const h=l.transform(t.get().matrix);return!this._worldBounds.overlaps(h)}else return!1}}class Jd{constructor(){this.collisionProcessor=new lc}rayCast(t,s){return this.collisionProcessor.rayCast(t,s)}}const ky={Initialize:"initialize",Activate:"activate",Deactivate:"deactivate",PreUpdate:"preupdate",PostUpdate:"postupdate",PreDraw:"predraw",PostDraw:"postdraw",PreDebugDraw:"predebugdraw",PostDebugDraw:"postdebugdraw"};class ao{get actors(){return this.world.entityManager.entities.filter(t=>t instanceof Ci)}get entities(){return this.world.entityManager.entities}get triggers(){return this.world.entityManager.entities.filter(t=>t instanceof Fd)}get tileMaps(){return this.world.entityManager.entities.filter(t=>t instanceof Ed)}get timers(){return this._timers}constructor(){this._logger=D.getInstance(),this.events=new m,this.camera=new Bd,this.world=new Ud(this),this.physics=new Jd,this._isInitialized=!1,this._timers=[],this._cancelQueue=[],this.world.add(new Zd),this.world.add(new Hd),this.world.add(new gc(this.physics)),this.world.add(new ba),this.world.add(new Kd),this.world.add(new Qd),this.world.add(new Yd),this.world.add(new qd)}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}onInitialize(t){}onActivate(t){}onDeactivate(t){}onPreUpdate(t,s){}onPostUpdate(t,s){}onPreDraw(t,s){}onPostDraw(t,s){}_initializeChildren(){for(const t of this.entities)t._initialize(this.engine)}get isInitialized(){return this._isInitialized}_initialize(t){this.isInitialized||(this.engine=t,this.camera._initialize(t),this.world.systemManager.initialize(),this.onInitialize.call(this,t),this._initializeChildren(),this._logger.debug("Scene.onInitialize",this,t),this.events.emit("initialize",new he(t,this)),this._isInitialized=!0)}_activate(t){this._logger.debug("Scene.onActivate",this),this.onActivate(t)}_deactivate(t){this._logger.debug("Scene.onDeactivate",this),this.onDeactivate(t)}_preupdate(t,s){this.emit("preupdate",new W(t,s,this)),this.onPreUpdate(t,s)}_postupdate(t,s){this.emit("postupdate",new G(t,s,this)),this.onPostUpdate(t,s)}_predraw(t,s){this.emit("predraw",new k(t,s,this)),this.onPreDraw(t,s)}_postdraw(t,s){this.emit("postdraw",new R(t,s,this)),this.onPostDraw(t,s)}update(t,s){this._preupdate(t,s);let r,l;for(r=0,l=this._cancelQueue.length;r<l;r++)this.removeTimer(this._cancelQueue[r]);this._cancelQueue.length=0;for(const h of this._timers)h.update(s);this.world.update(Ts.Update,s),this.camera&&this.camera.update(t,s),this._collectActorStats(t),this._postupdate(t,s)}draw(t,s){var r;this._predraw(t,s),this.world.update(Ts.Draw,s),!((r=this.engine)===null||r===void 0)&&r.isDebug&&this.debugDraw(t),this._postdraw(t,s)}debugDraw(t){this.emit("predebugdraw",new B(t,this)),this.emit("postdebugdraw",new O(t,this))}contains(t){return this.actors.indexOf(t)>-1}add(t){if(this.emit("entityadded",{target:t}),this.world.add(t),t.scene=this,t instanceof zn){Gl(this._timers,t)||this.addTimer(t);return}}transfer(t){let s;t instanceof Ke&&t.scene&&t.scene!==this&&(s=t.scene,t.scene.world.remove(t,!1)),t instanceof zn&&t.scene&&(s=t.scene,t.scene.removeTimer(t)),s==null||s.emit("entityremoved",{target:t}),this.add(t)}remove(t){t instanceof Ke&&(this.emit("entityremoved",{target:t}),t.active&&t.kill(),this.world.remove(t)),t instanceof zn&&this.removeTimer(t)}clear(t=!0){for(const s of this.entities)this.world.remove(s,t);for(const s of this.timers)this.removeTimer(s)}addTimer(t){return this._timers.push(t),t.scene=this,t}removeTimer(t){const s=this._timers.indexOf(t);return s!==-1&&this._timers.splice(s,1),t}cancelTimer(t){return this._cancelQueue.push(t),t}isTimerActive(t){return this._timers.indexOf(t)>-1&&!t.complete}isCurrentScene(){return this.engine?this.engine.currentScene===this:!1}_collectActorStats(t){const s=this.actors.filter(r=>r instanceof fc);for(const r of s)t.stats.currFrame.actors.ui++;for(const r of this.actors){t.stats.currFrame.actors.alive++;for(const l of r.children)Sd(l)?t.stats.currFrame.actors.ui++:t.stats.currFrame.actors.alive++}}}var Nn;(function(d){d.Protanope="Protanope",d.Deuteranope="Deuteranope",d.Tritanope="Tritanope"})(Nn||(Nn={}));const Iy=`#version 300 es\r
precision mediump float;\r
// our texture\r
uniform sampler2D u_image;\r
// the texCoords passed in from the vertex shader.\r
in vec2 v_texcoord;\r
\r
// color blind type\r
uniform int u_type;\r
\r
// simulation?\r
uniform bool u_simulate;\r
\r
out vec4 fragColor;\r
\r
void main() {\r
  vec4 o =  texture(u_image, v_texcoord);\r
  // RGB to LMS matrix conversion\r
  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\r
  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\r
  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\r
  // Simulate color blindness\r
  float l;\r
  float m;\r
  float s;\r
  //MODE CODE//\r
  if (u_type == 0) {\r
    // Protanope\r
    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;;\r
  } else if (u_type == 1) {\r
    // Deuteranope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\r
    s = 0.0 * L + 0.0 * M + 1.0 * S;\r
  } else if (u_type == 2) {\r
    // Tritanope\r
    l = 1.0 * L + 0.0 * M + 0.0 * S;\r
    m = 0.0 * L + 1.0 * M + 0.0 * S;\r
    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\r
  }\r
\r
  // LMS to RGB matrix conversion\r
  vec4 error; // simulate the colors\r
  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\r
  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\r
  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\r
  error.a = 1.0;\r
  vec4 diff = o - error;\r
  vec4 correction; // correct the colors\r
  correction.r = 0.0;\r
  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\r
  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\r
  correction = o + correction;\r
  correction.a = o.a;\r
  //SIMULATE//\r
\r
  // sim \r
  if (u_simulate) {\r
    fragColor = error.rgba;\r
  } else {\r
    fragColor = correction.rgba;\r
  }\r
}`;class tf{constructor(t,s){this._shader=new zs({gl:t,vertexSource:`#version 300 es
      in vec2 a_position;
      in vec2 a_texcoord;
      out vec2 v_texcoord;

      void main() {
        gl_Position = vec4(a_position, 0.0, 1.0);
        // Pass the texcoord to the fragment shader.
        v_texcoord = a_texcoord;
      }`,fragmentSource:s}),this._shader.compile(),this._buffer=new $i({gl:t,type:"static",data:new Float32Array([-1,-1,0,0,-1,1,0,1,1,-1,1,0,1,-1,1,0,-1,1,0,1,1,1,1,1])}),this._layout=new Wi({gl:t,shader:this._shader,vertexBuffer:this._buffer,attributes:[["a_position",2],["a_texcoord",2]]}),this._buffer.upload()}getShader(){return this._shader}getLayout(){return this._layout}}class ef{constructor(t,s=!1){this._colorBlindnessMode=t,this._simulate=!1,this._simulate=s}initialize(t){this._shader=new tf(t,Iy),this.simulate=this._simulate,this.colorBlindnessMode=this._colorBlindnessMode}getShader(){return this._shader.getShader()}getLayout(){return this._shader.getLayout()}set colorBlindnessMode(t){if(this._colorBlindnessMode=t,this._shader){const s=this._shader.getShader();s.use(),this._colorBlindnessMode===Nn.Protanope?s.setUniformInt("u_type",0):this._colorBlindnessMode===Nn.Deuteranope?s.setUniformInt("u_type",1):this._colorBlindnessMode===Nn.Tritanope&&s.setUniformInt("u_type",2)}}get colorBlindnessMode(){return this._colorBlindnessMode}set simulate(t){if(this._simulate=t,this._shader){const s=this._shader.getShader();s.use(),s.setUniformBoolean("u_simulate",t)}}get simulate(){return this._simulate}}class sf{constructor(t){this._engine=t,this._colorBlindPostProcessor=new ef(Nn.Protanope)}correct(t){this._engine.graphicsContext instanceof un&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!1,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}simulate(t){this._engine.graphicsContext instanceof un&&(this.clear(),this._colorBlindPostProcessor.colorBlindnessMode=t,this._colorBlindPostProcessor.simulate=!0,this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor))}clear(){this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor)}}class nf{constructor(t){this.stats={currFrame:new lo,prevFrame:new lo},this.filter={useFilter:!1,nameQuery:"",ids:[]},this.entity={showAll:!1,showId:!0,showName:!1},this.transform={showAll:!1,showPosition:!1,showPositionLabel:!1,positionColor:ht.Yellow,showZIndex:!1,showScale:!1,scaleColor:ht.Green,showRotation:!1,rotationColor:ht.Blue},this.graphics={showAll:!1,showBounds:!0,boundsColor:ht.Yellow},this.collider={showAll:!1,showBounds:!0,boundsColor:ht.Blue,showOwner:!1,showGeometry:!0,geometryColor:ht.Green},this.physics={showAll:!1,showBroadphaseSpacePartitionDebug:!1,showCollisionNormals:!1,collisionNormalColor:ht.Cyan,showCollisionContacts:!0,collisionContactColor:ht.Red},this.motion={showAll:!1,showVelocity:!1,velocityColor:ht.Yellow,showAcceleration:!1,accelerationColor:ht.Red},this.body={showAll:!1,showCollisionGroup:!1,showCollisionType:!1,showSleeping:!1,showMotion:!1,showMass:!1},this.camera={showAll:!1,showFocus:!1,focusColor:ht.Red,showZoom:!1},this._engine=t,this.colorBlindMode=new sf(this._engine)}useTestClock(){const t=this._engine.clock,s=t.isRunning();t.stop();const r=t.toTestClock();return s&&r.start(),this._engine.clock=r,r}useStandardClock(){const t=this._engine.clock,s=t.isRunning();t.stop();const r=t.toStandardClock();return s&&r.start(),this._engine.clock=r,r}}class lo{constructor(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new xa,this._graphicsStats={drawCalls:0,drawnImages:0}}reset(t){t?(this.id=t.id,this.delta=t.delta,this.fps=t.fps,this.actors.alive=t.actors.alive,this.actors.killed=t.actors.killed,this.actors.ui=t.actors.ui,this.duration.update=t.duration.update,this.duration.draw=t.duration.draw,this._physicsStats.reset(t.physics),this.graphics.drawCalls=t.graphics.drawCalls,this.graphics.drawnImages=t.graphics.drawnImages):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset(),this.graphics.drawnImages=this.graphics.drawCalls=0)}clone(){const t=new lo;return t.reset(this),t}get id(){return this._id}set id(t){this._id=t}get delta(){return this._delta}set delta(t){this._delta=t}get fps(){return this._fps}set fps(t){this._fps=t}get actors(){return this._actorStats}get duration(){return this._durationStats}get physics(){return this._physicsStats}get graphics(){return this._graphicsStats}}class xa{constructor(){this._pairs=0,this._collisions=0,this._contacts=new Map,this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}reset(t){t?(this.pairs=t.pairs,this.collisions=t.collisions,this.contacts=t.contacts,this.fastBodies=t.fastBodies,this.fastBodyCollisions=t.fastBodyCollisions,this.broadphase=t.broadphase,this.narrowphase=t.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.contacts.clear())}clone(){const t=new xa;return t.reset(this),t}get pairs(){return this._pairs}set pairs(t){this._pairs=t}get collisions(){return this._collisions}set collisions(t){this._collisions=t}get contacts(){return this._contacts}set contacts(t){this._contacts=t}get fastBodies(){return this._fastBodies}set fastBodies(t){this._fastBodies=t}get fastBodyCollisions(){return this._fastBodyCollisions}set fastBodyCollisions(t){this._fastBodyCollisions=t}get broadphase(){return this._broadphase}set broadphase(t){this._broadphase=t}get narrowphase(){return this._narrowphase}set narrowphase(t){this._narrowphase=t}}class mc{on(t,s){this._nativeHandlers[t]&&this.off(t,this._nativeHandlers[t]),this._nativeHandlers[t]=this._decorate(s),this.nativeComponent.addEventListener(t,this._nativeHandlers[t])}off(t,s){s||(s=this._nativeHandlers[t]),this.nativeComponent.removeEventListener(t,s),this._nativeHandlers[t]=null}_decorate(t){return s=>{this._paused||t(s)}}pause(){this._paused=!0}resume(){this._paused=!1}clear(){for(const t in this._nativeHandlers)this.off(t)}constructor(t){this.nativeComponent=t,this._paused=!1,this._nativeHandlers={}}}class rf{constructor(t,s){this._windowGlobal=t,this._documentGlobal=s,this._windowComponent=new mc(this._windowGlobal),this._documentComponent=new mc(this._documentGlobal)}get window(){return this._windowComponent}get document(){return this._documentComponent}pause(){this.window.pause(),this.document.pause()}resume(){this.window.resume(),this.document.resume()}clear(){this.window.clear(),this.document.clear()}}class co{static fromPagePosition(t,s,r){let l,h,g,_;arguments.length===3?(l=t,h=s,g=new z(l,h),_=r):(g=t,l=g.x,h=g.y,_=s);const b=_.screen.pageToScreenCoordinates(g),S=_.screen.screenToWorldCoordinates(b);return new co(S,g,b)}constructor(t,s,r){this.worldPos=t,this.pagePos=s,this.screenPos=r}}class yr{cancel(){this.active=!1}get pagePos(){return this.coordinates.pagePos}get screenPos(){return this.coordinates.screenPos}get worldPos(){return this.coordinates.worldPos}constructor(t,s,r,l,h,g){this.type=t,this.pointerId=s,this.button=r,this.pointerType=l,this.coordinates=h,this.nativeEvent=g,this.active=!0}}class pc{cancel(){this.active=!1}constructor(t,s,r,l,h,g,_,b,S,A,I,V){this.x=t,this.y=s,this.pageX=r,this.pageY=l,this.screenX=h,this.screenY=g,this.index=_,this.deltaX=b,this.deltaY=S,this.deltaZ=A,this.deltaMode=I,this.ev=V,this.active=!0}}class of{constructor(){this.events=new m,this.lastPagePos=z.Zero,this.lastScreenPos=z.Zero,this.lastWorldPos=z.Zero,this._onPointerMove=t=>{this.lastPagePos=new z(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new z(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new z(t.worldPos.x,t.worldPos.y)},this._onPointerDown=t=>{this.lastPagePos=new z(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new z(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new z(t.worldPos.x,t.worldPos.y)},this.on("move",this._onPointerMove),this.on("down",this._onPointerDown)}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}}var Un;(function(d){d.Pixel="Pixel",d.Line="Line",d.Page="Page"})(Un||(Un={}));var ji;(function(d){d[d.NoButton=-1]="NoButton",d[d.Left=0]="Left",d[d.Middle=1]="Middle",d[d.Right=2]="Right",d[d.Unknown=3]="Unknown"})(ji||(ji={}));var Ei;(function(d){d.Left="Left",d.Middle="Middle",d.Right="Right",d.Unknown="Unknown",d.NoButton="NoButton"})(Ei||(Ei={}));var Ai;(function(d){d.Touch="Touch",d.Mouse="Mouse",d.Pen="Pen",d.Unknown="Unknown"})(Ai||(Ai={}));function Ry(d){return globalThis.TouchEvent&&d instanceof globalThis.TouchEvent}function My(d){return globalThis.PointerEvent&&d instanceof globalThis.PointerEvent}class uo{constructor(t,s){this.target=t,this.engine=s,this.events=new m,this.primary=new of,this._activeNativePointerIdsToNormalized=new Map,this.lastFramePointerCoords=new Map,this.currentFramePointerCoords=new Map,this.currentFramePointerDown=new Map,this.lastFramePointerDown=new Map,this.currentFrameDown=[],this.currentFrameUp=[],this.currentFrameMove=[],this.currentFrameCancel=[],this.currentFrameWheel=[],this._pointers=[this.primary],this._boundHandle=this._handle.bind(this),this._boundWheel=this._handleWheel.bind(this)}recreate(t,s){const r=new uo(t,s);return r.primary=this.primary,r._pointers=this._pointers,r}at(t){if(t>=this._pointers.length)for(let s=this._pointers.length-1,r=t;s<r;s++)this._pointers.push(new of);return this._pointers[t]}count(){return this._pointers.length}isDown(t){var s;return(s=this.currentFramePointerDown.get(t))!==null&&s!==void 0?s:!1}wasDown(t){var s;return(s=this.lastFramePointerDown.get(t))!==null&&s!==void 0?s:!1}isDragging(t){return this.isDown(t)}isDragStart(t){return this.isDown(t)&&!this.wasDown(t)}isDragEnd(t){return!this.isDown(t)&&this.wasDown(t)}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}update(){this.lastFramePointerDown=new Map(this.currentFramePointerDown),this.lastFramePointerCoords=new Map(this.currentFramePointerCoords);for(const t of this.currentFrameDown)this.emit("down",t),this.at(t.pointerId).emit("down",t),this.primary.emit("pointerdown",t);for(const t of this.currentFrameUp)this.emit("up",t),this.at(t.pointerId).emit("up",t);for(const t of this.currentFrameMove)this.emit("move",t),this.at(t.pointerId).emit("move",t);for(const t of this.currentFrameCancel)this.emit("cancel",t),this.at(t.pointerId).emit("cancel",t);for(const t of this.currentFrameWheel)this.emit("wheel",t),this.primary.emit("pointerwheel",t)}clear(){for(const t of this.currentFrameUp){this.currentFramePointerCoords.delete(t.pointerId);const s=this._activeNativePointerIdsToNormalized.entries();for(const[r,l]of s)l===t.pointerId&&this._activeNativePointerIdsToNormalized.delete(r)}this.currentFrameDown.length=0,this.currentFrameUp.length=0,this.currentFrameMove.length=0,this.currentFrameCancel.length=0,this.currentFrameWheel.length=0}init(t){var s;this.target===this.engine.canvas?this.engine.canvas.style.touchAction="none":document.body.style.touchAction="none",window.PointerEvent?(this.target.addEventListener("pointerdown",this._boundHandle),this.target.addEventListener("pointerup",this._boundHandle),this.target.addEventListener("pointermove",this._boundHandle),this.target.addEventListener("pointercancel",this._boundHandle)):(this.target.addEventListener("touchstart",this._boundHandle),this.target.addEventListener("touchend",this._boundHandle),this.target.addEventListener("touchmove",this._boundHandle),this.target.addEventListener("touchcancel",this._boundHandle),this.target.addEventListener("mousedown",this._boundHandle),this.target.addEventListener("mouseup",this._boundHandle),this.target.addEventListener("mousemove",this._boundHandle));const r={passive:!(this.engine.pageScrollPreventionMode===fn.All||this.engine.pageScrollPreventionMode===fn.Canvas)};if("onwheel"in document.createElement("div")?this.target.addEventListener("wheel",this._boundWheel,r):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel,r):this.target.addEventListener("MozMousePixelScroll",this._boundWheel,r),((s=t==null?void 0:t.grabWindowFocus)!==null&&s!==void 0?s:!0)&&ct()){const h=()=>{window.focus()};window.PointerEvent?this.target.addEventListener("pointerdown",h):(this.target.addEventListener("touchstart",h),this.target.addEventListener("mousedown",h))}}detach(){window.PointerEvent?(this.target.removeEventListener("pointerdown",this._boundHandle),this.target.removeEventListener("pointerup",this._boundHandle),this.target.removeEventListener("pointermove",this._boundHandle),this.target.removeEventListener("pointercancel",this._boundHandle)):(this.target.removeEventListener("touchstart",this._boundHandle),this.target.removeEventListener("touchend",this._boundHandle),this.target.removeEventListener("touchmove",this._boundHandle),this.target.removeEventListener("touchcancel",this._boundHandle),this.target.removeEventListener("mousedown",this._boundHandle),this.target.removeEventListener("mouseup",this._boundHandle),this.target.removeEventListener("mousemove",this._boundHandle)),"onwheel"in document.createElement("div")?this.target.removeEventListener("wheel",this._boundWheel):document.onmousewheel!==void 0?this.target.addEventListener("mousewheel",this._boundWheel):this.target.addEventListener("MozMousePixelScroll",this._boundWheel)}_normalizePointerId(t){this._activeNativePointerIdsToNormalized.set(t,-1);const r=Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((l,h)=>l-h).findIndex(l=>l===t);return this._activeNativePointerIdsToNormalized.set(t,r),r}_handle(t){t.preventDefault();const s=new Map;let r,l;if(Ry(t)){r=Ei.Unknown,l=Ai.Touch;for(let h=0;h<t.changedTouches.length;h++){const g=t.changedTouches[h],_=co.fromPagePosition(g.pageX,g.pageY,this.engine),b=h+1,S=this._normalizePointerId(b);this.currentFramePointerCoords.set(S,_),s.set(S,_)}}else{r=this._nativeButtonToPointerButton(t.button),l=Ai.Mouse;const h=co.fromPagePosition(t.pageX,t.pageY,this.engine);let g=1;My(t)&&(g=t.pointerId,l=this._stringToPointerType(t.pointerType));const _=this._normalizePointerId(g);this.currentFramePointerCoords.set(_,h),s.set(_,h)}for(const[h,g]of s.entries())switch(t.type){case"mousedown":case"pointerdown":case"touchstart":this.currentFrameDown.push(new yr("down",h,r,l,g,t)),this.currentFramePointerDown.set(h,!0);break;case"mouseup":case"pointerup":case"touchend":this.currentFrameUp.push(new yr("up",h,r,l,g,t)),this.currentFramePointerDown.set(h,!1);break;case"mousemove":case"pointermove":case"touchmove":this.currentFrameMove.push(new yr("move",h,r,l,g,t));break;case"touchcancel":case"pointercancel":this.currentFrameCancel.push(new yr("cancel",h,r,l,g,t));break}}_handleWheel(t){(this.engine.pageScrollPreventionMode===fn.All||this.engine.pageScrollPreventionMode===fn.Canvas&&t.target===this.engine.canvas)&&t.preventDefault();const s=this.engine.screen.pageToScreenCoordinates(Z(t.pageX,t.pageY)),r=this.engine.screen.screenToWorldCoordinates(s),l=-1/40,h=t.deltaX||t.wheelDeltaX*l||0,g=t.deltaY||t.wheelDeltaY*l||t.wheelDelta*l||t.detail||0,_=t.deltaZ||0;let b=Un.Pixel;t.deltaMode&&(t.deltaMode===1?b=Un.Line:t.deltaMode===2&&(b=Un.Page));const S=new pc(r.x,r.y,t.pageX,t.pageY,s.x,s.y,0,h,g,_,b,t);this.currentFrameWheel.push(S)}triggerEvent(t,s){const r=this.engine.screen.worldToPageCoordinates(s);window.PointerEvent?this._handle(new window.PointerEvent("pointer"+t,{pointerId:0,clientX:r.x,clientY:r.y})):this._handle(new window.MouseEvent("mouse"+t,{clientX:r.x,clientY:r.y}));const l=this.engine.currentScene.world.systemManager.get(ba),h=this.engine.currentScene.world.queryManager.createQuery(l.types);l.preupdate(),l.update(h.getEntities())}_nativeButtonToPointerButton(t){switch(t){case ji.NoButton:return Ei.NoButton;case ji.Left:return Ei.Left;case ji.Middle:return Ei.Middle;case ji.Right:return Ei.Right;case ji.Unknown:return Ei.Unknown;default:return Hh(t)}}_stringToPointerType(t){switch(t){case"touch":return Ai.Touch;case"mouse":return Ai.Mouse;case"pen":return Ai.Pen;default:return Ai.Unknown}}}class af{constructor(t){var s;this._samplePeriod=100,this._currentFrameTime=0,this._frames=0,this._previousSampleTime=0,this._beginFrameTime=0,this._fps=t.initialFps,this._samplePeriod=(s=t.samplePeriod)!==null&&s!==void 0?s:this._samplePeriod,this._currentFrameTime=1e3/t.initialFps,this._nowFn=t.nowFn,this._previousSampleTime=this._nowFn()}start(){this._beginFrameTime=this._nowFn()}end(){this._frames++;const t=this._nowFn();this._currentFrameTime=t-this._beginFrameTime,t>=this._previousSampleTime+this._samplePeriod&&(this._fps=this._frames*1e3/(t-this._previousSampleTime),this._previousSampleTime=t,this._frames=0)}get fps(){return this._fps}get instant(){return 1e3/this._currentFrameTime}}class _c{constructor(t){var s,r,l;this._onFatalException=()=>{},this._maxFps=1/0,this._lastTime=0,this._elapsed=1,this._scheduledCbs=[],this._totalElapsed=0,this._options=t,this.tick=t.tick,this._lastTime=(s=this.now())!==null&&s!==void 0?s:0,this._maxFps=(r=t.maxFps)!==null&&r!==void 0?r:this._maxFps,this._onFatalException=(l=t.onFatalException)!==null&&l!==void 0?l:this._onFatalException,this.fpsSampler=new af({initialFps:60,nowFn:()=>this.now()})}elapsed(){return this._elapsed}now(){return performance.now()}toTestClock(){return new lf({...this._options,defaultUpdateMs:16.6})}toStandardClock(){return new vc({...this._options})}setFatalExceptionHandler(t){this._onFatalException=t}schedule(t,s=0){const r=this._totalElapsed+s;this._scheduledCbs.push([t,r])}_runScheduledCbs(){for(let t=this._scheduledCbs.length-1;t>-1;t--)this._scheduledCbs[t][1]<=this._totalElapsed&&(this._scheduledCbs[t][0](),this._scheduledCbs.splice(t,1))}update(t){try{this.fpsSampler.start();const s=this.now();let r=s-this._lastTime||1;const l=1e3/this._maxFps;if(r>=l){let h=0;l!==0&&(h=r%l,r=r-h),r>200&&(r=1),this._elapsed=t||r,this._totalElapsed+=this._elapsed,this._runScheduledCbs(),this.tick(t||r),l!==0?this._lastTime=s-h:this._lastTime=s,this.fpsSampler.end()}}catch(s){this._onFatalException(s),this.stop()}}}class vc extends _c{constructor(t){super(t),this._running=!1}isRunning(){return this._running}start(){if(this._running)return;this._running=!0;const t=()=>{if(this._running)try{this._requestId=window.requestAnimationFrame(t),this.update()}catch(s){throw window.cancelAnimationFrame(this._requestId),s}};t()}stop(){this._running=!1}}class lf extends _c{constructor(t){super({...t}),this._logger=D.getInstance(),this._running=!1,this._currentTime=0,this._updateMs=t.defaultUpdateMs}now(){var t;return(t=this._currentTime)!==null&&t!==void 0?t:0}isRunning(){return this._running}start(){this._running=!0}stop(){this._running=!1}step(t){const s=t??this._updateMs;this._running?(this.update(s),this._currentTime+=s):this._logger.warn("The clock is not running, no step will be performed")}run(t,s){for(let r=0;r<t;r++)this.step(s??this._updateMs)}}var By=Ee(7379);class cf{constructor(){this._toasterCss=By.Z.toString(),this._isInitialized=!1}_initialize(){this._isInitialized||(this._container=document.createElement("div"),this._container.id="ex-toast-container",document.body.appendChild(this._container),this._isInitialized=!0,this._styleBlock=document.createElement("style"),this._styleBlock.textContent=this._toasterCss,document.head.appendChild(this._styleBlock))}dispose(){this._container.parentElement.removeChild(this._container),this._styleBlock.parentElement.removeChild(this._styleBlock),this._isInitialized=!1}_createFragment(t){const s=document.createElement("span");return s.innerText=t,s}toast(t,s,r){this._initialize();const l=document.createElement("div");l.className="ex-toast-message";const h=t.split("[LINK]").map(A=>this._createFragment(A));if(s){const A=document.createElement("a");A.href=s,r?A.innerText=r:A.innerText=s,h.splice(1,0,A)}const g=document.createElement("div");h.forEach(A=>{g.appendChild(A)}),l.appendChild(g);const _=document.createElement("button");_.innerText="x",_.addEventListener("click",()=>{this._container.removeChild(l)}),l.appendChild(_);const b=A=>{if(A.key==="Escape")try{this._container.removeChild(l)}catch{}document.removeEventListener("keydown",b)};document.addEventListener("keydown",b);const S=this._container.firstChild;this._container.insertBefore(l,S)}}class uf{constructor(t){this.inputs=t,this._handlers=new Map}execute(){for(const[t,s]of this._handlers.entries()){const r=t(this.inputs);r&&s(r)}}on(t,s){this._handlers.set(t,s)}}c();const Fy={FallbackGraphicsContext:"fallbackgraphicscontext",Initialize:"initialize",Visible:"visible",Hidden:"hidden",Start:"start",Stop:"stop",PreUpdate:"preupdate",PostUpdate:"postupdate",PreFrame:"preframe",PostFrame:"postframe",PreDraw:"predraw",PostDraw:"postdraw"};var fn;(function(d){d[d.None=0]="None",d[d.Canvas=1]="Canvas",d[d.All=2]="All"})(fn||(fn={}));class br{get canvasWidth(){return this.screen.canvasWidth}get halfCanvasWidth(){return this.screen.halfCanvasWidth}get canvasHeight(){return this.screen.canvasHeight}get halfCanvasHeight(){return this.screen.halfCanvasHeight}get drawWidth(){return this.screen.drawWidth}get halfDrawWidth(){return this.screen.halfDrawWidth}get drawHeight(){return this.screen.drawHeight}get halfDrawHeight(){return this.screen.halfDrawHeight}get isHiDpi(){return this.screen.isHiDpi}get stats(){return this.debug.stats}get isFullscreen(){return this.screen.isFullScreen}get displayMode(){return this.screen.displayMode}get pixelRatio(){return this.screen.pixelRatio}get isDebug(){return this._isDebug}get snapToPixel(){return this.graphicsContext.snapToPixel}set snapToPixel(t){this.graphicsContext.snapToPixel=t}emit(t,s){this.events.emit(t,s)}on(t,s){return this.events.on(t,s)}once(t,s){return this.events.once(t,s)}off(t,s){this.events.off(t,s)}constructor(t){var s,r,l,h,g,_;this.events=new m,this.maxFps=Number.POSITIVE_INFINITY,this.scenes={},this._suppressPlayButton=!1,this.pauseAudioWhenHidden=!0,this._isDebug=!1,this.enableCanvasTransparency=!0,this.onFatalException=I=>{D.getInstance().fatal(I)},this._toaster=new cf,this._timescale=1,this._isInitialized=!1,this._deferredGoTo=null,this._originalOptions={},this._performanceThresholdTriggered=!1,this._fpsSamples=[],this._loadingComplete=!1,this._isReady=!1,this._isReadyPromise=new Promise(I=>{this._isReadyResolve=I}),this.currentFrameElapsedMs=0,this.currentFrameLagMs=0,this._lagMs=0,this._screenShotRequests=[],t={...br._DEFAULT_ENGINE_OPTIONS,...t},this._originalOptions=t,u.freeze(),this.browser=new rf(window,document);const b=new td;if(!t.suppressMinimumBrowserFeatureDetection&&!(this._compatible=b.test())){const I=document.createElement("div");if(I.innerText="Sorry, your browser does not support all the features needed for Excalibur",document.body.appendChild(I),b.failedTests.forEach(function(V){const H=document.createElement("div");H.innerText="Browser feature missing "+V,document.body.appendChild(H)}),t.canvasElementId){const V=document.getElementById(t.canvasElementId);V&&V.parentElement.removeChild(V)}return}else this._compatible=!0;console.log&&!t.suppressConsoleBootMessage&&(console.log(`%cPowered by Excalibur.js (v${gf})`,"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;"),console.log(`
      /| ________________
O|===|* >________________>
      \\|`),console.log("Visit","http://excaliburjs.com","for more information")),t.suppressPlayButton&&(this._suppressPlayButton=!0),this._logger=D.getInstance(),this._logger.defaultLevel===F.Debug&&b.logBrowserFeatures(),this._logger.debug("Building engine..."),this.canvasElementId=t.canvasElementId,t.canvasElementId?(this._logger.debug("Using Canvas element specified: "+t.canvasElementId),this.canvas=document.getElementById(t.canvasElementId)):t.canvasElement?(this._logger.debug("Using Canvas element specified:",t.canvasElement),this.canvas=t.canvasElement):(this._logger.debug("Using generated canvas element"),this.canvas=document.createElement("canvas"));let S=(s=t.displayMode)!==null&&s!==void 0?s:je.Fixed;t.width&&t.height||t.viewport?(t.displayMode===void 0&&(S=je.Fixed),this._logger.debug("Engine viewport is size "+t.width+" x "+t.height)):t.displayMode||(this._logger.debug("Engine viewport is fit"),S=je.FitScreen),this._originalDisplayMode=S;let A=u.isEnabled("use-canvas-context");if(!A)try{this.graphicsContext=new un({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:t.antialiasing,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})}catch(I){this._logger.warn(`Excalibur could not load webgl for some reason (${I.message}) and loaded a Canvas 2D fallback. Some features of Excalibur will not work in this mode. 

Read more about this issue at https://excaliburjs.com/docs/webgl`),A=!0}A&&(this.graphicsContext=new ta({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:t.antialiasing,backgroundColor:t.backgroundColor,snapToPixel:t.snapToPixel,useDrawSorting:t.useDrawSorting})),this.screen=new Jl({canvas:this.canvas,context:this.graphicsContext,antialiasing:(r=t.antialiasing)!==null&&r!==void 0?r:!0,browser:this.browser,viewport:(l=t.viewport)!==null&&l!==void 0?l:t.width&&t.height?{width:t.width,height:t.height}:Ql.SVGA,resolution:t.resolution,displayMode:S,pixelRatio:t.suppressHiDPIScaling?1:(h=t.pixelRatio)!==null&&h!==void 0?h:null}),is.filtering=t.antialiasing?cs.Blended:cs.Pixel,t.backgroundColor&&(this.backgroundColor=t.backgroundColor.clone()),this.maxFps=(g=t.maxFps)!==null&&g!==void 0?g:this.maxFps,this.fixedUpdateFps=(_=t.fixedUpdateFps)!==null&&_!==void 0?_:this.fixedUpdateFps,this.clock=new vc({maxFps:this.maxFps,tick:this._mainloop.bind(this),onFatalException:I=>this.onFatalException(I)}),this.enableCanvasTransparency=t.enableCanvasTransparency,this._loader=new Qh,this._loader.wireEngine(this),this.debug=new nf(this),this._initialize(t),this.rootScene=this.currentScene=new ao,this.addScene("root",this.rootScene),window.___EXCALIBUR_DEVTOOL=this}_monitorPerformanceThresholdAndTriggerFallback(){const{allow:t}=this._originalOptions.configurePerformanceCanvas2DFallback;let{threshold:s,showPlayerMessage:r}=this._originalOptions.configurePerformanceCanvas2DFallback;if(s===void 0&&(s=br._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold),r===void 0&&(r=br._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage),!u.isEnabled("use-canvas-context")&&t&&this.ready&&!this._performanceThresholdTriggered){this._fpsSamples.length===s.numberOfFrames&&this._fpsSamples.splice(0,1),this._fpsSamples.push(this.clock.fpsSampler.fps);let l=0;for(let g=0;g<this._fpsSamples.length;g++)l+=this._fpsSamples[g];const h=l/this._fpsSamples.length;this._fpsSamples.length===s.numberOfFrames&&h<=s.fps&&(this._performanceThresholdTriggered=!0,this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.
this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.

If in Chrome:
  * Visit Settings > Advanced > System, and ensure "Use Hardware Acceleration" is checked.
  * Visit chrome://flags/#ignore-gpu-blocklist and ensure "Override software rendering list" is "enabled"
If in Firefox, visit about:config
  * Ensure webgl.disabled = false
  * Ensure webgl.force-enabled = true
  * Ensure layers.acceleration.force-enabled = true

Read more about this issue at https://excaliburjs.com/docs/performance`),r&&this._toaster.toast("Excalibur is encountering performance issues. It's possible that your browser doesn't have hardware acceleration enabled. Visit [LINK] for more information and potential solutions.","https://excaliburjs.com/docs/performance"),this.useCanvas2DFallback(),this.emit("fallbackgraphicscontext",this.graphicsContext))}}useCanvas2DFallback(){var t,s,r;const l=this.canvas.cloneNode(!1);this.canvas.parentNode.replaceChild(l,this.canvas),this.canvas=l;const h=this._originalOptions,g=this._originalDisplayMode;this.graphicsContext=new ta({canvasElement:this.canvas,enableTransparency:this.enableCanvasTransparency,smoothing:h.antialiasing,backgroundColor:h.backgroundColor,snapToPixel:h.snapToPixel,useDrawSorting:h.useDrawSorting}),this.screen&&this.screen.dispose(),this.screen=new Jl({canvas:this.canvas,context:this.graphicsContext,antialiasing:(t=h.antialiasing)!==null&&t!==void 0?t:!0,browser:this.browser,viewport:(s=h.viewport)!==null&&s!==void 0?s:h.width&&h.height?{width:h.width,height:h.height}:Ql.SVGA,resolution:h.resolution,displayMode:g,pixelRatio:h.suppressHiDPIScaling?1:(r=h.pixelRatio)!==null&&r!==void 0?r:null}),this.screen.setCurrentCamera(this.currentScene.camera),this.input.pointers.detach();const _=h&&h.pointerScope===lt.Document?document:this.canvas;this.input.pointers=this.input.pointers.recreate(_,this),this.input.pointers.init()}getWorldBounds(){return this.screen.getWorldBounds()}get timescale(){return this._timescale}set timescale(t){if(t<=0){D.getInstance().error("Cannot set engine.timescale to a value of 0 or less than 0.");return}this._timescale=t}addTimer(t){return this.currentScene.addTimer(t)}removeTimer(t){return this.currentScene.removeTimer(t)}addScene(t,s){this.scenes[t]&&this._logger.warn("Scene",t,"already exists overwriting"),this.scenes[t]=s}removeScene(t){if(t instanceof ao)for(const s in this.scenes)this.scenes.hasOwnProperty(s)&&this.scenes[s]===t&&delete this.scenes[s];typeof t=="string"&&delete this.scenes[t]}add(t){if(arguments.length===2){this.addScene(arguments[0],arguments[1]);return}this._deferredGoTo&&this.scenes[this._deferredGoTo]?this.scenes[this._deferredGoTo].add(t):this.currentScene.add(t)}remove(t){t instanceof Ke&&this.currentScene.remove(t),t instanceof ao&&this.removeScene(t),typeof t=="string"&&this.removeScene(t)}goToScene(t,s){if(!this.isInitialized){this._deferredGoTo=t;return}if(this.scenes[t]){const r=this.currentScene,l=this.scenes[t];if(this._logger.debug("Going to scene:",t),this.currentScene.isInitialized){const g={engine:this,previousScene:r,nextScene:l};this.currentScene._deactivate.apply(this.currentScene,[g,l]),this.currentScene.events.emit("deactivate",new qe(g,this.currentScene))}this.currentScene=l,this.screen.setCurrentCamera(l.camera),this.currentScene._initialize(this);const h={engine:this,previousScene:r,nextScene:l,data:s};this.currentScene._activate.apply(this.currentScene,[h,l]),this.currentScene.events.emit("activate",new Be(h,this.currentScene))}else this._logger.error("Scene",t,"does not exist!")}screenToWorldCoordinates(t){return this.screen.screenToWorldCoordinates(t)}worldToScreenCoordinates(t){return this.screen.worldToScreenCoordinates(t)}_initialize(t){var s,r,l,h;this.pageScrollPreventionMode=t.scrollPreventionMode;const g=t&&t.pointerScope===lt.Document?document:this.canvas;this.input={keyboard:new St,pointers:new uo(g,this),gamepads:new vt},this.input.keyboard.init({grabWindowFocus:(r=(s=this._originalOptions)===null||s===void 0?void 0:s.grabWindowFocus)!==null&&r!==void 0?r:!0}),this.input.pointers.init({grabWindowFocus:(h=(l=this._originalOptions)===null||l===void 0?void 0:l.grabWindowFocus)!==null&&h!==void 0?h:!0}),this.input.gamepads.init(),this.inputMapper=new uf(this.input),this.browser.document.on("visibilitychange",()=>{document.visibilityState==="hidden"?(this.events.emit("hidden",new q(this)),this._logger.debug("Window hidden")):document.visibilityState==="visible"&&(this.events.emit("visible",new U(this)),this._logger.debug("Window visible"))}),!this.canvasElementId&&!t.canvasElement&&document.body.appendChild(this.canvas)}onInitialize(t){}setAntialiasing(t){this.screen.antialiasing=t}getAntialiasing(){return this.screen.antialiasing}get isInitialized(){return this._isInitialized}_overrideInitialize(t){if(!this.isInitialized)if(this.onInitialize(t),this.events.emit("initialize",new he(t,this)),this._isInitialized=!0,this._deferredGoTo){const s=this._deferredGoTo;this._deferredGoTo=null,this.goToScene(s)}else this.goToScene("root")}_update(t){if(!this.ready){this._loader.update(this,t),this.input.keyboard.update(),this.input.gamepads.update(),this.inputMapper.execute();return}this._preupdate(t),this.currentScene.update(this,t),this.graphicsContext.updatePostProcessors(t),this._postupdate(t),this.input.keyboard.update(),this.input.gamepads.update(),this.inputMapper.execute()}_preupdate(t){this.emit("preupdate",new W(this,t,this)),this.onPreUpdate(this,t)}onPreUpdate(t,s){}_postupdate(t){this.emit("postupdate",new G(this,t,this)),this.onPostUpdate(this,t)}onPostUpdate(t,s){}_draw(t){if(this.graphicsContext.beginDrawLifecycle(),this.graphicsContext.clear(),this._predraw(this.graphicsContext,t),!this._isReady){this._loader.canvas.draw(this.graphicsContext,0,0),this.graphicsContext.flush();return}this.graphicsContext.backgroundColor=this.backgroundColor,this.currentScene.draw(this.graphicsContext,t),this._postdraw(this.graphicsContext,t),this.graphicsContext.flush(),this.graphicsContext.endDrawLifecycle(),this._checkForScreenShots()}_predraw(t,s){this.emit("predraw",new k(t,s,this)),this.onPreDraw(t,s)}onPreDraw(t,s){}_postdraw(t,s){this.emit("postdraw",new R(t,s,this)),this.onPostDraw(t,s)}onPostDraw(t,s){}showDebug(t){this._isDebug=t}toggleDebug(){return this._isDebug=!this._isDebug,this._isDebug}get loadingComplete(){return this._loadingComplete}get ready(){return this._isReady}isReady(){return this._isReadyPromise}async start(t){if(!this._compatible)throw new Error("Excalibur is incompatible with your browser");return t&&(this.screen.pushResolutionAndViewport(),this.screen.resolution=this.screen.viewport,this.screen.applyResolutionAndViewport(),this._loader=t,this._loader.suppressPlayButton=this._suppressPlayButton||this._loader.suppressPlayButton,this._loader.wireEngine(this)),this._logger.debug("Starting game clock..."),this.browser.resume(),this.clock.start(),this._logger.debug("Game clock started"),t&&(await this.load(this._loader),this._loadingComplete=!0,this.screen.popResolutionAndViewport(),this.screen.applyResolutionAndViewport()),this._loadingComplete=!0,this._overrideInitialize(this),this._isReady=!0,this._isReadyResolve(),this.emit("start",new E(this)),this._isReadyPromise}_mainloop(t){this.emit("preframe",new X(this,this.stats.prevFrame));const s=t*this.timescale;this.currentFrameElapsedMs=s;const r=this.stats.prevFrame.id+1;this.stats.currFrame.reset(),this.stats.currFrame.id=r,this.stats.currFrame.delta=s,this.stats.currFrame.fps=this.clock.fpsSampler.fps,ze.clear();const l=this.clock.now(),h=1e3/this.fixedUpdateFps;if(this.fixedUpdateFps)for(this._lagMs+=s;this._lagMs>=h;)this._update(h),this._lagMs-=h;else this._update(s);const g=this.clock.now();this.currentFrameLagMs=this._lagMs,this._draw(s);const _=this.clock.now();this.stats.currFrame.duration.update=g-l,this.stats.currFrame.duration.draw=_-g,this.stats.currFrame.graphics.drawnImages=ze.DrawnImagesCount,this.stats.currFrame.graphics.drawCalls=ze.DrawCallCount,this.emit("postframe",new st(this,this.stats.currFrame)),this.stats.prevFrame.reset(this.stats.currFrame),this._monitorPerformanceThresholdAndTriggerFallback()}stop(){this.clock.isRunning()&&(this.emit("stop",new P(this)),this.browser.pause(),this.clock.stop(),this._logger.debug("Game stopped"))}isRunning(){return this.clock.isRunning()}screenshot(t=!1){return new Promise(r=>{this._screenShotRequests.push({preserveHiDPIResolution:t,resolve:r})})}_checkForScreenShots(){for(const t of this._screenShotRequests){const s=t.preserveHiDPIResolution?this.canvas.width:this.screen.resolution.width,r=t.preserveHiDPIResolution?this.canvas.height:this.screen.resolution.height,l=document.createElement("canvas");l.width=s,l.height=r;const h=l.getContext("2d");h.imageSmoothingEnabled=this.screen.antialiasing,h.drawImage(this.canvas,0,0,s,r);const g=new Image,_=l.toDataURL("image/png");g.src=_,t.resolve(g)}this._screenShotRequests.length=0}async load(t){try{await t.load()}catch(s){this._logger.error("Error loading resources, things may not behave properly",s),await Promise.resolve()}}}br._DEFAULT_ENGINE_OPTIONS={width:0,height:0,enableCanvasTransparency:!0,useDrawSorting:!0,configurePerformanceCanvas2DFallback:{allow:!0,showPlayerMessage:!1,threshold:{fps:20,numberOfFrames:100}},canvasElementId:"",canvasElement:void 0,snapToPixel:!1,pointerScope:lt.Canvas,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,grabWindowFocus:!0,scrollPreventionMode:fn.Canvas,backgroundColor:ht.fromHex("#2185d0")};class Dy{constructor(){this._handlers={},this._wiredEventDispatchers=[],this._deferedHandlerRemovals=[]}clear(){this._handlers={},this._wiredEventDispatchers=[]}_processDeferredHandlerRemovals(){for(const t of this._deferedHandlerRemovals)this._removeHandler(t.name,t.handler);this._deferedHandlerRemovals.length=0}emit(t,s){if(this._processDeferredHandlerRemovals(),!t)return;t=t.toLowerCase(),(typeof s>"u"||s===null)&&(s=new v);let r,l;if(this._handlers[t])for(r=0,l=this._handlers[t].length,r;r<l;r++)this._handlers[t][r](s);for(r=0,l=this._wiredEventDispatchers.length,r;r<l;r++)this._wiredEventDispatchers[r].emit(t,s)}on(t,s){this._processDeferredHandlerRemovals(),t=t.toLowerCase(),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(s)}off(t,s){this._deferedHandlerRemovals.push({name:t,handler:s})}_removeHandler(t,s){t=t.toLowerCase();const r=this._handlers[t];if(r)if(!s)this._handlers[t].length=0;else{const l=r.indexOf(s);l>-1&&this._handlers[t].splice(l,1)}}once(t,s){this._processDeferredHandlerRemovals();const r=l=>{const h=l||new v;this.off(t,r),s(h)};this.on(t,r)}wire(t){t._wiredEventDispatchers.push(this)}unwire(t){const s=t._wiredEventDispatchers.indexOf(this);s>-1&&t._wiredEventDispatchers.splice(s,1)}}class Ly extends Ci{get font(){return this._font}set font(t){this._font=t,this._text.font=t}get text(){return this._text.text}set text(t){this._text.text=t}get color(){return this._text.color}set color(t){this._text&&(this._text.color=t)}get opacity(){return this._text.opacity}set opacity(t){this._text.opacity=t}get spriteFont(){return this._spriteFont}set spriteFont(t){t&&(this._spriteFont=t,this._text.font=this._spriteFont)}constructor(t){super(t),this._font=new pr,this._text=new io({text:"",font:this._font});const{text:s,pos:r,x:l,y:h,spriteFont:g,font:_,color:b}=t;this.pos=r??(l&&h?Z(l,h):this.pos),this.text=s??this.text,this.font=_??this.font,this.spriteFont=g??this.spriteFont,this._text.color=b??this.color;const S=this.get(os);S.anchor=z.Zero,S.use(this._text)}_initialize(t){super._initialize(t)}getTextWidth(){return this._text.width}}class hf extends Ke{getGraphics(){return this._graphics}addGraphic(t){this._graphics.push(t),this._gfx.visible=!0,this._gfx.localBounds=this._recalculateBounds()}_recalculateBounds(){let t=this._tileBounds.clone();for(const s of this._graphics){const r=Z(this.map.graphicsOffset.x-this.map.tileWidth/2,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:s.height-this.map.tileHeight));t=t.combine(s.localBounds.translate(r))}return t}removeGraphic(t){const s=this._graphics.indexOf(t);s>-1&&this._graphics.splice(s,1),this._gfx.localBounds=this._recalculateBounds()}clearGraphics(){this._graphics.length=0,this._gfx.visible=!1,this._gfx.localBounds=this._recalculateBounds()}getColliders(){return this._colliders}addCollider(t){this._colliders.push(t),this.map.flagCollidersDirty()}removeCollider(t){const s=this._colliders.indexOf(t);s>-1&&this._colliders.splice(s,1),this.map.flagCollidersDirty()}clearColliders(){this._colliders.length=0,this.map.flagCollidersDirty()}get pos(){return this.map.tileToWorld(Z(this.x,this.y))}get center(){return this.pos.add(Z(0,this.map.tileHeight/2))}constructor(t,s,r,l){super([new kt,new os({offset:r??z.Zero,onPostDraw:(V,H)=>this.draw(V,H)}),new wa(l)]),this.solid=!1,this._tileBounds=new Wt,this._graphics=[],this._colliders=[],this.x=t,this.y=s,this.map=l,this._transform=this.get(kt),this._isometricEntityComponent=this.get(wa);const h=this.map.tileWidth/2,g=this.map.tileHeight/2,_=(this.x-this.y)*h,b=(this.x+this.y)*g;this._transform.pos=Z(_,b),this._isometricEntityComponent.elevation=0,this._gfx=this.get(os),this._gfx.visible=!1;const S=this.map.tileWidth,A=this.map.tileHeight,I=Z(0,this.map.renderFromTopOfGraphic?A:0);this._gfx.localBounds=this._tileBounds=new Wt({left:-S/2,top:-A,right:S/2,bottom:A}).translate(I)}draw(t,s){const r=this.map.tileWidth/2;t.save(),t.translate(-r,0);for(const l of this._graphics)l.draw(t,this.map.graphicsOffset.x,this.map.graphicsOffset.y-(this.map.renderFromTopOfGraphic?0:l.height-this.map.tileHeight));t.restore()}}class Oy extends Ke{constructor(t){super([new kt,new ae({type:Xt.Fixed}),new Ne,new pa(S=>this.debug(S),!1)],t.name),this.renderFromTopOfGraphic=!1,this.graphicsOffset=Z(0,0),this._collidersDirty=!1,this._originalOffsets=new WeakMap;const{pos:s,tileWidth:r,tileHeight:l,columns:h,rows:g,renderFromTopOfGraphic:_,graphicsOffset:b}=t;this.transform=this.get(kt),s&&(this.transform.pos=s),this.collider=this.get(Ne),this.collider&&this.collider.set(this._composite=new us([])),this.renderFromTopOfGraphic=_??this.renderFromTopOfGraphic,this.graphicsOffset=b??this.graphicsOffset,this.tileWidth=r,this.tileHeight=l,this.columns=h,this.rows=g,this.tiles=new Array(h*g);for(let S=0;S<g;S++)for(let A=0;A<h;A++){const I=new hf(A,S,this.graphicsOffset,this);this.tiles[A+S*h]=I,this.addChild(I)}}update(){this._collidersDirty&&(this.updateColliders(),this._collidersDirty=!1)}flagCollidersDirty(){this._collidersDirty=!0}_getOrSetColliderOriginalOffset(t){if(this._originalOffsets.has(t))return this._originalOffsets.get(t);{const s=t.offset;return this._originalOffsets.set(t,s),s}}updateColliders(){this._composite.clearColliders();const t=this.get(kt).pos;for(const s of this.tiles)if(s.solid)for(const r of s.getColliders()){const l=this._getOrSetColliderOriginalOffset(r);r.offset=this.tileToWorld(Z(s.x,s.y)).sub(t).add(l).sub(Z(this.tileWidth/2,this.tileHeight)),r.owner=this,this._composite.addCollider(r)}this.collider.update()}worldToTile(t){t=t.sub(this.transform.globalPos);const s=this.tileWidth/2,r=this.tileHeight/2;return Z(~~((t.x/s+t.y/r)/2),~~((t.y/r-t.x/s)/2))}tileToWorld(t){const s=this.tileWidth/2,r=this.tileHeight/2,l=(t.x-t.y)*s,h=(t.x+t.y)*r;return Z(l,h).add(this.transform.pos)}getTile(t,s){return t<0||s<0||t>=this.columns||s>=this.rows?null:this.tiles[t+s*this.columns]}getTileByPoint(t){const s=this.worldToTile(t);return this.getTile(s.x,s.y)}_getMaxZIndex(){let t=Number.NEGATIVE_INFINITY;for(const s of this.tiles){const r=s.get(kt).z;r>t&&(t=r)}return t}debug(t){t.save(),t.z=this._getMaxZIndex()+.5;for(let s=0;s<this.rows+1;s++){const r=this.tileToWorld(Z(0,s)),l=this.tileToWorld(Z(this.columns,s));t.drawLine(r,l,ht.Red,2)}for(let s=0;s<this.columns+1;s++){const r=this.tileToWorld(Z(s,0)),l=this.tileToWorld(Z(s,this.rows));t.drawLine(r,l,ht.Red,2)}for(const s of this.tiles)t.drawCircle(this.tileToWorld(Z(s.x,s.y)),3,ht.Yellow);t.restore()}}class yc{constructor(t,s){this._stopped=!1,this._sequenceBuilder=s,this._sequenceContext=new so(t),this._actionQueue=this._sequenceContext.getQueue(),this._sequenceBuilder(this._sequenceContext)}update(t){this._actionQueue.update(t)}isComplete(){return this._stopped||this._actionQueue.isComplete()}stop(){this._stopped=!0}reset(){this._stopped=!1,this._actionQueue.reset()}clone(t){return new yc(t,this._sequenceBuilder)}}class Vy{constructor(t){this._actions=t}update(t){for(let s=0;s<this._actions.length;s++)this._actions[s].update(t)}isComplete(t){return this._actions.every(s=>s.isComplete(t))}reset(){this._actions.forEach(t=>t.reset())}stop(){this._actions.forEach(t=>t.stop())}}class Hn{static create(t,s){if(this._CURRENT_GROUP>this._MAX_GROUPS)throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);if(this._GROUPS.get(t))throw new Error(`Collision group ${t} already exists`);const r=new ri(t,this._CURRENT_BIT,s!==void 0?s:~this._CURRENT_BIT);return this._CURRENT_BIT=this._CURRENT_BIT<<1|0,this._CURRENT_GROUP++,this._GROUPS.set(t,r),r}static get groups(){return Array.from(this._GROUPS.values())}static groupByName(t){return this._GROUPS.get(t)}static reset(){this._GROUPS=new Map,this._CURRENT_BIT=this._STARTING_BIT,this._CURRENT_GROUP=1}}Hn._STARTING_BIT=1,Hn._MAX_GROUPS=32,Hn._CURRENT_GROUP=1,Hn._CURRENT_BIT=Hn._STARTING_BIT,Hn._GROUPS=new Map;function zy(d){return!!d._initialize}function Ny(d){return!!d.onInitialize}function Uy(d){return!!d._preupdate}function Hy(d){return!!d.onPreUpdate}function $y(d){return!!d.onPostUpdate}function Wy(d){return!!d.onPostUpdate}function Gy(d){return!!d.onPreDraw}function jy(d){return!!d.onPostDraw}class Xy{constructor(t,s=ht.Magenta,r=!1){this.path=t,this.color=s,this._stream=null,this._gif=null,this._textures=[],this._animation=null,this._transparentColor=null,this._resource=new Qo(t,"arraybuffer",r),this._transparentColor=s}get bustCache(){return this._resource.bustCache}set bustCache(t){this._resource.bustCache=t}async load(){const t=await this._resource.load();this._stream=new df(t),this._gif=new ff(this._stream,this._transparentColor);const s=this._gif.images.map(r=>new Yl(r.src,!1));return await Promise.all(s.map(r=>r.load())),this.data=this._textures=s}isLoaded(){return!!this.data}toSprite(t=0){return this._textures[t].toSprite()}toSpriteSheet(){const t=this._textures.map(s=>s.toSprite());return new Dn({sprites:t})}toAnimation(t){const s=this.toSpriteSheet(),r=s.sprites.length;return this._animation=Si.fromSpriteSheet(s,bi(0,r),t),this._animation}get readCheckBytes(){return this._gif.checkBytes}}const Ca=d=>d.reduce(function(t,s){return t*2+s},0),bc=d=>{const t=[];for(let s=7;s>=0;s--)t.push(!!(d&1<<s));return t};class df{constructor(t){if(this.data=null,this.len=0,this.position=0,this.readByte=()=>{if(this.position>=this.data.byteLength)throw new Error("Attempted to read past end of stream.");return this.data[this.position++]},this.readBytes=s=>{const r=[];for(let l=0;l<s;l++)r.push(this.readByte());return r},this.read=s=>{let r="";for(let l=0;l<s;l++)r+=String.fromCharCode(this.readByte());return r},this.readUnsigned=()=>{const s=this.readBytes(2);return(s[1]<<8)+s[0]},this.data=new Uint8Array(t),this.len=this.data.byteLength,this.len===0)throw new Error("No data loaded from file")}}const Yy=function(d,t){let s=0;const r=function(V){let H=0;for(let tt=0;tt<V;tt++)t.charCodeAt(s>>3)&1<<(s&7)&&(H|=1<<tt),s++;return H},l=[],h=1<<d,g=h+1;let _=d+1,b=[];const S=function(){b=[],_=d+1;for(let V=0;V<h;V++)b[V]=[V];b[h]=[],b[g]=null};let A,I;for(;;){if(I=A,A=r(_),A===h){S();continue}if(A===g)break;if(A<b.length)I!==h&&b.push(b[I].concat(b[A][0]));else{if(A!==b.length)throw new Error("Invalid LZW code.");b.push(b[I].concat(b[I][0]))}l.push.apply(l,b[A]),b.length===1<<_&&_<12&&_++}return l};class ff{constructor(t,s=ht.Magenta){this._st=null,this._handler={},this._transparentColor=null,this.frames=[],this.images=[],this.globalColorTable=[],this.checkBytes=[],this.parseColorTable=r=>{const l=[];for(let h=0;h<r;h++){const _="#"+this._st.readBytes(3).map(b=>{const S=b.toString(16);return S.length===1?"0"+S:S}).join("");l.push(_)}return l},this.readSubBlocks=()=>{let r,l;l="";do r=this._st.readByte(),l+=this._st.read(r);while(r!==0);return l},this.parseHeader=()=>{const r={sig:null,ver:null,width:null,height:null,colorRes:null,globalColorTableSize:null,gctFlag:null,sorted:null,globalColorTable:[],bgColor:null,pixelAspectRatio:null};if(r.sig=this._st.read(3),r.ver=this._st.read(3),r.sig!=="GIF")throw new Error("Not a GIF file.");r.width=this._st.readUnsigned(),r.height=this._st.readUnsigned();const l=bc(this._st.readByte());r.gctFlag=l.shift(),r.colorRes=Ca(l.splice(0,3)),r.sorted=l.shift(),r.globalColorTableSize=Ca(l.splice(0,3)),r.bgColor=this._st.readByte(),r.pixelAspectRatio=this._st.readByte(),r.gctFlag&&(r.globalColorTable=this.parseColorTable(1<<r.globalColorTableSize+1),this.globalColorTable=r.globalColorTable),this._handler.hdr&&this._handler.hdr(r)&&this.checkBytes.push(this._handler.hdr)},this.parseExt=r=>{const l=S=>{this.checkBytes.push(this._st.readByte());const A=bc(this._st.readByte());S.reserved=A.splice(0,3),S.disposalMethod=Ca(A.splice(0,3)),S.userInput=A.shift(),S.transparencyGiven=A.shift(),S.delayTime=this._st.readUnsigned(),S.transparencyIndex=this._st.readByte(),S.terminator=this._st.readByte(),this._handler.gce&&this._handler.gce(S)&&this.checkBytes.push(this._handler.gce)},h=S=>{S.comment=this.readSubBlocks(),this._handler.com&&this._handler.com(S)&&this.checkBytes.push(this._handler.com)},g=S=>{this.checkBytes.push(this._st.readByte()),S.ptHeader=this._st.readBytes(12),S.ptData=this.readSubBlocks(),this._handler.pte&&this._handler.pte(S)&&this.checkBytes.push(this._handler.pte)},_=S=>{const A=V=>{this.checkBytes.push(this._st.readByte()),V.unknown=this._st.readByte(),V.iterations=this._st.readUnsigned(),V.terminator=this._st.readByte(),this._handler.app&&this._handler.app.NETSCAPE&&this._handler.app.NETSCAPE(V)&&this.checkBytes.push(this._handler.app)},I=V=>{V.appData=this.readSubBlocks(),this._handler.app&&this._handler.app[V.identifier]&&this._handler.app[V.identifier](V)&&this.checkBytes.push(this._handler.app[V.identifier])};switch(this.checkBytes.push(this._st.readByte()),S.identifier=this._st.read(8),S.authCode=this._st.read(3),S.identifier){case"NETSCAPE":A(S);break;default:I(S);break}},b=S=>{S.data=this.readSubBlocks(),this._handler.unknown&&this._handler.unknown(S)&&this.checkBytes.push(this._handler.unknown)};switch(r.label=this._st.readByte(),r.label){case 249:r.extType="gce",l(r);break;case 254:r.extType="com",h(r);break;case 1:r.extType="pte",g(r);break;case 255:r.extType="app",_(r);break;default:r.extType="unknown",b(r);break}},this.parseImg=r=>{const l=(_,b)=>{const S=new Array(_.length),A=_.length/b,I=(gt,pt)=>{const J=_.slice(pt*b,(pt+1)*b);S.splice.apply(S,[gt*b,b].concat(J))},V=[0,4,2,1],H=[8,8,4,2];let tt=0;for(let gt=0;gt<4;gt++)for(let pt=V[gt];pt<A;pt+=H[gt])I(pt,tt),tt++;return S};r.leftPos=this._st.readUnsigned(),r.topPos=this._st.readUnsigned(),r.width=this._st.readUnsigned(),r.height=this._st.readUnsigned();const h=bc(this._st.readByte());r.lctFlag=h.shift(),r.interlaced=h.shift(),r.sorted=h.shift(),r.reserved=h.splice(0,2),r.lctSize=Ca(h.splice(0,3)),r.lctFlag&&(r.lct=this.parseColorTable(1<<r.lctSize+1)),r.lzwMinCodeSize=this._st.readByte();const g=this.readSubBlocks();r.pixels=Yy(r.lzwMinCodeSize,g),r.interlaced&&(r.pixels=l(r.pixels,r.width)),this.frames.push(r),this.arrayToImage(r),this._handler.img&&this._handler.img(r)&&this.checkBytes.push(this._handler)},this.parseBlock=()=>{const r={sentinel:this._st.readByte(),type:""};switch(String.fromCharCode(r.sentinel)){case"!":r.type="ext",this.parseExt(r);break;case",":r.type="img",this.parseImg(r);break;case";":r.type="eof",this._handler.eof&&this._handler.eof(r)&&this.checkBytes.push(this._handler.eof);break;default:throw new Error("Unknown block: 0x"+r.sentinel.toString(16))}r.type!=="eof"&&this.parseBlock()},this.arrayToImage=r=>{let l=0;const h=document.createElement("canvas");h.id=l.toString(),h.width=r.width,h.height=r.height,l++;const g=h.getContext("2d"),_=1;let b=0,S=0;for(let I=0;I<r.pixels.length;I++)S%r.width===0&&(b++,S=0),this.globalColorTable[r.pixels[I]]===this._transparentColor.toHex()?g.fillStyle="rgba(0, 0, 0, 0)":g.fillStyle=this.globalColorTable[r.pixels[I]],g.fillRect(S,b,_,_),S++;const A=new Image;A.src=h.toDataURL(),this.images.push(A)},this._st=t,this._handler={},this._transparentColor=s,this.parseHeader(),this.parseBlock()}}class wc extends Ss{constructor(t){super(),this.color=ht.Black,this.thickness=1;const{start:s,end:r,color:l,thickness:h}=t;this.start=s,this.end=r,this.color=l??this.color,this.thickness=h??this.thickness;const{width:g,height:_}=Wt.fromPoints([s,r]);this.width=g,this.height=_}_drawImage(t,s,r){t.drawLine(this.start,this.end,this.color,this.thickness)}clone(){return new wc({start:this.start,end:this.end,color:this.color,thickness:this.thickness})}}class xc extends hr{get points(){return this._points}set points(t){this._points=t;const s=this.minPoint;this.width=this._points.reduce((r,l)=>Math.max(l.x,r),0)-s.x,this.height=this._points.reduce((r,l)=>Math.max(l.y,r),0)-s.y,this.flagDirty()}get minPoint(){const t=this._points.reduce((r,l)=>Math.min(l.x,r),1/0),s=this._points.reduce((r,l)=>Math.min(l.y,r),1/0);return Z(t,s)}constructor(t){super(t),this.points=t.points,this.filtering=cs.Blended,this.rasterize()}clone(){return new xc({points:this.points.map(t=>t.clone()),...this.cloneGraphicOptions(),...this.cloneRasterOptions()})}execute(t){if(this.points&&this.points.length){t.beginPath();const s=this.minPoint.negate(),r=this.points[0].add(s);t.moveTo(r.x,r.y),this.points.forEach(l=>{t.lineTo(l.x+s.x,l.y+s.y)}),t.lineTo(r.x,r.y),t.closePath(),this.color&&t.fill(),this.strokeColor&&t.stroke()}}}class qy{constructor(){this._queue=[]}get length(){return this._queue.length}enqueue(){const t=new cr;return this._queue.push(t),t.promise}dequeue(t){this._queue.shift().resolve(t)}}class Zy{constructor(t){this._count=t,this._waitQueue=new qy}get count(){return this._count}get waiting(){return this._waitQueue.length}async enter(){return this._count!==0?(this._count--,Promise.resolve()):this._waitQueue.enqueue()}exit(t=1){if(t!==0){for(;t!==0&&this._waitQueue.length!==0;)this._waitQueue.dequeue(null),t--;this._count+=t}}}const gf="0.28.0";c()})();T.fWn;T.Ia8;var Su=T.rqv;T.hLI;T.yyv;T.tX5;var Hl=T.vtX;T.r7K;T.lCh;T.cE4;var Vg=T.fwF;T.sce;T.AQ6;var zg=T._c7;T.KUs;T.Ajp;T.dkO;T.RDh;T._H9;T.mxs;T.OmD;T.kBf;T.C4F;T.NQt;T.JjN;T.EK_;T.V1s;T.xHm;T.Xz7;T.Cdc;T.FKn;T.SUY;T.ab2;T.GfZ;T.YMS;T.oyv;T.aUb;T.SdD;T.JUv;T.jEj;T.TFq;T.HDU;T.R_y;T.ydN;T.t50;T.s$$;var q_=T.v2G,Ki=T.Ilk;T.s9i;T.dxL;T.LLX;T.wA2;T.R_p;T.IQ$;T.I5F;T.X8$;T.FR6;T.U8o;T.kbG;T.iS_;T.cGG;T.RPN;T.skb;T.SLU;T.RdJ;T.cNu;T.gU7;T.LSk;T.Nmp;var OS=T.d1Y;T.xrL;T.sRW;T.cmV;T.qWz;T.N0Q;T.q8b;T.ynB;T.jT9;var sl=T.wAz,VS=T.D4V;T.NLr;T.N6H;T.W1A;T.JHW;T.ZZ$;T.v2K;T.pBf;T.vpe;T.GMl;T.zW2;T.B0K;T.Nv7;T.C_p;T.MUA;T.xqU;T.pTp;T.vUK;T.j9l;var Eu=T.Zxw;T.v51;T.Hdx;var Au=T.Z$d;T.iqV;T.o$7;T.olM;T.Zm$;T.$QH;T.i78;T.nJg;T.h6u;T.hts;T.j88;T.VME;T.fy2;T.nt;T.Ukr;T.zsu;T.oA6;var zS=T.TVh;T.TwZ;T.GTT;T.xxj;T.XdK;T.Jmb;var Bi=T.cXo;T.Dm5;var NS=T.IIB;T.ebW;T.zI0;T.LYD;T.cEG;T.SEl;T.t9V;T.ez5;T.N1d;T.R8U;T.SKZ;var Tu=T.__J;T.RI$;T.x12;T.ccz;var US=T.aNw;T.XrL;T.xwn;T.dNK;T.ini;T.YdH;T.F5T;T.y3G;T.l57;T.xn0;T.t2V;T.uxB;T.cpd;T.fiy;var Z_=T.$XZ;T.UG6;T.uqK;T.STE;T.y$z;T.mAD;T.sOq;T.hUw;var Pu=T._0G;T.Sqs;T.hpZ;var il=T.Vol;T.vYX;T.wIZ;T.cBi;T.c30;T.MPV;T.RFv;T.Ux6;T.rxy;T.I$c;T.kfC;T.VjY;T.mgq;T.YVA;T.Kgp;T.HH$;T.M_d;T.rgh;T.Ra6;T.KhR;T.BS5;T.xhz;T.xOq;T.a9j;T.bHk;T.CgK;T.cuY;T.kvE;T.SBu;T.AE_;T.ctO;T.OLH;T.kky;T.nSF;T.zHn;T.zwx;T.AeJ;T.hLz;T.D9g;T.wA;var K_=T.jhr;T.GVs;T._zO;T.LXZ;T.w6$;T.mhV;var nl=T.MOD;T.kwd;T.Lmr;var $l=T.xsS;T.K5l;T.lLr;T.Z$r;var HS=T.IXb;T.SGH;T.SMj;T.L34;T.exe;T.bnF;T.MFA;var ee=T.$uU;T.Sap;var Or=T.jyi;T.E03;var $S=T.V6q;T.rg2;T.DVW;T.nVo;T.F6N;T.xP7;T.Odq;T.Zif;T.ZGJ;T.MJk;T.xvT;var ku=T.PHM;T.dpR;T.n9L;T.KwO;T.SxM;var Po=T.B7y;T.x7r;T.wx7;T.Uvn;T.OFT;T.xzN;T.CcZ;T.M5Z;T.ZrN;var Ng=T.OWs;T.dF9;T.oZy;T.rD2;T.VHo;T.ohE;T.R$E;T.xQN;T.AdJ;T.q3I;var WS=T.Pab,Ug=T.uZ5;T.McK;T.F9c;T.k0b;T.hnT;T.RSJ;T.Mku;T.h90;T.rms;T.ErP;T.aVg;T.lPc;T.Z8E;T._N2;T.yFn;T.lNv;T.cu9;T.MZQ;T.FUM;T.BxR;T.vdf;T.iaL;var Hg=T.w6H;T.Q4c;T.Xxe;T.Uxb;T.Yr5;var Yt=T.Bhw;T.yOA;class Q_ extends Hl{constructor(i){if(!i.key)throw new Error("Component objects must have a key");if(!i.type)throw new Error("Component objects must have a type");const o=i.type;delete i.type;const a=i.key;delete i.key;super({...{x:150,y:150,width:40,height:60},...i});yt(this,"type");yt(this,"key");yt(this,"click_buffer_scale",.8);this.type=o,this.key=a}onInitialize(){const i=this.scene.engine;this.graphics.use(new Or({image:i.skin.images[this.key],destSize:{width:this.width*this.click_buffer_scale,height:this.height*this.click_buffer_scale}}))}onPostUpdate(i,o){super.onPostUpdate(i,o),this.pos.y>i.drawHeight&&this.kill()}}class rl extends Q_{constructor(n){const i={x:150,y:150,width:40,height:60};n!=null&&n.type||(n.type="eyes"),super({...i,...n})}}class ol extends Q_{constructor(n){const i={x:150,y:150,width:40,height:60};n!=null&&n.type||(n.type="mouth"),super({...i,...n})}}class Iu extends Hl{constructor(i){if(!i.key)throw new Error("Potato must be initialized with a key");const o=i.key;delete i.key;super({...{x:300,y:150,width:100,height:150},...i});yt(this,"key");this.key=o}onInitialize(){const i=this.scene.engine;this.graphics.use(new Or({image:i.skin.images[this.key],destSize:{width:this.width,height:this.height}}))}}var xo=(e=>(e.EYES="eyes",e.MOUTH="mouth",e))(xo||{}),ui=(e=>(e.EYES="eyes",e.MOUTH="mouth",e.POTATO="potato",e.THIEF="thief",e))(ui||{}),vs=(e=>(e.BACKGROUND_MUSIC="background_music",e.THIEF_HIT="thief_hit",e.THIEF_FLEE="thief_flee",e.THIEF_APPEAR="thief_appear",e.THIEF_WORK="thief_work",e.THIEF_VICTORY="thief_victory",e.COMPONENT_SPAWN="component_spawn",e.COMPONENT_CLICKED="component_clicked",e.COMPONENT_CORRECT="component_correct",e.COMPONENT_INCORRECT="component_incorrect",e.VICTORY_STINGER="victory_stinger",e.FAILURE_STINGER="failure_stinger",e))(vs||{});const Lh=(e,n=2)=>String(e).padStart(n,"0"),J_={},GS=20;for(let e=1;e<=GS;e++){const n=`eyes_${e}`,i=`eyes_${Lh(e)}`;J_[n]=new Bi(`/boop-boop/images/eyes/${i}.png`)}const tv={},jS=24;for(let e=1;e<=jS;e++){const n=`mouth_${e}`,i=`mouth_${Lh(e)}`;tv[n]=new Bi(`/boop-boop/images/mouth/${i}.png`)}const ev={},XS=4;for(let e=1;e<=XS;e++){const n=`potato_${e}`,i=`potato_${Lh(e)}`;ev[n]=new Bi(`/boop-boop/images/${i}.png`)}const YS={thief_1:new Bi("/boop-boop/images/rocket/saucer_sheet.png")},qS={...J_,...tv,...ev,...YS},sv={},ZS=32,iv=[];for(let e=1;e<=ZS;e++)iv.push(e);iv.forEach(e=>{if([4,5,23,27,28,29,30,31].includes(e))return;const n=`background_music_${e}`,i=`bgm_${e}`;sv[n]=new ee(`/boop-boop/sounds/under-restricted-license/${i}.wav`)});const KS={thief_hit_1:new ee("/boop-boop/sounds/annoyed_01.mp3"),thief_hit_2:new ee("/boop-boop/sounds/annoyed_02.mp3"),thief_hit_3:new ee("/boop-boop/sounds/annoyed_03.wav"),thief_hit_4:new ee("/boop-boop/sounds/annoyed_04.wav"),thief_hit_5:new ee("/boop-boop/sounds/annoyed_05.wav"),thief_hit_6:new ee("/boop-boop/sounds/annoyed_06.wav")},QS={},JS={},t1={thief_work_1:new ee("/boop-boop/sounds/mumble_01.ogg"),thief_work_2:new ee("/boop-boop/sounds/mumble_02.ogg"),thief_work_3:new ee("/boop-boop/sounds/mumble_03.ogg"),thief_work_4:new ee("/boop-boop/sounds/mumble_04.ogg"),thief_work_5:new ee("/boop-boop/sounds/mumble_05.ogg"),thief_work_6:new ee("/boop-boop/sounds/mumble_06.mp3"),thief_work_7:new ee("/boop-boop/sounds/mumble_07.wav"),thief_work_8:new ee("/boop-boop/sounds/mumble_08.wav"),thief_work_9:new ee("/boop-boop/sounds/mumble_09.wav"),thief_work_0:new ee("/boop-boop/sounds/mumble_10.wav"),thief_work_11:new ee("/boop-boop/sounds/mumble_11.wav"),thief_work_12:new ee("/boop-boop/sounds/mumble_12.wav"),thief_work_13:new ee("/boop-boop/sounds/mumble_13.wav"),thief_work_14:new ee("/boop-boop/sounds/mumble_14.wav"),thief_work_15:new ee("/boop-boop/sounds/mumble_15.wav"),thief_work_16:new ee("/boop-boop/sounds/mumble_16.wav"),thief_work_17:new ee("/boop-boop/sounds/mumble_17.mp3")},e1={thief_victory_1:new ee("/boop-boop/sounds/laugh_01.mp3"),thief_victory_2:new ee("/boop-boop/sounds/laugh_02.wav"),thief_victory_3:new ee("/boop-boop/sounds/laugh_03.wav"),thief_victory_4:new ee("/boop-boop/sounds/laugh_04.wav"),thief_victory_5:new ee("/boop-boop/sounds/laugh_05.wav"),thief_victory_6:new ee("/boop-boop/sounds/laugh_06.ogg"),thief_victory_7:new ee("/boop-boop/sounds/laugh_07.mp3"),thief_victory_8:new ee("/boop-boop/sounds/laugh_08.mp3")},s1={component_spawn_1:new ee("/boop-boop/sounds/bubble_01.wav"),component_spawn_2:new ee("/boop-boop/sounds/bubble_02.wav"),component_spawn_3:new ee("/boop-boop/sounds/bubble_03.wav"),component_spawn_4:new ee("/boop-boop/sounds/bubble_04.wav"),component_spawn_5:new ee("/boop-boop/sounds/bubble_05.wav"),component_spawn_6:new ee("/boop-boop/sounds/bubble_06.wav")},i1={component_clicked_1:new ee("/boop-boop/sounds/click.mp3")},n1={component_correct_1:new ee("/boop-boop/sounds/chime.mp3")},r1={},o1={victory_stinger_1:new ee("/boop-boop/sounds/fanfare.mp3")},a1={failure_stinger_1:new ee("/boop-boop/sounds/failure.wav")},l1={...sv,...KS,...QS,...JS,...t1,...e1,...s1,...i1,...n1,...r1,...o1,...a1};var Yn=(e=>(e.RESTART_BUTTON_HOVER="restart_button_hover",e.RESTART_BUTTON_IDLE="restart_button_idle",e.DANCE_BUTTON_HOVER="dance_button_hover",e.DANCE_BUTTON_IDLE="dance_button_idle",e.QUIT_BUTTON_HOVER="quit_button_hover",e.QUIT_BUTTON_IDLE="quit_button_idle",e))(Yn||{});const c1={restart_button_hover:new Bi("/boop-boop/ui/restart_button_hover.png"),restart_button_idle:new Bi("/boop-boop/ui/restart_button_idle.png"),dance_button_hover:new Bi("/boop-boop/ui/dance_button_hover.png"),dance_button_idle:new Bi("/boop-boop/ui/dance_button_idle.png"),quit_button_hover:new Bi("/boop-boop/ui/quit_button_hover.png"),quit_button_idle:new Bi("/boop-boop/ui/quit_button_idle.png")},u1={images:qS,sounds:l1,ui:c1};class h1 extends Hl{constructor(i){const o={x:150,y:150,width:26,height:34,duration:1e3,z:10},a=i==null?void 0:i.duration;delete i.duration;super({...o,...i});yt(this,"duration");yt(this,"spriteSheet",null);yt(this,"needyAnimation",null);yt(this,"unneedyAnimation",null);yt(this,"click_buffer_scale",.8);this.duration=a||1e3}makeUnneedyAnimation(i=1e3){var o;if(this.spriteSheet===null)throw new Error("Thief spriteSheet is null when making unneedy animation");return this.unneedyAnimation===null&&(this.unneedyAnimation=Vg.fromSpriteSheet(this.spriteSheet,Hg(0,(((o=this.needyAnimation)==null?void 0:o.currentFrameIndex)||0)+1),i/this.needyAnimation.frames.length||1,zg.Freeze),this.unneedyAnimation.frames.reverse()),this.unneedyAnimation}onInitialize(){const i=this.scene.engine;this.spriteSheet=$S.fromImageSource({image:i.get_random_image(ui.THIEF),grid:{rows:2,columns:3,spriteWidth:100,spriteHeight:100}});const o=this.spriteSheet.getSprite(0,0);o&&(this.spriteSheet.sprites.forEach(a=>a.destSize={width:this.width*this.click_buffer_scale,height:this.height*this.click_buffer_scale}),this.graphics.use(o)),this.needyAnimation=Vg.fromSpriteSheet(this.spriteSheet,Hg(1,5),this.duration/5,zg.Freeze)}}class Vr{constructor(n){yt(this,"name");yt(this,"description");yt(this,"value",0);yt(this,"unit");yt(this,"advanced");if(!n.name)throw new Error("Statistic must have a name");this.name=n.name,this.description=n.description||"",this.unit=n.unit,this.value=n.value||0,this.advanced=n.advanced||!1}}class nv extends Vr{constructor(n=0,i={}){super({name:"Playing time",description:"Time taken to complete level",unit:"s",value:n,...i})}}class rv extends Vr{constructor(n=0,i={}){super({name:"Clicks",description:"Helpful pieces clicked",value:n,...i})}}class ov extends Vr{constructor(n=0,i={}){super({name:"Misclicks",description:"Unhelpful pieces clicked",value:n,advanced:!0,...i})}}class av extends Vr{constructor(n=0,i={}){super({name:"Thieves shooed",description:"Total thieves shooed",value:n,advanced:!0,...i})}}class d1{constructor(n={}){yt(this,"time_taken",new nv);yt(this,"clicks",new rv);yt(this,"misclicks",new ov);yt(this,"thieves_shooed",new av);for(let[i,o]of Object.entries(n))this[i]&&(this[i].value=o)}}class $g{constructor(n){yt(this,"owner");this.owner=n}get time_taken(){return new nv(this.owner.level_statistics.map(n=>n.time_taken.value).reduce((n,i)=>n+i,0)/1e3,{description:"Total time spent playing"})}get clicks(){return new rv(this.owner.level_statistics.map(n=>n.clicks.value).reduce((n,i)=>n+i,0))}get misclicks(){return new ov(this.owner.level_statistics.map(n=>n.misclicks.value).reduce((n,i)=>n+i,0))}get thieves_shooed(){return new av(this.owner.level_statistics.map(n=>n.thieves_shooed.value).reduce((n,i)=>n+i,0))}get level(){return new Vr({name:"Level",description:"Highest level completed",value:this.owner.difficulty_level+1-1})}get score(){const n=Math.round(this.level.value*1e3-this.misclicks.value*100-this.time_taken.value/1e3*(1+this.owner.difficulty_level*this.owner.settings.difficulty_step));return new Vr({name:"Total score",description:"Points scored",value:n})}get all(){return{time_taken:this.time_taken,clicks:this.clicks,misclicks:this.misclicks,thieves_shooed:this.thieves_shooed,level:this.level,score:this.score}}}const Oc=.5,Zi={width:150,height:200},Qe={width:Zi.width*.8,height:Zi.height/5},Vc={eyes:Yt(0,-20),mouth:Yt(0,40)};class f1 extends $l{constructor(){super(...arguments);yt(this,"spawn_timers",{});yt(this,"complete",!1);yt(this,"target_face",null);yt(this,"current_face_components",{});yt(this,"potato",null);yt(this,"target_potato",null);yt(this,"components",[]);yt(this,"celebration_text",null);yt(this,"particle_emitters",[]);yt(this,"buckets",{targets:[],distractors:[]});yt(this,"potato_thief",null);yt(this,"_potato_thief_spawn_point",Yt(0,0));yt(this,"_potato_thief_leaving",!1);yt(this,"_rotation_adjustment",-Math.PI/2);yt(this,"_game_over_delay",5e3);yt(this,"_start_time",0);yt(this,"_settings_cache",null)}get stats(){return this.engine.current_level_statistics}get settings(){return this._settings_cache||(this._settings_cache=this.engine.settings_adjusted),this._settings_cache}clean(){var i,o,a,c,u;this.engine.music_manager.stop(),(i=this.potato)==null||i.kill(),this.potato=null,(o=this.target_potato)==null||o.kill(),this.target_potato=null,(a=this.potato_thief)==null||a.kill(),this.potato_thief=null,this.components.forEach(f=>f.kill()),this.components=[],Object.values(this.current_face_components).forEach(f=>f.kill()),this.current_face_components={},(c=this.celebration_text)==null||c.kill(),this.celebration_text=null,(u=this.particle_emitters)==null||u.forEach(f=>f.kill()),this.particle_emitters=[],Object.values(this.spawn_timers).forEach(f=>f.cancel()),this.spawn_timers={},this.buckets={targets:[],distractors:[]},this._settings_cache=null}onActivate(){this.complete=!1,this.clean(),this.engine.level_statistics.push(new d1),this._start_time=this.engine.clock.now(),this.createTarget();const i=new Iu({key:this.engine.get_random_image_key(ui.POTATO),x:this.engine.halfDrawWidth,y:this.engine.halfDrawHeight,width:Zi.width,height:Zi.height});this.add(i),this.potato=i,this.engine.music_manager.will_change_track=!0,this.engine.music_manager.play(),this.spawn_timers={spawnComponent:new Po({fcn:this.spawnComponent.bind(this),interval:this.settings.component_spawn_delay_min,randomRange:[0,this.settings.component_spawn_delay_variation],repeats:!0}),spawnThief:new Po({fcn:this.spawnThief.bind(this),interval:this.settings.needy_potato_delay_min,randomRange:[0,this.settings.needy_potato_delay_variation],repeats:!0})},Object.values(this.spawn_timers).forEach(o=>{this.add(o),o.start()})}onDeactivate(){this.clean()}createTarget(){function i(a){return Yt((Zi.width-Qe.width)/2+Vc[a].x,(Zi.height-Qe.height)/2+Vc[a].y)}this.target_face={eyes:this.engine.get_random_image_key(ui.EYES),mouth:this.engine.get_random_image_key(ui.MOUTH)};for(const a of Object.keys(this.target_face)){const c=a,u=this.target_face[c];let f=[...this.engine.get_all_image_keys(ui.EYES),...this.engine.get_all_image_keys(ui.MOUTH)];u&&(this.buckets.targets.push(u),f=f.filter(p=>p!==u));const m=f.filter(p=>p.startsWith(a));this.buckets.distractors.push(...m)}this.target_potato=new Iu({key:this.engine.get_random_image_key(ui.POTATO)}),this.target_potato.onInitialize=()=>{},this.add(this.target_potato);const o=new zS({members:[{graphic:new Or({image:this.engine.skin.images[this.target_potato.key],destSize:Zi}),pos:Yt(0,0)}],...Zi});for(const a of Object.keys(this.target_face)){const c=a;this.target_face[c]&&(this.target_face[c],o.members.push({graphic:new Or({image:this.engine.skin.images[this.target_face[c]],destSize:Qe}),pos:i(c)}))}this.target_potato.graphics.add("graphicsGroup",o),this.target_potato.scale=Yt(Oc,Oc),this.target_potato.pos=Yt(this.engine.halfDrawWidth,Zi.height*Oc),this.target_potato.graphics.use("graphicsGroup")}getComponentKey(i=1e3){let o="",a=Math.random()<this.settings.target_frequency;for(let c=0;c<i;c++){if(a?(o=this.buckets.targets[Math.floor(Math.random()*this.buckets.targets.length)],c>i/2&&(a=!1)):o=this.buckets.distractors[Math.floor(Math.random()*this.buckets.distractors.length)],this.components.find(f=>f.key===o))continue;const u=this.current_face_components[o.split("_")[0]];if((u==null?void 0:u.key)!==o)return o}return console.error(`Failed to get component key after ${i} iterations`),""}getComponentByKey(i,o){const a=i.split("_")[0];switch(o={key:i,...o},a){case"eyes":return new rl(o);case"mouth":return new ol(o);default:return console.error(`Component key ${i} does not map to a component type (${a})`),null}}spawnComponent(){var i;if(this.components=this.components.filter(o=>!o.isKilled()),this.components.length<this.settings.max_components&&!this.complete){const o=this.getComponentKey();if(o){const a=(this.engine.drawWidth-Qe.width)/3,c=Math.random()*a+(Math.random()<.5?0:a*2)+Qe.width/2,u=this.engine.drawHeight-Qe.height,f=Math.random()*u+Qe.height/2,m={x:c,y:f,width:10,height:10},p=this.getComponentByKey(o,m);if(!p)return;p.body.collisionType=q_.Active,p.on("pointerdown",E=>this.handleComponentClick(p,E)),this.components.push(p),this.add(p),(i=this.engine.get_random_sound(vs.COMPONENT_SPAWN))==null||i.play();const y=this.settings.component_lifetime/3,w=Math.max(Qe.width,Qe.height)/y*1e3,C=Yt(w*Qe.width/(Qe.width+Qe.height),w*Qe.height/(Qe.width+Qe.height));p.actions.scaleTo(Yt(Qe.width/10,Qe.height/10),C),this.engine.clock.schedule(()=>this.killComponent(p,C),this.settings.component_lifetime)}}}killComponent(i,o){i.actions.clearActions(),i.actions.scaleTo(Yt(0,0),o).die()}handleComponentClick(i,o){this.engine.reportToAPI(o),this.addComponentToFace(i)}addComponentToFace(i){var c,u;(c=this.engine.get_random_sound(vs.COMPONENT_CLICKED))==null||c.play();let o=null;const a={x:i.center.x,y:i.center.y,...Qe,key:i.key};i.type==="eyes"&&(o=new rl(a)),i.type==="mouth"&&(o=new ol(a)),o&&(i.kill(),(u=this.current_face_components[i.type])==null||u.actions.scaleTo(Yt(0,0),Yt(10,10)).die(),this.current_face_components[i.type]=o,this.add(o),o.actions.moveTo(this.potato.pos.add(Vc[o.type]),1e3).toPromise().then(()=>{var f;o!=null&&o.type&&this.target_face&&o.type in this.target_face&&(this.target_face[o.type]===o.key?((f=this.engine.get_random_sound(vs.COMPONENT_CORRECT))==null||f.play(),this.checkWinCondition(),this.stats.clicks.value++):this.stats.misclicks.value++)}))}checkWinCondition(){var u;const i=this.target_face,o=this.current_face_components,a=Object.keys(i),c=Object.keys(o);for(const f of a)if(i[f]&&(!c.includes(f)||i[f]!==((u=o[f])==null?void 0:u.key)))return;this.complete=!0,this.engine.difficulty_level+=1,this.playWinAnimation().then(()=>this.engine.goToScene(Ks.SPLASHSCREEN))}playWinAnimation(i=1e3,o=0){var m,p,v;this.stats.time_taken.value=this.engine.clock.now()-this._start_time,o===0&&(o=Math.max(this._game_over_delay,i)),this.engine.music_manager.stop(),(m=this.engine.get_random_sound(vs.VICTORY_STINGER))==null||m.play(),this.stopNeediness(!0),this.components.forEach(y=>this.killComponent(y,Yt(1e3,1e3)));const a=Yt(this.potato.width,this.potato.pos.y-this.target_potato.pos.y);this.target_potato.z=10;const c=new Pu([new Su(this.target_potato,y=>y.scaleTo(Yt(1,1),Yt(1e3/i,1e3/i))),new Su(this.target_potato,y=>y.moveBy(a,a.y*1e3/i))]);(p=this.target_potato)==null||p.actions.runAction(c),(v=this.potato)==null||v.actions.moveBy(-this.potato.width,0,i);for(const y of Object.keys(this.current_face_components)){const w=y,C=this.current_face_components[w];C&&C.actions.moveBy(-this.potato.width,0,i)}this.engine.currentScene.camera.shake(5,5,Math.max(1e3,i)),this.celebration_text=new Tu({text:"It's a match!",font:new Eu({family:"Monomaniac One",size:52,unit:Au.Px,textAlign:ku.Center}),pos:Yt(this.engine.halfDrawWidth,this.engine.drawHeight/5),z:5}),this.add(this.celebration_text);const u=new il({});u.pos=Yt(this.engine.halfDrawWidth-5,this.celebration_text.pos.y),u.emitterType=sl.Circle,u.radius=235,u.minVel=10,u.maxVel=200,u.minAngle=0,u.maxAngle=6.2,u.isEmitting=!0,u.emitRate=300,u.opacity=1,u.fadeFlag=!0,u.particleLife=1e3,u.maxSize=6,u.minSize=1,u.startSize=3,u.endSize=13,u.acceleration=Yt(-8,800),u.beginColor=Ki.Red,u.endColor=Ki.Transparent,u.isEmitting=!0,this.add(u);const f=new il({});return f.pos=Yt(this.engine.halfDrawWidth+5,this.celebration_text.pos.y),f.emitterType=sl.Circle,f.radius=229,f.minVel=10,f.maxVel=200,f.minAngle=0,f.maxAngle=6.2,f.isEmitting=!0,f.emitRate=300,f.opacity=1,f.fadeFlag=!0,f.particleLife=1e3,f.maxSize=6,f.minSize=1,f.startSize=3,f.endSize=13,f.acceleration=Yt(-8,800),f.beginColor=Ki.Orange,f.endColor=Ki.Transparent,f.isEmitting=!0,this.add(f),this.particle_emitters=[u,f],new Promise(y=>{const w=new Po({fcn:y.bind(this),interval:o,repeats:!1});this.add(w),w.start()})}spawnThief(){var i;this.complete||(i=this.potato_thief)!=null&&i.active||this.startNeediness()}startNeediness(){var o;if((o=this.potato_thief)!=null&&o.active)return;this._potato_thief_leaving=!1,this.potato_thief=new h1({height:50,width:50,duration:this.settings.needy_potato_duration}),this._potato_thief_spawn_point=Yt(Math.random()*this.engine.drawWidth,Math.random()*this.engine.drawWidth);const i=this.potato.pos.add(Yt(Math.random()*25,Math.random()*25)).sub(Yt(Math.random()*25,Math.random()*25));this.potato_thief.pos=this._potato_thief_spawn_point,this.potato_thief.rotation=this.potato_thief.pos.sub(i).toAngle()+this._rotation_adjustment,this.potato_thief.actions.moveTo(i.x,i.y,1e3).toPromise().then(()=>{const a=this.potato_thief.needyAnimation;a!==null&&(this.potato_thief.graphics.use(a),a.events.on("end",this.needsUnmet.bind(this)),a.events.on("frame",()=>{var c;(c=this.engine.get_random_sound(vs.THIEF_WORK))==null||c.play()}),this.potato_thief.on("pointerdown",()=>{this.stats.thieves_shooed.value++,this.stopNeediness()}))}),this.add(this.potato_thief)}stopNeediness(i=!1){var o,a;!((o=this.potato_thief)!=null&&o.active)||this._potato_thief_leaving||(this._potato_thief_leaving=!0,this.potato_thief.actions.clearActions(),this.potato_thief.needyAnimation.pause(),this.potato_thief.makeUnneedyAnimation(i?250:1e3),this.potato_thief.graphics.use(this.potato_thief.unneedyAnimation),this.potato_thief.off("pointerdown"),(a=this.potato_thief.unneedyAnimation)==null||a.events.on("end",()=>this.shooThief()),i||(this.camera.shake(10,10,200),this.engine.get_random_sound(vs.THIEF_HIT).play().then(()=>{var c;return(c=this.engine.get_random_sound(vs.THIEF_FLEE))==null?void 0:c.play()})))}shooThief(){var o;if(!((o=this.potato_thief)!=null&&o.active))return;const i=this.potato_thief.pos.sub(this._potato_thief_spawn_point).normalize().scale(this.engine.drawWidth*2);this.potato_thief.actions.moveTo(i.x,i.y,1e3).callMethod(()=>{this.potato_thief.kill(),this.potato_thief=null})}needsUnmet(){var f,m;this.complete=!0,this.potato_thief.off("pointerdown"),this.engine.music_manager.stop(),(f=this.engine.get_random_sound(vs.FAILURE_STINGER))==null||f.play().then(()=>{var p;return(p=this.engine.get_random_sound(vs.THIEF_VICTORY))==null?void 0:p.play()}),this.components.forEach(p=>this.killComponent(p,Yt(1e3,1e3))),this.target_potato.kill();const i=this.potato_thief.rotation-this._rotation_adjustment+Math.PI,a=Ng.fromAngle(WS(i)).scale(this.engine.drawWidth).add(this.potato.pos),c=this.potato_thief.pos.sub(this.potato.pos),u=a.add(c);this.potato.actions.moveTo(a.x,a.y,100).die(),(m=this.potato_thief)==null||m.actions.moveTo(u.x,u.y,100).die(),Object.values(this.current_face_components).forEach(p=>{const v=i+Math.PI*Math.random()*(Math.random()>.5?1:-1)*.5,y=Ng.fromAngle(v).scale(this.engine.drawWidth*2).add(p.pos);let w=Math.random()*25+10;p.actions.runAction(new Pu([new K_(p,C=>{w*=.8,C.rotateBy(v,w,v>0?nl.Clockwise:nl.CounterClockwise)}),new Z_(p,y.x,y.y,Math.random()*50+50)]))}),this.engine.currentScene.camera.shake(5,5,1e3),this.celebration_text=new Tu({text:"Potato stolen!",font:new Eu({family:"Monomaniac One",size:52,unit:Au.Px,textAlign:ku.Center}),pos:Yt(this.engine.halfDrawWidth,this.engine.drawHeight/5),z:5}),this.add(this.celebration_text),this.engine.clock.schedule(()=>this.engine.goToScene(Ks.SCORESHEET),this._game_over_delay)}}class g1 extends $l{onActivate(){this.engine.last_game_score=this.engine.statistics.all,this.engine.UI_overlay=ll.SCORESHEET}onDeactivate(){this.engine.UI_overlay=null}}class m1{constructor(){yt(this,"api_url","http://localhost");yt(this,"code","");yt(this,"system_url","");yt(this,"initialization_started",!1);yt(this,"initialization_complete",!1)}get systemData(){return{os:navigator.platform,browser:navigator.userAgent,browser_version:navigator.appVersion,screen_resolution:`${window.screen.width}x${window.screen.height}`,screen_orientation:`${window.screen.orientation.type}`,screen_size:`${window.screen.width}x${window.screen.height}`,screen_dpi:`${window.devicePixelRatio}`,screen_color_depth:`${window.screen.colorDepth}`,screen_pixel_depth:`${window.screen.pixelDepth}`,maxTouchPoints:`${navigator.maxTouchPoints}`}}get ready(){return this.code&&this.code.length>0&&this.system_url&&this.system_url.length>0}async waitUntilReady(n){return(!this.initialization_started||this.initialization_complete&&!this.ready)&&await this.initialize(n),new Promise((i,o)=>{const a=setInterval(()=>{this.ready?(clearInterval(a),i(!0)):this.initialization_complete&&(clearInterval(a),o("API Client failed to initialize"))},100)})}getProperties(n){return{system:this.systemData,game:n}}async initialize(n){this.initialization_started=!0;const i=await fetch(`${this.api_url}/system/`,{method:"POST",body:JSON.stringify({properties:this.getProperties(n)}),headers:{"Content-Type":"application/json"}});if(!i.ok){try{console.error("API Client failed to initialize",await i.json())}catch(a){console.error("API Client failed to initialize","Could not parse server response.",a,await i.text())}return}const o=await i.json();this.code=o.auth_code,this.system_url=o.url,this.initialization_complete=!0,console.log("API Client initialized",o)}async report(n,i,o){this.ready||await this.waitUntilReady(n);const a={system:this.system_url,system_properties:this.getProperties(n),click_data:i,image:o,auth_code:this.code},c=await fetch(`${this.api_url}/report/`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!c.ok){try{console.error("API Client failed to report",await c.json())}catch(u){console.error("API Client failed to report","Could not parse server response.",u,await c.text())}return}console.log("API Client reported",await c.json())}}class p1 extends $l{constructor(i){super();yt(this,"duration",2e3);i!=null&&i.duration&&(this.duration=i.duration)}onActivate(){this.engine.UI_overlay=ll.SPLASHSCREEN}onDeactivate(){this.engine.UI_overlay=null}}class _1{constructor(n){yt(this,"tracks");yt(this,"current_track");yt(this,"will_change_track");yt(this,"iteration",0);yt(this,"sequential_play_count",0);yt(this,"playing",!1);this.tracks=n,this.current_track=this.get_random_track(),this.will_change_track=!1}get_random_track(){let n=this.current_track;if(this.tracks.length===1)return n;for(;n===this.current_track;)n=Math.floor(Math.random()*this.tracks.length)||0;return n}get branchToNewTrack(){return Math.random()<this.sequential_play_count*.1}play(){this.stop(),this.will_change_track||this.branchToNewTrack?(this.current_track=this.get_random_track(),console.log(`Changing track to ${this.current_track}`),this.will_change_track=!1,this.sequential_play_count=0):this.sequential_play_count++,this.playing=!0,this.tracks[this.current_track].play(.05).then(()=>{this.keep_playing()}),this.iteration++}keep_playing(){this.playing&&this.play()}stop(){this.tracks[this.current_track].stop(),this.playing=!1}}class v1 extends Hl{constructor(i){const o={x:150,y:150,radius:10,color:Ki.Yellow,z:100,opacity:.25};super({...o,...i});yt(this,"component",null)}}const Ha=50,$a=200;class zc extends HS{constructor(i){const o={width:$a,height:Ha},a=i.idle_img,c=i.hover_img,u=i.callbacks,f={...o,...i};delete f.idle_img,delete f.hover_img,delete f.callbacks;super(f);yt(this,"idle_img");yt(this,"hover_img");yt(this,"callbacks");this.idle_img=a,this.hover_img=c,this.callbacks=u}onInitialize(){const i=new Or({image:this.idle_img,destSize:{height:this.height,width:this.width}}),o=new Or({image:this.hover_img,destSize:{height:this.height,width:this.width}});this.graphics.add("idle",i),this.graphics.add("hover",o),this.graphics.show("idle");for(const a of this.callbacks)this.on(a.event_name,a.callback);this.on("pointerenter",()=>{this.graphics.show("hover")}),this.on("pointerleave",()=>{this.graphics.show("idle")})}onDeactivate(){for(const i of this.callbacks)this.off(i.event_name);this.off("pointerenter"),this.off("pointerleave")}}const al={width:150,height:200},ke={width:al.width*.8,height:al.height/5},y1=[Yt(0,-80),Yt(0,-40),Yt(0,0),Yt(0,40),Yt(0,80)];class b1 extends $l{constructor(){super(...arguments);yt(this,"complete",!1);yt(this,"spawn_timers",{});yt(this,"potato",null);yt(this,"components",[]);yt(this,"celebration_text",null);yt(this,"particle_emitters",[]);yt(this,"component_slots",[]);yt(this,"selected_component",null);yt(this,"_start_time",0);yt(this,"_settings_cache",null);yt(this,"restartButton",null);yt(this,"danceButton",null);yt(this,"quitButton",null)}get stats(){return this.engine.current_level_statistics}get settings(){return this._settings_cache||(this._settings_cache=this.engine.settings_adjusted),this._settings_cache}clean(){var i,o,a;this.engine.music_manager.stop(),(i=this.potato)==null||i.kill(),this.potato=null,this.components.forEach(c=>c.kill()),this.components=[],this.component_slots.forEach(c=>{var u;(u=c.component)==null||u.kill(),c.component=null}),(o=this.celebration_text)==null||o.kill(),this.celebration_text=null,(a=this.particle_emitters)==null||a.forEach(c=>c.kill()),this.particle_emitters=[],Object.values(this.spawn_timers).forEach(c=>c.cancel()),this.spawn_timers={},this._settings_cache=null,this.killButtons()}onActivate(){this.clean(),this.spawnButtons(),this.component_slots=y1.map(o=>new v1({x:this.engine.halfDrawWidth+o.x,y:this.engine.halfDrawHeight+o.y})),this.complete=!1,this._start_time=this.engine.clock.now();const i=new Iu({key:this.engine.get_random_image_key(ui.POTATO),x:this.engine.halfDrawWidth,y:this.engine.halfDrawHeight,width:al.width,height:al.height});this.add(i),this.potato=i,this.engine.music_manager.will_change_track=!0,this.engine.music_manager.play(),this.spawn_timers={spawnComponent:new Po({fcn:this.spawnComponent.bind(this),interval:this.settings.component_spawn_delay_min,randomRange:[0,this.settings.component_spawn_delay_variation],repeats:!0}),checkDanceShake:new Po({fcn:()=>{this.complete&&this.camera.shake(Math.random()*10-5,Math.random()*10-5,1e3)},interval:1e3,repeats:!0})},Object.values(this.spawn_timers).forEach(o=>{this.add(o),o.start()})}onDeactivate(){this.clean()}createButtons(){this.restartButton=null,this.danceButton=null,this.quitButton=null;const o=(this.engine.drawWidth-3*$a)/4,a=this.engine.drawHeight-Ha*2;this.restartButton=new zc({hover_img:this.engine.skin.ui[Yn.RESTART_BUTTON_HOVER],idle_img:this.engine.skin.ui[Yn.RESTART_BUTTON_IDLE],callbacks:[{event_name:"pointerdown",callback:()=>{this.engine.goToScene(Ks.SPLASHSCREEN)}}],x:o,y:a}),this.danceButton=new zc({hover_img:this.engine.skin.ui[Yn.DANCE_BUTTON_HOVER],idle_img:this.engine.skin.ui[Yn.DANCE_BUTTON_IDLE],callbacks:[{event_name:"pointerdown",callback:()=>{this.toggleDance()}}],x:o*2+$a,y:a}),this.quitButton=new zc({hover_img:this.engine.skin.ui[Yn.QUIT_BUTTON_HOVER],idle_img:this.engine.skin.ui[Yn.QUIT_BUTTON_IDLE],callbacks:[{event_name:"pointerdown",callback:()=>{window.location.reload()}}],x:o*3+$a*2,y:a})}spawnButtons(){(!this.restartButton||!this.danceButton||!this.quitButton)&&this.createButtons(),this.add(this.restartButton),this.add(this.danceButton),this.add(this.quitButton)}killButtons(){var i,o,a;(i=this.restartButton)==null||i.kill(),(o=this.danceButton)==null||o.kill(),(a=this.quitButton)==null||a.kill()}getComponentKey(){const i=[...this.engine.get_all_image_keys(ui.EYES),...this.engine.get_all_image_keys(ui.MOUTH)];if(!i.length)throw new Error("No components found");return i[Math.floor(Math.random()*i.length)]}getComponentByKey(i,o){const a=i.split("_")[0];switch(o={key:i,...o},a){case xo.EYES:return new rl(o);case xo.MOUTH:return new ol(o);default:return console.error(`Component key ${i} does not map to a component type (${a})`),null}}spawnComponent(){var i;if(this.components=this.components.filter(o=>!o.isKilled()),this.components.length<this.settings.max_components&&!this.complete){const o=this.getComponentKey();if(o){const a=(this.engine.drawWidth-ke.width)/3,c=Math.random()*a+(Math.random()<.5?0:a*2)+ke.width/2,u=this.engine.drawHeight-ke.height-Ha*2,f=Math.random()*u+ke.height/2-Ha*2,m={x:c,y:f,width:10,height:10},p=this.getComponentByKey(o,m);if(!p)return;p.body.collisionType=q_.Active,p.on("pointerdown",E=>this.handleComponentClick(p,E)),this.components.push(p),this.add(p),(i=this.engine.get_random_sound(vs.COMPONENT_SPAWN))==null||i.play();const y=this.settings.component_lifetime/3,w=Math.max(ke.width,ke.height)/y*1e3,C=Yt(w*ke.width/(ke.width+ke.height),w*ke.height/(ke.width+ke.height));p.actions.scaleTo(Yt(ke.width/10,ke.height/10),C),this.engine.clock.schedule(()=>{this.selected_component!==p&&this.killComponent(p,C)},this.settings.component_lifetime)}}}killComponent(i,o){i.actions.clearActions(),i.actions.scaleTo(Yt(0,0),o).die()}enableComponentSlots(){this.component_slots.forEach(i=>{this.add(i),i.on("pointerdown",o=>this.handleFaceClick(i,o))})}disableComponentSlots(){this.component_slots.forEach(i=>{i.off("pointerdown"),i.kill()})}deselectComponent(){if(this.selected_component){this.selected_component.actions.clearActions();const o=this.settings.component_lifetime/3,a=Math.max(ke.width,ke.height)/o*1e3,c=Yt(a*ke.width/(ke.width+ke.height),a*ke.height/(ke.width+ke.height));this.killComponent(this.selected_component,c)}}selectComponent(i){this.selected_component!==i&&(this.deselectComponent(),i.actions.clearActions(),this.selected_component=i)}handleComponentClick(i,o){this.engine.reportToAPI(o),this.enableComponentSlots(),this.selectComponent(i)}handleFaceClick(i,o){if(this.engine.reportToAPI(o),this.disableComponentSlots(),!this.selected_component)throw new Error("No component selected while adding to face");this.addComponentToFace(this.selected_component,i)}addComponentToFace(i,o){var u;(u=this.engine.get_random_sound(vs.COMPONENT_CLICKED))==null||u.play();let a=null;const c={x:i.center.x,y:i.center.y,...ke,key:i.key};i.type===xo.EYES&&(a=new rl(c)),i.type===xo.MOUTH&&(a=new ol(c)),a&&(i.kill(),o.component&&o.component.actions.scaleTo(Yt(0,0),Yt(10,10)).die(),o.component=a,this.add(a),a.actions.moveTo(o.pos,1e3),a.on("pointerdown",()=>this.removeComponentFromFace(a)))}removeComponentFromFace(i){var u;if(!i)return;(u=this.engine.get_random_sound(vs.COMPONENT_CLICKED))==null||u.play();const o=Yt(this.engine.drawWidth,this.engine.drawHeight).rotate(Math.random()*Math.PI*2);i.off("pointerdown");const a=Math.PI*Math.random()*(Math.random()>.5?1:-1)*.5;let c=Math.random()*25+10;i.actions.runAction(new Pu([new K_(i,f=>{c*=.8,f.rotateBy(a,c,a>0?nl.Clockwise:nl.CounterClockwise)}),new Z_(i,o.x,o.y,Math.random()*50+200),new Su(i,f=>{f.scaleTo(0,0,o.normalize().x,o.normalize().y).die()})]))}toggleDance(){this.complete?this.stopDance():this.dance()}dance(){var a;this.complete=!0,this.engine.music_manager.stop(),(a=this.engine.get_random_sound(vs.VICTORY_STINGER))==null||a.play(),this.components.forEach(c=>this.killComponent(c,Yt(1e3,1e3))),this.engine.currentScene.camera.shake(5,5,2e3),this.celebration_text=new Tu({text:"Party time!",font:new Eu({family:"Monomaniac One",size:52,unit:Au.Px,textAlign:ku.Center}),pos:Yt(this.engine.halfDrawWidth,this.engine.drawHeight/5),z:5}),this.add(this.celebration_text);const i=new il({});i.pos=Yt(this.engine.halfDrawWidth-5,this.celebration_text.pos.y),i.emitterType=sl.Circle,i.radius=235,i.minVel=10,i.maxVel=200,i.minAngle=0,i.maxAngle=6.2,i.isEmitting=!0,i.emitRate=300,i.opacity=1,i.fadeFlag=!0,i.particleLife=1e3,i.maxSize=6,i.minSize=1,i.startSize=3,i.endSize=13,i.acceleration=Yt(-8,800),i.beginColor=Ki.Red,i.endColor=Ki.Transparent,i.isEmitting=!0,this.add(i);const o=new il({});o.pos=Yt(this.engine.halfDrawWidth+5,this.celebration_text.pos.y),o.emitterType=sl.Circle,o.radius=229,o.minVel=10,o.maxVel=200,o.minAngle=0,o.maxAngle=6.2,o.isEmitting=!0,o.emitRate=300,o.opacity=1,o.fadeFlag=!0,o.particleLife=1e3,o.maxSize=6,o.minSize=1,o.startSize=3,o.endSize=13,o.acceleration=Yt(-8,800),o.beginColor=Ki.Orange,o.endColor=Ki.Transparent,o.isEmitting=!0,this.add(o),this.particle_emitters=[i,o]}stopDance(){var i;this.complete=!1,this.engine.music_manager.play(),(i=this.celebration_text)==null||i.kill(),this.particle_emitters.forEach(o=>o.kill())}}const Ks={POTATO_MATCHING:"PotatoMatching",SCORESHEET:"Scoresheet",SPLASHSCREEN:"Splashscreen",FREE_PLAY:"FreePlay"},Wg={HIGHSCORE:"highscore",LAST_GAME_SCORE:"last_game_score"},ll={SCORESHEET:"scoresheet",SPLASHSCREEN:"splashscreen",FREE_PLAY:"freeplay"};class w1 extends VS{constructor(i){let o=null;Object.keys(i).includes("get_settings_func")&&(o=i.get_settings_func,delete i.get_settings_func);let a=()=>{};Object.keys(i).includes("update_wrapper")&&(a=i.update_wrapper,delete i.update_wrapper);let c=u1;Object.keys(i).includes("skin")&&(c=i.skin,delete i.skin);super({height:600,width:800,displayMode:OS.FillContainer,pointerScope:NS.PointerScope.Canvas,...i});yt(this,"webcam");yt(this,"webcam_canvas");yt(this,"api_client",new m1);yt(this,"get_settings_func",()=>Bp);yt(this,"difficulty_level",0);yt(this,"statistics");yt(this,"level_statistics",[]);yt(this,"update_wrapper");yt(this,"skin");yt(this,"music_manager");yt(this,"get_random_sound_key",i=>{const o=Object.keys(this.skin.sounds).filter(a=>a.startsWith(i));return o[Math.floor(Math.random()*o.length)]});yt(this,"get_random_sound",i=>this.skin.sounds[this.get_random_sound_key(i)]);yt(this,"get_all_sound_keys",i=>Object.keys(this.skin.sounds).filter(o=>o.startsWith(i)));yt(this,"get_all_sounds",i=>this.get_all_sound_keys(i).map(o=>this.skin.sounds[o]));yt(this,"get_random_image_key",i=>{const o=Object.keys(this.skin.images).filter(a=>a.startsWith(i));return o[Math.floor(Math.random()*o.length)]});yt(this,"get_random_image",i=>this.skin.images[this.get_random_image_key(i)]);yt(this,"get_all_image_keys",i=>Object.keys(this.skin.images).filter(o=>o.startsWith(i)));yt(this,"get_all_images",i=>this.get_all_image_keys(i).map(o=>this.skin.images[o]));o&&(this.get_settings_func=o),this.update_wrapper=a,this.skin=c,this.statistics=new $g(this);const u=[];this.get_all_sounds(vs.BACKGROUND_MUSIC).forEach(f=>u.push(f)),this.music_manager=new _1(u)}initialize(){this.updateScores(),this.statistics=new $g(this),this.level_statistics=[],this.difficulty_level=this.settings.start_level??0;const i=new US;i.playButtonText="Begin";for(const o in this.skin.images)i.addResource(this.skin.images[o]);for(const o in this.skin.sounds)i.addResource(this.skin.sounds[o]);for(const o in this.skin.ui)i.addResource(this.skin.ui[o]);this.add(Ks.SCORESHEET,new g1),this.add(Ks.SPLASHSCREEN,new p1),this.start(i).then(()=>Promise.allSettled([this.activateCamera(),this.settings.send_data_consent&&this.api_client.initialize(this.game_data),this.waitForFontLoad("52px Monomaniac One")])).then(()=>this.screen.goFullScreen("excalibur-root")).then(()=>this.goToScene(Ks.SPLASHSCREEN))}loadPotatoMatching(){this.remove(Ks.POTATO_MATCHING),this.add(Ks.POTATO_MATCHING,new f1),this.goToScene(Ks.POTATO_MATCHING)}loadFreePlay(){this.remove(Ks.FREE_PLAY),this.add(Ks.FREE_PLAY,new b1),this.goToScene(Ks.FREE_PLAY)}async activateCamera(){this.webcam||(this.webcam=document.createElement("video"),this.webcam.setAttribute("autoplay",""),this.webcam.setAttribute("muted",""),this.webcam.setAttribute("playsinline",""),this.webcam.setAttribute("width","1"),this.webcam.setAttribute("height","1"),this.webcam.hidden=!0,this.webcam.id="WebcamFeed",document.body.appendChild(this.webcam),this.webcam.srcObject=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"user"},width:{ideal:999999},height:{ideal:999999}}}).catch(i=>(console.error("Failed to get webcam",i),null)),this.webcam.srcObject&&(await this.webcam.play(),this.webcam_canvas=document.createElement("canvas"),this.webcam_canvas.width=this.webcam.videoWidth,this.webcam_canvas.height=this.webcam.videoHeight,this.webcam_canvas.hidden=!0))}async waitForFontLoad(i,o=2e3,a=100){return new Promise((c,u)=>{const f=setInterval(async()=>{try{await document.fonts.load(i)}catch(m){u(m)}document.fonts.check(i)&&(clearInterval(f),c(!0))},a);setTimeout(()=>clearInterval(f),o)})}get current_level_statistics(){return this.level_statistics[this.level_statistics.length-1]}get game_data(){var i;return{name:"Potato Head",version:"0.2.2",fullScreen:((i=document==null?void 0:document.fullscreenElement)==null?void 0:i.id)==="excalibur-root",game_stats:this.statistics.all,level_stats:this.level_statistics,settings:this.settings,settings_adjusted:this.settings_adjusted}}get UI_overlay(){const i=document.getElementById("excalibur-ui").classList;return!i||!i.contains("enabled")?null:Object.values(ll).find(o=>i.contains(o))}set UI_overlay(i){const o=document.getElementById("excalibur-ui").classList;if(!o)throw new Error("Failed to get excalibur-ui element");this.update_wrapper(),o.toggle("enabled",i!==null);for(const a of Object.values(ll))o.toggle(a,a===i)}get settings(){return this.get_settings_func()}get settings_adjusted(){const i=u=>{if(typeof o[u]!="number")return o[u];const f=o[u],m=f*(1-a);return Ug(m,0,f)},o=this.settings;let a=0,c=o.difficulty_step;for(let u=0;u<this.difficulty_level;u++)a+=Math.max(c,.01),c*=.9;return a=Ug(a,.01,.99),console.log(`Adjusting timers to ${((1-a)*100).toFixed(2)}% of base`),{...o,component_lifetime:i("component_lifetime"),component_spawn_delay_min:i("component_spawn_delay_min"),needy_potato_delay_min:i("component_lifetime"),needy_potato_duration:i("needy_potato_duration")}}_getScore(i){const o=localStorage.getItem(i);if(o===null)return null;try{return JSON.parse(o)}catch(a){return console.error("Failed to parse score",a),console.warn(`Clearing score ${i}`),localStorage.removeItem(i),null}}get last_game_score(){return this._getScore(Wg.LAST_GAME_SCORE)}set last_game_score(i){localStorage.setItem("last_game_score",JSON.stringify(i))}get highscore(){return this._getScore(Wg.HIGHSCORE)}set highscore(i){localStorage.setItem("highscore",JSON.stringify(i))}updateScores(){const i=this.last_game_score,o=this.highscore;i!==null&&(o===null||i.score.value>o.score.value)&&(this.highscore=i)}async reportToAPI(i){var u;const o=this.game_data,a=i;let c="";this.webcam&&this.webcam_canvas&&(this.webcam_canvas.getContext("2d").drawImage(this.webcam,0,0),c=(u=this.webcam_canvas)==null?void 0:u.toDataURL("image/png",1)),this.settings.send_data_consent?(console.log("Reporting to API",o,a,(!!c).toString()),this.api_client.report(o,a,c||"")):console.log("Not reporting data",o,a,(!!c).toString())}}const x1=bt({color:String,...Pn(),...ie(),...In(),...yi(),...Zo(),...Ml(),...Os(),...Se(),...Me()},"VSheet"),Ru=zt()({name:"VSheet",props:x1(),setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{backgroundColorClasses:a,backgroundColorStyles:c}=Li(Lt(e,"color")),{borderClasses:u}=kn(e),{dimensionStyles:f}=Rn(e),{elevationClasses:m}=Ui(e),{locationStyles:p}=Ko(e),{positionClasses:v}=Bl(e),{roundedClasses:y}=Ys(e);return Qt(()=>x(e.tag,{class:["v-sheet",o.value,a.value,u.value,m.value,v.value,y.value,e.class],style:[c.value,f.value,p.value,e.style]},i)),{}}});const C1=bt({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ie(),...ni(),...Se(),...Me()},"VTable"),S1=zt()({name:"VTable",props:C1(),setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{densityClasses:a}=vi(e);return Qt(()=>x(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!i.top,"v-table--has-bottom":!!i.bottom,"v-table--hover":e.hover},o.value,a.value,e.class],style:e.style},{default:()=>{var c,u,f;return[(c=i.top)==null?void 0:c.call(i),i.default?x("div",{class:"v-table__wrapper",style:{height:Vt(e.height)}},[x("table",null,[i.default()])]):(u=i.wrapper)==null?void 0:u.call(i),(f=i.bottom)==null?void 0:f.call(i)]}})),{}}}),E1={id:"excalibur-root"},A1=qt("canvas",{id:"GameCanvas"},null,-1),T1={id:"excalibur-play-root",class:"d-flex justify-center align-center fill-height"},P1=qt("th",{class:"text-left"},null,-1),k1={key:1,class:"text-right"},I1={key:0},R1={key:0,class:"text-right"},M1={class:"text-h3"},B1={class:"text-h6"},F1=qt("strong",null,"Make your potato match the potato at the top",-1),D1=qt("strong",null,"pieces will disappear",-1),L1=qt("strong",null,"Potato Thieves",-1),O1=qt("strong",null,"game over",-1),V1=qt("h1",{class:"text-h3"}," Free play mode ",-1),z1=qt("strong",null,"Clicking on the pieces",-1),N1=qt("strong",null,"click on the potato",-1),U1=qt("strong",null,"make it dance",-1),H1=ii({__name:"Game",setup(e){const{to_raw:n}=nr(),{currentPage:i,settingsOpen:o,detailsOpen:a,difficultySelected:c}=si(on()),u=Ft(null),f=Ft(!1),m=Ft(0),p=()=>m.value++;let v=null,y=null,w=null;Vi(()=>{v=Yo(new w1({canvasElementId:"GameCanvas",get_settings_func:()=>n,update_wrapper:p})),v==null||v.initialize()}),jt(m,()=>{v&&(y=v.last_game_score,w=v.highscore)});const C=k=>{if(!w)return null;const R=Object.values(w).find(B=>B.name===k.name);return R||null},E=k=>k?(k.value%1>0?k.value.toFixed(2):k.value.toString()).replace(/\B(?=(\d{3})+(?!\d))/g,","):"",P=k=>k.unit?`${k.name} (${k.unit})`:k.name;return(k,R)=>(me(),_n(Re,null,[qt("div",E1,[A1,qt("div",T1,[x(we,{id:"excalibur-play"})]),qt("div",{id:"excalibur-ui",class:"w-100 d-flex align-center justify-center fill-height",ref_key:"ui",ref:u},[x(Ru,{id:"excalibur-scoresheet",class:"ui"},{default:j(()=>[x(bs,{class:"pa-2"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("Game statistics")]),_:1}),m.value?(me(),Ie(Na,{key:0},{default:j(()=>[x(S1,null,{default:j(()=>[qt("thead",null,[qt("tr",null,[P1,xt(y)?(me(),_n("th",{key:0,class:Js(["text-right",!xt(w)||xt(y).score.value>xt(w).score.value?"high":""])}," Last game ",2)):as("",!0),xt(w)?(me(),_n("th",k1," Your highscore ")):as("",!0)])]),xt(y)?(me(),_n("tbody",I1,[(me(!0),_n(Re,null,p0(Object.values(xt(y)).filter(B=>!B.advanced||f.value),B=>(me(),_n("tr",{key:B.name},[qt("td",{class:Js(["text-left",!xt(w)||B.value>C(B).value?"high":""])},Je(P(B)),3),qt("td",{class:Js(["text-right",!xt(w)||B.value>C(B).value?"high":""])},Je(E(B)),3),xt(w)?(me(),_n("td",R1,Je(E(C(B))),1)):as("",!0)]))),128))])):as("",!0)]),_:1}),x(fi,null,{default:j(()=>[x(we,{onClick:R[0]||(R[0]=()=>f.value=!f.value)},{default:j(()=>[mt(Je(f.value?"Hide":"Show")+" Advanced stats ",1)]),_:1}),x(Ms),x(we,{"prepend-icon":"mdi-play",variant:"tonal",color:"success",onClick:R[1]||(R[1]=()=>{var B;(B=u.value)==null||B.classList.remove("scoresheet"),xt(v).initialize()})},{default:j(()=>[mt("Play again?")]),_:1})]),_:1})]),_:1})):as("",!0)]),_:1})]),_:1}),x(Ru,{id:"excalibur-splashscreen",class:"ui"},{default:j(()=>[m.value&&xt(n).game_mode==="matching"?(me(),Ie(bs,{key:0,loading:!0,class:"pa-2"},{default:j(()=>[x(Fs,{class:"text-center"},{default:j(()=>[qt("h1",M1," Level "+Je(xt(v).difficulty_level+1),1)]),_:1}),x(x_,{class:"text-center"},{default:j(()=>[qt("h2",B1," Mode: "+Je((xt(c)||"custom").toUpperCase()),1)]),_:1}),x(Na,null,{default:j(()=>[x(wu,{lines:"three",class:"text-start"},{default:j(()=>[x(hs,{title:"Match the potato"},{prepend:j(()=>[x(We,{size:"x-large"},{default:j(()=>[mt("mdi-gesture-tap-button")]),_:1})]),subtitle:j(()=>[F1,mt(" of the screen by clicking on the correct pieces as they appear. ")]),_:1}),x(hs,{title:"Be quick"},{prepend:j(()=>[x(We,{size:"x-large"},{default:j(()=>[mt("mdi-timer-alert-outline")]),_:1})]),subtitle:j(()=>[mt(" Each level will get harder, because the "),D1,mt(" more quickly. ")]),_:1}),x(hs,{title:"Watch out"},{prepend:j(()=>[x(We,{size:"x-large"},{default:j(()=>[mt("mdi-ufo-outline")]),_:1})]),subtitle:j(()=>[mt(" Watch out for the "),L1,mt(" who are trying to steal your potato. If they steal your potato, it's "),O1,mt(". ")]),_:1})]),_:1})]),_:1}),x(fi,null,{default:j(()=>[x(Ms),x(we,{variant:"flat",color:"success",onClick:R[2]||(R[2]=()=>{var B;return(B=xt(v))==null?void 0:B.loadPotatoMatching()}),block:!0},{default:j(()=>[mt("Play!")]),_:1}),x(Ms)]),_:1})]),_:1})):as("",!0),m.value&&xt(n).game_mode==="free_play"?(me(),Ie(bs,{key:1,loading:!0,class:"pa-2"},{default:j(()=>[x(Fs,{class:"text-center"},{default:j(()=>[V1]),_:1}),x(Na,null,{default:j(()=>[x(wu,{lines:"three",class:"text-start"},{default:j(()=>[x(hs,{title:"Create your own potato"},{prepend:j(()=>[x(We,{size:"x-large"},{default:j(()=>[mt("mdi-gesture-tap-button")]),_:1})]),subtitle:j(()=>[z1,mt(" as they appear and "),N1,mt(" to add them. ")]),_:1}),x(hs,{title:"Dance"},{prepend:j(()=>[x(Oi,{width:"2em",src:DS,class:"me-8"})]),subtitle:j(()=>[mt(" When you have the potato you want, you can "),U1,mt(". ")]),_:1})]),_:1})]),_:1}),x(fi,null,{default:j(()=>[x(Ms),x(we,{variant:"flat",color:"success",onClick:R[3]||(R[3]=()=>{var B;return(B=xt(v))==null?void 0:B.loadFreePlay()}),block:!0},{default:j(()=>[mt("Play!")]),_:1}),x(Ms)]),_:1})]),_:1})):as("",!0)]),_:1})],512)]),x(fi,null,{default:j(()=>[x(we,{onClick:R[4]||(R[4]=B=>o.value=!0),variant:"plain"},{default:j(()=>[mt("Change settings")]),_:1}),x(Ms),x(we,{onClick:R[5]||(R[5]=B=>a.value=!0),variant:"plain"},{default:j(()=>[mt("Details")]),_:1}),x(Ms),x(we,{onClick:R[6]||(R[6]=B=>i.value=xt(Ws).WELCOME),variant:"plain"},{default:j(()=>[mt("Back to the intro")]),_:1})]),_:1})],64))}});const $1=qt("p",{class:"text-body-1"}," We're going to take a few seconds to setup up the game for you. ",-1),W1=qt("p",{class:"text-body-1"}," We'll choose how hard the game should be, and we'll ask you whether you're okay with having your picture taken to help us with our research. ",-1),G1=ii({__name:"Welcome",setup(e){const{currentPage:n}=si(on());return(i,o)=>(me(),Ie(Nl,{side:"end","truncate-line":"start",class:"w-100"},{default:j(()=>[x(Ul,{size:"x-large","icon-color":"secondary",icon:"mdi-hand-wave-outline","dot-color":"primary"},{default:j(()=>[x(bs,{class:"pa-4",color:"primary",variant:"tonal"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("Welcome")]),_:1}),$1,W1,x(fi,null,{default:j(()=>[x(we,{color:"success",onClick:o[0]||(o[0]=a=>n.value++),variant:"elevated"},{default:j(()=>[mt(" Let's begin! ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),j1="/boop-boop/assets/child-5e185c25.png",X1="/boop-boop/assets/adult-1e8f7c1d.png",Y1=qt("p",{class:"text-body-1 mt-4"},[mt(" Please "),qt("strong",null,"click the button"),mt(" that best describes you. ")],-1),q1=ii({__name:"Difficulty",setup(e){const{currentPage:n,difficultySelected:i,settingsOpen:o}=si(on()),{load_defaults:a}=nr(),c=u=>{u&&(a(u),n.value++)};return(u,f)=>(me(),Ie(Nl,{side:"end",class:"w-100"},{default:j(()=>[x(Ul,{size:"x-large","icon-color":xt(i)?"secondary":"primary",icon:"mdi-cog-outline","dot-color":xt(i)?"primary":"secondary"},{default:j(()=>[x(bs,{class:"pa-4",variant:"text"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("About you")]),_:1}),Y1,x(Dh,{"selected-class":"bg-primary",class:"mb-4",modelValue:xt(i),"onUpdate:modelValue":f[0]||(f[0]=m=>re(i)?i.value=m:null)},{default:j(()=>[x(Ll,null,{default:j(()=>[x(Vl,null,{default:j(()=>[x(or,{cols:"6"},{default:j(()=>[x(Lr,{value:"child"},{default:j(({selectedClass:m,select:p})=>[x(bs,{class:Js(["mx-auto","py-2",m]),color:"primary",variant:"tonal",height:"200",onClick:()=>{p(!0),c("child")}},{default:j(()=>[x(Oi,{src:xt(j1),height:"80%"},null,8,["src"]),x(Fs,{class:"text-center text-black"},{default:j(()=>[mt(" Child ")]),_:1})]),_:2},1032,["class","onClick"])]),_:1})]),_:1}),x(or,{cols:"6"},{default:j(()=>[x(Lr,{value:"adult"},{default:j(({selectedClass:m,select:p})=>[x(bs,{class:Js(["mx-auto","py-2",m]),color:"primary",height:"200",variant:"tonal",onClick:()=>{p(!0),c("adult")}},{default:j(()=>[x(Oi,{src:xt(X1),height:"80%"},null,8,["src"]),x(Fs,{class:"text-center text-black"},{default:j(()=>[mt(" Adult ")]),_:1})]),_:2},1032,["class","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(fi,null,{default:j(()=>[x(we,{onClick:f[1]||(f[1]=m=>o.value=!0)},{default:j(()=>[mt(" Customise settings ")]),_:1}),x(Ms),x(we,{onClick:f[2]||(f[2]=m=>n.value--),variant:"tonal"},{default:j(()=>[mt(" Go back ")]),_:1})]),_:1})]),_:1})]),_:1},8,["icon-color","dot-color"])]),_:1}))}}),lr=e=>(qm("data-v-a143759d"),e=e(),Zm(),e),Z1=lr(()=>qt("h2",{class:"text-h6 pt-4"},"Lorem ipsum",-1)),K1=lr(()=>qt("p",{class:"text-body-1 pt-2"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Id aliquet risus feugiat in. Convallis convallis tellus id interdum velit laoreet id. Metus dictum at tempor commodo ullamcorper a lacus. Adipiscing tristique risus nec feugiat in fermentum posuere. Non pulvinar neque laoreet suspendisse interdum consectetur. Orci sagittis eu volutpat odio facilisis mauris sit amet massa. Scelerisque fermentum dui faucibus in ornare quam viverra. Sed arcu non odio euismod lacinia at quis risus sed. Ac ut consequat semper viverra nam libero justo. Fermentum posuere urna nec tincidunt. Scelerisque eleifend donec pretium vulputate sapien nec sagittis aliquam malesuada. Egestas erat imperdiet sed euismod nisi porta. In nulla posuere sollicitudin aliquam. Sed risus ultricies tristique nulla. Viverra maecenas accumsan lacus vel facilisis volutpat est velit. Et netus et malesuada fames ac turpis. Sit amet risus nullam eget felis. ",-1)),Q1=lr(()=>qt("p",{class:"text-body-1 pt-2"}," Viverra nam libero justo laoreet sit. Arcu dictum varius duis at consectetur. Risus commodo viverra maecenas accumsan lacus. Ullamcorper morbi tincidunt ornare massa eget. In dictum non consectetur a erat nam. Feugiat nisl pretium fusce id velit ut. Sit amet consectetur adipiscing elit ut. Sit amet risus nullam eget felis eget nunc lobortis mattis. Nunc mi ipsum faucibus vitae aliquet nec ullamcorper. Ornare suspendisse sed nisi lacus. Neque sodales ut etiam sit amet. Mauris commodo quis imperdiet massa tincidunt nunc pulvinar sapien et. Vel turpis nunc eget lorem dolor sed viverra ipsum. Sapien et ligula ullamcorper malesuada. Scelerisque eu ultrices vitae auctor eu. Odio tempor orci dapibus ultrices in. Quis blandit turpis cursus in hac habitasse platea dictumst quisque. ",-1)),J1=lr(()=>qt("p",{class:"text-body-1 pt-2"}," Purus ut faucibus pulvinar elementum integer enim neque. Amet nisl purus in mollis nunc sed id semper risus. Varius vel pharetra vel turpis nunc eget lorem dolor. Nulla facilisi nullam vehicula ipsum a. Tristique senectus et netus et. Nullam non nisi est sit amet facilisis. Morbi tincidunt augue interdum velit euismod in. Mattis enim ut tellus elementum. Id volutpat lacus laoreet non curabitur gravida arcu ac tortor. Eget mi proin sed libero enim sed faucibus. Sed viverra ipsum nunc aliquet. Auctor urna nunc id cursus. A condimentum vitae sapien pellentesque. ",-1)),tE=lr(()=>qt("h2",{class:"text-h6 pt-4"},"Adipiscing elit",-1)),eE=lr(()=>qt("p",{class:"text-body-1 pt-2"}," Adipiscing elit duis tristique sollicitudin nibh sit. Facilisi cras fermentum odio eu. Auctor augue mauris augue neque gravida in fermentum et sollicitudin. Curabitur gravida arcu ac tortor dignissim convallis. Massa sed elementum tempus egestas sed sed risus. Nunc lobortis mattis aliquam faucibus purus in. Faucibus purus in massa tempor. Ultrices eros in cursus turpis massa tincidunt dui ut. Lectus magna fringilla urna porttitor rhoncus dolor purus. Nisl pretium fusce id velit. Nibh sed pulvinar proin gravida. ",-1)),sE=lr(()=>qt("p",{class:"text-body-1 pt-2"}," Dui nunc mattis enim ut tellus elementum sagittis vitae et. Pellentesque dignissim enim sit amet venenatis urna cursus. Vestibulum lectus mauris ultrices eros in. Hendrerit dolor magna eget est lorem ipsum dolor sit. Libero justo laoreet sit amet cursus sit amet dictum. Integer eget aliquet nibh praesent tristique magna sit amet. Nec ultrices dui sapien eget mi proin. Accumsan tortor posuere ac ut consequat semper. Purus gravida quis blandit turpis. Non pulvinar neque laoreet suspendisse. ",-1)),iE=ii({__name:"StudyDetails",setup(e){const n=si(on()).detailsOpen;return(i,o)=>(me(),Ie(bs,{class:"mx-auto my-4 px-4 text-justify","max-width":"600"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("Details")]),_:1}),x(Ru,{class:"pe-2"},{default:j(()=>[Z1,K1,Q1,J1,tE,eE,sE]),_:1}),x(fi,null,{default:j(()=>[x(we,{"prepend-icon":"mdi-email",color:"primary"},{default:j(()=>[mt(" Ask us for more information ")]),_:1}),x(Ms),x(we,{onClick:o[0]||(o[0]=a=>n.value=!1),variant:"tonal",class:"close-settings",color:"success"},{default:j(()=>[mt("Close")]),_:1})]),_:1})]),_:1}))}});const nE=Fh(iE,[["__scopeId","data-v-a143759d"]]),rE="/boop-boop/assets/explore-97372d93.png",oE="/boop-boop/assets/challenge-910b1a67.png",aE=qt("p",{class:"text-body-1 mt-4"},[mt(" Click the picture for the "),qt("strong",null,"game mode"),mt(" you want to play. ")],-1),lE=ii({__name:"Mode",setup(e){const{currentPage:n,modeSelected:i,settingsOpen:o}=si(on()),{load_defaults:a}=nr(),c=u=>{if(u){if(u==="free_play"){a("free_play"),n.value=Ws.CONSENT;return}n.value=Ws.DIFFICULTY}};return(u,f)=>(me(),Ie(Nl,{side:"end",class:"w-100"},{default:j(()=>[x(Ul,{size:"x-large","icon-color":xt(i)?"secondary":"primary",icon:"mdi-cog-outline","dot-color":xt(i)?"primary":"secondary"},{default:j(()=>[x(bs,{class:"pa-4",variant:"text"},{default:j(()=>[x(Fs,null,{default:j(()=>[mt("Game mode")]),_:1}),aE,x(Dh,{"selected-class":"bg-primary",class:"mb-4",modelValue:xt(i),"onUpdate:modelValue":f[0]||(f[0]=m=>re(i)?i.value=m:null)},{default:j(()=>[x(Ll,null,{default:j(()=>[x(Vl,null,{default:j(()=>[x(or,{cols:"6"},{default:j(()=>[x(Lr,{value:"free_play"},{default:j(({selectedClass:m,select:p})=>[x(bs,{class:Js(["mx-auto","py-2",m]),color:"primary",variant:"tonal",height:"200",onClick:()=>{p(!0),c("free_play")}},{default:j(()=>[x(Oi,{src:xt(rE),height:"80%"},null,8,["src"]),x(Fs,{class:"text-center text-black"},{default:j(()=>[mt(" Explore ")]),_:1})]),_:2},1032,["class","onClick"])]),_:1})]),_:1}),x(or,{cols:"6"},{default:j(()=>[x(Lr,{value:"child"},{default:j(({selectedClass:m,select:p})=>[x(bs,{class:Js(["mx-auto","py-2",m]),color:"primary",height:"200",variant:"tonal",onClick:()=>{p(!0),c("child")}},{default:j(()=>[x(Oi,{src:xt(oE),height:"80%"},null,8,["src"]),x(Fs,{class:"text-center text-black"},{default:j(()=>[mt(" Challenge ")]),_:1})]),_:2},1032,["class","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(fi,null,{default:j(()=>[x(we,{onClick:f[1]||(f[1]=m=>o.value=!0)},{default:j(()=>[mt(" Customise settings ")]),_:1}),x(Ms),x(we,{onClick:f[2]||(f[2]=m=>n.value--),variant:"tonal"},{default:j(()=>[mt(" Go back ")]),_:1})]),_:1})]),_:1})]),_:1},8,["icon-color","dot-color"])]),_:1}))}});const cl=Symbol.for("vuetify:layout"),lv=Symbol.for("vuetify:layout-item"),Gg=1e3,cE=bt({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),uE=bt({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function hE(){const e=pe(cl);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function dE(e){const n=pe(cl);if(!n)throw new Error("[Vuetify] Could not find injected layout");const i=e.id??`layout-item-${Ni()}`,o=fs("useLayoutItem");ts(lv,{id:i});const a=Zt(!1);sp(()=>a.value=!0),ep(()=>a.value=!1);const{layoutItemStyles:c,layoutItemScrimStyles:u}=n.register(o,{...e,active:L(()=>a.value?!1:e.active.value),id:i});return _i(()=>n.unregister(i)),{layoutItemStyles:c,layoutRect:n.layoutRect,layoutItemScrimStyles:u}}const fE=(e,n,i,o)=>{let a={top:0,left:0,right:0,bottom:0};const c=[{id:"",layer:{...a}}];for(const u of e){const f=n.get(u),m=i.get(u),p=o.get(u);if(!f||!m||!p)continue;const v={...a,[f.value]:parseInt(a[f.value],10)+(p.value?parseInt(m.value,10):0)};c.push({id:u,layer:v}),a=v}return c};function gE(e){const n=pe(cl,null),i=L(()=>n?n.rootZIndex.value-100:Gg),o=Ft([]),a=ls(new Map),c=ls(new Map),u=ls(new Map),f=ls(new Map),m=ls(new Map),{resizeRef:p,contentRect:v}=n_(),y=L(()=>{const X=new Map,st=e.overlaps??[];for(const N of st.filter($=>$.includes(":"))){const[$,Y]=N.split(":");if(!o.value.includes($)||!o.value.includes(Y))continue;const it=a.get($),U=a.get(Y),q=c.get($),Q=c.get(Y);!it||!U||!q||!Q||(X.set(Y,{position:it.value,amount:parseInt(q.value,10)}),X.set($,{position:U.value,amount:-parseInt(Q.value,10)}))}return X}),w=L(()=>{const X=[...new Set([...u.values()].map(N=>N.value))].sort((N,$)=>N-$),st=[];for(const N of X){const $=o.value.filter(Y=>{var it;return((it=u.get(Y))==null?void 0:it.value)===N});st.push(...$)}return fE(st,a,c,f)}),C=L(()=>!Array.from(m.values()).some(X=>X.value)),E=L(()=>w.value[w.value.length-1].layer),P=L(()=>({"--v-layout-left":Vt(E.value.left),"--v-layout-right":Vt(E.value.right),"--v-layout-top":Vt(E.value.top),"--v-layout-bottom":Vt(E.value.bottom),...C.value?void 0:{transition:"none"}})),k=L(()=>w.value.slice(1).map((X,st)=>{let{id:N}=X;const{layer:$}=w.value[st],Y=c.get(N),it=a.get(N);return{id:N,...$,size:Number(Y.value),position:it.value}})),R=X=>k.value.find(st=>st.id===X),B=fs("createLayout"),O=Zt(!1);Vi(()=>{O.value=!0}),ts(cl,{register:(X,st)=>{let{id:N,order:$,position:Y,layoutSize:it,elementSize:U,active:q,disableTransitions:Q,absolute:rt}=st;u.set(N,$),a.set(N,Y),c.set(N,it),f.set(N,q),Q&&m.set(N,Q);const At=To(lv,B==null?void 0:B.vnode).indexOf(X);At>-1?o.value.splice(At,0,N):o.value.push(N);const ut=L(()=>k.value.findIndex(he=>he.id===N)),Rt=L(()=>i.value+w.value.length*2-ut.value*2),te=L(()=>{const he=Y.value==="left"||Y.value==="right",Be=Y.value==="right",qe=Y.value==="bottom",ss={[Y.value]:0,zIndex:Rt.value,transform:`translate${he?"X":"Y"}(${(q.value?0:-110)*(Be||qe?-1:1)}%)`,position:rt.value||i.value!==Gg?"absolute":"fixed",...C.value?void 0:{transition:"none"}};if(!O.value)return ss;const _t=k.value[ut.value];if(!_t)throw new Error(`[Vuetify] Could not find layout item "${N}"`);const et=y.value.get(N);return et&&(_t[et.position]+=et.amount),{...ss,height:he?`calc(100% - ${_t.top}px - ${_t.bottom}px)`:U.value?`${U.value}px`:void 0,left:Be?void 0:`${_t.left}px`,right:Be?`${_t.right}px`:void 0,top:Y.value!=="bottom"?`${_t.top}px`:void 0,bottom:Y.value!=="top"?`${_t.bottom}px`:void 0,width:he?U.value?`${U.value}px`:void 0:`calc(100% - ${_t.left}px - ${_t.right}px)`}}),Jt=L(()=>({zIndex:Rt.value-1}));return{layoutItemStyles:te,layoutItemScrimStyles:Jt,zIndex:Rt}},unregister:X=>{u.delete(X),a.delete(X),c.delete(X),f.delete(X),m.delete(X),o.value=o.value.filter(st=>st!==X)},mainRect:E,mainStyles:P,getLayoutItem:R,items:k,layoutRect:v,rootZIndex:i});const W=L(()=>["v-layout",{"v-layout--full-height":e.fullHeight}]),G=L(()=>({zIndex:i.value,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:W,layoutStyles:G,getLayoutItem:R,items:k,layoutRect:v,layoutRef:p}}const mE=bt({...ie(),...cE({fullHeight:!0}),...Me()},"VApp"),pE=zt()({name:"VApp",props:mE(),setup(e,n){let{slots:i}=n;const o=He(e),{layoutClasses:a,layoutStyles:c,getLayoutItem:u,items:f,layoutRef:m}=gE(e),{rtlClasses:p}=js();return Qt(()=>{var v;return x("div",{ref:m,class:["v-application",o.themeClasses.value,a.value,p.value,e.class],style:[c.value,e.style]},[x("div",{class:"v-application__wrap"},[(v=i.default)==null?void 0:v.call(i)])])}),{getLayoutItem:u,items:f,theme:o}}});const _E=bt({text:String,...ie(),...Se()},"VToolbarTitle"),cv=zt()({name:"VToolbarTitle",props:_E(),setup(e,n){let{slots:i}=n;return Qt(()=>{const o=!!(i.default||i.text||e.text);return x(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var a;return[o&&x("div",{class:"v-toolbar-title__placeholder"},[i.text?i.text():e.text,(a=i.default)==null?void 0:a.call(i)])]}})}),{}}}),vE=[null,"prominent","default","comfortable","compact"],uv=bt({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>vE.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Pn(),...ie(),...yi(),...Os(),...Se({tag:"header"}),...Me()},"VToolbar"),jg=zt()({name:"VToolbar",props:uv(),setup(e,n){var C;let{slots:i}=n;const{backgroundColorClasses:o,backgroundColorStyles:a}=Li(Lt(e,"color")),{borderClasses:c}=kn(e),{elevationClasses:u}=Ui(e),{roundedClasses:f}=Ys(e),{themeClasses:m}=He(e),{rtlClasses:p}=js(),v=Zt(!!(e.extended||(C=i.extension)!=null&&C.call(i))),y=L(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),w=L(()=>v.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return an({VBtn:{variant:"text"}}),Qt(()=>{var R;const E=!!(e.title||i.title),P=!!(i.image||e.image),k=(R=i.extension)==null?void 0:R.call(i);return v.value=!!(e.extended||k),x(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},o.value,c.value,u.value,f.value,m.value,p.value,e.class],style:[a.value,e.style]},{default:()=>[P&&x("div",{key:"image",class:"v-toolbar__image"},[i.image?x(Ye,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},i.image):x(Oi,{key:"image-img",cover:!0,src:e.image},null)]),x(Ye,{defaults:{VTabs:{height:Vt(y.value)}}},{default:()=>{var B,O,W;return[x("div",{class:"v-toolbar__content",style:{height:Vt(y.value)}},[i.prepend&&x("div",{class:"v-toolbar__prepend"},[(B=i.prepend)==null?void 0:B.call(i)]),E&&x(cv,{key:"title",text:e.title},{text:i.title}),(O=i.default)==null?void 0:O.call(i),i.append&&x("div",{class:"v-toolbar__append"},[(W=i.append)==null?void 0:W.call(i)])])]}}),x(Ye,{defaults:{VTabs:{height:Vt(w.value)}}},{default:()=>[x(xh,null,{default:()=>[v.value&&x("div",{class:"v-toolbar__extension",style:{height:Vt(w.value)}},[k])]})]})]})}),{contentHeight:y,extensionHeight:w}}}),yE=bt({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function bE(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:i}=n;let o=0;const a=Ft(null),c=Zt(0),u=Zt(0),f=Zt(0),m=Zt(!1),p=Zt(!1),v=L(()=>Number(e.scrollThreshold)),y=L(()=>Br((v.value-c.value)/v.value||0)),w=()=>{const C=a.value;!C||i&&!i.value||(o=c.value,c.value="window"in C?C.pageYOffset:C.scrollTop,p.value=c.value<o,f.value=Math.abs(c.value-v.value))};return jt(p,()=>{u.value=u.value||c.value}),jt(m,()=>{u.value=0}),Vi(()=>{jt(()=>e.scrollTarget,C=>{var P;const E=C?document.querySelector(C):window;E&&E!==a.value&&((P=a.value)==null||P.removeEventListener("scroll",w),a.value=E,a.value.addEventListener("scroll",w,{passive:!0}))},{immediate:!0})}),_i(()=>{var C;(C=a.value)==null||C.removeEventListener("scroll",w)}),i&&jt(i,w,{immediate:!0}),{scrollThreshold:v,currentScroll:c,currentThreshold:f,isScrollActive:m,scrollRatio:y,isScrollingUp:p,savedScroll:u}}const wE=bt({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...uv(),...uE(),...yE(),height:{type:[Number,String],default:64}},"VAppBar"),xE=zt()({name:"VAppBar",props:wE(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const o=Ft(),a=es(e,"modelValue"),c=L(()=>{var B;const R=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:R.has("hide"),inverted:R.has("inverted"),collapse:R.has("collapse"),elevate:R.has("elevate"),fadeImage:R.has("fade-image")}}),u=L(()=>{const R=c.value;return R.hide||R.inverted||R.collapse||R.elevate||R.fadeImage||!a.value}),{currentScroll:f,scrollThreshold:m,isScrollingUp:p,scrollRatio:v}=bE(e,{canScroll:u}),y=L(()=>e.collapse||c.value.collapse&&(c.value.inverted?v.value>0:v.value===0)),w=L(()=>e.flat||c.value.elevate&&(c.value.inverted?f.value>0:f.value===0)),C=L(()=>c.value.fadeImage?c.value.inverted?1-v.value:v.value:void 0),E=L(()=>{var O,W;if(c.value.hide&&c.value.inverted)return 0;const R=((O=o.value)==null?void 0:O.contentHeight)??0,B=((W=o.value)==null?void 0:W.extensionHeight)??0;return R+B});Tn(L(()=>!!e.scrollBehavior),()=>{nn(()=>{c.value.hide?c.value.inverted?a.value=f.value>m.value:a.value=p.value||f.value<m.value:a.value=!0})});const{ssrBootStyles:P}=zl(),{layoutItemStyles:k}=dE({id:e.name,order:L(()=>parseInt(e.order,10)),position:Lt(e,"location"),layoutSize:E,elementSize:Zt(void 0),active:a,absolute:Lt(e,"absolute")});return Qt(()=>{const[R]=jg.filterProps(e);return x(jg,ye({ref:o,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...k.value,"--v-toolbar-image-opacity":C.value,height:void 0,...P.value},e.style]},R,{collapse:y.value,flat:w.value}),i)}),{}}});function Nc(e,n){return{x:e.x+n.x,y:e.y+n.y}}function CE(e,n){return{x:e.x-n.x,y:e.y-n.y}}function Xg(e,n){if(e.side==="top"||e.side==="bottom"){const{side:i,align:o}=e,a=o==="left"?0:o==="center"?n.width/2:o==="right"?n.width:o,c=i==="top"?0:i==="bottom"?n.height:i;return Nc({x:a,y:c},n)}else if(e.side==="left"||e.side==="right"){const{side:i,align:o}=e,a=i==="left"?0:i==="right"?n.width:i,c=o==="top"?0:o==="center"?n.height/2:o==="bottom"?n.height:o;return Nc({x:a,y:c},n)}return Nc({x:n.width/2,y:n.height/2},n)}const hv={static:AE,connected:PE},SE=bt({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in hv},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function EE(e,n){const i=Ft({}),o=Ft();Ge&&(Tn(()=>!!(n.isActive.value&&e.locationStrategy),c=>{var u,f;jt(()=>e.locationStrategy,c),Ds(()=>{o.value=void 0}),typeof e.locationStrategy=="function"?o.value=(u=e.locationStrategy(n,e,i))==null?void 0:u.updateLocation:o.value=(f=hv[e.locationStrategy](n,e,i))==null?void 0:f.updateLocation}),window.addEventListener("resize",a,{passive:!0}),Ds(()=>{window.removeEventListener("resize",a),o.value=void 0}));function a(c){var u;(u=o.value)==null||u.call(o,c)}return{contentStyles:i,updateLocation:o}}function AE(){}function TE(e,n){const i=$p(e);return n?i.x+=parseFloat(e.style.right||0):i.x-=parseFloat(e.style.left||0),i.y-=parseFloat(e.style.top||0),i}function PE(e,n,i){dx(e.activatorEl.value)&&Object.assign(i.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:a,preferredOrigin:c}=mh(()=>{const E=hu(n.location,e.isRtl.value),P=n.origin==="overlap"?E:n.origin==="auto"?Bc(E):hu(n.origin,e.isRtl.value);return E.side===P.side&&E.align===Fc(P).align?{preferredAnchor:ng(E),preferredOrigin:ng(P)}:{preferredAnchor:E,preferredOrigin:P}}),[u,f,m,p]=["minWidth","minHeight","maxWidth","maxHeight"].map(E=>L(()=>{const P=parseFloat(n[E]);return isNaN(P)?1/0:P})),v=L(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const E=n.offset.split(" ").map(parseFloat);return E.length<2&&E.push(0),E}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let y=!1;const w=new ResizeObserver(()=>{y&&C()});jt([e.activatorEl,e.contentEl],(E,P)=>{let[k,R]=E,[B,O]=P;B&&w.unobserve(B),k&&w.observe(k),O&&w.unobserve(O),R&&w.observe(R)},{immediate:!0}),Ds(()=>{w.disconnect()});function C(){if(y=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>y=!0)}),!e.activatorEl.value||!e.contentEl.value)return;const E=e.activatorEl.value.getBoundingClientRect(),P=TE(e.contentEl.value,e.isRtl.value),k=Qa(e.contentEl.value),R=12;k.length||(k.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(P.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),P.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const B=k.reduce((it,U)=>{const q=U.getBoundingClientRect(),Q=new Ir({x:U===document.documentElement?0:q.x,y:U===document.documentElement?0:q.y,width:U.clientWidth,height:U.clientHeight});return it?new Ir({x:Math.max(it.left,Q.left),y:Math.max(it.top,Q.top),width:Math.min(it.right,Q.right)-Math.max(it.left,Q.left),height:Math.min(it.bottom,Q.bottom)-Math.max(it.top,Q.top)}):Q},void 0);B.x+=R,B.y+=R,B.width-=R*2,B.height-=R*2;let O={anchor:a.value,origin:c.value};function W(it){const U=new Ir(P),q=Xg(it.anchor,E),Q=Xg(it.origin,U);let{x:rt,y:dt}=CE(q,Q);switch(it.anchor.side){case"top":dt-=v.value[0];break;case"bottom":dt+=v.value[0];break;case"left":rt-=v.value[0];break;case"right":rt+=v.value[0];break}switch(it.anchor.align){case"top":dt-=v.value[1];break;case"bottom":dt+=v.value[1];break;case"left":rt-=v.value[1];break;case"right":rt+=v.value[1];break}return U.x+=rt,U.y+=dt,U.width=Math.min(U.width,m.value),U.height=Math.min(U.height,p.value),{overflows:og(U,B),x:rt,y:dt}}let G=0,X=0;const st={x:0,y:0},N={x:!1,y:!1};let $=-1;for(;!($++>10);){const{x:it,y:U,overflows:q}=W(O);G+=it,X+=U,P.x+=it,P.y+=U;{const Q=rg(O.anchor),rt=q.x.before||q.x.after,dt=q.y.before||q.y.after;let At=!1;if(["x","y"].forEach(ut=>{if(ut==="x"&&rt&&!N.x||ut==="y"&&dt&&!N.y){const Rt={anchor:{...O.anchor},origin:{...O.origin}},te=ut==="x"?Q==="y"?Fc:Bc:Q==="y"?Bc:Fc;Rt.anchor=te(Rt.anchor),Rt.origin=te(Rt.origin);const{overflows:Jt}=W(Rt);(Jt[ut].before<=q[ut].before&&Jt[ut].after<=q[ut].after||Jt[ut].before+Jt[ut].after<(q[ut].before+q[ut].after)/2)&&(O=Rt,At=N[ut]=!0)}}),At)continue}q.x.before&&(G+=q.x.before,P.x+=q.x.before),q.x.after&&(G-=q.x.after,P.x-=q.x.after),q.y.before&&(X+=q.y.before,P.y+=q.y.before),q.y.after&&(X-=q.y.after,P.y-=q.y.after);{const Q=og(P,B);st.x=B.width-Q.x.before-Q.x.after,st.y=B.height-Q.y.before-Q.y.after,G+=Q.x.before,P.x+=Q.x.before,X+=Q.y.before,P.y+=Q.y.before}break}const Y=rg(O.anchor);return Object.assign(i.value,{"--v-overlay-anchor-origin":`${O.anchor.side} ${O.anchor.align}`,transformOrigin:`${O.origin.side} ${O.origin.align}`,top:Vt(Uc(X)),left:e.isRtl.value?void 0:Vt(Uc(G)),right:e.isRtl.value?Vt(Uc(-G)):void 0,minWidth:Vt(Y==="y"?Math.min(u.value,E.width):u.value),maxWidth:Vt(Yg(Br(st.x,u.value===1/0?0:u.value,m.value))),maxHeight:Vt(Yg(Br(st.y,f.value===1/0?0:f.value,p.value)))}),{available:st,contentBox:P}}return jt(()=>[a.value,c.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>C()),ws(()=>{const E=C();if(!E)return;const{available:P,contentBox:k}=E;k.height>P.y&&requestAnimationFrame(()=>{C(),requestAnimationFrame(()=>{C()})})}),{updateLocation:C}}function Uc(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function Yg(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let Mu=!0;const ul=[];function kE(e){!Mu||ul.length?(ul.push(e),Bu()):(Mu=!1,e(),Bu())}let qg=-1;function Bu(){cancelAnimationFrame(qg),qg=requestAnimationFrame(()=>{const e=ul.shift();e&&e(),ul.length?Bu():Mu=!0})}const Wa={none:null,close:ME,block:BE,reposition:FE},IE=bt({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in Wa}},"VOverlay-scroll-strategies");function RE(e,n){if(!Ge)return;let i;nn(async()=>{i==null||i.stop(),n.isActive.value&&e.scrollStrategy&&(i=jo(),await ws(),i.active&&i.run(()=>{var o;typeof e.scrollStrategy=="function"?e.scrollStrategy(n,e,i):(o=Wa[e.scrollStrategy])==null||o.call(Wa,n,e,i)}))}),Ds(()=>{i==null||i.stop()})}function ME(e){function n(i){e.isActive.value=!1}dv(e.activatorEl.value??e.contentEl.value,n)}function BE(e,n){var u;const i=(u=e.root.value)==null?void 0:u.offsetParent,o=[...new Set([...Qa(e.activatorEl.value,n.contained?i:void 0),...Qa(e.contentEl.value,n.contained?i:void 0)])].filter(f=>!f.classList.contains("v-overlay-scroll-blocked")),a=window.innerWidth-document.documentElement.offsetWidth,c=(f=>vh(f)&&f)(i||document.documentElement);c&&e.root.value.classList.add("v-overlay--scroll-blocked"),o.forEach((f,m)=>{f.style.setProperty("--v-body-scroll-x",Vt(-f.scrollLeft)),f.style.setProperty("--v-body-scroll-y",Vt(-f.scrollTop)),f!==document.documentElement&&f.style.setProperty("--v-scrollbar-offset",Vt(a)),f.classList.add("v-overlay-scroll-blocked")}),Ds(()=>{o.forEach((f,m)=>{const p=parseFloat(f.style.getPropertyValue("--v-body-scroll-x")),v=parseFloat(f.style.getPropertyValue("--v-body-scroll-y"));f.style.removeProperty("--v-body-scroll-x"),f.style.removeProperty("--v-body-scroll-y"),f.style.removeProperty("--v-scrollbar-offset"),f.classList.remove("v-overlay-scroll-blocked"),f.scrollLeft=-p,f.scrollTop=-v}),c&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function FE(e,n,i){let o=!1,a=-1,c=-1;function u(f){kE(()=>{var v,y;const m=performance.now();(y=(v=e.updateLocation).value)==null||y.call(v,f),o=(performance.now()-m)/(1e3/60)>2})}c=(typeof requestIdleCallback>"u"?f=>f():requestIdleCallback)(()=>{i.run(()=>{dv(e.activatorEl.value??e.contentEl.value,f=>{o?(cancelAnimationFrame(a),a=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{u(f)})})):u(f)})})}),Ds(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(c),cancelAnimationFrame(a)})}function dv(e,n){const i=[document,...Qa(e)];i.forEach(o=>{o.addEventListener("scroll",n,{passive:!0})}),Ds(()=>{i.forEach(o=>{o.removeEventListener("scroll",n)})})}const DE=Symbol.for("vuetify:v-menu"),LE=bt({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function OE(e,n){const i={},o=a=>()=>{if(!Ge)return Promise.resolve(!0);const c=a==="openDelay";return i.closeDelay&&window.clearTimeout(i.closeDelay),delete i.closeDelay,i.openDelay&&window.clearTimeout(i.openDelay),delete i.openDelay,new Promise(u=>{const f=parseInt(e[a]??0,10);i[a]=window.setTimeout(()=>{n==null||n(c),u(c)},f)})};return{runCloseDelay:o("closeDelay"),runOpenDelay:o("openDelay")}}const VE=bt({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...LE()},"VOverlay-activator");function zE(e,n){let{isActive:i,isTop:o}=n;const a=Ft();let c=!1,u=!1,f=!0;const m=L(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),p=L(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!m.value),{runOpenDelay:v,runCloseDelay:y}=OE(e,O=>{O===(e.openOnHover&&c||m.value&&u)&&!(e.openOnHover&&i.value&&!o.value)&&(i.value!==O&&(f=!0),i.value=O)}),w={onClick:O=>{O.stopPropagation(),a.value=O.currentTarget||O.target,i.value=!i.value},onMouseenter:O=>{var W;(W=O.sourceCapabilities)!=null&&W.firesTouchEvents||(c=!0,a.value=O.currentTarget||O.target,v())},onMouseleave:O=>{c=!1,y()},onFocus:O=>{fu&&!O.target.matches(":focus-visible")||(u=!0,O.stopPropagation(),a.value=O.currentTarget||O.target,v())},onBlur:O=>{u=!1,O.stopPropagation(),y()}},C=L(()=>{const O={};return p.value&&(O.onClick=w.onClick),e.openOnHover&&(O.onMouseenter=w.onMouseenter,O.onMouseleave=w.onMouseleave),m.value&&(O.onFocus=w.onFocus,O.onBlur=w.onBlur),O}),E=L(()=>{const O={};if(e.openOnHover&&(O.onMouseenter=()=>{c=!0,v()},O.onMouseleave=()=>{c=!1,y()}),m.value&&(O.onFocusin=()=>{u=!0,v()},O.onFocusout=()=>{u=!1,y()}),e.closeOnContentClick){const W=pe(DE,null);O.onClick=()=>{i.value=!1,W==null||W.closeParents()}}return O}),P=L(()=>{const O={};return e.openOnHover&&(O.onMouseenter=()=>{f&&(c=!0,f=!1,v())},O.onMouseleave=()=>{c=!1,y()}),O});jt(o,O=>{O&&(e.openOnHover&&!c&&(!m.value||!u)||m.value&&!u&&(!e.openOnHover||!c))&&(i.value=!1)});const k=Ft();nn(()=>{k.value&&ws(()=>{a.value=uu(k.value)})});const R=fs("useActivator");let B;return jt(()=>!!e.activator,O=>{O&&Ge?(B=jo(),B.run(()=>{NE(e,R,{activatorEl:a,activatorEvents:C})})):B&&B.stop()},{flush:"post",immediate:!0}),Ds(()=>{B==null||B.stop()}),{activatorEl:a,activatorRef:k,activatorEvents:C,contentEvents:E,scrimEvents:P}}function NE(e,n,i){let{activatorEl:o,activatorEvents:a}=i;jt(()=>e.activator,(m,p)=>{if(p&&m!==p){const v=f(p);v&&u(v)}m&&ws(()=>c())},{immediate:!0}),jt(()=>e.activatorProps,()=>{c()}),Ds(()=>{u()});function c(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;m&&Uw(m,ye(a.value,p))}function u(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f(),p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;m&&Hw(m,ye(a.value,p))}function f(){var v,y;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator,p;if(m)if(m==="parent"){let w=(y=(v=n==null?void 0:n.proxy)==null?void 0:v.$el)==null?void 0:y.parentNode;for(;w.hasAttribute("data-no-activator");)w=w.parentNode;p=w}else typeof m=="string"?p=document.querySelector(m):"$el"in m?p=m.$el:p=m;return o.value=(p==null?void 0:p.nodeType)===Node.ELEMENT_NODE?p:null,o.value}}function UE(){if(!Ge)return Zt(!1);const{ssr:e}=BC();if(e){const n=Zt(!1);return Vi(()=>{n.value=!0}),n}else return Zt(!0)}const fv=bt({eager:Boolean},"lazy");function gv(e,n){const i=Zt(!1),o=L(()=>i.value||e.eager||n.value);jt(n,()=>i.value=!0);function a(){e.eager||(i.value=!1)}return{isBooted:i,hasContent:o,onAfterLeave:a}}function Oh(){const n=fs("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const Zg=Symbol.for("vuetify:stack"),po=ls([]);function HE(e,n,i){const o=fs("useStack"),a=!i,c=pe(Zg,void 0),u=ls({activeChildren:new Set});ts(Zg,u);const f=Zt(+n.value);Tn(e,()=>{var y;const v=(y=po.at(-1))==null?void 0:y[1];f.value=v?v+10:+n.value,a&&po.push([o.uid,f.value]),c==null||c.activeChildren.add(o.uid),Ds(()=>{if(a){const w=Kt(po).findIndex(C=>C[0]===o.uid);po.splice(w,1)}c==null||c.activeChildren.delete(o.uid)})});const m=Zt(!0);a&&nn(()=>{var y;const v=((y=po.at(-1))==null?void 0:y[0])===o.uid;setTimeout(()=>m.value=v)});const p=L(()=>!u.activeChildren.size);return{globalTop:Xo(m),localTop:p,stackStyles:L(()=>({zIndex:f.value}))}}function $E(e){return{teleportTarget:L(()=>{const i=e.value;if(i===!0||!Ge)return;const o=i===!1?document.body:typeof i=="string"?document.querySelector(i):i;if(o==null)return;let a=o.querySelector(":scope > .v-overlay-container");return a||(a=document.createElement("div"),a.className="v-overlay-container",o.appendChild(a)),a})}}function WE(){return!0}function mv(e,n,i){if(!e||pv(e,i)===!1)return!1;const o=Yp(n);if(typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&o.host===e.target)return!1;const a=(typeof i.value=="object"&&i.value.include||(()=>[]))();return a.push(n),!a.some(c=>c==null?void 0:c.contains(e.target))}function pv(e,n){return(typeof n.value=="object"&&n.value.closeConditional||WE)(e)}function GE(e,n,i){const o=typeof i.value=="function"?i.value:i.value.handler;n._clickOutside.lastMousedownWasOutside&&mv(e,n,i)&&setTimeout(()=>{pv(e,i)&&o&&o(e)},0)}function Kg(e,n){const i=Yp(e);n(document),typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&n(i)}const jE={mounted(e,n){const i=a=>GE(a,e,n),o=a=>{e._clickOutside.lastMousedownWasOutside=mv(a,e,n)};Kg(e,a=>{a.addEventListener("click",i,!0),a.addEventListener("mousedown",o,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[n.instance.$.uid]={onClick:i,onMousedown:o}},unmounted(e,n){e._clickOutside&&(Kg(e,i=>{var c;if(!i||!((c=e._clickOutside)!=null&&c[n.instance.$.uid]))return;const{onClick:o,onMousedown:a}=e._clickOutside[n.instance.$.uid];i.removeEventListener("click",o,!0),i.removeEventListener("mousedown",a,!0)}),delete e._clickOutside[n.instance.$.uid])}};function XE(e){const{modelValue:n,color:i,...o}=e;return x(tn,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&x("div",ye({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},o),null)]})}const Vh=bt({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...VE(),...ie(),...In(),...fv(),...SE(),...IE(),...Me(),...Ch()},"VOverlay"),hl=zt()({name:"VOverlay",directives:{ClickOutside:jE},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...Vh()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterLeave:()=>!0},setup(e,n){let{slots:i,attrs:o,emit:a}=n;const c=es(e,"modelValue"),u=L({get:()=>c.value,set:Rt=>{Rt&&e.disabled||(c.value=Rt)}}),{teleportTarget:f}=$E(L(()=>e.attach||e.contained)),{themeClasses:m}=He(e),{rtlClasses:p,isRtl:v}=js(),{hasContent:y,onAfterLeave:w}=gv(e,u),C=Li(L(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:E,localTop:P,stackStyles:k}=HE(u,Lt(e,"zIndex"),e._disableGlobalStack),{activatorEl:R,activatorRef:B,activatorEvents:O,contentEvents:W,scrimEvents:G}=zE(e,{isActive:u,isTop:P}),{dimensionStyles:X}=Rn(e),st=UE(),{scopeId:N}=Oh();jt(()=>e.disabled,Rt=>{Rt&&(u.value=!1)});const $=Ft(),Y=Ft(),{contentStyles:it,updateLocation:U}=EE(e,{isRtl:v,contentEl:Y,activatorEl:R,isActive:u});RE(e,{root:$,contentEl:Y,activatorEl:R,isActive:u,updateLocation:U});function q(Rt){a("click:outside",Rt),e.persistent?ut():u.value=!1}function Q(){return u.value&&E.value}Ge&&jt(u,Rt=>{Rt?window.addEventListener("keydown",rt):window.removeEventListener("keydown",rt)},{immediate:!0});function rt(Rt){var te,Jt;Rt.key==="Escape"&&E.value&&(e.persistent?ut():(u.value=!1,(te=Y.value)!=null&&te.contains(document.activeElement)&&((Jt=R.value)==null||Jt.focus())))}const dt=mC();Tn(()=>e.closeOnBack,()=>{pC(dt,Rt=>{E.value&&u.value?(Rt(!1),e.persistent?ut():u.value=!1):Rt()})});const At=Ft();jt(()=>u.value&&(e.absolute||e.contained)&&f.value==null,Rt=>{if(Rt){const te=lx($.value);te&&te!==document.scrollingElement&&(At.value=te.scrollTop)}});function ut(){e.noClickAnimation||Y.value&&wo(Y.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:du})}return Qt(()=>{var Rt;return x(Re,null,[(Rt=i.activator)==null?void 0:Rt.call(i,{isActive:u.value,props:ye({ref:B},O.value,e.activatorProps)}),st.value&&x(O0,{disabled:!f.value,to:f.value},{default:()=>[y.value&&x("div",ye({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":u.value,"v-overlay--contained":e.contained},m.value,p.value,e.class],style:[k.value,{top:Vt(At.value)},e.style],ref:$},N,o),[x(XE,ye({color:C,modelValue:u.value&&!!e.scrim},G.value),null),x(xn,{appear:!0,persisted:!0,transition:e.transition,target:R.value,onAfterLeave:()=>{w(),a("afterLeave")}},{default:()=>{var te;return[ys(x("div",ye({ref:Y,class:["v-overlay__content",e.contentClass],style:[X.value,it.value]},W.value,e.contentProps),[(te=i.default)==null?void 0:te.call(i,{isActive:u})]),[[Wr,u.value],[Di("click-outside"),{handler:q,closeConditional:Q,include:()=>[R.value]}]])]}})])]})])}),{activatorEl:R,animateClick:ut,contentEl:Y,globalTop:E,localTop:P,updateLocation:U}}}),Hc=Symbol("Forwarded refs");function $c(e,n){let i=e;for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,n);if(o)return o;i=Object.getPrototypeOf(i)}}function _v(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return e[Hc]=i,new Proxy(e,{get(a,c){if(Reflect.has(a,c))return Reflect.get(a,c);if(!(typeof c=="symbol"||c.startsWith("__"))){for(const u of i)if(u.value&&Reflect.has(u.value,c)){const f=Reflect.get(u.value,c);return typeof f=="function"?f.bind(u.value):f}}},has(a,c){if(Reflect.has(a,c))return!0;if(typeof c=="symbol"||c.startsWith("__"))return!1;for(const u of i)if(u.value&&Reflect.has(u.value,c))return!0;return!1},getOwnPropertyDescriptor(a,c){var f;const u=Reflect.getOwnPropertyDescriptor(a,c);if(u)return u;if(!(typeof c=="symbol"||c.startsWith("__"))){for(const m of i){if(!m.value)continue;const p=$c(m.value,c)??("_"in m.value?$c((f=m.value._)==null?void 0:f.setupState,c):void 0);if(p)return p}for(const m of i){const p=m.value&&m.value[Hc];if(!p)continue;const v=p.slice();for(;v.length;){const y=v.shift(),w=$c(y.value,c);if(w)return w;const C=y.value&&y.value[Hc];C&&v.push(...C)}}}}})}const YE=bt({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Vh({origin:"center center",scrollStrategy:"block",transition:{component:Vx},zIndex:2400})},"VDialog"),Qg=zt()({name:"VDialog",props:YE(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const o=es(e,"modelValue"),{scopeId:a}=Oh(),c=Ft();function u(m){var y,w;const p=m.relatedTarget,v=m.target;if(p!==v&&((y=c.value)!=null&&y.contentEl)&&((w=c.value)!=null&&w.globalTop)&&![document,c.value.contentEl].includes(v)&&!c.value.contentEl.contains(v)){const C=Np(c.value.contentEl);if(!C.length)return;const E=C[0],P=C[C.length-1];p===E?P.focus():E.focus()}}Ge&&jt(()=>o.value&&e.retainFocus,m=>{m?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0}),jt(o,async m=>{var p,v;await ws(),m?(p=c.value.contentEl)==null||p.focus({preventScroll:!0}):(v=c.value.activatorEl)==null||v.focus({preventScroll:!0})});const f=L(()=>ye({"aria-haspopup":"dialog","aria-expanded":String(o.value)},e.activatorProps));return Qt(()=>{const[m]=hl.filterProps(e);return x(hl,ye({ref:c,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},m,{modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,"aria-modal":"true",activatorProps:f.value,role:"dialog"},a),{activator:i.activator,default:function(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return x(Ye,{root:"VDialog"},{default:()=>{var w;return[(w=i.default)==null?void 0:w.call(i,...v)]}})}})}),_v({},c)}});const qE=bt({scrollable:Boolean,...ie(),...Se({tag:"main"})},"VMain"),ZE=zt()({name:"VMain",props:qE(),setup(e,n){let{slots:i}=n;const{mainStyles:o}=hE(),{ssrBootStyles:a}=zl();return Qt(()=>x(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,a.value,e.style]},{default:()=>{var c,u;return[e.scrollable?x("div",{class:"v-main__scroller"},[(c=i.default)==null?void 0:c.call(i)]):(u=i.default)==null?void 0:u.call(i)]}})),{}}});const KE=bt({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...Zo({location:"bottom"}),...Ml(),...Os(),...cn(),...Me(),...Ow(Vh({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),QE=zt()({name:"VSnackbar",props:KE(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const o=es(e,"modelValue"),{locationStyles:a}=Ko(e),{positionClasses:c}=Bl(e),{scopeId:u}=Oh(),{themeClasses:f}=He(e),{colorClasses:m,colorStyles:p,variantClasses:v}=Zr(e),{roundedClasses:y}=Ys(e),w=Ft();jt(o,E),jt(()=>e.timeout,E),Vi(()=>{o.value&&E()});let C=-1;function E(){window.clearTimeout(C);const k=Number(e.timeout);!o.value||k===-1||(C=window.setTimeout(()=>{o.value=!1},k))}function P(){window.clearTimeout(C)}return Qt(()=>{const[k]=hl.filterProps(e);return x(hl,ye({ref:w,class:["v-snackbar",{"v-snackbar--active":o.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--vertical":e.vertical},c.value,e.class],style:e.style},k,{modelValue:o.value,"onUpdate:modelValue":R=>o.value=R,contentProps:ye({class:["v-snackbar__wrapper",f.value,m.value,y.value,v.value],style:[a.value,p.value],onPointerenter:P,onPointerleave:E},k.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},u),{default:()=>[qr(!1,"v-snackbar"),i.default&&x("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[i.default()]),i.actions&&x(Ye,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[x("div",{class:"v-snackbar__actions"},[i.actions()])]})],activator:i.activator})}),_v({},w)}});const JE=e=>{const{touchstartX:n,touchendX:i,touchstartY:o,touchendY:a}=e,c=.5,u=16;e.offsetX=i-n,e.offsetY=a-o,Math.abs(e.offsetY)<c*Math.abs(e.offsetX)&&(e.left&&i<n-u&&e.left(e),e.right&&i>n+u&&e.right(e)),Math.abs(e.offsetX)<c*Math.abs(e.offsetY)&&(e.up&&a<o-u&&e.up(e),e.down&&a>o+u&&e.down(e))};function tA(e,n){var o;const i=e.changedTouches[0];n.touchstartX=i.clientX,n.touchstartY=i.clientY,(o=n.start)==null||o.call(n,{originalEvent:e,...n})}function eA(e,n){var o;const i=e.changedTouches[0];n.touchendX=i.clientX,n.touchendY=i.clientY,(o=n.end)==null||o.call(n,{originalEvent:e,...n}),JE(n)}function sA(e,n){var o;const i=e.changedTouches[0];n.touchmoveX=i.clientX,n.touchmoveY=i.clientY,(o=n.move)==null||o.call(n,{originalEvent:e,...n})}function iA(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:i=>tA(i,n),touchend:i=>eA(i,n),touchmove:i=>sA(i,n)}}function nA(e,n){var f;const i=n.value,o=i!=null&&i.parent?e.parentElement:e,a=(i==null?void 0:i.options)??{passive:!0},c=(f=n.instance)==null?void 0:f.$.uid;if(!o||!c)return;const u=iA(n.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[c]=u,Dp(u).forEach(m=>{o.addEventListener(m,u[m],a)})}function rA(e,n){var c,u;const i=(c=n.value)!=null&&c.parent?e.parentElement:e,o=(u=n.instance)==null?void 0:u.$.uid;if(!(i!=null&&i._touchHandlers)||!o)return;const a=i._touchHandlers[o];Dp(a).forEach(f=>{i.removeEventListener(f,a[f])}),delete i._touchHandlers[o]}const vv={mounted:nA,unmounted:rA},oA=vv,yv=Symbol.for("vuetify:v-window"),bv=Symbol.for("vuetify:v-window-group"),aA=bt({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...ie(),...Se(),...Me()},"VWindow"),lA=zt()({name:"VWindow",directives:{Touch:vv},props:aA(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:i}=n;const{themeClasses:o}=He(e),{isRtl:a}=js(),{t:c}=wh(),u=Rl(e,bv),f=Ft(),m=L(()=>a.value?!e.reverse:e.reverse),p=Zt(!1),v=L(()=>{const W=e.direction==="vertical"?"y":"x",X=(m.value?!p.value:p.value)?"-reverse":"";return`v-window-${W}${X}-transition`}),y=Zt(0),w=Ft(void 0),C=L(()=>u.items.value.findIndex(W=>u.selected.value.includes(W.id)));jt(C,(W,G)=>{const X=u.items.value.length,st=X-1;X<=2?p.value=W<G:W===st&&G===0?p.value=!0:W===0&&G===st?p.value=!1:p.value=W<G}),ts(yv,{transition:v,isReversed:p,transitionCount:y,transitionHeight:w,rootRef:f});const E=L(()=>e.continuous||C.value!==0),P=L(()=>e.continuous||C.value!==u.items.value.length-1);function k(){E.value&&u.prev()}function R(){P.value&&u.next()}const B=L(()=>{const W=[],G={icon:a.value?e.nextIcon:e.prevIcon,class:`v-window__${m.value?"right":"left"}`,onClick:u.prev,ariaLabel:c("$vuetify.carousel.prev")};W.push(E.value?i.prev?i.prev({props:G}):x(we,G,null):x("div",null,null));const X={icon:a.value?e.prevIcon:e.nextIcon,class:`v-window__${m.value?"left":"right"}`,onClick:u.next,ariaLabel:c("$vuetify.carousel.next")};return W.push(P.value?i.next?i.next({props:X}):x(we,X,null):x("div",null,null)),W}),O=L(()=>e.touch===!1?e.touch:{...{left:()=>{m.value?k():R()},right:()=>{m.value?R():k()},start:G=>{let{originalEvent:X}=G;X.stopPropagation()}},...e.touch===!0?{}:e.touch});return Qt(()=>ys(x(e.tag,{ref:f,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var W,G;return[x("div",{class:"v-window__container",style:{height:w.value}},[(W=i.default)==null?void 0:W.call(i,{group:u}),e.showArrows!==!1&&x("div",{class:"v-window__controls"},[B.value])]),(G=i.additional)==null?void 0:G.call(i,{group:u})]}}),[[Di("touch"),O.value]])),{group:u}}}),cA=bt({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ie(),...kl(),...fv()},"VWindowItem"),_o=zt()({name:"VWindowItem",directives:{Touch:oA},props:cA(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:i}=n;const o=pe(yv),a=Il(e,bv),{isBooted:c}=zl();if(!o||!a)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=Zt(!1),f=L(()=>c.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function m(){!u.value||!o||(u.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function p(){var E;u.value||!o||(u.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Vt((E=o.rootRef.value)==null?void 0:E.clientHeight)),o.transitionCount.value+=1)}function v(){m()}function y(E){u.value&&ws(()=>{!f.value||!u.value||!o||(o.transitionHeight.value=Vt(E.clientHeight))})}const w=L(()=>{const E=o.isReversed.value?e.reverseTransition:e.transition;return f.value?{name:typeof E!="string"?o.transition.value:E,onBeforeEnter:p,onAfterEnter:m,onEnterCancelled:v,onBeforeLeave:p,onAfterLeave:m,onLeaveCancelled:v,onEnter:y}:!1}),{hasContent:C}=gv(e,a.isSelected);return Qt(()=>x(xn,{transition:w.value,disabled:!c.value},{default:()=>{var E;return[ys(x("div",{class:["v-window-item",a.selectedClass.value,e.class],style:e.style},[C.value&&((E=i.default)==null?void 0:E.call(i))]),[[Wr,a.isSelected.value]])]}})),{}}}),uA=ii({__name:"App",setup(e){const{currentPage:n,detailsOpen:i,settingsOpen:o}=si(on()),a=Ft(!1),c=Ft(!1);return jt(o,u=>{u||(a.value=!0,c.value=!1)}),(u,f)=>(me(),Ie(pE,null,{default:j(()=>[x(xE,{elevation:2,color:"primary"},{default:j(()=>[x(cv,{class:"pointer",onClick:f[0]||(f[0]=()=>{n.value=xt(Ws).WELCOME})},{default:j(()=>[mt("Potato Matching Game")]),_:1}),x(Ms),x(we,{icon:"",onClick:f[1]||(f[1]=m=>i.value=!xt(i)),title:"More information"},{default:j(()=>[x(We,null,{default:j(()=>[mt("mdi-information-outline")]),_:1})]),_:1}),x(we,{icon:"",onClick:f[2]||(f[2]=m=>o.value=!xt(o)),title:"Change settings"},{default:j(()=>[xt(o)?(me(),Ie(We,{key:1},{default:j(()=>[mt("mdi-cog")]),_:1})):(me(),Ie(We,{key:0},{default:j(()=>[mt("mdi-cog-outline")]),_:1}))]),_:1})]),_:1}),x(ZE,{class:"bg-secondary"},{default:j(()=>[x(Qg,{transition:"dialog-top-transition",width:"auto",modelValue:xt(o),"onUpdate:modelValue":f[4]||(f[4]=m=>re(o)?o.value=m:null)},{default:j(()=>[x(bS,{onChanged:f[3]||(f[3]=()=>c.value=!0)})]),_:1},8,["modelValue"]),x(Qg,{transition:"dialog-top-transition",width:"auto",modelValue:xt(i),"onUpdate:modelValue":f[5]||(f[5]=m=>re(i)?i.value=m:null)},{default:j(()=>[x(nE)]),_:1},8,["modelValue"]),x(vu,{class:"pa-2"},{default:j(()=>[x(Ll,null,{default:j(()=>[x(Vl,{class:"d-flex justify-center w-100"},{default:j(()=>[x(or,{cols:"12",md:"8",lg:"6",xl:"4"},{default:j(()=>[x(lA,{direction:"vertical",modelValue:xt(n),"onUpdate:modelValue":f[6]||(f[6]=m=>re(n)?n.value=m:null),class:"w-100"},{default:j(()=>[x(_o,{value:xt(Ws).WELCOME},{default:j(()=>[x(G1)]),_:1},8,["value"]),x(_o,{value:xt(Ws).MODE},{default:j(()=>[x(lE)]),_:1},8,["value"]),x(_o,{value:xt(Ws).DIFFICULTY},{default:j(()=>[x(q1)]),_:1},8,["value"]),x(_o,{value:xt(Ws).CONSENT},{default:j(()=>[x(FS)]),_:1},8,["value"]),x(_o,{value:xt(Ws).GAME},{default:j(()=>[x(H1)]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),x(QE,{color:"success",variant:"elevated",modelValue:a.value,"onUpdate:modelValue":f[7]||(f[7]=m=>a.value=m),"close-on-content-click":!0,location:"top"},{default:j(()=>[mt("Settings saved")]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});const hA=Fh(uA,[["__scopeId","data-v-c0e99f42"]]),dA="modulepreload",fA=function(e){return"/boop-boop/"+e},Jg={},Fu=function(n,i,o){if(!i||i.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(i.map(c=>{if(c=fA(c),c in Jg)return;Jg[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!o)for(let v=a.length-1;v>=0;v--){const y=a[v];if(y.href===c&&(!u||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":dA,u||(p.as="script",p.crossOrigin=""),p.href=c,document.head.appendChild(p),u)return new Promise((v,y)=>{p.addEventListener("load",v),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>n()).catch(c=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c})};async function gA(){(await Fu(()=>import("./webfontloader-523643f5.js").then(n=>n.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const Du={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function mA(e,n){const i=[];let o=[];const a=wv(e),c=xv(e),u=a.getDay()-Du[n.slice(-2).toUpperCase()],f=c.getDay()-Du[n.slice(-2).toUpperCase()];for(let m=0;m<u;m++){const p=new Date(a);p.setDate(p.getDate()-(u-m)),o.push(p)}for(let m=1;m<=c.getDate();m++){const p=new Date(e.getFullYear(),e.getMonth(),m);o.push(p),o.length===7&&(i.push(o),o=[])}for(let m=1;m<7-f;m++){const p=new Date(c);p.setDate(p.getDate()+m),o.push(p)}return i.push(o),i}function wv(e){return new Date(e.getFullYear(),e.getMonth(),1)}function xv(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function pA(e){if(e==null)return new Date;if(e instanceof Date)return e;if(typeof e=="string"){const n=Date.parse(e);if(!isNaN(n))return new Date(n)}return null}const tm=new Date(2e3,0,2);function _A(e){const n=Du[e.slice(-2).toUpperCase()];return fh(7).map(i=>{const o=new Date(tm);return o.setDate(tm.getDate()+n+i),new Intl.DateTimeFormat(e,{weekday:"short"}).format(o)})}function vA(e,n,i){const o=new Date(e);let a={};switch(n){case"fullDateWithWeekday":a={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":a={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":a={};break;case"monthAndDate":a={month:"long",day:"numeric"};break;case"monthAndYear":a={month:"long",year:"numeric"};break;case"dayOfMonth":a={day:"numeric"};break;default:a={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(i,a).format(o)}function yA(e,n){const i=new Date(e);return i.setDate(i.getDate()+n),i}function bA(e,n){const i=new Date(e);return i.setMonth(i.getMonth()+n),i}function wA(e){return e.getFullYear()}function xA(e){return e.getMonth()}function CA(e){return new Date(e.getFullYear(),0,1)}function SA(e){return new Date(e.getFullYear(),11,31)}function EA(e,n){return Lu(e,n[0])&&TA(e,n[1])}function AA(e){const n=new Date(e);return n instanceof Date&&!isNaN(n.getTime())}function Lu(e,n){return e.getTime()>n.getTime()}function TA(e,n){return e.getTime()<n.getTime()}function em(e,n){return e.getTime()===n.getTime()}function PA(e,n){return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function kA(e,n){return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}function IA(e,n,i){const o=new Date(e),a=new Date(n);return i==="month"?o.getMonth()-a.getMonth()+(o.getFullYear()-a.getFullYear())*12:Math.floor((o.getTime()-a.getTime())/(1e3*60*60*24))}function RA(e,n){const i=new Date(e);return i.setFullYear(n),i}class MA{constructor(n){this.locale=n.locale}date(n){return pA(n)}toJsDate(n){return n}addDays(n,i){return yA(n,i)}addMonths(n,i){return bA(n,i)}getWeekArray(n){return mA(n,this.locale)}startOfMonth(n){return wv(n)}endOfMonth(n){return xv(n)}format(n,i){return vA(n,i,this.locale)}isEqual(n,i){return em(n,i)}isValid(n){return AA(n)}isWithinRange(n,i){return EA(n,i)}isAfter(n,i){return Lu(n,i)}isBefore(n,i){return!Lu(n,i)&&!em(n,i)}isSameDay(n,i){return PA(n,i)}isSameMonth(n,i){return kA(n,i)}setYear(n,i){return RA(n,i)}getDiff(n,i,o){return IA(n,i,o)}getWeekdays(){return _A(this.locale)}getYear(n){return wA(n)}getMonth(n){return xA(n)}startOfYear(n){return CA(n)}endOfYear(n){return SA(n)}}const sm=Symbol.for("vuetify:date-adapter");function BA(e){return Qs({adapter:MA,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"nn-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},e)}function Cv(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,...i}=e,o=Qs(n,i),{aliases:a={},components:c={},directives:u={}}=o,f=ix(o.defaults),m=MC(o.display,o.ssr),p=Tx(o.theme),v=px(o.icons),y=Bx(o.locale),w=BA(o.date);return{install:E=>{for(const P in u)E.directive(P,u[P]);for(const P in c)E.component(P,c[P]);for(const P in a)E.component(P,Gr({...a[P],name:P,aliasName:a[P].name}));if(p.install(E),E.provide(Uo,f),E.provide(yu,m),E.provide(Ja,p),E.provide(gu,v),E.provide(tl,y),E.provide(sm,w),Ge&&o.ssr)if(E.$nuxt)E.$nuxt.hook("app:suspense:resolve",()=>{m.update()});else{const{mount:P}=E;E.mount=function(){const k=P(...arguments);return ws(()=>m.update()),E.mount=P,k}}Ni.reset(),E.mixin({computed:{$vuetify(){return ls({defaults:Er.call(this,Uo),display:Er.call(this,yu),theme:Er.call(this,Ja),icons:Er.call(this,gu),locale:Er.call(this,tl),date:Er.call(this,sm)})}}})},defaults:f,display:m,theme:p,icons:v,locale:y,date:w}}const FA="3.3.7";Cv.version=FA;function Er(e){var o,a;const n=this.$,i=((o=n.parent)==null?void 0:o.provides)??((a=n.vnode.appContext)==null?void 0:a.provides);if(i&&e in i)return i[e]}const DA=Cv({theme:{themes:{light:{dark:!1,colors:{primary:"#2185d0",secondary:"#FFFFFF"}},dark:{dark:!0,colors:{primary:"#FFFFFF",secondary:"#2185d0"}}}}});/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ar=typeof window<"u";function LA(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const _e=Object.assign;function Wc(e,n){const i={};for(const o in n){const a=n[o];i[o]=pi(a)?a.map(e):e(a)}return i}const ko=()=>{},pi=Array.isArray,OA=/\/$/,VA=e=>e.replace(OA,"");function Gc(e,n,i="/"){let o,a={},c="",u="";const f=n.indexOf("#");let m=n.indexOf("?");return f<m&&f>=0&&(m=-1),m>-1&&(o=n.slice(0,m),c=n.slice(m+1,f>-1?f:n.length),a=e(c)),f>-1&&(o=o||n.slice(0,f),u=n.slice(f,n.length)),o=HA(o??n,i),{fullPath:o+(c&&"?")+c+u,path:o,query:a,hash:u}}function zA(e,n){const i=n.query?e(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function im(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function NA(e,n,i){const o=n.matched.length-1,a=i.matched.length-1;return o>-1&&o===a&&zr(n.matched[o],i.matched[a])&&Sv(n.params,i.params)&&e(n.query)===e(i.query)&&n.hash===i.hash}function zr(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Sv(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(!UA(e[i],n[i]))return!1;return!0}function UA(e,n){return pi(e)?nm(e,n):pi(n)?nm(n,e):e===n}function nm(e,n){return pi(n)?e.length===n.length&&e.every((i,o)=>i===n[o]):e.length===1&&e[0]===n}function HA(e,n){if(e.startsWith("/"))return e;if(!e)return n;const i=n.split("/"),o=e.split("/"),a=o[o.length-1];(a===".."||a===".")&&o.push("");let c=i.length-1,u,f;for(u=0;u<o.length;u++)if(f=o[u],f!==".")if(f==="..")c>1&&c--;else break;return i.slice(0,c).join("/")+"/"+o.slice(u-(u===o.length?1:0)).join("/")}var Go;(function(e){e.pop="pop",e.push="push"})(Go||(Go={}));var Io;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Io||(Io={}));function $A(e){if(!e)if(Ar){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),VA(e)}const WA=/^[^#]+#/;function GA(e,n){return e.replace(WA,"#")+n}function jA(e,n){const i=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:n.behavior,left:o.left-i.left-(n.left||0),top:o.top-i.top-(n.top||0)}}const Wl=()=>({left:window.pageXOffset,top:window.pageYOffset});function XA(e){let n;if("el"in e){const i=e.el,o=typeof i=="string"&&i.startsWith("#"),a=typeof i=="string"?o?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!a)return;n=jA(a,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function rm(e,n){return(history.state?history.state.position-n:-1)+e}const Ou=new Map;function YA(e,n){Ou.set(e,n)}function qA(e){const n=Ou.get(e);return Ou.delete(e),n}let ZA=()=>location.protocol+"//"+location.host;function Ev(e,n){const{pathname:i,search:o,hash:a}=n,c=e.indexOf("#");if(c>-1){let f=a.includes(e.slice(c))?e.slice(c).length:1,m=a.slice(f);return m[0]!=="/"&&(m="/"+m),im(m,"")}return im(i,e)+o+a}function KA(e,n,i,o){let a=[],c=[],u=null;const f=({state:w})=>{const C=Ev(e,location),E=i.value,P=n.value;let k=0;if(w){if(i.value=C,n.value=w,u&&u===E){u=null;return}k=P?w.position-P.position:0}else o(C);a.forEach(R=>{R(i.value,E,{delta:k,type:Go.pop,direction:k?k>0?Io.forward:Io.back:Io.unknown})})};function m(){u=i.value}function p(w){a.push(w);const C=()=>{const E=a.indexOf(w);E>-1&&a.splice(E,1)};return c.push(C),C}function v(){const{history:w}=window;w.state&&w.replaceState(_e({},w.state,{scroll:Wl()}),"")}function y(){for(const w of c)w();c=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:m,listen:p,destroy:y}}function om(e,n,i,o=!1,a=!1){return{back:e,current:n,forward:i,replaced:o,position:window.history.length,scroll:a?Wl():null}}function QA(e){const{history:n,location:i}=window,o={value:Ev(e,i)},a={value:n.state};a.value||c(o.value,{back:null,current:o.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function c(m,p,v){const y=e.indexOf("#"),w=y>-1?(i.host&&document.querySelector("base")?e:e.slice(y))+m:ZA()+e+m;try{n[v?"replaceState":"pushState"](p,"",w),a.value=p}catch(C){console.error(C),i[v?"replace":"assign"](w)}}function u(m,p){const v=_e({},n.state,om(a.value.back,m,a.value.forward,!0),p,{position:a.value.position});c(m,v,!0),o.value=m}function f(m,p){const v=_e({},a.value,n.state,{forward:m,scroll:Wl()});c(v.current,v,!0);const y=_e({},om(o.value,m,null),{position:v.position+1},p);c(m,y,!1),o.value=m}return{location:o,state:a,push:f,replace:u}}function JA(e){e=$A(e);const n=QA(e),i=KA(e,n.state,n.location,n.replace);function o(c,u=!0){u||i.pauseListeners(),history.go(c)}const a=_e({location:"",base:e,go:o,createHref:GA.bind(null,e)},n,i);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>n.state.value}),a}function tT(e){return typeof e=="string"||e&&typeof e=="object"}function Av(e){return typeof e=="string"||typeof e=="symbol"}const pn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Tv=Symbol("");var am;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(am||(am={}));function Nr(e,n){return _e(new Error,{type:e,[Tv]:!0},n)}function Xi(e,n){return e instanceof Error&&Tv in e&&(n==null||!!(e.type&n))}const lm="[^/]+?",eT={sensitive:!1,strict:!1,start:!0,end:!0},sT=/[.+*?^${}()[\]/\\]/g;function iT(e,n){const i=_e({},eT,n),o=[];let a=i.start?"^":"";const c=[];for(const p of e){const v=p.length?[]:[90];i.strict&&!p.length&&(a+="/");for(let y=0;y<p.length;y++){const w=p[y];let C=40+(i.sensitive?.25:0);if(w.type===0)y||(a+="/"),a+=w.value.replace(sT,"\\$&"),C+=40;else if(w.type===1){const{value:E,repeatable:P,optional:k,regexp:R}=w;c.push({name:E,repeatable:P,optional:k});const B=R||lm;if(B!==lm){C+=10;try{new RegExp(`(${B})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${E}" (${B}): `+W.message)}}let O=P?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;y||(O=k&&p.length<2?`(?:/${O})`:"/"+O),k&&(O+="?"),a+=O,C+=20,k&&(C+=-8),P&&(C+=-20),B===".*"&&(C+=-50)}v.push(C)}o.push(v)}if(i.strict&&i.end){const p=o.length-1;o[p][o[p].length-1]+=.7000000000000001}i.strict||(a+="/?"),i.end?a+="$":i.strict&&(a+="(?:/|$)");const u=new RegExp(a,i.sensitive?"":"i");function f(p){const v=p.match(u),y={};if(!v)return null;for(let w=1;w<v.length;w++){const C=v[w]||"",E=c[w-1];y[E.name]=C&&E.repeatable?C.split("/"):C}return y}function m(p){let v="",y=!1;for(const w of e){(!y||!v.endsWith("/"))&&(v+="/"),y=!1;for(const C of w)if(C.type===0)v+=C.value;else if(C.type===1){const{value:E,repeatable:P,optional:k}=C,R=E in p?p[E]:"";if(pi(R)&&!P)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const B=pi(R)?R.join("/"):R;if(!B)if(k)w.length<2&&(v.endsWith("/")?v=v.slice(0,-1):y=!0);else throw new Error(`Missing required param "${E}"`);v+=B}}return v||"/"}return{re:u,score:o,keys:c,parse:f,stringify:m}}function nT(e,n){let i=0;for(;i<e.length&&i<n.length;){const o=n[i]-e[i];if(o)return o;i++}return e.length<n.length?e.length===1&&e[0]===40+40?-1:1:e.length>n.length?n.length===1&&n[0]===40+40?1:-1:0}function rT(e,n){let i=0;const o=e.score,a=n.score;for(;i<o.length&&i<a.length;){const c=nT(o[i],a[i]);if(c)return c;i++}if(Math.abs(a.length-o.length)===1){if(cm(o))return 1;if(cm(a))return-1}return a.length-o.length}function cm(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const oT={type:0,value:""},aT=/[a-zA-Z0-9_]/;function lT(e){if(!e)return[[]];if(e==="/")return[[oT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(C){throw new Error(`ERR (${i})/"${p}": ${C}`)}let i=0,o=i;const a=[];let c;function u(){c&&a.push(c),c=[]}let f=0,m,p="",v="";function y(){p&&(i===0?c.push({type:0,value:p}):i===1||i===2||i===3?(c.length>1&&(m==="*"||m==="+")&&n(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:p,regexp:v,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):n("Invalid state to consume buffer"),p="")}function w(){p+=m}for(;f<e.length;){if(m=e[f++],m==="\\"&&i!==2){o=i,i=4;continue}switch(i){case 0:m==="/"?(p&&y(),u()):m===":"?(y(),i=1):w();break;case 4:w(),i=o;break;case 1:m==="("?i=2:aT.test(m)?w():(y(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&f--);break;case 2:m===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+m:i=3:v+=m;break;case 3:y(),i=0,m!=="*"&&m!=="?"&&m!=="+"&&f--,v="";break;default:n("Unknown state");break}}return i===2&&n(`Unfinished custom RegExp for param "${p}"`),y(),u(),a}function cT(e,n,i){const o=iT(lT(e.path),i),a=_e(o,{record:e,parent:n,children:[],alias:[]});return n&&!a.record.aliasOf==!n.record.aliasOf&&n.children.push(a),a}function uT(e,n){const i=[],o=new Map;n=dm({strict:!1,end:!0,sensitive:!1},n);function a(v){return o.get(v)}function c(v,y,w){const C=!w,E=hT(v);E.aliasOf=w&&w.record;const P=dm(n,v),k=[E];if("alias"in v){const O=typeof v.alias=="string"?[v.alias]:v.alias;for(const W of O)k.push(_e({},E,{components:w?w.record.components:E.components,path:W,aliasOf:w?w.record:E}))}let R,B;for(const O of k){const{path:W}=O;if(y&&W[0]!=="/"){const G=y.record.path,X=G[G.length-1]==="/"?"":"/";O.path=y.record.path+(W&&X+W)}if(R=cT(O,y,P),w?w.alias.push(R):(B=B||R,B!==R&&B.alias.push(R),C&&v.name&&!hm(R)&&u(v.name)),E.children){const G=E.children;for(let X=0;X<G.length;X++)c(G[X],R,w&&w.children[X])}w=w||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&m(R)}return B?()=>{u(B)}:ko}function u(v){if(Av(v)){const y=o.get(v);y&&(o.delete(v),i.splice(i.indexOf(y),1),y.children.forEach(u),y.alias.forEach(u))}else{const y=i.indexOf(v);y>-1&&(i.splice(y,1),v.record.name&&o.delete(v.record.name),v.children.forEach(u),v.alias.forEach(u))}}function f(){return i}function m(v){let y=0;for(;y<i.length&&rT(v,i[y])>=0&&(v.record.path!==i[y].record.path||!Pv(v,i[y]));)y++;i.splice(y,0,v),v.record.name&&!hm(v)&&o.set(v.record.name,v)}function p(v,y){let w,C={},E,P;if("name"in v&&v.name){if(w=o.get(v.name),!w)throw Nr(1,{location:v});P=w.record.name,C=_e(um(y.params,w.keys.filter(B=>!B.optional).map(B=>B.name)),v.params&&um(v.params,w.keys.map(B=>B.name))),E=w.stringify(C)}else if("path"in v)E=v.path,w=i.find(B=>B.re.test(E)),w&&(C=w.parse(E),P=w.record.name);else{if(w=y.name?o.get(y.name):i.find(B=>B.re.test(y.path)),!w)throw Nr(1,{location:v,currentLocation:y});P=w.record.name,C=_e({},y.params,v.params),E=w.stringify(C)}const k=[];let R=w;for(;R;)k.unshift(R.record),R=R.parent;return{name:P,path:E,params:C,matched:k,meta:fT(k)}}return e.forEach(v=>c(v)),{addRoute:c,resolve:p,removeRoute:u,getRoutes:f,getRecordMatcher:a}}function um(e,n){const i={};for(const o of n)o in e&&(i[o]=e[o]);return i}function hT(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:dT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function dT(e){const n={},i=e.props||!1;if("component"in e)n.default=i;else for(const o in e.components)n[o]=typeof i=="object"?i[o]:i;return n}function hm(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function fT(e){return e.reduce((n,i)=>_e(n,i.meta),{})}function dm(e,n){const i={};for(const o in e)i[o]=o in n?n[o]:e[o];return i}function Pv(e,n){return n.children.some(i=>i===e||Pv(e,i))}const kv=/#/g,gT=/&/g,mT=/\//g,pT=/=/g,_T=/\?/g,Iv=/\+/g,vT=/%5B/g,yT=/%5D/g,Rv=/%5E/g,bT=/%60/g,Mv=/%7B/g,wT=/%7C/g,Bv=/%7D/g,xT=/%20/g;function zh(e){return encodeURI(""+e).replace(wT,"|").replace(vT,"[").replace(yT,"]")}function CT(e){return zh(e).replace(Mv,"{").replace(Bv,"}").replace(Rv,"^")}function Vu(e){return zh(e).replace(Iv,"%2B").replace(xT,"+").replace(kv,"%23").replace(gT,"%26").replace(bT,"`").replace(Mv,"{").replace(Bv,"}").replace(Rv,"^")}function ST(e){return Vu(e).replace(pT,"%3D")}function ET(e){return zh(e).replace(kv,"%23").replace(_T,"%3F")}function AT(e){return e==null?"":ET(e).replace(mT,"%2F")}function dl(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function TT(e){const n={};if(e===""||e==="?")return n;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<o.length;++a){const c=o[a].replace(Iv," "),u=c.indexOf("="),f=dl(u<0?c:c.slice(0,u)),m=u<0?null:dl(c.slice(u+1));if(f in n){let p=n[f];pi(p)||(p=n[f]=[p]),p.push(m)}else n[f]=m}return n}function fm(e){let n="";for(let i in e){const o=e[i];if(i=ST(i),o==null){o!==void 0&&(n+=(n.length?"&":"")+i);continue}(pi(o)?o.map(c=>c&&Vu(c)):[o&&Vu(o)]).forEach(c=>{c!==void 0&&(n+=(n.length?"&":"")+i,c!=null&&(n+="="+c))})}return n}function PT(e){const n={};for(const i in e){const o=e[i];o!==void 0&&(n[i]=pi(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return n}const kT=Symbol(""),gm=Symbol(""),Nh=Symbol(""),Fv=Symbol(""),zu=Symbol("");function vo(){let e=[];function n(o){return e.push(o),()=>{const a=e.indexOf(o);a>-1&&e.splice(a,1)}}function i(){e=[]}return{add:n,list:()=>e.slice(),reset:i}}function wn(e,n,i,o,a){const c=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((u,f)=>{const m=y=>{y===!1?f(Nr(4,{from:i,to:n})):y instanceof Error?f(y):tT(y)?f(Nr(2,{from:n,to:y})):(c&&o.enterCallbacks[a]===c&&typeof y=="function"&&c.push(y),u())},p=e.call(o&&o.instances[a],n,i,m);let v=Promise.resolve(p);e.length<3&&(v=v.then(m)),v.catch(y=>f(y))})}function jc(e,n,i,o){const a=[];for(const c of e)for(const u in c.components){let f=c.components[u];if(!(n!=="beforeRouteEnter"&&!c.instances[u]))if(IT(f)){const p=(f.__vccOpts||f)[n];p&&a.push(wn(p,i,o,c,u))}else{let m=f();a.push(()=>m.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${c.path}"`));const v=LA(p)?p.default:p;c.components[u]=v;const w=(v.__vccOpts||v)[n];return w&&wn(w,i,o,c,u)()}))}}return a}function IT(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function mm(e){const n=pe(Nh),i=pe(Fv),o=L(()=>n.resolve(xt(e.to))),a=L(()=>{const{matched:m}=o.value,{length:p}=m,v=m[p-1],y=i.matched;if(!v||!y.length)return-1;const w=y.findIndex(zr.bind(null,v));if(w>-1)return w;const C=pm(m[p-2]);return p>1&&pm(v)===C&&y[y.length-1].path!==C?y.findIndex(zr.bind(null,m[p-2])):w}),c=L(()=>a.value>-1&&FT(i.params,o.value.params)),u=L(()=>a.value>-1&&a.value===i.matched.length-1&&Sv(i.params,o.value.params));function f(m={}){return BT(m)?n[xt(e.replace)?"replace":"push"](xt(e.to)).catch(ko):Promise.resolve()}return{route:o,href:L(()=>o.value.href),isActive:c,isExactActive:u,navigate:f}}const RT=ii({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mm,setup(e,{slots:n}){const i=ls(mm(e)),{options:o}=pe(Nh),a=L(()=>({[_m(e.activeClass,o.linkActiveClass,"router-link-active")]:i.isActive,[_m(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const c=n.default&&n.default(i);return e.custom?c:zi("a",{"aria-current":i.isExactActive?e.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:a.value},c)}}}),MT=RT;function BT(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function FT(e,n){for(const i in n){const o=n[i],a=e[i];if(typeof o=="string"){if(o!==a)return!1}else if(!pi(a)||a.length!==o.length||o.some((c,u)=>c!==a[u]))return!1}return!0}function pm(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _m=(e,n,i)=>e??n??i,DT=ii({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:i}){const o=pe(zu),a=L(()=>e.route||o.value),c=pe(gm,0),u=L(()=>{let p=xt(c);const{matched:v}=a.value;let y;for(;(y=v[p])&&!y.components;)p++;return p}),f=L(()=>a.value.matched[u.value]);ts(gm,L(()=>u.value+1)),ts(kT,f),ts(zu,a);const m=Ft();return jt(()=>[m.value,f.value,e.name],([p,v,y],[w,C,E])=>{v&&(v.instances[y]=p,C&&C!==v&&p&&p===w&&(v.leaveGuards.size||(v.leaveGuards=C.leaveGuards),v.updateGuards.size||(v.updateGuards=C.updateGuards))),p&&v&&(!C||!zr(v,C)||!w)&&(v.enterCallbacks[y]||[]).forEach(P=>P(p))},{flush:"post"}),()=>{const p=a.value,v=e.name,y=f.value,w=y&&y.components[v];if(!w)return vm(i.default,{Component:w,route:p});const C=y.props[v],E=C?C===!0?p.params:typeof C=="function"?C(p):C:null,k=zi(w,_e({},E,n,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(y.instances[v]=null)},ref:m}));return vm(i.default,{Component:k,route:p})||k}}});function vm(e,n){if(!e)return null;const i=e(n);return i.length===1?i[0]:i}const LT=DT;function OT(e){const n=uT(e.routes,e),i=e.parseQuery||TT,o=e.stringifyQuery||fm,a=e.history,c=vo(),u=vo(),f=vo(),m=Zt(pn);let p=pn;Ar&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=Wc.bind(null,et=>""+et),y=Wc.bind(null,AT),w=Wc.bind(null,dl);function C(et,Tt){let vt,Bt;return Av(et)?(vt=n.getRecordMatcher(et),Bt=Tt):Bt=et,n.addRoute(Bt,vt)}function E(et){const Tt=n.getRecordMatcher(et);Tt&&n.removeRoute(Tt)}function P(){return n.getRoutes().map(et=>et.record)}function k(et){return!!n.getRecordMatcher(et)}function R(et,Tt){if(Tt=_e({},Tt||m.value),typeof et=="string"){const D=Gc(i,et,Tt.path),nt=n.resolve({path:D.path},Tt),at=a.createHref(D.fullPath);return _e(D,nt,{params:w(nt.params),hash:dl(D.hash),redirectedFrom:void 0,href:at})}let vt;if("path"in et)vt=_e({},et,{path:Gc(i,et.path,Tt.path).path});else{const D=_e({},et.params);for(const nt in D)D[nt]==null&&delete D[nt];vt=_e({},et,{params:y(D)}),Tt.params=y(Tt.params)}const Bt=n.resolve(vt,Tt),oe=et.hash||"";Bt.params=v(w(Bt.params));const M=zA(o,_e({},et,{hash:CT(oe),path:Bt.path})),F=a.createHref(M);return _e({fullPath:M,hash:oe,query:o===fm?PT(et.query):et.query||{}},Bt,{redirectedFrom:void 0,href:F})}function B(et){return typeof et=="string"?Gc(i,et,m.value.path):_e({},et)}function O(et,Tt){if(p!==et)return Nr(8,{from:Tt,to:et})}function W(et){return st(et)}function G(et){return W(_e(B(et),{replace:!0}))}function X(et){const Tt=et.matched[et.matched.length-1];if(Tt&&Tt.redirect){const{redirect:vt}=Tt;let Bt=typeof vt=="function"?vt(et):vt;return typeof Bt=="string"&&(Bt=Bt.includes("?")||Bt.includes("#")?Bt=B(Bt):{path:Bt},Bt.params={}),_e({query:et.query,hash:et.hash,params:"path"in Bt?{}:et.params},Bt)}}function st(et,Tt){const vt=p=R(et),Bt=m.value,oe=et.state,M=et.force,F=et.replace===!0,D=X(vt);if(D)return st(_e(B(D),{state:typeof D=="object"?_e({},oe,D.state):oe,force:M,replace:F}),Tt||vt);const nt=vt;nt.redirectedFrom=Tt;let at;return!M&&NA(o,Bt,vt)&&(at=Nr(16,{to:nt,from:Bt}),Jt(Bt,Bt,!0,!1)),(at?Promise.resolve(at):Y(nt,Bt)).catch(ct=>Xi(ct)?Xi(ct,2)?ct:te(ct):ut(ct,nt,Bt)).then(ct=>{if(ct){if(Xi(ct,2))return st(_e({replace:F},B(ct.to),{state:typeof ct.to=="object"?_e({},oe,ct.to.state):oe,force:M}),Tt||nt)}else ct=U(nt,Bt,!0,F,oe);return it(nt,Bt,ct),ct})}function N(et,Tt){const vt=O(et,Tt);return vt?Promise.reject(vt):Promise.resolve()}function $(et){const Tt=qe.values().next().value;return Tt&&typeof Tt.runWithContext=="function"?Tt.runWithContext(et):et()}function Y(et,Tt){let vt;const[Bt,oe,M]=VT(et,Tt);vt=jc(Bt.reverse(),"beforeRouteLeave",et,Tt);for(const D of Bt)D.leaveGuards.forEach(nt=>{vt.push(wn(nt,et,Tt))});const F=N.bind(null,et,Tt);return vt.push(F),_t(vt).then(()=>{vt=[];for(const D of c.list())vt.push(wn(D,et,Tt));return vt.push(F),_t(vt)}).then(()=>{vt=jc(oe,"beforeRouteUpdate",et,Tt);for(const D of oe)D.updateGuards.forEach(nt=>{vt.push(wn(nt,et,Tt))});return vt.push(F),_t(vt)}).then(()=>{vt=[];for(const D of M)if(D.beforeEnter)if(pi(D.beforeEnter))for(const nt of D.beforeEnter)vt.push(wn(nt,et,Tt));else vt.push(wn(D.beforeEnter,et,Tt));return vt.push(F),_t(vt)}).then(()=>(et.matched.forEach(D=>D.enterCallbacks={}),vt=jc(M,"beforeRouteEnter",et,Tt),vt.push(F),_t(vt))).then(()=>{vt=[];for(const D of u.list())vt.push(wn(D,et,Tt));return vt.push(F),_t(vt)}).catch(D=>Xi(D,8)?D:Promise.reject(D))}function it(et,Tt,vt){f.list().forEach(Bt=>$(()=>Bt(et,Tt,vt)))}function U(et,Tt,vt,Bt,oe){const M=O(et,Tt);if(M)return M;const F=Tt===pn,D=Ar?history.state:{};vt&&(Bt||F?a.replace(et.fullPath,_e({scroll:F&&D&&D.scroll},oe)):a.push(et.fullPath,oe)),m.value=et,Jt(et,Tt,vt,F),te()}let q;function Q(){q||(q=a.listen((et,Tt,vt)=>{if(!ss.listening)return;const Bt=R(et),oe=X(Bt);if(oe){st(_e(oe,{replace:!0}),Bt).catch(ko);return}p=Bt;const M=m.value;Ar&&YA(rm(M.fullPath,vt.delta),Wl()),Y(Bt,M).catch(F=>Xi(F,12)?F:Xi(F,2)?(st(F.to,Bt).then(D=>{Xi(D,20)&&!vt.delta&&vt.type===Go.pop&&a.go(-1,!1)}).catch(ko),Promise.reject()):(vt.delta&&a.go(-vt.delta,!1),ut(F,Bt,M))).then(F=>{F=F||U(Bt,M,!1),F&&(vt.delta&&!Xi(F,8)?a.go(-vt.delta,!1):vt.type===Go.pop&&Xi(F,20)&&a.go(-1,!1)),it(Bt,M,F)}).catch(ko)}))}let rt=vo(),dt=vo(),At;function ut(et,Tt,vt){te(et);const Bt=dt.list();return Bt.length?Bt.forEach(oe=>oe(et,Tt,vt)):console.error(et),Promise.reject(et)}function Rt(){return At&&m.value!==pn?Promise.resolve():new Promise((et,Tt)=>{rt.add([et,Tt])})}function te(et){return At||(At=!et,Q(),rt.list().forEach(([Tt,vt])=>et?vt(et):Tt()),rt.reset()),et}function Jt(et,Tt,vt,Bt){const{scrollBehavior:oe}=e;if(!Ar||!oe)return Promise.resolve();const M=!vt&&qA(rm(et.fullPath,0))||(Bt||!vt)&&history.state&&history.state.scroll||null;return ws().then(()=>oe(et,Tt,M)).then(F=>F&&XA(F)).catch(F=>ut(F,et,Tt))}const he=et=>a.go(et);let Be;const qe=new Set,ss={currentRoute:m,listening:!0,addRoute:C,removeRoute:E,hasRoute:k,getRoutes:P,resolve:R,options:e,push:W,replace:G,go:he,back:()=>he(-1),forward:()=>he(1),beforeEach:c.add,beforeResolve:u.add,afterEach:f.add,onError:dt.add,isReady:Rt,install(et){const Tt=this;et.component("RouterLink",MT),et.component("RouterView",LT),et.config.globalProperties.$router=Tt,Object.defineProperty(et.config.globalProperties,"$route",{enumerable:!0,get:()=>xt(m)}),Ar&&!Be&&m.value===pn&&(Be=!0,W(a.location).catch(oe=>{}));const vt={};for(const oe in pn)Object.defineProperty(vt,oe,{get:()=>m.value[oe],enumerable:!0});et.provide(Nh,Tt),et.provide(Fv,Om(vt)),et.provide(zu,m);const Bt=et.unmount;qe.add(et),et.unmount=function(){qe.delete(et),qe.size<1&&(p=pn,q&&q(),q=null,m.value=pn,Be=!1,At=!1),Bt()}}};function _t(et){return et.reduce((Tt,vt)=>Tt.then(()=>$(vt)),Promise.resolve())}return ss}function VT(e,n){const i=[],o=[],a=[],c=Math.max(n.matched.length,e.matched.length);for(let u=0;u<c;u++){const f=n.matched[u];f&&(e.matched.find(p=>zr(p,f))?o.push(f):i.push(f));const m=e.matched[u];m&&(n.matched.find(p=>zr(p,m))||a.push(m))}return[i,o,a]}const zT=[{path:"/",component:()=>Fu(()=>import("./Default-d59dec67.js"),[]),children:[{path:"",name:"Home",component:()=>Fu(()=>import("./Home-f1542646.js"),[])}]}],NT=OT({history:JA({}.BASE_URL),routes:zT});function UT(e){gA(),e.use(DA).use(NT)}const HT=Iw(),Uh=Tw(hA);UT(Uh);Uh.use(HT);Uh.mount("#app");export{ZE as V,H1 as _,x as a,pE as b,Ie as c,ii as d,me as o,WT as r,j as w};
